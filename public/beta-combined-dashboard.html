<!DOCTYPE html>
<html lang="fr">
<head>
    <!-- üîá INTERCEPTION CRITIQUE: DOIT √äTRE LA TOUTE PREMI√àRE CHOSE CHARG√âE -->
    <!-- Ce script DOIT s'ex√©cuter AVANT tout autre script (extensions incluses) -->
    <script>
        // ‚ö° MONKEY PATCH ULTRA-AGRESSIF - EMP√äCHE TOUTE ERREUR D'AFFICHAGE
        (function() {
            'use strict';

            // 1. Intercepter console.warn
            const originalWarn = console.warn;
            console.warn = function(...args) {
                const message = args.join(' ');
                if (message.includes('cdn.tailwindcss.com') ||
                    message.includes('should not be used in production') ||
                    message.includes('in-browser Babel transformer') ||
                    message.includes('precompile your scripts') ||
                    message.includes('Impossible de trouver le header')) {
                    return;
                }
                originalWarn.apply(console, args);
            };

            // 2. Intercepter console.error - BLOQUE AFFICHAGE ERREURS
            const originalError = console.error;
            console.error = function(...args) {
                const message = args.join(' ');
                if (message.includes('share-modal') ||
                    message.includes('chrome-extension') ||
                    message.includes('extension://') ||
                    message.includes('Cannot read properties of null') ||
                    message.includes('Uncaught TypeError')) {
                    return; // BLOQU√â
                }
                originalError.apply(console, args);
            };

            // 3. Intercepter window.onerror - CAPTURE GLOBALE
            window.onerror = function(message, source, lineno, colno, error) {
                if (!source) return true; // Erreurs sans source = ignor√©es
                const sourceStr = String(source);
                const messageStr = String(message);

                // Bloquer erreurs extensions
                if (sourceStr.includes('share-modal') ||
                    sourceStr.includes('chrome-extension') ||
                    sourceStr.includes('extension://') ||
                    messageStr.includes('Cannot read properties of null')) {
                    return true; // true = erreur g√©r√©e, ne pas afficher
                }
                return false; // false = laisser afficher
            };

            // 4. Intercepter addEventListener erreur - CAPTURE PHASE
            window.addEventListener('error', function(event) {
                if (!event.filename) {
                    event.stopImmediatePropagation();
                    event.preventDefault();
                    return true;
                }

                const filename = String(event.filename);
                const message = String(event.message || '');

                if (filename.includes('share-modal') ||
                    filename.includes('chrome-extension') ||
                    filename.includes('extension://') ||
                    message.includes('Cannot read properties of null')) {
                    event.stopImmediatePropagation();
                    event.preventDefault();
                    return true;
                }
            }, true); // true = capture phase

            // 5. Intercepter window.addEventListener pour promises non g√©r√©es
            window.addEventListener('unhandledrejection', function(event) {
                const reason = String(event.reason || '');
                const reasonMsg = event.reason ? (event.reason.message || String(event.reason)) : '';
                if (reason.includes('share-modal') ||
                    reason.includes('chrome-extension') ||
                    reason.includes('extension://') ||
                    reason.includes('Access to storage') ||
                    reason.includes('storage is not allowed') ||
                    reasonMsg.includes('Access to storage') ||
                    reasonMsg.includes('storage is not allowed')) {
                    console.warn('‚ö†Ô∏è Erreur storage/extension intercept√©e:', reasonMsg || reason);
                    event.stopImmediatePropagation();
                    event.preventDefault();
                }
            }, true);

            // 6. MONKEY PATCH CRITIQUE - querySelector et querySelectorAll
            // Si l'extension essaie de cibler un √©l√©ment qui n'existe pas
            const originalQuerySelector = Document.prototype.querySelector;
            const originalQuerySelectorAll = Document.prototype.querySelectorAll;

            Document.prototype.querySelector = function(selector) {
                try {
                    return originalQuerySelector.call(this, selector);
                } catch (e) {
                    // Si erreur de s√©lecteur, retourner null silencieusement
                    return null;
                }
            };

            Document.prototype.querySelectorAll = function(selector) {
                try {
                    return originalQuerySelectorAll.call(this, selector);
                } catch (e) {
                    // Si erreur de s√©lecteur, retourner liste vide
                    return [];
                }
            };

            // 7. PROTECTION ULTIMATE - Emp√™cher addEventListener sur null
            const originalAddEventListener = EventTarget.prototype.addEventListener;
            EventTarget.prototype.addEventListener = function(type, listener, options) {
                // Si this est null ou undefined, ne rien faire
                if (this === null || this === undefined) {
                    return;
                }
                try {
                    return originalAddEventListener.call(this, type, listener, options);
                } catch (e) {
                    // Erreur lors de l'ajout - ignorer silencieusement
                    return;
                }
            };

            // 8. Protection document.getElementById
            const originalGetElementById = Document.prototype.getElementById;
            Document.prototype.getElementById = function(id) {
                try {
                    return originalGetElementById.call(this, id);
                } catch (e) {
                    return null;
                }
            };

            // 9. Protection getElementsByClassName
            const originalGetElementsByClassName = Document.prototype.getElementsByClassName;
            Document.prototype.getElementsByClassName = function(className) {
                try {
                    return originalGetElementsByClassName.call(this, className);
                } catch (e) {
                    return [];
                }
            };
        })();
    </script>

    <!-- üíæ SAFE STORAGE WRAPPER - Protection contre blocage storage -->
    <script>
        // Cr√©er un wrapper de storage s√©curis√© avec fallback en m√©moire
        (function() {
            'use strict';

            // SAUVEGARDER les r√©f√©rences au storage NATIF avant remplacement
            const nativeLocalStorage = window.localStorage;
            const nativeSessionStorage = window.sessionStorage;

            // Exposer globalement pour usage critique (auth-guard)
            window.__nativeLocalStorage = nativeLocalStorage;
            window.__nativeSessionStorage = nativeSessionStorage;

            // V√©rifier si storage est disponible
            const storageAvailable = (type) => {
                try {
                    const storage = window[type];
                    const test = '__storage_test__';
                    storage.setItem(test, test);
                    storage.removeItem(test);
                    return true;
                } catch (e) {
                    return false;
                }
            };

            const localStorageAvailable = storageAvailable('localStorage');
            const sessionStorageAvailable = storageAvailable('sessionStorage');

            // Fallback en m√©moire si storage bloqu√©
            const memoryStorage = {};

            // Wrapper pour localStorage
            const safeLocalStorage = {
                getItem: function(key) {
                    try {
                        if (localStorageAvailable) {
                            return nativeLocalStorage.getItem(key);
                        } else {
                            return memoryStorage['local_' + key] || null;
                        }
                    } catch (e) {
                        // Pas de console.warn r√©p√©titif - retourne juste le fallback
                        return memoryStorage['local_' + key] || null;
                    }
                },
                setItem: function(key, value) {
                    try {
                        if (localStorageAvailable) {
                            nativeLocalStorage.setItem(key, value);
                        } else {
                            memoryStorage['local_' + key] = String(value);
                        }
                    } catch (e) {
                        // Pas de console.warn r√©p√©titif - stocke juste en m√©moire
                        memoryStorage['local_' + key] = String(value);
                    }
                },
                removeItem: function(key) {
                    try {
                        if (localStorageAvailable) {
                            nativeLocalStorage.removeItem(key);
                        } else {
                            delete memoryStorage['local_' + key];
                        }
                    } catch (e) {
                        // Pas de console.warn r√©p√©titif
                        delete memoryStorage['local_' + key];
                    }
                },
                clear: function() {
                    try {
                        if (localStorageAvailable) {
                            nativeLocalStorage.clear();
                        } else {
                            Object.keys(memoryStorage).forEach(k => {
                                if (k.startsWith('local_')) delete memoryStorage[k];
                            });
                        }
                    } catch (e) {
                        // Pas de console.warn r√©p√©titif
                        Object.keys(memoryStorage).forEach(k => {
                            if (k.startsWith('local_')) delete memoryStorage[k];
                        });
                    }
                }
            };

            // Wrapper pour sessionStorage
            const safeSessionStorage = {
                getItem: function(key) {
                    try {
                        if (sessionStorageAvailable) {
                            return nativeSessionStorage.getItem(key);
                        } else {
                            return memoryStorage['session_' + key] || null;
                        }
                    } catch (e) {
                        // Pas de console.warn r√©p√©titif - retourne juste le fallback
                        return memoryStorage['session_' + key] || null;
                    }
                },
                setItem: function(key, value) {
                    try {
                        if (sessionStorageAvailable) {
                            nativeSessionStorage.setItem(key, value);
                        } else {
                            memoryStorage['session_' + key] = String(value);
                        }
                    } catch (e) {
                        // Pas de console.warn r√©p√©titif - stocke juste en m√©moire
                        memoryStorage['session_' + key] = String(value);
                    }
                },
                removeItem: function(key) {
                    try {
                        if (sessionStorageAvailable) {
                            nativeSessionStorage.removeItem(key);
                        } else {
                            delete memoryStorage['session_' + key];
                        }
                    } catch (e) {
                        // Pas de console.warn r√©p√©titif
                        delete memoryStorage['session_' + key];
                    }
                },
                clear: function() {
                    try {
                        if (sessionStorageAvailable) {
                            nativeSessionStorage.clear();
                        } else {
                            Object.keys(memoryStorage).forEach(k => {
                                if (k.startsWith('session_')) delete memoryStorage[k];
                            });
                        }
                    } catch (e) {
                        // Pas de console.warn r√©p√©titif
                        Object.keys(memoryStorage).forEach(k => {
                            if (k.startsWith('session_')) delete memoryStorage[k];
                        });
                    }
                }
            };

            // Remplacer les objets natifs localStorage et sessionStorage
            // par nos wrappers s√©curis√©s
            try {
                Object.defineProperty(window, 'localStorage', {
                    value: safeLocalStorage,
                    writable: false,
                    configurable: true
                });
            } catch (e) {
                // Si impossible de red√©finir, cr√©er un alias
                window.safeLocalStorage = safeLocalStorage;
                console.warn('‚ö†Ô∏è Impossible de remplacer localStorage, utiliser safeLocalStorage');
            }

            try {
                Object.defineProperty(window, 'sessionStorage', {
                    value: safeSessionStorage,
                    writable: false,
                    configurable: true
                });
            } catch (e) {
                // Si impossible de red√©finir, cr√©er un alias
                window.safeSessionStorage = safeSessionStorage;
                console.warn('‚ö†Ô∏è Impossible de remplacer sessionStorage, utiliser safeSessionStorage');
            }

            // Log du statut de storage
            console.log('üíæ Storage Status:');
            console.log('  localStorage:', localStorageAvailable ? '‚úÖ Disponible' : '‚ö†Ô∏è Bloqu√© (fallback m√©moire)');
            console.log('  sessionStorage:', sessionStorageAvailable ? '‚úÖ Disponible' : '‚ö†Ô∏è Bloqu√© (fallback m√©moire)');
        })();
    </script>

    <!-- Meta tags et ressources (APR√àS l'interception) -->
    <meta charset="UTF-8">
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover">
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <title>GOB Apps - Dashboard Financier Beta ‚Ä¢ Propuls√© par JSL AI</title>
    <!-- Version: 2.1.0 - JLab V2 with Synchronized Widgets - 2025-10-25 -->
    <!-- Favicon JSLAI -->
    <link rel="icon" type="image/png" href="jlab.png">
    <link rel="apple-touch-icon" href="jlab.png">
    <!-- Cache bust: 2025-10-15 21:00 -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800;900&family=Roboto:wght@300;400;500;700;900&family=Montserrat:wght@800;900&display=swap" rel="stylesheet">
    <!-- Avenir Pro 85 Heavy alternative: Montserrat Heavy (900) ou Avenir Next si disponible -->
    <style>
        @font-face {
            font-family: 'Avenir Pro 85 Heavy';
            src: local('Avenir Next Heavy'), local('Avenir-Heavy'), local('AvenirNext-Heavy');
            font-weight: 900;
            font-style: normal;
            font-display: swap;
        }
        .avenir-heavy {
            font-family: 'Avenir Pro 85 Heavy', 'Avenir Next', 'Avenir', 'Montserrat', 'Inter', sans-serif;
            font-weight: 900;
            letter-spacing: -0.02em;
        }
    </style>

    <!-- React, ReactDOM, Babel - Vendored libraries (see public/vendor/README.md) -->
    <script crossorigin src="/vendor/react.production.min.js"></script>
    <script crossorigin src="/vendor/react-dom.production.min.js"></script>
    <script src="/vendor/babel.min.js"></script>

    <!-- Fallback CDN si fichiers vendoris√©s √©chouent -->
    <script>
        // V√©rifier React
        if (typeof React === 'undefined') {
            console.warn('‚ö†Ô∏è Fichier vendoris√© React √©chou√©, chargement depuis CDN...');
            document.write('<script src="https://cdn.jsdelivr.net/npm/react@18.2.0/umd/react.production.min.js"><\/script>');
        }
        // V√©rifier ReactDOM
        if (typeof ReactDOM === 'undefined') {
            console.warn('‚ö†Ô∏è Fichier vendoris√© ReactDOM √©chou√©, chargement depuis CDN...');
            document.write('<script src="https://cdn.jsdelivr.net/npm/react-dom@18.2.0/umd/react-dom.production.min.js"><\/script>');
        }
        // V√©rifier Babel
        if (typeof Babel === 'undefined') {
            console.warn('‚ö†Ô∏è Fichier vendoris√© Babel √©chou√©, chargement depuis CDN...');
            document.write('<script src="https://cdn.jsdelivr.net/npm/@babel/standalone@7.23.6/babel.min.js"><\/script>');
        }
    </script>

    <!-- TradingView Lightweight Charts - CDN jsDelivr -->
    <script src="https://cdn.jsdelivr.net/npm/lightweight-charts@4.2.0/dist/lightweight-charts.standalone.production.js"></script>
    <!-- Note: CDN Tailwind utilis√© intentionnellement pour ce fichier standalone -->
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <!-- Recharts pour IntelliStocks -->
    <script src="https://cdn.jsdelivr.net/npm/recharts@2.10.3/dist/Recharts.js"></script>
    <!-- Iconoir - Beautiful open source icons -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/iconoir-icons/iconoir@main/css/iconoir.css">
    
    <!-- Script pour exposer les biblioth√®ques globalement -->
    <script>
        // Exposer Recharts globalement
        window.Recharts = window.Recharts || {};

        // V√©rifier le chargement des biblioth√®ques
        window.addEventListener('load', function() {
            console.log('üìö V√©rification des biblioth√®ques:');
            console.log('Recharts disponible:', typeof window.Recharts !== 'undefined');

            // V√©rifier si le stylesheet Iconoir est charg√©
            const iconoirLink = document.querySelector('link[href*="iconoir"]');
            const iconoirLoaded = iconoirLink !== null;
            console.log('Iconoir CSS charg√©:', iconoirLoaded);

            // V√©rifier les ic√¥nes apr√®s un court d√©lai pour laisser React render
            setTimeout(() => {
                const iconoirElements = document.querySelectorAll('[class*="iconoir-"]').length;
                console.log('√âl√©ments Iconoir rendus:', iconoirElements);
                if (iconoirElements > 0) {
                    console.log('‚úÖ Iconoir op√©rationnel');
                } else if (iconoirLoaded) {
                    console.log('‚ö†Ô∏è CSS Iconoir charg√© mais aucun √©l√©ment rendu encore');
                }
            }, 1000);

            console.log('‚úÖ Dashboard GOB charg√© en mode production');
        });
    </script>
    
    <!-- Styles Emma -->
    <link rel="stylesheet" href="emma-styles.css">
    <style>
        * {
            font-family: 'Inter', 'Roboto', system-ui, -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
        }
        .tab-content { display: none; }
        .tab-content.active { display: block; }
        .tab-button.active { 
            background: linear-gradient(135deg, #4ade80 0%, #22c55e 100%);
            color: white;
        }
        .pulse-animation {
            animation: pulse 3s infinite;
        }
        @keyframes pulse {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.5; }
        }

        /* üé® Animations pour la bottom bar avec ic√¥nes Iconoir */
        @keyframes slide-down {
            from {
                opacity: 0;
                transform: translateX(-50%) translateY(-10px);
            }
            to {
                opacity: 1;
                transform: translateX(-50%) translateY(0);
            }
        }

        @keyframes icon-pop {
            0% {
                transform: scale(1);
            }
            50% {
                transform: scale(1.2);
            }
            100% {
                transform: scale(1.1);
            }
        }

        .animate-slide-down {
            animation: slide-down 0.3s ease-out;
        }

        /* Effet de glow sur l'ic√¥ne active */
        nav button:has(i.scale-110) i {
            filter: drop-shadow(0 0 8px currentColor);
        }

        /* Styles pour garantir l'affichage des ic√¥nes Iconoir sur mobile */
        .iconoir-chart-line,
        .iconoir-trending-up,
        .iconoir-chat-bubble,
        .iconoir-settings,
        .iconoir-star,
        .iconoir-search,
        .iconoir-graph-up,
        .iconoir-antenna-signal,
        .iconoir-calendar,
        .iconoir-flask,
        .iconoir-globe,
        .iconoir-log-out,
        .iconoir-menu,
        .iconoir-briefcase {
            display: inline-block !important;
            font-style: normal !important;
            font-variant: normal !important;
            text-rendering: auto !important;
            line-height: 1 !important;
            -webkit-font-smoothing: antialiased !important;
            -moz-osx-font-smoothing: grayscale !important;
        }

        /* Transition fluide pour toutes les ic√¥nes */
        nav button i {
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
        }

        /* Effet hover sur les boutons de navigation */
        nav button:hover:not(:active) i {
            transform: translateY(-2px);
        }

        /* Effet de press */
        nav button:active i {
            transform: scale(0.9);
        }

        .stock-card {
            transition: all 0.3s ease;
        }
        .stock-card:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 25px rgba(0,0,0,0.2);
        }

        /* üíé VAGUES 3+4 - Finance Pro UI Effects */

        /* üå´Ô∏è Glassmorphism Effect */
        .glass-card {
            background: rgba(255, 255, 255, 0.05);
            backdrop-filter: blur(10px);
            -webkit-backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.1);
            box-shadow: 0 8px 32px 0 rgba(0, 0, 0, 0.37);
        }

        .glass-card-light {
            background: rgba(255, 255, 255, 0.7);
            backdrop-filter: blur(10px);
            -webkit-backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.18);
            box-shadow: 0 8px 32px 0 rgba(31, 38, 135, 0.1);
        }

        /* ‚¨ÜÔ∏è Hover Lift Effect (-4px translateY) */
        .hover-lift {
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
        }

        .hover-lift:hover {
            transform: translateY(-4px);
            box-shadow: 0 12px 40px rgba(0, 0, 0, 0.25);
        }

        /* ‚ú® Shine Effect (horizontal sweep) */
        .shine-effect {
            position: relative;
            overflow: hidden;
        }

        .shine-effect::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(
                90deg,
                transparent,
                rgba(255, 255, 255, 0.2),
                transparent
            );
            transition: left 0.5s ease;
        }

        .shine-effect:hover::before {
            left: 100%;
        }

        /* üåü Glow Animation for Important Metrics */
        .glow-pulse {
            animation: glow-pulse 2s ease-in-out infinite;
        }

        @keyframes glow-pulse {
            0%, 100% {
                box-shadow: 0 0 5px rgba(74, 222, 128, 0.5),
                            0 0 10px rgba(74, 222, 128, 0.3),
                            0 0 15px rgba(74, 222, 128, 0.2);
            }
            50% {
                box-shadow: 0 0 10px rgba(74, 222, 128, 0.8),
                            0 0 20px rgba(74, 222, 128, 0.6),
                            0 0 30px rgba(74, 222, 128, 0.4);
            }
        }

        .glow-pulse-red {
            animation: glow-pulse-red 2s ease-in-out infinite;
        }

        @keyframes glow-pulse-red {
            0%, 100% {
                box-shadow: 0 0 5px rgba(239, 68, 68, 0.5),
                            0 0 10px rgba(239, 68, 68, 0.3),
                            0 0 15px rgba(239, 68, 68, 0.2);
            }
            50% {
                box-shadow: 0 0 10px rgba(239, 68, 68, 0.8),
                            0 0 20px rgba(239, 68, 68, 0.6),
                            0 0 30px rgba(239, 68, 68, 0.4);
            }
        }

        .glow-pulse-blue {
            animation: glow-pulse-blue 2s ease-in-out infinite;
        }

        @keyframes glow-pulse-blue {
            0%, 100% {
                box-shadow: 0 0 5px rgba(59, 130, 246, 0.5),
                            0 0 10px rgba(59, 130, 246, 0.3),
                            0 0 15px rgba(59, 130, 246, 0.2);
            }
            50% {
                box-shadow: 0 0 10px rgba(59, 130, 246, 0.8),
                            0 0 20px rgba(59, 130, 246, 0.6),
                            0 0 30px rgba(59, 130, 246, 0.4);
            }
        }

        /* üí´ Shimmer Effect for Loading States */
        .shimmer {
            background: linear-gradient(
                90deg,
                rgba(255, 255, 255, 0.05) 0%,
                rgba(255, 255, 255, 0.1) 50%,
                rgba(255, 255, 255, 0.05) 100%
            );
            background-size: 200% 100%;
            animation: shimmer 1.5s infinite;
        }

        @keyframes shimmer {
            0% {
                background-position: -200% 0;
            }
            100% {
                background-position: 200% 0;
            }
        }

        /* üîí Pr√©vention du scroll horizontal sur tous les appareils */
        html, body {
            overflow-x: hidden;
            max-width: 100%;
            position: relative;
        }

        html {
            width: 100%;
        }

        body {
            width: 100%;
            margin: 0;
            padding: 0;
        }

        /* Emp√™cher tout d√©bordement des √©l√©ments enfants */
        #root {
            overflow-x: hidden;
            max-width: 100%;
        }

        /* üì± MOBILE - COMPACT VIEW for Global Overview */
        @media (max-width: 768px) {
            /* Compact global scaling for dashboard view */
            html {
                font-size: 55%;
                overflow-x: hidden;
                max-width: 100vw;
            }
            body {
                padding: 6px;
                overflow-x: hidden;
                max-width: 100vw;
                width: 100%;
            }

            /* Compact header */
            header { padding: 10px !important; }
            header img { width: 36px !important; height: 36px !important; }
            header h1 { font-size: 1.3rem !important; }
            header p { font-size: 0.65rem !important; }

            /* Ticker banner compact */
            .ticker-content > div {
                padding: 6px 10px !important;
                font-size: 0.65rem !important;
            }

            /* Navigation tabs - horizontal scroll */
            nav {
                overflow-x: auto !important;
                -webkit-overflow-scrolling: touch !important;
                scrollbar-width: none !important;
                padding: 6px !important;
            }

            nav::-webkit-scrollbar { display: none; }

            nav button {
                flex-shrink: 0 !important;
                white-space: nowrap !important;
                padding: 10px 14px !important;
                font-size: 0.75rem !important;
            }

            /* Tables: horizontal scroll */
            table {
                display: block !important;
                overflow-x: auto !important;
                -webkit-overflow-scrolling: touch !important;
                white-space: nowrap !important;
                font-size: 0.7rem !important;
            }

            /* Buttons slightly larger for touch */
            button, .btn, a[class*="btn"] {
                min-height: 36px !important;
                padding: 8px 12px !important;
            }

            /* Input fields prevent iOS zoom */
            input, textarea, select {
                font-size: 16px !important; /* Prevent zoom on focus */
                padding: 8px !important;
                min-height: 36px !important;
            }

            /* Compact card spacing */
            .space-y-6 > * + * { margin-top: 12px !important; }
            .space-y-4 > * + * { margin-top: 8px !important; }
            .space-y-2 > * + * { margin-top: 4px !important; }

            .p-6 { padding: 12px !important; }
            .p-4 { padding: 8px !important; }
            .p-3 { padding: 6px !important; }
            .p-2 { padding: 4px !important; }

            /* Gap reduction */
            .gap-6 { gap: 12px !important; }
            .gap-4 { gap: 8px !important; }
            .gap-2 { gap: 4px !important; }

            /* Grid stays but more compact */
            .grid {
                gap: 8px !important;
            }

            /* Charts and images responsive */
            img, canvas, svg {
                max-width: 100% !important;
                height: auto !important;
            }
        }
        .seeking-alpha-card {
            background: linear-gradient(135deg, #1f1f1f 0%, #2d2d2d 100%);
        }
        .stocks-news-card {
            background: linear-gradient(135deg, #059669 0%, #10b981 100%);
        }
        .line-clamp-2 {
            display: -webkit-box;
            -webkit-line-clamp: 2;
            line-clamp: 2;
            -webkit-box-orient: vertical;
        }
        
        /* Scrollbar personnalis√©e */
        .scrollbar-thin {
            scrollbar-width: thin;
        }
        
        .scrollbar-thin::-webkit-scrollbar {
            width: 6px;
            height: 6px;
        }
        
        .scrollbar-thin::-webkit-scrollbar-track {
            background: #f1f5f9;
            border-radius: 3px;
        }
        
        .scrollbar-thin::-webkit-scrollbar-thumb {
            background: #94a3b8;
            border-radius: 3px;
        }
        
        .scrollbar-thin::-webkit-scrollbar-thumb:hover {
            background: #64748b;
        }
        
        /* Dark mode scrollbar */
        .dark .scrollbar-thin::-webkit-scrollbar-track {
            background: #1e293b;
        }
        
        .dark .scrollbar-thin::-webkit-scrollbar-thumb {
            background: #475569;
        }
        
        .dark .scrollbar-thin::-webkit-scrollbar-thumb:hover {
            background: #64748b;
        }
        .line-clamp-3 {
            display: -webkit-box;
            -webkit-line-clamp: 3;
            line-clamp: 3;
            -webkit-box-orient: vertical;
            overflow: hidden;
        }
        .news-card {
            transition: all 0.3s ease;
        }
        .news-card:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 25px rgba(0,0,0,0.3);
        }
        /* Effets visuels - ripple sur boutons */
        .btn-ripple { position: relative; overflow: hidden; }
        .ripple-circle {
            position: absolute;
            border-radius: 50%;
            pointer-events: none;
            background: rgba(59, 130, 246, 0.45); /* blue */
            transform: scale(0);
            animation: ripple 600ms ease-out;
        }
        @keyframes ripple {
            to { transform: scale(3); opacity: 0; }
        }
        /* Animation intro Emma */
        @keyframes emma-intro-fade {
            from { opacity: 0; }
            to { opacity: 1; }
        }
        @keyframes emma-zoom-in {
            0% { transform: scale(0.85); opacity: 0; }
            100% { transform: scale(1); opacity: 1; }
        }
        .emma-intro-overlay { animation: emma-intro-fade 300ms ease-out; }
        .emma-intro-image { animation: emma-zoom-in 800ms ease-out; }
    </style>

    <!-- üîê Auth Guard - Protection du Dashboard -->
    <script src="/js/auth-guard.js"></script>

    <!-- üö® SCRIPT DE GARDE CRITIQUE - S'ex√©cute AVANT Babel -->
    <script>
        (function() {
            'use strict';

            console.log('üö® [GUARD] Script de garde activ√©...');

            // Attendre que le DOM soit pr√™t
            function checkDependencies() {
                console.log('üîç [GUARD] V√©rification des d√©pendances...');

                const rootElement = document.getElementById('root');
                if (!rootElement) {
                    console.error('‚ùå [GUARD] Element #root introuvable !');
                    return;
                }

                // V√©rifier React
                if (typeof React === 'undefined') {
                    console.error('‚ùå [GUARD] React non charg√© !');
                    rootElement.innerHTML = `
                        <div style="min-height: 100vh; display: flex; align-items: center; justify-content: center; background: #0a0a0a; color: white; font-family: Inter, sans-serif; padding: 20px;">
                            <div style="max-width: 600px; text-align: center;">
                                <h1 style="color: #ef4444; font-size: 2rem; margin-bottom: 20px;">‚ö†Ô∏è Erreur de Chargement</h1>
                                <p style="color: #9ca3af; margin-bottom: 10px;">React n'a pas pu √™tre charg√© depuis le CDN.</p>
                                <p style="color: #6b7280; margin-bottom: 20px;">Cela peut √™tre caus√© par :</p>
                                <ul style="text-align: left; color: #6b7280; margin-bottom: 30px; list-style: inside;">
                                    <li>Probl√®me de connexion internet</li>
                                    <li>CDN unpkg.com inaccessible</li>
                                    <li>Bloqueur de contenu/publicit√©s</li>
                                    <li>Extension de navigateur qui bloque les scripts</li>
                                </ul>
                                <button onclick="location.reload()" style="background: #3b82f6; color: white; padding: 12px 24px; border: none; border-radius: 8px; cursor: pointer; font-weight: 600; font-size: 16px; margin-right: 10px;">
                                    üîÑ Rafra√Æchir
                                </button>
                                <button onclick="window.open('https://unpkg.com/react@18/umd/react.production.min.js', '_blank')" style="background: #10b981; color: white; padding: 12px 24px; border: none; border-radius: 8px; cursor: pointer; font-weight: 600; font-size: 16px;">
                                    üîó Tester CDN
                                </button>
                            </div>
                        </div>
                    `;
                    return false;
                }

                // V√©rifier ReactDOM
                if (typeof ReactDOM === 'undefined') {
                    console.error('‚ùå [GUARD] ReactDOM non charg√© !');
                    rootElement.innerHTML = `
                        <div style="min-height: 100vh; display: flex; align-items: center; justify-content: center; background: #0a0a0a; color: white; font-family: Inter, sans-serif; padding: 20px;">
                            <div style="max-width: 600px; text-align: center;">
                                <h1 style="color: #ef4444; font-size: 2rem; margin-bottom: 20px;">‚ö†Ô∏è Erreur de Chargement</h1>
                                <p style="color: #9ca3af; margin-bottom: 20px;">ReactDOM n'a pas pu √™tre charg√©.</p>
                                <button onclick="location.reload()" style="background: #3b82f6; color: white; padding: 12px 24px; border: none; border-radius: 8px; cursor: pointer; font-weight: 600; font-size: 16px;">
                                    üîÑ Rafra√Æchir
                                </button>
                            </div>
                        </div>
                    `;
                    return false;
                }

                // V√©rifier Babel
                if (typeof Babel === 'undefined') {
                    console.error('‚ùå [GUARD] Babel non charg√© !');
                    rootElement.innerHTML = `
                        <div style="min-height: 100vh; display: flex; align-items: center; justify-content: center; background: #0a0a0a; color: white; font-family: Inter, sans-serif; padding: 20px;">
                            <div style="max-width: 600px; text-align: center;">
                                <h1 style="color: #ef4444; font-size: 2rem; margin-bottom: 20px;">‚ö†Ô∏è Erreur de Chargement</h1>
                                <p style="color: #9ca3af; margin-bottom: 20px;">Babel (transpileur JSX) n'a pas pu √™tre charg√©.</p>
                                <button onclick="location.reload()" style="background: #3b82f6; color: white; padding: 12px 24px; border: none; border-radius: 8px; cursor: pointer; font-weight: 600; font-size: 16px;">
                                    üîÑ Rafra√Æchir
                                </button>
                            </div>
                        </div>
                    `;
                    return false;
                }

                console.log('‚úÖ [GUARD] Toutes les d√©pendances charg√©es !');
                console.log('  - React:', typeof React);
                console.log('  - ReactDOM:', typeof ReactDOM);
                console.log('  - Babel:', typeof Babel);

                // Afficher un loader pendant que Babel transpile
                rootElement.innerHTML = `
                    <div style="min-height: 100vh; display: flex; align-items: center; justify-content: center; background: #0a0a0a; color: white; font-family: Inter, sans-serif;">
                        <div style="text-align: center;">
                            <div style="width: 60px; height: 60px; border: 4px solid #374151; border-top-color: #10b981; border-radius: 50%; animation: spin 1s linear infinite; margin: 0 auto 20px;"></div>
                            <p style="color: #9ca3af; font-size: 18px;">Chargement du Terminal Financier...</p>
                            <p style="color: #6b7280; font-size: 14px; margin-top: 10px;">Transpilation JSX en cours...</p>
                        </div>
                    </div>
                    <style>
                        @keyframes spin {
                            to { transform: rotate(360deg); }
                        }
                    </style>
                `;

                // Timeout de s√©curit√© : si apr√®s 60 secondes le loader est toujours l√† (fichier volumineux 1.5MB)
                setTimeout(function() {
                    if (rootElement.innerHTML.includes('Transpilation JSX')) {
                        console.error('‚ùå [GUARD] Timeout : Babel n\'a pas transpir√© le code apr√®s 60s');
                        rootElement.innerHTML = `
                            <div style="min-height: 100vh; display: flex; align-items: center; justify-content: center; background: #0a0a0a; color: white; font-family: Inter, sans-serif; padding: 20px;">
                                <div style="max-width: 700px; text-align: center;">
                                    <h1 style="color: #ef4444; font-size: 2rem; margin-bottom: 20px;">‚ö†Ô∏è Erreur de Transpilation</h1>
                                    <p style="color: #9ca3af; margin-bottom: 10px;">Babel n'a pas pu transpiler le code JSX apr√®s 60 secondes.</p>
                                    <p style="color: #6b7280; margin-bottom: 20px;">Causes possibles :</p>
                                    <ul style="text-align: left; color: #6b7280; margin-bottom: 30px; list-style: inside;">
                                        <li><strong>Fichier trop volumineux</strong> (25,000+ lignes) pour Babel standalone</li>
                                        <li>Erreur de syntaxe dans le code JSX</li>
                                        <li>Extension de navigateur qui bloque l'ex√©cution</li>
                                        <li>Navigateur incompatible ou lent</li>
                                    </ul>
                                    <p style="color: #f59e0b; margin-bottom: 20px; font-weight: 600;">üí° Solution recommand√©e: Migrer vers un build process (Vite + React)</p>
                                    <button onclick="location.reload()" style="background: #3b82f6; color: white; padding: 12px 24px; border: none; border-radius: 8px; cursor: pointer; font-weight: 600; font-size: 16px; margin-right: 10px;">
                                        üîÑ Rafra√Æchir
                                    </button>
                                    <button onclick="location.href='/diagnose-dashboard.html'" style="background: #10b981; color: white; padding: 12px 24px; border: none; border-radius: 8px; cursor: pointer; font-weight: 600; font-size: 16px;">
                                        üîç Diagnostic
                                    </button>
                                </div>
                            </div>
                        `;
                    }
                }, 60000);

                return true;
            }

            // Attendre le chargement du DOM et un peu plus pour les scripts CDN
            if (document.readyState === 'loading') {
                document.addEventListener('DOMContentLoaded', function() {
                    setTimeout(checkDependencies, 100);
                });
            } else {
                setTimeout(checkDependencies, 100);
            }
        })();
    </script>
</head>
<body class="min-h-screen">
    <div id="root"></div>

    <script type="text/babel" src="/js/dashboard/app.jsx"></script>
    
    
</body>
</html>
