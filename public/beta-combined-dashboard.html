<!DOCTYPE html>
<html lang="fr">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover">
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <title>GOB Apps - Dashboard Financier Beta ‚Ä¢ Propuls√© par JSLAI</title>
    <!-- Version: 2.1.0 - JLab V2 with Synchronized Widgets - 2025-10-25 -->
    <!-- Favicon JLab -->
    <link rel="icon" type="image/png" href="/jlab.png">
    <link rel="apple-touch-icon" href="/jlab.png">
    <link rel="manifest" href="/manifest.json" />
    <meta name="theme-color" content="#1e293b" />
    <!-- Variable d'environnement VITE_GROUP_CHAT_URL pour ChatGPTGroupTab -->
    <meta name="vite-group-chat-url" content="" id="vite-group-chat-url-meta" />
    <!-- Cache bust: 2025-10-15 21:00 -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link
        href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800;900&family=Roboto:wght@300;400;500;700;900&family=Montserrat:wght@400;500;600;700;800;900&family=Georgia:wght@400;700&family=Outfit:wght@300;400;500;600;700;800&family=Plus+Jakarta+Sans:wght@300;400;500;600;700&display=swap"
        rel="stylesheet">
    <!-- Avenir Pro 85 Heavy alternative: Montserrat Heavy (900) ou Avenir Next si disponible -->
    <style>
        /* Variables CSS pour les th√®mes */
        :root {
            --theme-primary: #10b981;
            --theme-secondary: #3b82f6;
            --theme-bg: #000000;
            --theme-surface: #111827;
            --theme-surface-light: #1f2937;
            --theme-text: #ffffff;
            --theme-text-secondary: #9ca3af;
            --theme-border: #374151;
            --theme-accent: #8b5cf6;
            --theme-success: #10b981;
            --theme-danger: #ef4444;
            --theme-warning: #f59e0b;
            --theme-header-bg: linear-gradient(135deg, #111827 0%, #1f2937 100%);
            --theme-card-bg: #111827;
            --theme-card-border: 1px solid #374151;
            --theme-border-radius: 0.75rem;
            --theme-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.3);
            --theme-font-primary: Inter, sans-serif;
            --theme-font-secondary: Roboto, sans-serif;
            --theme-font-mono: monospace;
        }

        @font-face {
            font-family: 'Avenir Pro 85 Heavy';
            src: local('Avenir Next Heavy'), local('Avenir-Heavy'), local('AvenirNext-Heavy');
            font-weight: 900;
            font-style: normal;
            font-display: swap;
        }

        .avenir-heavy {
            font-family: 'Avenir Pro 85 Heavy', 'Avenir Next', 'Avenir', 'Montserrat', 'Inter', sans-serif;
            font-weight: 900;
            letter-spacing: -0.02em;
        }

        @keyframes shimmer {
            0% {
                transform: translateX(-100%);
            }
            100% {
                transform: translateX(100%);
            }
        }
        .animate-shimmer {
            animation: shimmer 2s infinite;
        }

        @keyframes fadeInUp {
            from {
                opacity: 0;
                transform: translateY(20px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        /* ‚ö° Tab Transition Performance */
        @keyframes tabFadeIn {
            from {
                opacity: 0;
            }
            to {
                opacity: 1;
            }
        }
        
        .tab-content-active {
            animation: tabFadeIn 0.15s ease-out;
        }
        
        /* Visual feedback during tab loading */
        .tab-loading {
            opacity: 0.7;
            pointer-events: none;
        }
        
        /* content-visibility for offscreen content */
        .tab-content-hidden {
            content-visibility: hidden;
            contain-intrinsic-size: 0 500px;
        }

        .scrollbar-hide {
            -ms-overflow-style: none;
            scrollbar-width: none;
        }
        .scrollbar-hide::-webkit-scrollbar {
            display: none;
        }
    
        /* üì± Touch-friendly Grid Layout */
        .react-grid-layout {
            touch-action: pan-y;
        }
        
        .react-grid-item {
            touch-action: none;
            -webkit-user-select: none;
            user-select: none;
        }
        
        .react-grid-item.react-draggable-dragging {
            z-index: 100;
            opacity: 0.9;
        }
        
        /* Resize handle in edit mode - made very visible */
        .react-resizable-handle {
            width: 24px !important;
            height: 24px !important;
            position: absolute !important;
            bottom: 0 !important;
            right: 0 !important;
            cursor: se-resize !important;
            background: linear-gradient(135deg, transparent 50%, #10b981 50%) !important;
            border-radius: 0 0 8px 0 !important;
            z-index: 100 !important;
        }
        
        .react-resizable-handle::after {
            content: '' !important;
            position: absolute !important;
            bottom: 4px !important;
            right: 4px !important;
            width: 8px !important;
            height: 8px !important;
            border-right: 2px solid white !important;
            border-bottom: 2px solid white !important;
        }
        
        .react-resizable-handle:hover {
            background: linear-gradient(135deg, transparent 50%, #34d399 50%) !important;
        }
        
        @media (max-width: 768px) {
            .react-resizable-handle {
                width: 32px !important;
                height: 32px !important;
            }
            
            /* Larger touch targets on mobile */
            button, .btn, [role="button"] {
                min-height: 44px;
                min-width: 44px;
            }
        }
        
        @media (max-width: 480px) {
            /* Stack widgets on very small screens */
            .react-grid-item {
                position: relative !important;
                width: 100% !important;
                transform: none !important;
                left: 0 !important;
            }
        }

    </style>
    <script crossorigin src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    <!-- Note: Babel Standalone utilis√© intentionnellement pour ce fichier standalone -->
    <script src="https://unpkg.com/@babel/standalone@7.23.6/babel.min.js"></script>

    <!-- Fix for "exports is not defined" error when Babel transpiles modules -->
    <script>
        // Polyfill for CommonJS to prevent Babel and UMD errors
        // MUST run before React Grid Layout and any Babel transpilation
        (function() {
            // =================================================================
            // üõ°Ô∏è CRASH PREVENTION SHIELD v2
            // Fixes "TypeError: t.animate is not a function" (specifically on Window)
            // =================================================================
            const createMockAnimation = () => ({
                finished: Promise.resolve(),
                ready: Promise.resolve(),
                onfinish: null,
                cancel: () => {},
                play: () => {},
                pause: () => {},
                reverse: () => {},
                addEventListener: () => {},
                removeEventListener: () => {},
                currentTime: 0,
                startTime: 0,
                playbackRate: 1,
                playState: 'finished',
                id: 'mock-animation',
                pending: false,
                replaceState: 'active',
                effect: null,
                timeline: null,
                onremove: null,
                oncancel: null,
                commitStyles: () => {},
                persist: () => {},
                updatePlaybackRate: () => {}
            });

            // 1. Critical: Polyfill window.animate (The culprit identified in logs)
            if (typeof window !== 'undefined' && !window.animate) {
                window.animate = function(keyframes, options) {
                    console.warn('üõ°Ô∏è PREVENTED CRASH: window.animate called!', keyframes);
                    console.trace('üõ°Ô∏è Stack Trace for window.animate call:');
                    return createMockAnimation();
                };
            }

            // 2. Element.animate polyfill
            if (typeof Element !== 'undefined' && !Element.prototype.animate) {
                 Element.prototype.animate = function(keyframes, options) {
                    // console.log('Element.animate polyfill', this);
                    return createMockAnimation();
                };
            }

            // 3. Explicit Prototypes (Catch-all)
            [HTMLElement, SVGElement, Element].forEach(proto => {
                if (typeof proto !== 'undefined' && !proto.prototype.animate) {
                    proto.prototype.animate = function(keyframes, options) {
                        return createMockAnimation();
                    };
                }
            });

            // 4. Fallback ultime pour TOUS les objets (agressif mais n√©cessaire pour ce crash)
            // Utilise defineProperty pour √©viter d'√©num√©rer la propri√©t√© et causer des effets de bord
            if (!Object.prototype.animate) {
                Object.defineProperty(Object.prototype, 'animate', {
                    value: function(keyframes, options) {
                        console.warn('üõ°Ô∏è PREVENTED CRASH: Object.prototype.animate called on:', this);
                        return createMockAnimation();
                    },
                    writable: true,
                    configurable: true,
                    enumerable: false
                });
            }
            // =================================================================

            // GLOBAL FALLBACKS & COMPONENTS to prevent ReferenceErrors in components
            

            window.ENVIRONMENT = "production";
            window.NODE_ENV = "production";
            
            // Supabase Configuration (required for auth, roles, realtime)
            window.SUPABASE_URL = "https://boyuxgdplbpkknplxbxp.supabase.co";
            window.SUPABASE_ANON_KEY = "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImJveXV4Z2RwbGJwa2tucGx4YnhwIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjAzMzU5MTQsImV4cCI6MjA3NTkxMTkxNH0.-M-QdpBFlDtg1CeA00VepQCNzGzvU-tISyVA0yCLBdw";
            window.ENV_CONFIG = {
                SUPABASE_URL: window.SUPABASE_URL,
                SUPABASE_ANON_KEY: window.SUPABASE_ANON_KEY
            };
            window.showSlashSuggestions = false;
            window.setShowSlashSuggestions = function() {};
            window.Icon = function(props) {
                var emoji = props.emoji || '';
                var size = props.size || 20;
                var className = props.className || '';
                if (typeof React === 'undefined') return emoji;
                return React.createElement('span', { 
                    className: 'inline-block ' + className, 
                    style: { fontSize: size + 'px' } 
                }, emoji);
            };
            window.extractMoveReason = window.extractMoveReason || function(ticker, change) {
                return "Analyse en cours...";
            };
            

            // Initialize Lucide icons if available
            if (window.lucide && window.lucide.createIcons) {
                try {
                    window.lucide.createIcons();
                } catch(e) {}
            }
            // Early LucideIcon/IconoirIcon polyfill - MUST be before component scripts
            window.IconoirIcon = function(props) {
                var name = props.name || 'Activity';
                var className = props.className || 'w-4 h-4';
                var iconMap = {
                    'Activity': 'activity', 'Wifi': 'wifi', 'RefreshCw': 'refresh-double',
                    'ChevronDown': 'nav-arrow-down', 'Bell': 'bell', 'Search': 'search',
                    'Settings': 'settings', 'X': 'xmark', 'Plus': 'plus', 'Minus': 'minus',
                    'PieChart': 'pie-chart', 'BarChart3': 'stat-up', 'TrendingUp': 'trending-up',
                    'TrendingDown': 'trending-down', 'Calendar': 'calendar', 'Star': 'star',
                    'Layout': 'view-grid', 'Grid3x3': 'view-grid', 'Newspaper': 'newspaper',
                    'Target': 'target', 'Fire': 'sparks', 'ArrowUpRight': 'arrow-tr',
                    'Database': 'database', 'Mail': 'mail', 'Monitor': 'pc-monitor'
                };
                var iconClass = iconMap[name] || 'activity';
                if (typeof React === 'undefined') {
                    return null;
                }
                return React.createElement('i', { 
                    className: 'iconoir-' + iconClass + ' ' + className, 
                    style: { fontSize: 'inherit' } 
                });
            };
            window.LucideIcon = window.IconoirIcon;

            // Add Admin button to header after dashboard loads
            window.addEventListener('dash:ready', function() {
                setTimeout(function() {
                    var header = document.querySelector('header') || document.querySelector('.header') || document.querySelector('[class*="header"]');
                    if (header && !document.getElementById('admin-btn')) {
                        var btn = document.createElement('button');
                        btn.id = 'admin-btn';
                        btn.innerHTML = 'üß©';
                        btn.title = 'Component Manager';
                        btn.style.cssText = 'position:fixed;top:10px;right:10px;z-index:9999;width:40px;height:40px;border-radius:10px;border:none;background:linear-gradient(135deg,#10b981,#059669);color:white;font-size:20px;cursor:pointer;box-shadow:0 4px 12px rgba(0,0,0,0.3);transition:transform 0.2s;';
                        btn.onmouseover = function() { this.style.transform = 'scale(1.1)'; };
                        btn.onmouseout = function() { this.style.transform = 'scale(1)'; };
                        btn.onclick = function() { if(window.openComponentManager) window.openComponentManager(); else alert('Component Manager not loaded'); };
                        document.body.appendChild(btn);
                    }
                }, 1000);
            });



            // Safe JSON fetch utility - handles non-JSON responses gracefully
            window.fetchJsonSafe = async function(url, opts = {}) {
                try {
                    const res = await fetch(url, opts);
                    const text = await res.text();
                    
                    if (!res.ok) {
                        console.error('[API] Error', res.status, url, text.slice(0, 200));
                        return { success: false, error: 'HTTP ' + res.status, data: null };
                    }
                    
                    const ct = res.headers.get('content-type') || '';
                    if (!ct.includes('application/json')) {
                        console.error('[API] Not JSON', url, ct, text.slice(0, 200));
                        return { success: false, error: 'Not JSON', data: null };
                    }
                    
                    try {
                        return JSON.parse(text);
                    } catch(e) {
                        console.error('[API] Invalid JSON', url, text.slice(0, 200));
                        return { success: false, error: 'Invalid JSON', data: null };
                    }
                } catch(e) {
                    console.error('[API] Fetch failed', url, e.message);
                    return { success: false, error: e.message, data: null };
                }
            };



            if (typeof window.exports === 'undefined') {
                window.exports = {};
            }
            if (typeof window.module === 'undefined') {
                window.module = { exports: window.exports };
            }

            // Add require polyfill for UMD modules
            
            // Unhandled Rejection Handler to keep console clean
            window.addEventListener("unhandledrejection", function(event) {
                console.warn("Unhandled promise rejection:", event.reason);
                event.preventDefault(); // Stop noise
            });

            // Global Error Boundary (UI Fallback)
            if (typeof window.require === 'undefined') {
                window.require = function(moduleName) {
                    // For react-grid-layout dependencies
                    if (moduleName === 'react') return window.React;
                    if (moduleName === 'react-dom') return window.ReactDOM;
                    if (moduleName === 'prop-types') return window.PropTypes || {};
                    if (moduleName === "@emotion/is-prop-valid") {
                        const fn = (p) => true;
                        fn.default = fn;
                        return fn;
                    }

                    console.warn('require() called for unknown module:', moduleName);



                    return {};
                };
            }

            // Make available in global scope for Babel
            self.exports = window.exports;
            self.module = window.module;
            self.require = window.require;
        })();
    </script>

    <!-- React Grid Layout v2.1.1 - Local bundle (migrated from CDN v1.4.4) -->
    <link rel="stylesheet" href="/js/react-grid-layout-bundle.css">
    <script src="/js/react-grid-layout-bundle.js"></script>

    <!-- Verify and expose React Grid Layout -->
    <script>
        (function() {
            // The UMD build should have exposed ReactGridLayout globally
            if (typeof window.ReactGridLayout === 'undefined') {
                console.error('‚ùå ReactGridLayout failed to load from CDN');

                // Try alternative access methods
                if (typeof window.module !== 'undefined' && window.module.exports) {
                    window.ReactGridLayout = window.module.exports;
                    console.log('‚úÖ ReactGridLayout recovered from module.exports');
                }
            } else {
                console.log('‚úÖ ReactGridLayout loaded successfully:', {
                    hasResponsive: !!window.ReactGridLayout.Responsive,
                    hasWidthProvider: !!window.ReactGridLayout.WidthProvider
                });
            }
        })();
    </script>

    <!-- Performance Optimizer - R√©duit le temps de chargement -->
    <!-- Performance Optimizer - R√©duit le temps de chargement -->
    <script src="/js/dashboard/logger.js"></script>
    <!-- Yield Curve API Client with TTL Cache & Request Deduplication -->
    <script src="/js/dashboard/utils/yieldCurveClient.js"></script>
    <!-- Performance Optimizer REMOVED (was causing widget hangs) -->
    <!-- <script src="/js/dashboard/performance-optimizer.js"></script> -->
    <!-- Tab Lazy Loader - Prepares on-demand loading -->
    <script src="/js/dashboard/tab-lazy-loader.js"></script>
    <!-- Lazy Widget Wrapper (Intersection Observer) -->
    <!-- <script src="/js/dashboard/components/LazyWidgetWrapper.js"></script> -->
    <!-- Optimized TradingView widget loader -->
    <!-- <script src="/js/dashboard/widget-loader-optimized.js"></script> -->

    <script src="/js/dashboard/constants.js"></script>
    <!-- Utilitaires partag√©s expos√©s globalement -->
    <script src="/js/dashboard/utils-shared.js"></script>
    <!-- Prompts briefing externalis√©s -->
    <script src="/js/dashboard/briefing-prompts.js"></script>
    <!-- Syst√®me de th√®mes -->
    <script src="/js/dashboard/theme-system.js"></script>
    
    <!-- ‚ö° ESSENTIAL COMPONENTS (Load first - required for initial view) -->
    <!-- Auto-Expand: Ajoute boutons fullscreen √† TOUTES les sections -->
    <script src="js/dashboard/components/shared/auto-expand-init.js"></script>
    <!-- Theme Selector Component -->
    <script type="text/babel" src="js/dashboard/components/ThemeSelector.js"></script>
    <script type="text/babel" src="js/dashboard/components/SecondaryNavBar.js"></script>
    <script type="text/babel" src="/js/dashboard/components/NewsBanner.js"></script>
    <script type="text/babel" src="js/dashboard/components/tabs/FinVoxTab.js"></script>
    <script type="text/babel" src="js/dashboard/components/tabs/EmmAIATab.js"></script>
    <!-- Terminal Emma IA Tab -->
    <!-- <script type="text/babel" src="js/dashboard/components/tabs/TerminalEmmaIATab.js"></script> -->
    <!-- <script type="text/babel" src="js/dashboard/components/tabs/FastGraphsTab.js"></script> -->
    <!-- GroupChat Tab (JSLAI RobotWeb Ultimate v5.0) -->
    <!-- <script type="text/babel" src="js/dashboard/components/tabs/GroupChatTab.js"></script> -->
    <!-- ChatGPT Group Tab (ChatGPT Group Chat Integration) -->
    <!-- <script type="text/babel" src="js/dashboard/components/tabs/ChatGPTGroupTab.js"></script> -->
    <!-- AdminJSLai Tab -->
    <!-- <script type="text/babel" src="js/dashboard/components/tabs/AdminJSLaiTab.js"></script> -->
    <!-- PlusTab Component -->
    <!-- <script type="text/babel" src="js/dashboard/components/tabs/PlusTab.js"></script> -->
    <!-- JLab Unified Tab -->
    <!-- <script type="text/babel" src="js/dashboard/components/tabs/JLabUnifiedTab.js"></script> -->

    <!-- Grid Layout Components (library loaded earlier in <head>) -->
    <script type="text/babel" src="js/dashboard/components/grid-layout/RglDashboard.js"></script>
    <script type="text/babel" src="js/dashboard/components/grid-layout/DashboardGridWrapper.js"></script>
    <script type="text/babel" src="js/dashboard/components/tabs/MarketsEconomyTabRGL.js"></script>
    <script type="text/babel" src="js/dashboard/components/tabs/TitresTabRGL.js"></script>

    <!-- Components needed by Grid Layout -->
    <script type="text/babel" src="js/dashboard/components/tabs/StocksNewsTab.js"></script>
    <script type="text/babel" src="js/dashboard/components/tabs/MarketsEconomyTab.js"></script>
    <!-- <script type="text/babel" src="js/dashboard/components/tabs/AskEmmaTab.js"></script> -->
    <!-- <script type="text/babel" src="js/dashboard/components/tabs/VoiceAssistantTab.js"></script> -->
    
    <!-- Script de test GOD MODE (disponible en console) -->
    <!-- <script src="/js/dashboard/test-god-mode-console.js"></script> -->
    <!-- Script de d√©bogage GOD MODE -->
    <!-- <script src="/js/dashboard/debug-god-mode.js"></script> -->
    <!-- Quick Fix GOD MODE -->
    <!-- <script src="/js/dashboard/quick-fix-god-mode.js"></script> -->
    <script>
        // Exposer les fonctions de d√©bogage globalement
        window.debugGodMode = function() {
            const script = document.createElement('script');
            script.src = '/js/dashboard/debug-god-mode.js';
            document.head.appendChild(script);
        };
        window.quickFixGodMode = function() {
            const script = document.createElement('script');
            script.src = '/js/dashboard/quick-fix-god-mode.js';
            document.head.appendChild(script);
        };
    </script>

    <!-- TradingView Lightweight Charts - Biblioth√®que officielle pour graphiques personnalis√©s -->
    <!-- <script src="https://unpkg.com/lightweight-charts@4.2.0/dist/lightweight-charts.standalone.production.js"></script> -->
    <!-- Note: CDN Tailwind utilis√© intentionnellement pour ce fichier standalone -->
    <script>
        // Suppress Tailwind CDN warnings in production
        const originalWarn = console.warn;
        console.warn = function(...args) {
            if (args[0] && typeof args[0] === 'string' && (args[0].includes('cdn.tailwindcss.com') || args[0].includes('production'))) return;
            originalWarn.apply(console, args);
        };
    </script>
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- <script src="https://cdn.jsdelivr.net/npm/chart.js"></script> -->
    <!-- PDF Export Dependencies -->
    <!-- <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script> -->
    <!-- <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script> -->


    <!-- Iconoir - Beautiful open source icons -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/iconoir-icons/iconoir@main/css/iconoir.css">
    
    <!-- Scripts Tab Seeking Alpha & Scraping -->
    <!-- <script type="text/babel" src="js/dashboard/components/tabs/YieldCurveTab.js"></script> -->
    <!-- <script type="text/babel" src="js/dashboard/components/tabs/EconomicCalendarTab.js"></script> -->
    <!-- <script type="text/babel" src="js/dashboard/components/tabs/DansWatchlistTab.js"></script> -->
    <!-- <script type="text/babel" src="js/dashboard/components/tabs/EmailBriefingsTab.js"></script> -->

    <!-- <script type="text/babel" src="js/dashboard/components/tabs/SeekingAlphaTab.js"></script> -->
    <!-- <script type="text/babel" src="js/dashboard/components/tabs/ScrappingSATab.js"></script> -->
    
    <!-- Styles des th√®mes -->
    <link rel="stylesheet" href="/css/themes.css">
    <!-- Google Fonts pour les polices personnalis√©es des th√®mes -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;500;600;700;800;900&family=Source+Sans+Pro:wght@400;600;700&family=Open+Sans:wght@400;600;700&family=Avenir+Next:wght@400;500;600;700&family=Inter:wght@400;500;600;700;800;900&family=Roboto:wght@400;500;700;900&family=Georgia:wght@400;700&display=swap" rel="stylesheet">

    <!-- Environment Configuration from env-config.js -->
    <script src="/js/env-config.js"></script>
    <!-- Mock API for Local Development -->
    <script src="/js/dashboard/mock-api.js"></script>

    <!-- Supabase Client -->
    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2.39.0/dist/umd/supabase.min.js"></script>
    <!-- Roles & Permissions System -->
    <script src="/js/roles-permissions.js"></script>
    <!-- Toast Notification Manager (Global) -->
    <script src="/js/utils/toast-manager.js"></script>

    <!-- Script pour exposer les biblioth√®ques globalement -->
    <script>
        // Exposer Recharts globalement
        window.Recharts = window.Recharts || {};

        // ============================================
        // INJECTION VARIABLE D'ENVIRONNEMENT VITE_GROUP_CHAT_URL
        // ============================================
        // Pour Babel inline, on doit passer la variable via un script
        // En production Vercel, cette variable sera inject√©e c√¥t√© serveur
        // En d√©veloppement, elle peut √™tre d√©finie dans window.importMetaEnv
        (function() {
            // Essayer de r√©cup√©rer depuis window.importMetaEnv (si d√©fini par Vite)
            const envChatUrl = (typeof window !== 'undefined' && window.importMetaEnv && window.importMetaEnv.VITE_GROUP_CHAT_URL)
                ? window.importMetaEnv.VITE_GROUP_CHAT_URL
                : '';
            
            // Injecter dans le meta tag pour que ChatGPTGroupTab.js puisse le lire
            const metaTag = document.getElementById('vite-group-chat-url-meta');
            if (metaTag && envChatUrl) {
                metaTag.setAttribute('content', envChatUrl);
            }
            
            // Exposer aussi via window pour acc√®s direct
            if (typeof window !== 'undefined') {
                window.importMetaEnv = window.importMetaEnv || {};
                if (envChatUrl) {
                    window.importMetaEnv.VITE_GROUP_CHAT_URL = envChatUrl;
                }
            }
        })();

        // OPTIMISATION: Gestionnaire d'erreur global am√©lior√© pour √©viter que les erreurs de scripts externes cassent l'application
        window.addEventListener('error', function (event) {
            // Ignorer les erreurs de scripts externes (extensions, etc.)
            if (event.filename && (event.filename.includes('share-modal') || event.filename.includes('extension'))) {
                console.warn('‚ö†Ô∏è Erreur ignor√©e depuis un script externe:', event.filename);
                event.preventDefault();
                return true;
            }
            // Filtre pour √©viter les erreurs TradingView r√©p√©titives
            const errorMsg = event.message || event.error?.message || 'Unknown error';
            const source = event.filename || 'unknown';
            
            // Filtrer les erreurs TradingView r√©p√©titives (contentWindow, invalid environment)
            if (source.includes('tradingview.com') || source.includes('embed-widget')) {
                if (errorMsg.includes('contentWindow is not available') || 
                    errorMsg.includes('Invalid environment') ||
                    errorMsg.includes('Cannot listen to the event')) {
                    // Ces erreurs sont normales pour TradingView (sandbox restrictions)
                    // Logger seulement en mode debug pour √©viter la pollution de la console
                    if (window.DEBUG_MODE) {
                        console.debug(`[TradingView] ${errorMsg.substring(0, 100)}`);
                    }
                    return; // Ne pas logger ces erreurs r√©p√©titives
                }
            }

            // OPTIMISATION: Logger les erreurs dashboard pour debugging
            if (event.filename && event.filename.includes('dashboard')) {
                console.error('‚ùå Erreur dashboard:', errorMsg, 'at', event.filename + ':' + event.lineno);
                if (event.error && event.error.stack) {
                    console.error('Stack:', event.error.stack);
                }
            }
            // Log VM errors (from Babel transpilation)
            else if (!event.filename || event.filename.includes('VM')) {
                console.error('‚ùå Erreur transpilation:', errorMsg);
                if (event.error && event.error.stack) {
                    console.error('Stack:', event.error.stack);
                } else if (event.filename) {
                    console.error('Fichier:', event.filename, 'Ligne:', event.lineno);
                }
            }
        }, true);

        // Protection contre les addEventListener sur des √©l√©ments null
        const originalAddEventListener = EventTarget.prototype.addEventListener;
        EventTarget.prototype.addEventListener = function (type, listener, options) {
            if (this === null || this === undefined) {
                console.warn('‚ö†Ô∏è Tentative d\'ajouter un event listener sur un √©l√©ment null/undefined:', type);
                return;
            }
            return originalAddEventListener.call(this, type, listener, options);
        };

        // V√©rifier le chargement des biblioth√®ques
        window.addEventListener('load', function () {
            console.log('üìö V√©rification des biblioth√®ques:');
            console.log('Recharts disponible:', typeof window.Recharts !== 'undefined');
            console.log('Iconoir disponible:', document.querySelectorAll('[class*="iconoir-"]').length > 0);

            // Message informatif sur les avertissements de production
            console.log('‚ÑπÔ∏è Note: Les avertissements Tailwind/Babel sont normaux pour ce fichier standalone');
            console.log('‚ÑπÔ∏è Ce fichier utilise intentionnellement des CDN pour la portabilit√©');
        });

        // ============================================
        // üîç FREEZE DIAGNOSTICS & FAILSAFE SYSTEM
        // ============================================
        (function() {
            'use strict';
            
            // Store last known freeze state
            window._freezeDiagnostics = {
                lastClickTime: Date.now(),
                clickCount: 0,
                blockerHistory: [],
                isMonitoring: false
            };

            // üîç DIAGNOSTIC: Identify what element is blocking clicks
            window.diagnoseFreeze = function() {
                console.log('üîç DIAGNOSE FREEZE - Running...');
                console.log('==================================================');
                
                // 1) What element is at center of screen?
                const centerX = window.innerWidth / 2;
                const centerY = window.innerHeight / 2;
                const topElement = document.elementFromPoint(centerX, centerY);
                
                console.log('üìç TOP ELEMENT at center:', topElement);
                if (topElement) {
                    console.log('   id:', topElement.id || '(none)');
                    console.log('   class:', topElement.className || '(none)');
                    console.log('   tagName:', topElement.tagName);
                    topElement.style.outline = '4px solid red';
                    console.log('   ‚úÖ Outlined in RED');
                }
                
                // 2) Check pointer-events on body, html, root
                const bodyPE = getComputedStyle(document.body).pointerEvents;
                const htmlPE = getComputedStyle(document.documentElement).pointerEvents;
                const root = document.querySelector('#root');
                const rootPE = root ? getComputedStyle(root).pointerEvents : 'N/A';
                
                console.log('\nüñ±Ô∏è POINTER-EVENTS:');
                console.log('   body:', bodyPE, bodyPE === 'none' ? '‚ùå BLOCKED!' : '‚úÖ');
                console.log('   html:', htmlPE, htmlPE === 'none' ? '‚ùå BLOCKED!' : '‚úÖ');
                console.log('   #root:', rootPE, rootPE === 'none' ? '‚ùå BLOCKED!' : '‚úÖ');
                
                // 3) Find all fixed/absolute overlays with high z-index
                const allElements = document.querySelectorAll('div, section, aside, dialog, [role="dialog"]');
                const blockers = [];
                
                allElements.forEach(el => {
                    const style = getComputedStyle(el);
                    const pos = style.position;
                    const zIndex = parseInt(style.zIndex || '0', 10);
                    const display = style.display;
                    const visibility = style.visibility;
                    const opacity = parseFloat(style.opacity);
                    
                    // Check if it's a potential blocker
                    if ((pos === 'fixed' || pos === 'absolute') && 
                        zIndex >= 40 && 
                        display !== 'none' && 
                        visibility !== 'hidden') {
                        
                        const rect = el.getBoundingClientRect();
                        const coversCenter = rect.left <= centerX && rect.right >= centerX && 
                                           rect.top <= centerY && rect.bottom >= centerY;
                        
                        if (coversCenter || (rect.width > window.innerWidth * 0.5 && rect.height > window.innerHeight * 0.5)) {
                            blockers.push({
                                element: el,
                                id: el.id || '(none)',
                                className: el.className?.toString()?.slice(0, 80) || '(none)',
                                zIndex: zIndex,
                                position: pos,
                                opacity: opacity,
                                pointerEvents: style.pointerEvents,
                                size: `${Math.round(rect.width)}x${Math.round(rect.height)}`
                            });
                        }
                    }
                });
                
                console.log('\nüöß POTENTIAL BLOCKERS (z-index >= 40, covers center):');
                if (blockers.length === 0) {
                    console.log('   ‚úÖ None found');
                } else {
                    blockers.sort((a, b) => b.zIndex - a.zIndex);
                    blockers.slice(0, 10).forEach((b, i) => {
                        console.log(`   ${i+1}. z:${b.zIndex} | ${b.position} | PE:${b.pointerEvents} | ${b.size}`);
                        console.log(`      id="${b.id}" class="${b.className}"`);
                        b.element.style.outline = '2px dashed orange';
                    });
                }
                
                // 4) Check for loading overlays specifically
                const loadingSelectors = [
                    '#loadingOverlay', '.loading-overlay', '.loading-screen',
                    '[class*="loading"]', '[class*="spinner"]', '[class*="overlay"]',
                    '.modal-backdrop', '.click-shield', '[class*="backdrop"]'
                ];
                
                console.log('\n‚è≥ LOADING/MODAL OVERLAYS:');
                let foundLoading = false;
                loadingSelectors.forEach(sel => {
                    const els = document.querySelectorAll(sel);
                    els.forEach(el => {
                        const style = getComputedStyle(el);
                        if (style.display !== 'none' && style.visibility !== 'hidden' && parseFloat(style.opacity) > 0) {
                            console.log(`   ‚ö†Ô∏è VISIBLE: ${sel}`, el);
                            foundLoading = true;
                        }
                    });
                });
                if (!foundLoading) console.log('   ‚úÖ None visible');
                
                // 5) Check ReactGridLayout drag layer
                const rglDragLayer = document.querySelector('.react-grid-layout');
                if (rglDragLayer) {
                    const rglStyle = getComputedStyle(rglDragLayer);
                    console.log('\nüìê REACT GRID LAYOUT:');
                    console.log('   pointerEvents:', rglStyle.pointerEvents);
                    console.log('   zIndex:', rglStyle.zIndex);
                    
                    const placeholders = document.querySelectorAll('.react-grid-placeholder, .react-draggable-dragging');
                    if (placeholders.length > 0) {
                        console.log('   ‚ö†Ô∏è Active drag/placeholder elements:', placeholders.length);
                    }
                }
                
                console.log('\n==================================================');
                console.log('üí° TO FIX: Run window.forceUnfreeze() to restore pointer-events');
                
                return { topElement, bodyPE, htmlPE, rootPE, blockers };
            };

            // üîß FORCE UNFREEZE: Restore pointer-events and remove stuck overlays
            window.forceUnfreeze = function() {
                console.log('üîß FORCE UNFREEZE - Restoring UI...');
                
                // Restore pointer-events
                document.body.style.pointerEvents = 'auto';
                document.documentElement.style.pointerEvents = 'auto';
                const root = document.querySelector('#root');
                if (root) root.style.pointerEvents = 'auto';
                
                // Remove/hide common blockers
                const blockerSelectors = [
                    '.loading-overlay', '.loading-screen', '#loadingOverlay',
                    '.modal-backdrop', '.click-shield', '[class*="backdrop"]:not(.header-backdrop)'
                ];
                
                blockerSelectors.forEach(sel => {
                    document.querySelectorAll(sel).forEach(el => {
                        const style = getComputedStyle(el);
                        if (style.display !== 'none' && style.position === 'fixed') {
                            console.log('   Hiding blocker:', sel, el);
                            el.style.display = 'none';
                            el.style.pointerEvents = 'none';
                        }
                    });
                });
                
                // Remove any stuck drag states from RGL
                document.querySelectorAll('.react-draggable-dragging').forEach(el => {
                    el.classList.remove('react-draggable-dragging');
                });
                
                console.log('‚úÖ UI should be responsive now');
            };

            // ‚ö° AUTO-FAILSAFE: Periodically check and restore pointer-events
            // Using longer interval (10s) to reduce main thread blocking
            const failsafeInterval = window._performanceOptimizedFailsafeInterval || 10000;
            setInterval(function() {
                const bodyPE = getComputedStyle(document.body).pointerEvents;
                const htmlPE = getComputedStyle(document.documentElement).pointerEvents;
                
                if (bodyPE === 'none' || htmlPE === 'none') {
                    console.warn('[Failsafe] ‚ö†Ô∏è pointer-events blocked, restoring...');
                    document.body.style.pointerEvents = 'auto';
                    document.documentElement.style.pointerEvents = 'auto';
                    const root = document.querySelector('#root');
                    if (root) root.style.pointerEvents = 'auto';
                }
            }, failsafeInterval);

            // üìä CLICK MONITOR: Log clicks to detect if they're being captured
            document.addEventListener('click', function(e) {
                window._freezeDiagnostics.lastClickTime = Date.now();
                window._freezeDiagnostics.clickCount++;
                
                if (window._freezeDiagnostics.isMonitoring) {
                    console.log('[CLICK]', {
                        target: e.target,
                        id: e.target.id,
                        class: e.target.className,
                        defaultPrevented: e.defaultPrevented,
                        propagationStopped: e._propagationStopped || false
                    });
                }
            }, true); // capture phase

            // üéØ START CLICK MONITORING
            window.startClickMonitor = function() {
                window._freezeDiagnostics.isMonitoring = true;
                console.log('üëÅÔ∏è Click monitoring ENABLED - all clicks will be logged');
            };

            window.stopClickMonitor = function() {
                window._freezeDiagnostics.isMonitoring = false;
                console.log('üëÅÔ∏è Click monitoring DISABLED');
            };

            console.log('‚úÖ Freeze Diagnostics loaded. Commands: diagnoseFreeze(), forceUnfreeze(), startClickMonitor()');
        })();
    </script>

    <!-- Emma Configuration - Centralized prompts and settings -->
    <script type="module">
        import { emmaConfig } from './emma-config.js';
        window.emmaConfig = emmaConfig;
        console.log('‚úÖ Emma Config charg√©:', window.emmaConfig ? 'OK' : 'ERREUR');

        // Init Toast Helper Global
        window.showToast = (msg, type = 'info') => {
            if (window.Toast) window.Toast.show(msg, type);
            else console.log('Toast:', msg);
        };
        // Welcome Toast
        window.addEventListener('load', () => {
            setTimeout(() => {
                if(window.showToast) window.showToast('Bienvenue sur votre Dashboard Premium', 'gold', 'JSLai Wealth');
            }, 1000);
        });
    </script>

    <!-- Styles Emma -->
    <link rel="stylesheet" href="emma-styles.css">
    <style>
        * {
            font-family: 'Plus Jakarta Sans', 'Inter', 'Roboto', system-ui, -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
        }

        /* Global font reduction for better overview */
        html {
            font-size: 85%;
        }

        h1, h2, h3, h4, h5, h6, .font-display {
            font-family: 'Outfit', 'Plus Jakarta Sans', sans-serif;
        }

        .tab-content {
            display: none;
        }

        .tab-content.active {
            display: block;
        }

        .tab-button.active {
            background: linear-gradient(135deg, #4ade80 0%, #22c55e 100%);
            color: white;
        }

        .pulse-animation {
            animation: pulse 3s infinite;
        }

        @keyframes pulse {

            0%,
            100% {
                opacity: 1;
            }

            50% {
                opacity: 0.5;
            }
        }

        /* üé® Animations pour la bottom bar avec ic√¥nes Iconoir */
        @keyframes slide-down {
            from {
                opacity: 0;
                transform: translateX(-50%) translateY(-10px);
            }

            to {
                opacity: 1;
                transform: translateX(-50%) translateY(0);
            }
        }

        @keyframes icon-pop {
            0% {
                transform: scale(1);
            }

            50% {
                transform: scale(1.2);
            }

            100% {
                transform: scale(1.1);
            }
        }

        .animate-slide-down {
            animation: slide-down 0.3s ease-out;
        }

        /* Effet de glow sur l'ic√¥ne active */
        nav button:has(i.scale-110) i {
            filter: drop-shadow(0 0 8px currentColor);
        }

        /* Styles pour garantir l'affichage des ic√¥nes Iconoir sur mobile */
        .iconoir-chart-line,
        .iconoir-trending-up,
        .iconoir-chat-bubble,
        .iconoir-settings,
        .iconoir-star,
        .iconoir-search,
        .iconoir-graph-up,
        .iconoir-antenna-signal,
        .iconoir-calendar,
        .iconoir-flask,
        .iconoir-globe,
        .iconoir-log-out,
        .iconoir-menu,
        .iconoir-briefcase {
            display: inline-block !important;
            font-style: normal !important;
            font-variant: normal !important;
            text-rendering: auto !important;
            line-height: 1 !important;
            -webkit-font-smoothing: antialiased !important;
            -moz-osx-font-smoothing: grayscale !important;
        }

        /* Transition fluide pour toutes les ic√¥nes */
        nav button i {
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
        }

        /* Effet hover sur les boutons de navigation */
        nav button:hover:not(:active) i {
            transform: translateY(-2px);
        }

        /* Effet de press */
        nav button:active i {
            transform: scale(0.9);
        }

        .stock-card {
            transition: all 0.3s ease;
        }

        .stock-card:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 25px rgba(0, 0, 0, 0.2);
        }

        /* üíé VAGUES 3+4 - Finance Pro UI Effects */

        /* üå´Ô∏è Glassmorphism Effect */
        .glass-card {
            background: rgba(255, 255, 255, 0.05);
            -webkit-backdrop-filter: blur(10px);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.1);
            box-shadow: 0 8px 32px 0 rgba(0, 0, 0, 0.37);
        }

        .glass-card-light {
            background: rgba(255, 255, 255, 0.7);
            -webkit-backdrop-filter: blur(10px);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.18);
            box-shadow: 0 8px 32px 0 rgba(31, 38, 135, 0.1);
        }

        /* ‚¨ÜÔ∏è Hover Lift Effect (-4px translateY) */
        .hover-lift {
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
        }

        .hover-lift:hover {
            transform: translateY(-4px);
            box-shadow: 0 12px 40px rgba(0, 0, 0, 0.25);
        }

        /* ‚ú® Shine Effect (horizontal sweep) */
        .shine-effect {
            position: relative;
            overflow: hidden;
        }

        .shine-effect::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg,
                    transparent,
                    rgba(255, 255, 255, 0.2),
                    transparent);
            transition: left 0.5s ease;
        }

        .shine-effect:hover::before {
            left: 100%;
        }

        /* üåü Glow Animation for Important Metrics */
        .glow-pulse {
            animation: glow-pulse 2s ease-in-out infinite;
        }

        @keyframes glow-pulse {

            0%,
            100% {
                box-shadow: 0 0 5px rgba(74, 222, 128, 0.5),
                    0 0 10px rgba(74, 222, 128, 0.3),
                    0 0 15px rgba(74, 222, 128, 0.2);
            }

            50% {
                box-shadow: 0 0 10px rgba(74, 222, 128, 0.8),
                    0 0 20px rgba(74, 222, 128, 0.6),
                    0 0 30px rgba(74, 222, 128, 0.4);
            }
        }

        .glow-pulse-red {
            animation: glow-pulse-red 2s ease-in-out infinite;
        }

        @keyframes glow-pulse-red {

            0%,
            100% {
                box-shadow: 0 0 5px rgba(239, 68, 68, 0.5),
                    0 0 10px rgba(239, 68, 68, 0.3),
                    0 0 15px rgba(239, 68, 68, 0.2);
            }

            50% {
                box-shadow: 0 0 10px rgba(239, 68, 68, 0.8),
                    0 0 20px rgba(239, 68, 68, 0.6),
                    0 0 30px rgba(239, 68, 68, 0.4);
            }
        }

        .glow-pulse-blue {
            animation: glow-pulse-blue 2s ease-in-out infinite;
        }

        @keyframes glow-pulse-blue {

            0%,
            100% {
                box-shadow: 0 0 5px rgba(59, 130, 246, 0.5),
                    0 0 10px rgba(59, 130, 246, 0.3),
                    0 0 15px rgba(59, 130, 246, 0.2);
            }

            50% {
                box-shadow: 0 0 10px rgba(59, 130, 246, 0.8),
                    0 0 20px rgba(59, 130, 246, 0.6),
                    0 0 30px rgba(59, 130, 246, 0.4);
            }
        }

        /* üí´ Shimmer Effect for Loading States */
        .shimmer {
            background: linear-gradient(90deg,
                    rgba(255, 255, 255, 0.05) 0%,
                    rgba(255, 255, 255, 0.1) 50%,
                    rgba(255, 255, 255, 0.05) 100%);
            background-size: 200% 100%;
            animation: shimmer 1.5s infinite;
        }

        @keyframes shimmer {
            0% {
                background-position: -200% 0;
            }

            100% {
                background-position: 200% 0;
            }
        }

        /* üîí Pr√©vention du scroll horizontal sur tous les appareils */
        html,
        body {
            overflow-x: hidden;
            max-width: 100%;
            position: relative;
        }

        html {
            width: 100%;
        }

        body {
            width: 100%;
            margin: 0;
            padding: 0;
        }

        /* Emp√™cher tout d√©bordement des √©l√©ments enfants */
        #root {
            overflow-x: hidden;
            max-width: 100%;
        }

        /* üì± MOBILE - COMPACT VIEW for Global Overview */
        @media (max-width: 768px) {

            /* Compact global scaling for dashboard view */
            html {
                font-size: 55%;
                overflow-x: hidden;
                max-width: 100vw;
            }

            body {
                padding: 6px;
                overflow-x: hidden;
                max-width: 100vw;
                width: 100%;
            }

            /* Compact header */
            header {
                padding: 10px !important;
            }

            header img {
                width: 36px !important;
                height: 36px !important;
            }

            header h1 {
                font-size: 1.3rem !important;
            }

            header p {
                font-size: 0.65rem !important;
            }

            /* Ticker banner compact */
            .ticker-content>div {
                padding: 6px 10px !important;
                font-size: 0.65rem !important;
            }

            /* Navigation tabs - horizontal scroll */
            nav {
                overflow-x: auto !important;
                -webkit-overflow-scrolling: touch !important;
                scrollbar-width: none !important;
                padding: 6px !important;
            }

            nav::-webkit-scrollbar {
                display: none;
            }

            nav button {
                flex-shrink: 0 !important;
                white-space: nowrap !important;
                padding: 10px 14px !important;
                font-size: 0.75rem !important;
            }

            /* Tables: horizontal scroll */
            table {
                display: block !important;
                overflow-x: auto !important;
                -webkit-overflow-scrolling: touch !important;
                white-space: nowrap !important;
                font-size: 0.7rem !important;
            }

            /* Buttons slightly larger for touch */
            button,
            .btn,
            a[class*="btn"] {
                min-height: 36px !important;
                padding: 8px 12px !important;
            }

            /* Input fields prevent iOS zoom */
            input,
            textarea,
            select {
                font-size: 16px !important;
                /* Prevent zoom on focus */
                padding: 8px !important;
                min-height: 36px !important;
            }

            /* Compact card spacing */
            .space-y-6>*+* {
                margin-top: 12px !important;
            }

            .space-y-4>*+* {
                margin-top: 8px !important;
            }

            .space-y-2>*+* {
                margin-top: 4px !important;
            }

            .p-6 {
                padding: 12px !important;
            }

            .p-4 {
                padding: 8px !important;
            }

            .p-3 {
                padding: 6px !important;
            }

            .p-2 {
                padding: 4px !important;
            }

            /* Gap reduction */
            .gap-6 {
                gap: 12px !important;
            }

            .gap-4 {
                gap: 8px !important;
            }

            .gap-2 {
                gap: 4px !important;
            }

            /* Grid stays but more compact */
            .grid {
                gap: 8px !important;
            }

            /* Charts and images responsive */
            img,
            canvas,
            svg {
                max-width: 100% !important;
                height: auto !important;
            }
        }

        .seeking-alpha-card {
            background: linear-gradient(135deg, #1f1f1f 0%, #2d2d2d 100%);
        }

        .stocks-news-card {
            background: linear-gradient(135deg, #059669 0%, #10b981 100%);
        }

        .line-clamp-2 {
            display: -webkit-box;
            -webkit-line-clamp: 2;
            line-clamp: 2;
            -webkit-box-orient: vertical;
        }

        /* Scrollbar personnalis√©e */
        .scrollbar-thin {
            scrollbar-width: thin;
        }

        .scrollbar-thin::-webkit-scrollbar {
            width: 6px;
            height: 6px;
        }

        .scrollbar-thin::-webkit-scrollbar-track {
            background: #f1f5f9;
            border-radius: 3px;
        }

        .scrollbar-thin::-webkit-scrollbar-thumb {
            background: #94a3b8;
            border-radius: 3px;
        }

        .scrollbar-thin::-webkit-scrollbar-thumb:hover {
            background: #64748b;
        }

        /* Dark mode scrollbar */
        .dark .scrollbar-thin::-webkit-scrollbar-track {
            background: #1e293b;
        }

        .dark .scrollbar-thin::-webkit-scrollbar-thumb {
            background: #475569;
        }

        .dark .scrollbar-thin::-webkit-scrollbar-thumb:hover {
            background: #64748b;
        }

        .line-clamp-3 {
            display: -webkit-box;
            -webkit-line-clamp: 3;
            line-clamp: 3;
            -webkit-box-orient: vertical;
            overflow: hidden;
        }

        .news-card {
            transition: all 0.3s ease;
        }

        .news-card:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 25px rgba(0, 0, 0, 0.3);
        }

        /* Effets visuels - ripple sur boutons */
        .btn-ripple {
            position: relative;
            overflow: hidden;
        }

        .ripple-circle {
            position: absolute;
            border-radius: 50%;
            pointer-events: none;
            background: rgba(59, 130, 246, 0.45);
            /* blue */
            transform: scale(0);
            animation: ripple 600ms ease-out;
        }

        @keyframes ripple {
            to {
                transform: scale(3);
                opacity: 0;
            }
        }

        /* Animation intro Emma */
        @keyframes emma-intro-fade {
            from {
                opacity: 0;
            }

            to {
                opacity: 1;
            }
        }

        @keyframes emma-zoom-in {
            0% {
                transform: scale(0.85);
                opacity: 0;
            }

            100% {
                transform: scale(1);
                opacity: 1;
            }
        }

        .emma-intro-overlay {
            animation: emma-intro-fade 300ms ease-out;
        }

        .emma-intro-image {
            animation: emma-zoom-in 800ms ease-out;
        }
    
        /* üì± Touch-friendly Grid Layout */
        .react-grid-layout {
            touch-action: pan-y;
        }
        
        .react-grid-item {
            touch-action: none;
            -webkit-user-select: none;
            user-select: none;
        }
        
        .react-grid-item.react-draggable-dragging {
            z-index: 100;
            opacity: 0.9;
        }
        
        /* Resize handle in edit mode - made very visible */
        .react-resizable-handle {
            width: 24px !important;
            height: 24px !important;
            position: absolute !important;
            bottom: 0 !important;
            right: 0 !important;
            cursor: se-resize !important;
            background: linear-gradient(135deg, transparent 50%, #10b981 50%) !important;
            border-radius: 0 0 8px 0 !important;
            z-index: 100 !important;
        }
        
        .react-resizable-handle::after {
            content: '' !important;
            position: absolute !important;
            bottom: 4px !important;
            right: 4px !important;
            width: 8px !important;
            height: 8px !important;
            border-right: 2px solid white !important;
            border-bottom: 2px solid white !important;
        }
        
        .react-resizable-handle:hover {
            background: linear-gradient(135deg, transparent 50%, #34d399 50%) !important;
        }
        
        @media (max-width: 768px) {
            .react-resizable-handle {
                width: 32px !important;
                height: 32px !important;
            }
            
            /* Larger touch targets on mobile */
            button, .btn, [role="button"] {
                min-height: 44px;
                min-width: 44px;
            }
        }
        
        @media (max-width: 480px) {
            /* Stack widgets on very small screens */
            .react-grid-item {
                position: relative !important;
                width: 100% !important;
                transform: none !important;
                left: 0 !important;
            }
        }

    </style>

    <!-- üîê Auth Guard - Protection du Dashboard -->
    <script src="/js/auth-guard.js"></script>
    <style>
        /* üíé EMMA IA DESIGN SYSTEM - GLOBAL STYLES */
        
        /* Glassmorphism Button Standard */
        .btn-emma {
            background: linear-gradient(135deg, rgba(255, 255, 255, 0.05) 0%, rgba(255, 255, 255, 0.01) 100%);
            -webkit-backdrop-filter: blur(16px);
            backdrop-filter: blur(16px);
            border: 1px solid rgba(255, 255, 255, 0.1);
            color: #e2e8f0;
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            position: relative;
            overflow: hidden;
        }

        .btn-emma:hover {
            background: linear-gradient(135deg, rgba(255, 255, 255, 0.1) 0%, rgba(255, 255, 255, 0.05) 100%);
            border-color: rgba(255, 255, 255, 0.2);
            color: white;
            transform: translateY(-2px) scale(1.02);
            box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.3), 0 4px 6px -2px rgba(0, 0, 0, 0.15);
        }

        .btn-emma:active {
            transform: translateY(0) scale(0.98);
        }

        /* Blue Accent Variation */
        .btn-emma-primary {
            background: linear-gradient(135deg, rgba(59, 130, 246, 0.2) 0%, rgba(37, 99, 235, 0.1) 100%);
            border: 1px solid rgba(59, 130, 246, 0.3);
            color: #bfdbfe;
        }

        .btn-emma-primary:hover {
            background: linear-gradient(135deg, rgba(59, 130, 246, 0.3) 0%, rgba(37, 99, 235, 0.2) 100%);
            border-color: rgba(59, 130, 246, 0.5);
            color: white;
            box-shadow: 0 0 20px rgba(59, 130, 246, 0.3);
        }

        /* Green/Emerald Accent */
        .btn-emma-success {
            background: linear-gradient(135deg, rgba(16, 185, 129, 0.2) 0%, rgba(5, 150, 105, 0.1) 100%);
            border: 1px solid rgba(16, 185, 129, 0.3);
            color: #d1fae5;
        }

        .btn-emma-success:hover {
            background: linear-gradient(135deg, rgba(16, 185, 129, 0.3) 0%, rgba(5, 150, 105, 0.2) 100%);
            border-color: rgba(16, 185, 129, 0.5);
            color: white;
            box-shadow: 0 0 20px rgba(16, 185, 129, 0.3);
        }

        /* Glimmer/Shine Animation */
        .btn-glimmer::after {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 200%;
            height: 100%;
            background: linear-gradient(
                90deg,
                transparent,
                rgba(255, 255, 255, 0.1),
                transparent
            );
            transform: skewX(-20deg);
            transition: 0.5s;
        }

        .btn-glimmer:hover::after {
            animation: glimmer 1s;
        }

        @keyframes glimmer {
            0% { left: -100%; }
            100% { left: 100%; }
        }

        /* --- PREMIUM UI UTILITIES (JLab‚Ñ¢) --- */
        .glass-card {
            background: rgba(10, 14, 39, 0.6);
            -webkit-backdrop-filter: blur(12px);
            backdrop-filter: blur(12px);
            border: 1px solid rgba(255, 255, 255, 0.08);
            box-shadow: 0 8px 32px 0 rgba(0, 0, 0, 0.37);
        }
        
        .light .glass-card {
            background: rgba(255, 255, 255, 0.6);
            border: 1px solid rgba(0, 0, 0, 0.05);
            box-shadow: 0 8px 32px 0 rgba(31, 38, 135, 0.07);
        }

        .glow-pulse {
            animation: glow-pulse 2s infinite;
        }

        @keyframes glow-pulse {
            0% { box-shadow: 0 0 5px rgba(16, 185, 129, 0.2); }
            50% { box-shadow: 0 0 20px rgba(16, 185, 129, 0.4); }
            100% { box-shadow: 0 0 5px rgba(16, 185, 129, 0.2); }
        }

        .text-gradient {
            background: linear-gradient(135deg, #10b981 0%, #3b82f6 100%);
            -webkit-background-clip: text;
            background-clip: text;
            -webkit-text-fill-color: transparent;
        }

        .hover-lift {
            transition: transform 0.2s ease-out, box-shadow 0.2s ease-out;
        }

        .hover-lift:hover {
            transform: translateY(-4px);
            box-shadow: 0 12px 24px -8px rgba(0, 0, 0, 0.5);
        }

        /* Footer Info Bar Styles - Now at TOP */
        #footer-info-bar {
            position: fixed;
            top: 12px;
            left: 50%;
            transform: translateX(-50%);
            background: rgba(15, 23, 42, 0.85);
            -webkit-backdrop-filter: blur(8px);
            backdrop-filter: blur(8px);
            border: 1px solid rgba(255, 255, 255, 0.15);
            color: #cbd5e1;
            padding: 6px 16px;
            font-size: 11px;
            border-radius: 99px;
            z-index: 9999;
            pointer-events: none;
            opacity: 0.9;
            font-family: 'Plus Jakarta Sans', sans-serif;
            text-align: center;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.2);
            display: flex;
            align-items: center;
            gap: 8px;
            transition: all 0.3s ease;
        }

        #footer-info-bar .brand {
            font-weight: 600;
            color: #fff;
        }

        #footer-info-bar .separator {
            opacity: 0.3;
        }

        /* Secondary Nav Specifics */
        .emma-nav-item {
            position: relative;
            isolation: isolate;
        }
        
        .emma-nav-item::before {
            content: '';
            position: absolute;
            inset: 0;
            background: linear-gradient(45deg, transparent 5%, rgba(255,255,255,0.03) 50%, transparent 95%);
            z-index: -1;
            transition: opacity 0.3s;
            opacity: 0;
        }
        
        .emma-nav-item:hover::before {
            opacity: 1;
        }
    
        /* üì± Touch-friendly Grid Layout */
        .react-grid-layout {
            touch-action: pan-y;
        }
        
        .react-grid-item {
            touch-action: none;
            -webkit-user-select: none;
            user-select: none;
        }
        
        .react-grid-item.react-draggable-dragging {
            z-index: 100;
            opacity: 0.9;
        }
        
        /* Resize handle in edit mode - made very visible */
        .react-resizable-handle {
            width: 24px !important;
            height: 24px !important;
            position: absolute !important;
            bottom: 0 !important;
            right: 0 !important;
            cursor: se-resize !important;
            background: linear-gradient(135deg, transparent 50%, #10b981 50%) !important;
            border-radius: 0 0 8px 0 !important;
            z-index: 100 !important;
        }
        
        .react-resizable-handle::after {
            content: '' !important;
            position: absolute !important;
            bottom: 4px !important;
            right: 4px !important;
            width: 8px !important;
            height: 8px !important;
            border-right: 2px solid white !important;
            border-bottom: 2px solid white !important;
        }
        
        .react-resizable-handle:hover {
            background: linear-gradient(135deg, transparent 50%, #34d399 50%) !important;
        }
        
        @media (max-width: 768px) {
            .react-resizable-handle {
                width: 32px !important;
                height: 32px !important;
            }
            
            /* Larger touch targets on mobile */
            button, .btn, [role="button"] {
                min-height: 44px;
                min-width: 44px;
            }
        }
        
        @media (max-width: 480px) {
            /* Stack widgets on very small screens */
            .react-grid-item {
                position: relative !important;
                width: 100% !important;
                transform: none !important;
                left: 0 !important;
            }
        }

    </style>
</head>

<body class="min-h-screen bg-black m-0 p-0">
    <div id="root" class="min-h-screen w-full"></div>

    <!-- Stock Analysis Components (fixed API routing) -->
    <!-- <script src="/js/dashboard/stockAnalysisAPI-FIXED.js"></script> -->
    <!-- <script type="text/babel" src="/js/dashboard/components/StockAnalysisModal.js"></script> -->

    <!-- Advanced Analysis Components -->
    <!-- <script type="text/babel" src="/js/dashboard/components/PeerComparisonModal.js"></script> -->
    <!-- <script type="text/babel" src="/js/dashboard/components/ScenarioAnalysisModal.js"></script> -->
    <!-- <script type="text/babel" src="/js/dashboard/components/AdvancedScreenerModal.js"></script> -->

    <!-- NEW: Enhanced Analysis Modals with Full API Integration -->
    <!-- <script type="text/babel" src="/js/dashboard/components/AIStockAnalysisModal.js"></script> -->
    <!-- <script type="text/babel" src="/js/dashboard/components/NewsAndSentimentModal.js"></script> -->
    <!-- <script type="text/babel" src="/js/dashboard/components/AnalystConsensusModal.js"></script> -->
    <!-- <script type="text/babel" src="/js/dashboard/components/EarningsCalendarModal.js"></script> -->
    <!-- <script type="text/babel" src="/js/dashboard/components/EconomicEventsModal.js"></script> -->
    <!-- <script type="text/babel" src="/js/dashboard/components/WatchlistScreenerModal.js"></script> -->

    <!-- <script src="/js/dashboard/pdfExporter.js"></script> -->

    <!-- Main Tabs Components -->
    <!-- DUPLICATE REMOVED: EconomicCalendarTab.js & FastGraphsTab.js already loaded above -->
    <!-- <script type="text/babel" src="/js/dashboard/components/tabs/EconomicCalendarTab.js"></script> -->
    <!-- <script type="text/babel" src="/js/dashboard/components/tabs/FastGraphsTab.js"></script> -->
    <!-- <script type="text/babel" src="/js/dashboard/components/tabs/AdvancedAnalysisModals.js"></script> -->
    <!-- <script type="text/babel" src="/js/dashboard/components/tabs/AdvancedAnalysisTab.js"></script> -->

    <!-- Announcement Bars System (Gemini-powered) -->
    <!-- <script type="text/babel" src="/js/dashboard/components/AnnouncementBar.js"></script> -->
    <!-- <script type="text/babel" src="/js/dashboard/components/AnnouncementBarManager.js"></script> -->
    <!-- DUPLICATE REMOVED: ThemeSelector.js already loaded above -->
    <!-- <script type="text/babel" src="/js/dashboard/components/ThemeSelector.js"></script> -->
    <!-- <script type="text/babel" src="/js/dashboard/components/TradingViewTicker.js"></script> -->
    <!-- <script type="text/babel" src="/js/dashboard/components/MobileNavOverlay.js"></script> -->
    <!-- <script type="text/babel" src="/js/dashboard/components/SecondaryNavEditor.js"></script> -->
    <!-- <script type="text/babel" src="js/dashboard/components/ComponentManager.js"></script> -->



    <!-- Signal that all components are loaded -->
    <script>
        // Mark components as ready after all scripts are parsed
        window.__COMPONENTS_READY__ = true;
        window.dispatchEvent(new CustomEvent('components-ready'));
        console.log('‚úÖ All component scripts loaded, components-ready event dispatched');
    </script>

    <!-- Inline bundle - Using Babel (confirmed working) -->
    <script type="text/babel" data-presets="react" src="/js/dashboard/app-inline.js?v=3.2"></script>

    <!-- Global Real-time Sync (must load after app-inline to dispatch events) -->
    <script src="/js/dashboard/realtime-sync.js"></script>
    <!-- Debug / Context Indicator -->
    <div id="footer-info-bar">
        <span class="brand">GOB Apps</span>
        <span class="separator">|</span>
        <span id="footer-context">public/beta-combined-dashboard.html</span>
    </div>
    <!-- FAILSAFE: Force remove loader if app hangs -->
    <script>
        setTimeout(function() {
            const loader = document.getElementById('loadingOverlay');
            if (loader && loader.style.display !== 'none') {
                console.warn('‚ö†Ô∏è Failsafe triggered: Removing stuck loader');
                loader.style.opacity = '0';
                setTimeout(() => loader.style.display = 'none', 500);
            }
        }, 10000); // 10 seconds max load time
    </script>
    <!-- <script type="text/babel" src="/js/dashboard/components/DevTimer.js"></script> -->
</body>

</html>
