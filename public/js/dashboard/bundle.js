(function(f,mt){"use strict";var $e={exports:{}},je={};var Ie;function ut(){if(Ie)return je;Ie=1;var s=f,n=Symbol.for("react.element"),I=Symbol.for("react.fragment"),_=Object.prototype.hasOwnProperty,o=s.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,Z={key:!0,ref:!0,__self:!0,__source:!0};function a(A,T,V){var P,u={},K=null,G=null;V!==void 0&&(K=""+V),T.key!==void 0&&(K=""+T.key),T.ref!==void 0&&(G=T.ref);for(P in T)_.call(T,P)&&!Z.hasOwnProperty(P)&&(u[P]=T[P]);if(A&&A.defaultProps)for(P in T=A.defaultProps,T)u[P]===void 0&&(u[P]=T[P]);return{$$typeof:n,type:A,key:K,ref:G,props:u,_owner:o.current}}return je.Fragment=I,je.jsx=a,je.jsxs=a,je}var Ne={};var Be;function ht(){return Be||(Be=1,process.env.NODE_ENV!=="production"&&(function(){var s=f,n=Symbol.for("react.element"),I=Symbol.for("react.portal"),_=Symbol.for("react.fragment"),o=Symbol.for("react.strict_mode"),Z=Symbol.for("react.profiler"),a=Symbol.for("react.provider"),A=Symbol.for("react.context"),T=Symbol.for("react.forward_ref"),V=Symbol.for("react.suspense"),P=Symbol.for("react.suspense_list"),u=Symbol.for("react.memo"),K=Symbol.for("react.lazy"),G=Symbol.for("react.offscreen"),R=Symbol.iterator,B="@@iterator";function S(r){if(r===null||typeof r!="object")return null;var b=R&&r[R]||r[B];return typeof b=="function"?b:null}var E=s.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED;function C(r){{for(var b=arguments.length,w=new Array(b>1?b-1:0),D=1;D<b;D++)w[D-1]=arguments[D];F("error",r,w)}}function F(r,b,w){{var D=E.ReactDebugCurrentFrame,X=D.getStackAddendum();X!==""&&(b+="%s",w=w.concat([X]));var te=w.map(function(Y){return String(Y)});te.unshift("Warning: "+b),Function.prototype.apply.call(console[r],console,te)}}var H=!1,i=!1,d=!1,y=!1,L=!1,ee;ee=Symbol.for("react.module.reference");function Q(r){return!!(typeof r=="string"||typeof r=="function"||r===_||r===Z||L||r===o||r===V||r===P||y||r===G||H||i||d||typeof r=="object"&&r!==null&&(r.$$typeof===K||r.$$typeof===u||r.$$typeof===a||r.$$typeof===A||r.$$typeof===T||r.$$typeof===ee||r.getModuleId!==void 0))}function h(r,b,w){var D=r.displayName;if(D)return D;var X=b.displayName||b.name||"";return X!==""?w+"("+X+")":w}function O(r){return r.displayName||"Context"}function l(r){if(r==null)return null;if(typeof r.tag=="number"&&C("Received an unexpected object in getComponentNameFromType(). This is likely a bug in React. Please file an issue."),typeof r=="function")return r.displayName||r.name||null;if(typeof r=="string")return r;switch(r){case _:return"Fragment";case I:return"Portal";case Z:return"Profiler";case o:return"StrictMode";case V:return"Suspense";case P:return"SuspenseList"}if(typeof r=="object")switch(r.$$typeof){case A:var b=r;return O(b)+".Consumer";case a:var w=r;return O(w._context)+".Provider";case T:return h(r,r.render,"ForwardRef");case u:var D=r.displayName||null;return D!==null?D:l(r.type)||"Memo";case K:{var X=r,te=X._payload,Y=X._init;try{return l(Y(te))}catch{return null}}}return null}var m=Object.assign,c=0,$,M,re,p,W,t,g;function x(){}x.__reactDisabledLog=!0;function j(){{if(c===0){$=console.log,M=console.info,re=console.warn,p=console.error,W=console.group,t=console.groupCollapsed,g=console.groupEnd;var r={configurable:!0,enumerable:!0,value:x,writable:!0};Object.defineProperties(console,{info:r,log:r,warn:r,error:r,group:r,groupCollapsed:r,groupEnd:r})}c++}}function k(){{if(c--,c===0){var r={configurable:!0,enumerable:!0,writable:!0};Object.defineProperties(console,{log:m({},r,{value:$}),info:m({},r,{value:M}),warn:m({},r,{value:re}),error:m({},r,{value:p}),group:m({},r,{value:W}),groupCollapsed:m({},r,{value:t}),groupEnd:m({},r,{value:g})})}c<0&&C("disabledDepth fell below zero. This is a bug in React. Please file an issue.")}}var J=E.ReactCurrentDispatcher,le;function ae(r,b,w){{if(le===void 0)try{throw Error()}catch(X){var D=X.stack.trim().match(/\n( *(at )?)/);le=D&&D[1]||""}return`
`+le+r}}var v=!1,N;{var U=typeof WeakMap=="function"?WeakMap:Map;N=new U}function q(r,b){if(!r||v)return"";{var w=N.get(r);if(w!==void 0)return w}var D;v=!0;var X=Error.prepareStackTrace;Error.prepareStackTrace=void 0;var te;te=J.current,J.current=null,j();try{if(b){var Y=function(){throw Error()};if(Object.defineProperty(Y.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(Y,[])}catch(ce){D=ce}Reflect.construct(r,[],Y)}else{try{Y.call()}catch(ce){D=ce}r.call(Y.prototype)}}else{try{throw Error()}catch(ce){D=ce}r()}}catch(ce){if(ce&&D&&typeof ce.stack=="string"){for(var z=ce.stack.split(`
`),de=D.stack.split(`
`),ne=z.length-1,ie=de.length-1;ne>=1&&ie>=0&&z[ne]!==de[ie];)ie--;for(;ne>=1&&ie>=0;ne--,ie--)if(z[ne]!==de[ie]){if(ne!==1||ie!==1)do if(ne--,ie--,ie<0||z[ne]!==de[ie]){var xe=`
`+z[ne].replace(" at new "," at ");return r.displayName&&xe.includes("<anonymous>")&&(xe=xe.replace("<anonymous>",r.displayName)),typeof r=="function"&&N.set(r,xe),xe}while(ne>=1&&ie>=0);break}}}finally{v=!1,J.current=te,k(),Error.prepareStackTrace=X}var ve=r?r.displayName||r.name:"",pe=ve?ae(ve):"";return typeof r=="function"&&N.set(r,pe),pe}function oe(r,b,w){return q(r,!1)}function ge(r){var b=r.prototype;return!!(b&&b.isReactComponent)}function me(r,b,w){if(r==null)return"";if(typeof r=="function")return q(r,ge(r));if(typeof r=="string")return ae(r);switch(r){case V:return ae("Suspense");case P:return ae("SuspenseList")}if(typeof r=="object")switch(r.$$typeof){case T:return oe(r.render);case u:return me(r.type,b,w);case K:{var D=r,X=D._payload,te=D._init;try{return me(te(X),b,w)}catch{}}}return""}var ue=Object.prototype.hasOwnProperty,se={},be=E.ReactDebugCurrentFrame;function he(r){if(r){var b=r._owner,w=me(r.type,r._source,b?b.type:null);be.setExtraStackFrame(w)}else be.setExtraStackFrame(null)}function Me(r,b,w,D,X){{var te=Function.call.bind(ue);for(var Y in r)if(te(r,Y)){var z=void 0;try{if(typeof r[Y]!="function"){var de=Error((D||"React class")+": "+w+" type `"+Y+"` is invalid; it must be a function, usually from the `prop-types` package, but received `"+typeof r[Y]+"`.This often happens because of typos such as `PropTypes.function` instead of `PropTypes.func`.");throw de.name="Invariant Violation",de}z=r[Y](b,Y,D,w,null,"SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED")}catch(ne){z=ne}z&&!(z instanceof Error)&&(he(X),C("%s: type specification of %s `%s` is invalid; the type checker function must return `null` or an `Error` but returned a %s. You may have forgotten to pass an argument to the type checker creator (arrayOf, instanceOf, objectOf, oneOf, oneOfType, and shape all require an argument).",D||"React class",w,Y,typeof z),he(null)),z instanceof Error&&!(z.message in se)&&(se[z.message]=!0,he(X),C("Failed %s type: %s",w,z.message),he(null))}}}var Pe=Array.isArray;function ye(r){return Pe(r)}function Te(r){{var b=typeof Symbol=="function"&&Symbol.toStringTag,w=b&&r[Symbol.toStringTag]||r.constructor.name||"Object";return w}}function Se(r){try{return tt(r),!1}catch{return!0}}function tt(r){return""+r}function rt(r){if(Se(r))return C("The provided key is an unsupported type %s. This value must be coerced to a string before before using it here.",Te(r)),tt(r)}var st=E.ReactCurrentOwner,Wt={key:!0,ref:!0,__self:!0,__source:!0},at,nt;function Yt(r){if(ue.call(r,"ref")){var b=Object.getOwnPropertyDescriptor(r,"ref").get;if(b&&b.isReactWarning)return!1}return r.ref!==void 0}function Gt(r){if(ue.call(r,"key")){var b=Object.getOwnPropertyDescriptor(r,"key").get;if(b&&b.isReactWarning)return!1}return r.key!==void 0}function Jt(r,b){typeof r.ref=="string"&&st.current}function Xt(r,b){{var w=function(){at||(at=!0,C("%s: `key` is not a prop. Trying to access it will result in `undefined` being returned. If you need to access the same value within the child component, you should pass it as a different prop. (https://reactjs.org/link/special-props)",b))};w.isReactWarning=!0,Object.defineProperty(r,"key",{get:w,configurable:!0})}}function Kt(r,b){{var w=function(){nt||(nt=!0,C("%s: `ref` is not a prop. Trying to access it will result in `undefined` being returned. If you need to access the same value within the child component, you should pass it as a different prop. (https://reactjs.org/link/special-props)",b))};w.isReactWarning=!0,Object.defineProperty(r,"ref",{get:w,configurable:!0})}}var Qt=function(r,b,w,D,X,te,Y){var z={$$typeof:n,type:r,key:b,ref:w,props:Y,_owner:te};return z._store={},Object.defineProperty(z._store,"validated",{configurable:!1,enumerable:!1,writable:!0,value:!1}),Object.defineProperty(z,"_self",{configurable:!1,enumerable:!1,writable:!1,value:D}),Object.defineProperty(z,"_source",{configurable:!1,enumerable:!1,writable:!1,value:X}),Object.freeze&&(Object.freeze(z.props),Object.freeze(z)),z};function Zt(r,b,w,D,X){{var te,Y={},z=null,de=null;w!==void 0&&(rt(w),z=""+w),Gt(b)&&(rt(b.key),z=""+b.key),Yt(b)&&(de=b.ref,Jt(b,X));for(te in b)ue.call(b,te)&&!Wt.hasOwnProperty(te)&&(Y[te]=b[te]);if(r&&r.defaultProps){var ne=r.defaultProps;for(te in ne)Y[te]===void 0&&(Y[te]=ne[te])}if(z||de){var ie=typeof r=="function"?r.displayName||r.name||"Unknown":r;z&&Xt(Y,ie),de&&Kt(Y,ie)}return Qt(r,z,de,X,D,st.current,Y)}}var Le=E.ReactCurrentOwner,it=E.ReactDebugCurrentFrame;function fe(r){if(r){var b=r._owner,w=me(r.type,r._source,b?b.type:null);it.setExtraStackFrame(w)}else it.setExtraStackFrame(null)}var _e;_e=!1;function Re(r){return typeof r=="object"&&r!==null&&r.$$typeof===n}function lt(){{if(Le.current){var r=l(Le.current.type);if(r)return`

Check the render method of \``+r+"`."}return""}}function er(r){return""}var ot={};function tr(r){{var b=lt();if(!b){var w=typeof r=="string"?r:r.displayName||r.name;w&&(b=`

Check the top-level render call using <`+w+">.")}return b}}function dt(r,b){{if(!r._store||r._store.validated||r.key!=null)return;r._store.validated=!0;var w=tr(b);if(ot[w])return;ot[w]=!0;var D="";r&&r._owner&&r._owner!==Le.current&&(D=" It was passed a child from "+l(r._owner.type)+"."),fe(r),C('Each child in a list should have a unique "key" prop.%s%s See https://reactjs.org/link/warning-keys for more information.',w,D),fe(null)}}function ct(r,b){{if(typeof r!="object")return;if(ye(r))for(var w=0;w<r.length;w++){var D=r[w];Re(D)&&dt(D,b)}else if(Re(r))r._store&&(r._store.validated=!0);else if(r){var X=S(r);if(typeof X=="function"&&X!==r.entries)for(var te=X.call(r),Y;!(Y=te.next()).done;)Re(Y.value)&&dt(Y.value,b)}}}function rr(r){{var b=r.type;if(b==null||typeof b=="string")return;var w;if(typeof b=="function")w=b.propTypes;else if(typeof b=="object"&&(b.$$typeof===T||b.$$typeof===u))w=b.propTypes;else return;if(w){var D=l(b);Me(w,r.props,"prop",D,r)}else if(b.PropTypes!==void 0&&!_e){_e=!0;var X=l(b);C("Component %s declared `PropTypes` instead of `propTypes`. Did you misspell the property assignment?",X||"Unknown")}typeof b.getDefaultProps=="function"&&!b.getDefaultProps.isReactClassApproved&&C("getDefaultProps is only used on classic React.createClass definitions. Use a static property named `defaultProps` instead.")}}function sr(r){{for(var b=Object.keys(r.props),w=0;w<b.length;w++){var D=b[w];if(D!=="children"&&D!=="key"){fe(r),C("Invalid prop `%s` supplied to `React.Fragment`. React.Fragment can only have `key` and `children` props.",D),fe(null);break}}r.ref!==null&&(fe(r),C("Invalid attribute `ref` supplied to `React.Fragment`."),fe(null))}}var xt={};function gt(r,b,w,D,X,te){{var Y=Q(r);if(!Y){var z="";(r===void 0||typeof r=="object"&&r!==null&&Object.keys(r).length===0)&&(z+=" You likely forgot to export your component from the file it's defined in, or you might have mixed up default and named imports.");var de=er();de?z+=de:z+=lt();var ne;r===null?ne="null":ye(r)?ne="array":r!==void 0&&r.$$typeof===n?(ne="<"+(l(r.type)||"Unknown")+" />",z=" Did you accidentally export a JSX literal instead of a component?"):ne=typeof r,C("React.jsx: type is invalid -- expected a string (for built-in components) or a class/function (for composite components) but got: %s.%s",ne,z)}var ie=Zt(r,b,w,X,te);if(ie==null)return ie;if(Y){var xe=b.children;if(xe!==void 0)if(D)if(ye(xe)){for(var ve=0;ve<xe.length;ve++)ct(xe[ve],r);Object.freeze&&Object.freeze(xe)}else C("React.jsx: Static children should always be an array. You are likely explicitly calling React.jsxs or React.jsxDEV. Use the Babel transform instead.");else ct(xe,r)}if(ue.call(b,"key")){var pe=l(r),ce=Object.keys(b).filter(function(dr){return dr!=="key"}),Oe=ce.length>0?"{key: someKey, "+ce.join(": ..., ")+": ...}":"{key: someKey}";if(!xt[pe+Oe]){var or=ce.length>0?"{"+ce.join(": ..., ")+": ...}":"{}";C(`A props object containing a "key" prop is being spread into JSX:
  let props = %s;
  <%s {...props} />
React keys must be passed directly to JSX without using spread:
  let props = %s;
  <%s key={someKey} {...props} />`,Oe,pe,or,pe),xt[pe+Oe]=!0}}return r===_?sr(ie):rr(ie),ie}}function ar(r,b,w){return gt(r,b,w,!0)}function nr(r,b,w){return gt(r,b,w,!1)}var ir=nr,lr=ar;Ne.Fragment=_,Ne.jsx=ir,Ne.jsxs=lr})()),Ne}var Ue;function bt(){return Ue||(Ue=1,process.env.NODE_ENV==="production"?$e.exports=ut():$e.exports=ht()),$e.exports}var e=bt();const qe=typeof window<"u"&&window.Icon?window.Icon:()=>null,pt=({isDarkMode:s=!0,isProfessionalMode:n=!1})=>{const I=()=>{sessionStorage.clear(),localStorage.clear(),window.location.href="/login.html"};return e.jsx("div",{className:"space-y-6",children:e.jsxs("div",{className:`backdrop-blur-sm rounded-lg p-6 border transition-colors duration-300 ${s?"bg-gray-900 border-gray-700":"bg-gray-50 border-gray-200"}`,children:[e.jsxs("h2",{className:`text-2xl font-bold mb-6 transition-colors duration-300 ${s?"text-white":"text-gray-900"}`,children:[e.jsx(qe,{emoji:"âš™ï¸",name:"Settings",size:24,className:"mr-2 inline-block"}),"ParamÃ¨tres"]}),e.jsx("div",{className:"space-y-4",children:e.jsxs("div",{className:`p-4 rounded-lg border transition-colors duration-300 ${s?"bg-gray-800 border-gray-700":"bg-white border-gray-200"}`,children:[e.jsx("h3",{className:`text-lg font-semibold mb-2 transition-colors duration-300 ${s?"text-white":"text-gray-900"}`,children:"Compte"}),e.jsx("p",{className:`text-sm mb-4 transition-colors durÃ©e-300 ${s?"text-gray-400":"text-gray-600"}`,children:"GÃ©rez votre compte et vos prÃ©fÃ©rences"}),e.jsxs("button",{onClick:I,className:`w-full px-6 py-3 rounded-lg font-semibold transition-all duration-300 ${s?"bg-red-600 hover:bg-red-700 text-white":"bg-red-500 hover:bg-red-600 text-white"} shadow-lg hover:shadow-xl transform hover:scale-105`,children:[e.jsx(qe,{emoji:"ðŸšª",name:"LogOut",size:20,className:"mr-2 inline-block"}),"Se dÃ©connecter"]})]})})]})})},yt=()=>typeof window<"u"?window.BetaCombinedDashboard||{}:{},ft=()=>typeof window<"u"?window.BetaCombinedDashboardData||{}:{},vt=()=>typeof window<"u"?window.DASHBOARD_UTILS||{}:{},jt=()=>typeof window<"u"?window.DASHBOARD_CONSTANTS||{}:{},Nt=()=>typeof window<"u"&&window.LucideIcon?window.LucideIcon:()=>null,wt=()=>typeof window<"u"&&window.IconoirIcon?window.IconoirIcon:()=>null,St=s=>Array.isArray(s)?s:[],Ce=s=>typeof s=="function"?s:async()=>{},$t=(s,n=()=>{})=>typeof s=="function"?s:n,ze=()=>{const s=yt(),n=ft(),I=vt(),_=jt(),o=Nt(),Z=wt(),{isDarkMode:a=!0,tickers:A=[],stockData:T={},newsData:V=[],tickerLatestNews:P={},tickerMoveReasons:u={},loading:K=!1,lastUpdate:G=null,loadTickersFromSupabase:R,fetchNews:B,refreshAllStocks:S,fetchLatestNewsForTickers:E,setActiveTab:C}=s,F=St(V),H=Ce(R),i=Ce(B),d=Ce(S),y=Ce(E),L=$t(C),ee=n.getCompanyLogo||s.getCompanyLogo||(()=>null),Q=I.cleanText||(t=>t||""),h=I.getNewsIcon||(()=>({icon:"Info",color:"text-gray-400"})),[O,l]=f.useState("list"),[m,c]=f.useState(null),$=I.renderMarketBadge?t=>I.renderMarketBadge(t,a):t=>{const g=t==="bull";return e.jsx("span",{className:`w-9 h-9 rounded-full flex items-center justify-center text-xl font-semibold shadow-inner border ${g?a?"bg-lime-900/70 border-lime-500/40 text-lime-300":"bg-lime-100 border-lime-400 text-lime-700":a?"bg-rose-900/70 border-rose-500/40 text-rose-200":"bg-rose-100 border-rose-300 text-rose-700"}`,children:g?"ðŸ‚":"ðŸ»"})},M=t=>{if(!t)return 50;const g=t.toLowerCase();return["bloomberg","reuters","wall street journal","wsj","financial times","ft"].some(J=>g.includes(J))?95:["cnbc","marketwatch","barron","seeking alpha","yahoo finance","morningstar","the economist"].some(J=>g.includes(J))?82:["forbes","benzinga","investor","zacks","motley fool","nasdaq","business insider"].some(J=>g.includes(J))?65:40},re=t=>t>=90?"premium":t>=75?"high":t>=50?"medium":"low",p=t=>!t&&t!==0?"N/A":t>=1e9?(t/1e9).toFixed(2)+"B":t>=1e6?(t/1e6).toFixed(2)+"M":t>=1e3?(t/1e3).toFixed(2)+"K":t.toLocaleString("fr-FR"),W=_.companyNames||{};return e.jsxs("div",{className:"space-y-6",children:[A.length===0&&e.jsxs("div",{className:`p-6 rounded-xl border-2 transition-colors duration-300 ${a?"bg-gray-800 border-yellow-500/30":"bg-yellow-50 border-yellow-200"}`,children:[e.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[e.jsx("span",{className:"text-2xl",children:"â³"}),e.jsx("h3",{className:`text-lg font-semibold ${a?"text-white":"text-gray-900"}`,children:"Chargement des donnÃ©es..."})]}),e.jsx("p",{className:`text-sm ${a?"text-gray-400":"text-gray-600"}`,children:"Les titres et nouvelles sont en cours de chargement. Veuillez patienter quelques instants."}),e.jsx("button",{onClick:async()=>{await H(),await i()},className:`mt-4 px-4 py-2 rounded-lg font-semibold transition-all duration-300 ${a?"bg-blue-600 hover:bg-blue-700 text-white":"bg-blue-500 hover:bg-blue-600 text-white"}`,children:"ðŸ”„ Forcer le chargement"})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("h2",{className:`text-2xl font-bold transition-colors duration-300 ${a?"text-white":"text-gray-900"}`,children:"ðŸ“Š Titres & nouvelles"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs("div",{className:`flex gap-1 p-1 rounded-lg transition-colors duration-300 ${a?"bg-gray-800":"bg-gray-200"}`,children:[e.jsx("button",{onClick:()=>l("list"),className:`px-3 py-1 rounded text-sm font-medium transition-all duration-200 ${O==="list"?a?"bg-blue-600 text-white":"bg-blue-500 text-white":a?"text-gray-400 hover:text-white":"text-gray-600 hover:text-gray-900"}`,children:"ðŸ“‹ Liste"}),e.jsx("button",{onClick:()=>l("cards"),className:`px-3 py-1 rounded text-sm font-medium transition-all duration-200 ${O==="cards"?a?"bg-blue-600 text-white":"bg-blue-500 text-white":a?"text-gray-400 hover:text-white":"text-gray-600 hover:text-gray-900"}`,children:"ðŸŽ´ Cartes"}),e.jsx("button",{onClick:()=>l("table"),className:`px-3 py-1 rounded text-sm font-medium transition-all duration-200 ${O==="table"?a?"bg-blue-600 text-white":"bg-blue-500 text-white":a?"text-gray-400 hover:text-white":"text-gray-600 hover:text-gray-900"}`,children:"ðŸ“Š Tableau"})]}),e.jsx("button",{onClick:async()=>{await d(),await i(),await y()},disabled:K,className:`px-4 py-2 rounded-lg font-semibold transition-all duration-300 disabled:opacity-50 ${a?"bg-gray-800 hover:bg-gray-700 text-white":"bg-gray-700 hover:bg-gray-600 text-white"}`,children:K?"â³ Actualisation...":"ðŸ”„ Actualiser"})]})]}),G&&e.jsxs("p",{className:"text-gray-400 text-sm",children:["DerniÃ¨re mise Ã  jour: ",new Date(G).toLocaleString("fr-FR")]}),A.length>0&&e.jsxs("div",{className:`mt-6 p-6 rounded-xl transition-colors duration-300 ${a?"bg-gradient-to-br from-gray-800 to-gray-900 border border-gray-700":"bg-gradient-to-br from-white to-gray-50 border border-gray-200"}`,children:[e.jsxs("h3",{className:`text-xl font-bold mb-4 flex items-center gap-2 ${a?"text-white":"text-gray-900"}`,children:[e.jsx(o,{name:"Fire",className:"w-6 h-6 text-orange-500"}),"Top Movers du Jour"]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:`p-3 sm:p-4 rounded-lg ${a?"bg-green-500/10 border border-green-500/30":"bg-green-50 border border-green-200"}`,children:[e.jsxs("h4",{className:`text-base sm:text-sm font-bold mb-3 sm:mb-3 flex items-center gap-3 ${a?"text-green-400":"text-green-700"}`,children:[e.jsx(o,{name:"TrendingUp",className:"w-5 h-5"}),$("bull"),"Top Gainers"]}),e.jsx("div",{className:"space-y-2.5 sm:space-y-2",children:A.map(t=>({ticker:t,change:T[t]?.dp||0,price:T[t]?.c||0})).filter(t=>t.change>0).sort((t,g)=>g.change-t.change).slice(0,5).map((t,g)=>e.jsx("div",{className:`flex items-start justify-between p-2 sm:p-2 rounded cursor-pointer transition-all hover:scale-[1.02] ${a?"hover:bg-green-500/20":"hover:bg-green-100"}`,onClick:()=>{setSelectedStock(t.ticker),L("intellistocks")},children:e.jsxs("div",{className:"flex-1 min-w-0 pr-2",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx("div",{className:`w-6 h-6 rounded-full flex items-center justify-center text-xs font-bold flex-shrink-0 ${a?"bg-green-500/30 text-green-300":"bg-green-100 text-green-700"}`,children:g+1}),e.jsx("img",{src:ee(t.ticker),alt:t.ticker,className:"w-6 h-6 rounded flex-shrink-0",onError:x=>x.target.style.display="none"}),e.jsx("span",{className:`font-mono font-bold text-sm ${a?"text-white":"text-gray-900"} flex-shrink-0`,children:t.ticker}),e.jsxs("div",{className:"text-green-500 font-bold text-sm ml-auto flex-shrink-0",children:["+",t.change.toFixed(2),"% â†‘"]}),e.jsxs("div",{className:`text-xs ${a?"text-gray-400":"text-gray-600"} flex-shrink-0`,children:["$",t.price.toFixed(2)]})]}),e.jsx("div",{className:`mt-1 ml-8 min-h-[20px] ${a?"text-gray-400":"text-gray-600"}`,children:(()=>{const x=extractMoveReason(t.ticker,t.change);return x&&x!==""?e.jsx("div",{className:`text-xs flex items-start gap-2 leading-relaxed ${a?"text-gray-300":"text-gray-700"}`,children:u[t.ticker]?.source==="Finviz AI"?e.jsxs("span",{className:"inline-flex items-center gap-1.5 flex-wrap",children:[e.jsx("span",{className:"px-1.5 py-0.5 rounded text-[10px] font-semibold bg-blue-500/20 text-blue-300 border border-blue-500/30 flex-shrink-0",children:"AI"}),e.jsx("span",{className:"leading-relaxed break-words",children:x})]}):e.jsxs("span",{className:"inline-flex items-start gap-1.5",children:[e.jsx("span",{className:"text-blue-400 flex-shrink-0 text-sm",children:"ðŸ“°"}),e.jsx("span",{className:"leading-relaxed break-words",children:x})]})}):e.jsx("div",{className:`text-xs italic ${a?"text-gray-600":"text-gray-400"}`,children:"Chargement des explications..."})})()})]})},t.ticker))})]}),e.jsxs("div",{className:`p-4 rounded-lg ${a?"bg-red-500/10 border border-red-500/30":"bg-red-50 border border-red-200"}`,children:[e.jsxs("h4",{className:`text-sm font-bold mb-3 flex items-center gap-3 ${a?"text-red-400":"text-red-700"}`,children:[e.jsx(o,{name:"TrendingDown",className:"w-5 h-5"}),$("bear"),"Top Losers"]}),e.jsx("div",{className:"space-y-2",children:A.map(t=>({ticker:t,change:T[t]?.dp||0,price:T[t]?.c||0})).filter(t=>t.change<0).sort((t,g)=>t.change-g.change).slice(0,5).map((t,g)=>e.jsx("div",{className:`flex items-start justify-between p-2 rounded cursor-pointer transition-all hover:scale-[1.02] ${a?"hover:bg-red-500/20":"hover:bg-red-100"}`,onClick:()=>{setSelectedStock(t.ticker),L("intellistocks")},children:e.jsxs("div",{className:"flex-1 min-w-0 pr-2",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx("div",{className:`w-6 h-6 rounded-full flex items-center justify-center text-xs font-bold flex-shrink-0 ${a?"bg-red-500/30 text-red-300":"bg-red-100 text-red-700"}`,children:g+1}),e.jsx("img",{src:ee(t.ticker),alt:t.ticker,className:"w-6 h-6 rounded flex-shrink-0",onError:x=>x.target.style.display="none"}),e.jsx("span",{className:`font-mono font-bold text-sm ${a?"text-white":"text-gray-900"} flex-shrink-0`,children:t.ticker}),e.jsxs("div",{className:"text-red-500 font-bold text-sm ml-auto flex-shrink-0",children:[t.change.toFixed(2),"% â†“"]}),e.jsxs("div",{className:`text-xs ${a?"text-gray-400":"text-gray-600"} flex-shrink-0`,children:["$",t.price.toFixed(2)]})]}),e.jsx("div",{className:`mt-1 ml-8 min-h-[20px] ${a?"text-gray-400":"text-gray-600"}`,children:(()=>{const x=extractMoveReason(t.ticker,t.change);return x&&x!==""?e.jsx("div",{className:`text-xs flex items-start gap-2 leading-relaxed ${a?"text-gray-300":"text-gray-700"}`,children:u[t.ticker]?.source==="Finviz AI"?e.jsxs("span",{className:"inline-flex items-center gap-1.5 flex-wrap",children:[e.jsx("span",{className:"px-1.5 py-0.5 rounded text-[10px] font-semibold bg-blue-500/20 text-blue-300 border border-blue-500/30 flex-shrink-0",children:"AI"}),e.jsx("span",{className:"leading-relaxed break-words",children:x})]}):e.jsxs("span",{className:"inline-flex items-start gap-1.5",children:[e.jsx("span",{className:"text-blue-400 flex-shrink-0 text-sm",children:"ðŸ“°"}),e.jsx("span",{className:"leading-relaxed break-words",children:x})]})}):e.jsx("div",{className:`text-xs italic ${a?"text-gray-600":"text-gray-400"}`,children:"Chargement des explications..."})})()})]})},t.ticker))})]})]})]}),A.length>0&&Object.keys(T).length>0&&e.jsxs("div",{className:`mt-6 p-6 rounded-xl transition-colors duration-300 ${a?"bg-gradient-to-br from-gray-800 to-gray-900 border border-gray-700":"bg-gradient-to-br from-white to-gray-50 border border-gray-200"}`,children:[e.jsxs("h3",{className:`text-xl font-bold mb-4 flex items-center gap-2 ${a?"text-white":"text-gray-900"}`,children:[e.jsx(o,{name:"Target",className:"w-6 h-6 text-indigo-500"}),"Analyses & Opinions d'Analystes"]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:A.map(t=>{const x=T[t]?.recommendation?.[0];if(!x)return null;const j=(x.buy||0)+(x.hold||0)+(x.sell||0)+(x.strongBuy||0)+(x.strongSell||0);if(j===0)return null;const k=(x.strongBuy||0)*2+(x.buy||0),J=(x.strongSell||0)*2+(x.sell||0),le=x.hold||0;let ae="Hold",v="yellow";return k>J&&k>le?(ae="Buy",v="green"):J>k&&J>le&&(ae="Sell",v="red"),{ticker:t,totalAnalysts:j,consensus:ae,consensusColor:v,buyScore:k,sellScore:J,holdScore:le,recommendation:x}}).filter(t=>t!==null).sort((t,g)=>g.totalAnalysts-t.totalAnalysts).slice(0,6).map(t=>e.jsxs("div",{className:`p-4 rounded-lg cursor-pointer transition-all hover:scale-[1.02] ${a?"bg-gray-700/50 hover:bg-gray-700/70 border border-gray-600":"bg-white hover:bg-gray-50 border border-gray-200"}`,onClick:()=>{setSelectedStock(t.ticker),L("intellistocks")},children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("img",{src:ee(t.ticker),alt:t.ticker,className:"w-8 h-8 rounded",onError:g=>g.target.style.display="none"}),e.jsx("span",{className:`font-mono font-bold text-lg ${a?"text-white":"text-gray-900"}`,children:t.ticker})]}),e.jsx("div",{className:`px-3 py-1 rounded-full text-xs font-bold ${t.consensusColor==="green"?"bg-green-500/20 text-green-500 border border-green-500/30":t.consensusColor==="red"?"bg-red-500/20 text-red-500 border border-red-500/30":"bg-yellow-500/20 text-yellow-500 border border-yellow-500/30"}`,children:t.consensus==="Buy"?"ACHAT":t.consensus==="Sell"?"VENTE":"CONSERVER"})]}),e.jsxs("div",{className:`text-sm mb-2 ${a?"text-gray-300":"text-gray-600"}`,children:[t.totalAnalysts," analyste",t.totalAnalysts>1?"s":""]}),e.jsxs("div",{className:"space-y-1.5",children:[t.recommendation.strongBuy>0&&e.jsxs("div",{className:"flex items-center justify-between text-xs",children:[e.jsx("span",{className:a?"text-gray-400":"text-gray-600",children:"Strong Buy"}),e.jsx("span",{className:"font-bold text-green-500",children:t.recommendation.strongBuy})]}),t.recommendation.buy>0&&e.jsxs("div",{className:"flex items-center justify-between text-xs",children:[e.jsx("span",{className:a?"text-gray-400":"text-gray-600",children:"Buy"}),e.jsx("span",{className:"font-bold text-green-400",children:t.recommendation.buy})]}),t.recommendation.hold>0&&e.jsxs("div",{className:"flex items-center justify-between text-xs",children:[e.jsx("span",{className:a?"text-gray-400":"text-gray-600",children:"Hold"}),e.jsx("span",{className:"font-bold text-yellow-500",children:t.recommendation.hold})]}),t.recommendation.sell>0&&e.jsxs("div",{className:"flex items-center justify-between text-xs",children:[e.jsx("span",{className:a?"text-gray-400":"text-gray-600",children:"Sell"}),e.jsx("span",{className:"font-bold text-red-400",children:t.recommendation.sell})]}),t.recommendation.strongSell>0&&e.jsxs("div",{className:"flex items-center justify-between text-xs",children:[e.jsx("span",{className:a?"text-gray-400":"text-gray-600",children:"Strong Sell"}),e.jsx("span",{className:"font-bold text-red-500",children:t.recommendation.strongSell})]})]}),e.jsx("div",{className:`mt-3 pt-3 border-t ${a?"border-gray-600":"border-gray-200"}`,children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(o,{name:"ArrowUpRight",className:"w-3 h-3 text-gray-400"}),e.jsx("span",{className:`text-xs ${a?"text-gray-400":"text-gray-600"}`,children:"Cliquer pour analyse complÃ¨te"})]})})]},t.ticker))}),A.filter(t=>{const x=T[t]?.recommendation?.[0];return x&&(x.buy||0)+(x.hold||0)+(x.sell||0)+(x.strongBuy||0)+(x.strongSell||0)>0}).length===0&&e.jsxs("div",{className:`text-center py-8 ${a?"text-gray-400":"text-gray-600"}`,children:[e.jsx(o,{name:"AlertCircle",className:"w-12 h-12 mx-auto mb-3 opacity-50"}),e.jsx("p",{children:"Aucune recommandation d'analyste disponible pour le moment"}),e.jsx("p",{className:"text-sm mt-2",children:"Les donnÃ©es seront chargÃ©es lors de la prochaine actualisation"})]})]}),O==="list"&&e.jsx("div",{className:"mt-8",children:e.jsxs("div",{className:`backdrop-blur-sm rounded-2xl p-8 border-2 shadow-2xl transition-colors duration-300 ${a?"bg-gradient-to-br from-gray-800/90 to-gray-900/90 border-blue-500/30 shadow-blue-500/10":"bg-gradient-to-br from-white/95 to-gray-50/95 border-blue-400/40 shadow-blue-400/10"}`,children:[e.jsx("h2",{className:`text-2xl font-bold mb-6 transition-colors duration-300 ${a?"text-white":"text-gray-900"}`,children:"ðŸ“Š Titres - Vue Liste"}),A.length===0?e.jsxs("div",{className:`text-center py-12 ${a?"text-gray-400":"text-gray-600"}`,children:[e.jsx("p",{className:"text-lg font-semibold mb-2",children:"Aucun titre disponible"}),e.jsx("p",{className:"text-sm",children:"Les donnÃ©es sont en cours de chargement..."})]}):Object.keys(T).length===0?e.jsxs("div",{className:`text-center py-12 ${a?"text-gray-400":"text-gray-600"}`,children:[e.jsx("p",{className:"text-lg font-semibold mb-2",children:"Chargement des donnÃ©es de marchÃ©..."}),e.jsx("p",{className:"text-sm",children:"Veuillez patienter quelques instants"})]}):e.jsx("div",{className:"space-y-3",children:A.map(t=>{const g=T[t]||{},x=g.c||g.price||0;g.d||g.change;const j=g.dp||g.changePercent||0,k=j>=0;return e.jsxs("div",{className:`flex items-center justify-between p-4 rounded-xl cursor-pointer transition-all hover:scale-[1.01] ${a?"bg-gray-700/50 hover:bg-gray-700/70 border border-gray-600":"bg-white hover:bg-gray-50 border border-gray-200"}`,onClick:()=>{setSelectedStock(t),L("intellistocks")},children:[e.jsxs("div",{className:"flex items-center gap-4 flex-1",children:[e.jsx("img",{src:ee(t),alt:t,className:"w-12 h-12 rounded-lg",onError:J=>J.target.style.display="none"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:`font-mono font-bold text-lg ${a?"text-white":"text-gray-900"}`,children:t}),e.jsx("div",{className:`text-sm ${a?"text-gray-400":"text-gray-600"}`,children:W[t]||t}),e.jsx("div",{className:`mt-2 min-h-[20px] ${a?"text-gray-400":"text-gray-600"}`,children:extractMoveReason(t,j)?e.jsx("div",{className:`text-xs flex items-start gap-2 ${a?"text-gray-300":"text-gray-700"}`,children:u[t]?.source==="Finviz AI"?e.jsxs("span",{className:"inline-flex items-center gap-1.5 flex-wrap",children:[e.jsx("span",{className:"px-1.5 py-0.5 rounded text-[10px] font-semibold bg-blue-500/20 text-blue-300 border border-blue-500/30 flex-shrink-0",children:"AI"}),e.jsx("span",{className:"leading-relaxed",children:extractMoveReason(t,j)})]}):e.jsxs("span",{className:"inline-flex items-start gap-1.5",children:[e.jsx("span",{className:"text-blue-400 flex-shrink-0",children:"ðŸ“°"}),e.jsx("span",{className:"leading-relaxed",children:extractMoveReason(t,j)})]})}):P[t]?e.jsxs("div",{className:"text-xs text-gray-500",children:["ðŸ“° ",e.jsx("span",{className:"italic",children:P[t].title.length>70?P[t].title.substring(0,70)+"...":P[t].title})]}):e.jsx("div",{className:`text-xs italic ${a?"text-gray-600":"text-gray-400"}`,children:"Chargement des explications..."})})]})]}),e.jsxs("div",{className:"text-right",children:[e.jsxs("div",{className:`font-bold text-xl ${a?"text-white":"text-gray-900"}`,children:["$",x.toFixed(2)]}),e.jsxs("div",{className:`font-semibold ${k?"text-green-500":"text-red-500"}`,children:[k?"+":"",j.toFixed(2),"%"]})]})]},t)})})]})}),O==="cards"&&e.jsx("div",{className:"mt-8",children:e.jsxs("div",{className:`backdrop-blur-sm rounded-2xl p-8 border-2 shadow-2xl transition-colors duration-300 ${a?"bg-gradient-to-br from-gray-800/90 to-gray-900/90 border-blue-500/30 shadow-blue-500/10":"bg-gradient-to-br from-white/95 to-gray-50/95 border-blue-400/40 shadow-blue-400/10"}`,children:[e.jsx("h2",{className:`text-2xl font-bold mb-6 transition-colors duration-300 ${a?"text-white":"text-gray-900"}`,children:"ðŸŽ´ Titres - Vue Cartes"}),A.length===0?e.jsxs("div",{className:`text-center py-12 ${a?"text-gray-400":"text-gray-600"}`,children:[e.jsx("p",{className:"text-lg font-semibold mb-2",children:"Aucun titre disponible"}),e.jsx("p",{className:"text-sm",children:"Les donnÃ©es sont en cours de chargement..."})]}):Object.keys(T).length===0?e.jsxs("div",{className:`text-center py-12 ${a?"text-gray-400":"text-gray-600"}`,children:[e.jsx("p",{className:"text-lg font-semibold mb-2",children:"Chargement des donnÃ©es de marchÃ©..."}),e.jsx("p",{className:"text-sm",children:"Veuillez patienter quelques instants"})]}):e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:A.map(t=>{const g=T[t]||{},x=g.c||g.price||0,j=g.d||g.change||0,k=g.dp||g.changePercent||0,J=g.h||0,le=g.l||0,ae=g.v||0,v=k>=0;return e.jsxs("div",{className:`p-6 rounded-xl cursor-pointer transition-all hover:scale-[1.02] ${a?"bg-gradient-to-br from-gray-700/50 to-gray-800/50 hover:from-gray-700/70 hover:to-gray-800/70 border border-gray-600":"bg-gradient-to-br from-white to-gray-50 hover:from-gray-50 hover:to-gray-100 border border-gray-200 shadow-lg"}`,onClick:()=>{setSelectedStock(t),L("intellistocks")},children:[e.jsxs("div",{className:"flex items-start justify-between mb-4",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("img",{src:ee(t),alt:t,className:"w-14 h-14 rounded-xl",onError:N=>N.target.style.display="none"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:`font-mono font-bold text-xl ${a?"text-white":"text-gray-900"}`,children:t}),e.jsx("div",{className:`text-xs ${a?"text-gray-400":"text-gray-600"}`,children:W[t]||t}),e.jsx("div",{className:`mt-2 min-h-[24px] ${a?"text-gray-400":"text-gray-600"}`,children:extractMoveReason(t,k)?e.jsx("div",{className:`text-xs flex items-start gap-2 ${a?"text-gray-300":"text-gray-700"}`,children:u[t]?.source==="Finviz AI"?e.jsxs("span",{className:"inline-flex items-center gap-1.5 flex-wrap",children:[e.jsx("span",{className:"px-1.5 py-0.5 rounded text-[10px] font-semibold bg-blue-500/20 text-blue-300 border border-blue-500/30 flex-shrink-0",children:"AI"}),e.jsx("span",{className:"leading-relaxed",children:extractMoveReason(t,k)})]}):e.jsxs("span",{className:"inline-flex items-start gap-1.5",children:[e.jsx("span",{className:"text-blue-400 flex-shrink-0",children:"ðŸ“°"}),e.jsx("span",{className:"leading-relaxed",children:extractMoveReason(t,k)})]})}):P[t]?e.jsxs("div",{className:"text-xs text-gray-500",children:["ðŸ“° ",e.jsx("span",{className:"italic",children:P[t].title.length>60?P[t].title.substring(0,60)+"...":P[t].title})]}):e.jsx("div",{className:`text-xs italic ${a?"text-gray-600":"text-gray-400"}`,children:"Chargement des explications..."})})]})]}),e.jsx("div",{className:`px-3 py-1 rounded-full text-xs font-bold ${v?"bg-green-500/20 text-green-500 border border-green-500/30":"bg-red-500/20 text-red-500 border border-red-500/30"}`,children:v?"â–²":"â–¼"})]}),e.jsxs("div",{className:"mb-4",children:[e.jsxs("div",{className:`text-3xl font-bold mb-1 ${a?"text-white":"text-gray-900"}`,children:["$",x.toFixed(2)]}),e.jsxs("div",{className:`text-lg font-semibold ${v?"text-green-500":"text-red-500"}`,children:[v?"+":"",j.toFixed(2)," (",v?"+":"",k.toFixed(2),"%)"]})]}),e.jsxs("div",{className:`grid grid-cols-2 gap-2 pt-4 border-t ${a?"border-gray-600":"border-gray-200"}`,children:[e.jsxs("div",{children:[e.jsx("div",{className:`text-xs ${a?"text-gray-400":"text-gray-600"}`,children:"Haut"}),e.jsxs("div",{className:`font-bold ${a?"text-white":"text-gray-900"}`,children:["$",J.toFixed(2)]})]}),e.jsxs("div",{children:[e.jsx("div",{className:`text-xs ${a?"text-gray-400":"text-gray-600"}`,children:"Bas"}),e.jsxs("div",{className:`font-bold ${a?"text-white":"text-gray-900"}`,children:["$",le.toFixed(2)]})]}),e.jsxs("div",{className:"col-span-2",children:[e.jsx("div",{className:`text-xs ${a?"text-gray-400":"text-gray-600"}`,children:"Volume"}),e.jsx("div",{className:`font-bold ${a?"text-white":"text-gray-900"}`,children:p(ae)})]})]})]},t)})})]})}),O==="table"&&e.jsx("div",{className:"mt-8",children:e.jsxs("div",{className:`backdrop-blur-sm rounded-2xl p-8 border-2 shadow-2xl transition-colors duration-300 ${a?"bg-gradient-to-br from-gray-800/90 to-gray-900/90 border-blue-500/30 shadow-blue-500/10":"bg-gradient-to-br from-white/95 to-gray-50/95 border-blue-400/40 shadow-blue-400/10"}`,children:[e.jsxs("div",{className:"text-center mb-6",children:[e.jsx("h2",{className:`text-2xl font-bold mb-3 transition-colors duration-300 ${a?"text-white":"text-gray-900"}`,children:"ðŸ“Š DonnÃ©es FinanciÃ¨res & ActualitÃ©s"}),e.jsxs("div",{className:`inline-flex items-center px-4 py-2 rounded-full text-sm font-semibold transition-colors duration-300 ${a?"bg-gray-600/20 text-gray-300 border border-gray-500/30":"bg-gray-700/80 text-gray-200 border border-gray-600/50"}`,children:[e.jsx("span",{className:"mr-2",children:"ðŸ”—"}),"Source: Finnhub API"]}),e.jsx("p",{className:`text-sm mt-3 transition-colors duration-300 ${a?"text-gray-300":"text-gray-600"}`,children:"DonnÃ©es en temps rÃ©el avec 3 actualitÃ©s par titre"})]}),e.jsx("div",{className:"overflow-x-auto max-h-[70vh] overflow-y-auto scrollbar-thin scrollbar-thumb-gray-400 scrollbar-track-gray-200 dark:scrollbar-thumb-gray-600 dark:scrollbar-track-gray-800 relative text-sm",children:e.jsxs("table",{className:"w-full text-sm",children:[e.jsx("thead",{children:e.jsxs("tr",{className:`border-b-2 transition-colors duration-300 ${a?"border-blue-500/50 bg-gray-900":"border-blue-400/50 bg-gray-100"}`,children:[e.jsx("th",{className:`text-left py-2 px-3 font-bold transition-colors duration-300 ${a?"text-blue-300":"text-blue-700"}`,children:"ðŸ“ˆ Ticker"}),e.jsx("th",{className:`text-left py-2 px-3 font-bold transition-colors duration-300 ${a?"text-blue-300":"text-blue-700"}`,children:"ðŸ’° Prix"}),e.jsx("th",{className:`text-left py-2 px-3 font-bold transition-colors duration-300 ${a?"text-blue-300":"text-blue-700"}`,children:"ðŸ“Š Change"}),e.jsx("th",{className:`text-left py-2 px-3 font-bold transition-colors duration-300 ${a?"text-blue-300":"text-blue-700"}`,children:"ðŸ“ˆ P/E"}),e.jsx("th",{className:`text-left py-2 px-3 font-bold transition-colors duration-300 ${a?"text-blue-300":"text-blue-700"}`,children:"ðŸ’Ž Dividende"}),e.jsx("th",{className:`text-left py-2 px-3 font-bold transition-colors duration-300 ${a?"text-blue-300":"text-blue-700"}`,children:"ðŸ¢ Secteur"}),e.jsx("th",{className:`text-left py-2 px-3 font-bold transition-colors duration-300 ${a?"text-blue-300":"text-blue-700"}`,children:"â­ Rating"}),e.jsx("th",{className:`text-left py-2 px-3 font-bold transition-colors duration-300 ${a?"text-blue-300":"text-blue-700"}`,children:"ðŸ˜Š Sentiment"}),e.jsx("th",{className:`text-left py-2 px-3 font-bold transition-colors duration-300 ${a?"text-blue-300":"text-blue-700"}`,children:"âš¡ Actions"})]})}),e.jsx("tbody",{children:A.map(t=>{const g=T[t],x=g?.c?`$${g.c.toFixed(2)}`:"N/A",j=g?.d?`${g.d>0?"+":""}${g.d.toFixed(2)}`:"N/A",k=g?.dp?`${g.dp>0?"+":""}${g.dp.toFixed(2)}%`:"N/A",J=g?.d>0?"text-green-400":g?.d<0?"text-red-400":"text-gray-400",le=g?.profile,ae=g?.fundamentals,v=ae?.peRatio?Number.isFinite(ae.peRatio)?ae.peRatio.toFixed(2):ae.peRatio:le?.pe?le.pe.toFixed(2):"N/A",N=ae?.dividendYield?`${(Number(ae.dividendYield)*100).toFixed(2)}%`:le?.dividend?`${(le.dividend*100).toFixed(2)}%`:"N/A",U=ae?.sector||le?.industry||"N/A",q=g?.recommendation,oe=q?.length>0?q[0].buy+q[0].strongBuy>q[0].sell+q[0].strongSell?"Achat":q[0].sell+q[0].strongSell>q[0].buy+q[0].strongBuy?"Vente":"Neutre":"N/A",ge=sortNewsByCredibility(F.filter(se=>(se.title+" "+se.description).toLowerCase().includes(t.toLowerCase()))).slice(0,2),me=(se,be)=>{const he=(se+" "+be).toLowerCase(),Me=["hausse","croissance","gain","profit","positif","amÃ©lioration","succÃ¨s","fort","solide"],Pe=["baisse","chute","perte","nÃ©gatif","dÃ©clin","faible","problÃ¨me","risque","inquiÃ©tude"],ye=Me.filter(Se=>he.includes(Se)).length,Te=Pe.filter(Se=>he.includes(Se)).length;return ye>Te?{sentiment:"Positif",color:"text-green-400"}:Te>ye?{sentiment:"NÃ©gatif",color:"text-red-400"}:{sentiment:"Neutre",color:"text-gray-400"}},ue=ge.length>0?me(ge[0].title,ge[0].description):{sentiment:"N/A"};return e.jsxs(f.Fragment,{children:[e.jsxs("tr",{className:`border-b-2 transition-all duration-300 hover:scale-[1.02] ${a?"border-gray-600/50 hover:bg-gradient-to-r hover:from-gray-800/80 hover:to-gray-700/80 hover:shadow-lg hover:shadow-blue-500/10":"border-gray-300/50 hover:bg-gradient-to-r hover:from-gray-50/80 hover:to-white/80 hover:shadow-lg hover:shadow-blue-400/10"}`,children:[e.jsx("td",{className:"py-4 px-3",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("img",{src:ee(t),alt:`${t} logo`,className:"w-8 h-8 rounded-lg shadow-md",onError:se=>{se.target.style.display="none"}}),e.jsx("span",{className:`font-mono font-bold text-xl transition-colors duration-300 ${a?"text-white":"text-gray-900"}`,children:t})]})}),e.jsx("td",{className:`py-2 px-3 font-bold transition-colors duration-300 ${a?"text-white":"text-gray-900"}`,children:x}),e.jsxs("td",{className:`py-2 px-3 font-semibold transition-colors duration-300 ${J}`,children:[j," (",k,")"]}),e.jsx("td",{className:`py-2 px-3 font-medium transition-colors duration-300 ${a?"text-gray-200":"text-gray-700"}`,children:v}),e.jsx("td",{className:`py-2 px-3 font-medium transition-colors duration-300 ${a?"text-green-300":"text-green-600"}`,children:N}),e.jsx("td",{className:`py-2 px-3 text-sm transition-colors duration-300 ${a?"text-gray-300":"text-gray-600"}`,children:cleanText(U)}),e.jsx("td",{className:"py-4 px-3",children:e.jsx("span",{className:`px-4 py-2 rounded-full text-sm font-bold transition-colors duration-300 ${oe==="Achat"?"bg-green-500 text-white":oe==="Vente"?"bg-red-500 text-white":"bg-yellow-500 text-black"}`,children:oe})}),e.jsx("td",{className:"py-4 px-3",children:e.jsxs("div",{className:`flex items-center gap-2 px-3 py-2 rounded-full transition-colors duration-300 ${ue.sentiment==="Positif"?"bg-green-100 text-green-800":ue.sentiment==="NÃ©gatif"?"bg-red-100 text-red-800":"bg-gray-100 text-gray-800"}`,children:[e.jsx("span",{className:"text-lg",children:ue.sentiment==="Positif"?"ðŸ˜Š":ue.sentiment==="NÃ©gatif"?"ðŸ˜Ÿ":"ðŸ˜"}),e.jsx("span",{className:"font-semibold",children:ue.sentiment})]})}),e.jsx("td",{className:"py-4 px-3",children:e.jsx("button",{onClick:()=>{setSelectedStock(t),L("intellistocks")},className:`px-4 py-2 text-xs font-semibold rounded-lg transition-all duration-300 hover:scale-[1.02] shadow ${a?"bg-gradient-to-r from-blue-600 to-blue-700 hover:from-blue-500 hover:to-blue-600 text-white shadow-blue-500/25":"bg-gradient-to-r from-blue-500 to-blue-600 hover:from-blue-400 hover:to-blue-500 text-white shadow-blue-400/25"}`,children:"ðŸ“Š Voir dans JLab"})})]}),finvizNews[t]&&e.jsx("tr",{className:`border-b-2 transition-all duration-300 ${a?"border-purple-500/30 bg-gradient-to-r from-purple-900/20 to-indigo-900/20 hover:from-purple-900/30 hover:to-indigo-900/30":"border-purple-400/30 bg-gradient-to-r from-purple-50/60 to-indigo-50/60 hover:from-purple-100/80 hover:to-indigo-100/80"}`,children:e.jsx("td",{colSpan:"9",className:"py-4 px-4",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:`p-2 rounded-full ${a?"bg-purple-500/20":"bg-purple-100"}`,children:e.jsx(o,{name:"Sparkles",className:"w-5 h-5 text-purple-500"})}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx("span",{className:`text-xs font-bold px-2 py-0.5 rounded ${a?"bg-purple-500/30 text-purple-300":"bg-purple-200 text-purple-700"}`,children:"ðŸ”¥ CE QUI BOUGE"}),e.jsx("span",{className:`text-xs ${a?"text-gray-400":"text-gray-600"}`,children:finvizNews[t].date})]}),e.jsx("p",{className:`text-sm font-medium leading-relaxed ${a?"text-gray-200":"text-gray-800"}`,children:finvizNews[t].headline}),finvizNews[t].link&&e.jsxs("a",{href:finvizNews[t].link,target:"_blank",rel:"noopener noreferrer",onClick:se=>se.stopPropagation(),className:`text-xs mt-2 inline-flex items-center gap-1 hover:underline ${a?"text-purple-400":"text-purple-600"}`,children:[e.jsx(o,{name:"ExternalLink",className:"w-3 h-3"}),"Lire l'article complet"]})]})]})})}),ge.map((se,be)=>e.jsx("tr",{className:`border-b-2 transition-all duration-300 hover:scale-[1.01] ${a?"border-gray-600/30 bg-gradient-to-r from-gray-800/40 to-gray-700/40 hover:from-gray-700/60 hover:to-gray-600/60":"border-gray-300/30 bg-gradient-to-r from-gray-50/60 to-white/60 hover:from-gray-100/80 hover:to-gray-50/80"}`,children:e.jsx("td",{colSpan:"9",className:"py-6 px-4",children:e.jsx("div",{className:`transition-colors duration-300 ${a?"text-gray-200":"text-gray-700"}`,children:e.jsxs("div",{className:"flex items-start gap-4",children:[(()=>{const he=h(se.title,se.description,se.sentiment);return e.jsx("div",{className:`p-3 rounded-full transition-colors duration-300 ${a?"bg-gray-600/20":"bg-gray-200/60"}`,children:e.jsx(o,{name:he.icon,className:`w-6 h-6 ${he.color}`})})})(),e.jsxs("div",{className:"flex-1",children:[e.jsx("h5",{className:`font-bold text-lg mb-3 transition-colors duration-300 ${a?"text-white":"text-gray-900"}`,children:se.url?e.jsx("a",{href:se.url,target:"_blank",rel:"noopener noreferrer",className:`hover:underline transition-colors duration-300 ${a?"text-blue-300 hover:text-blue-200":"text-blue-600 hover:text-blue-700"}`,children:Q(se.title)}):Q(se.title)}),e.jsx("p",{className:`text-base mb-4 leading-relaxed transition-colors duration-300 ${a?"text-gray-300":"text-gray-600"}`,children:Q(se.description)}),e.jsxs("div",{className:`flex items-center gap-4 text-sm transition-colors duration-300 ${a?"text-gray-400":"text-gray-500"}`,children:[e.jsx("div",{className:`flex items-center gap-2 px-3 py-1 rounded-full transition-colors duration-300 ${a?"bg-gray-800":"bg-gray-200"}`,children:e.jsx("span",{className:"font-semibold",children:se.source?.name||"Source inconnue"})}),e.jsxs("div",{className:`flex items-center gap-2 px-3 py-1 rounded-full transition-colors duration-300 ${a?"bg-gray-800":"bg-gray-200"}`,children:[e.jsx("span",{children:"ðŸ•’"}),e.jsx("span",{children:se.publishedAt?new Date(se.publishedAt).toLocaleString("fr-FR"):"Date inconnue"})]}),se.url&&e.jsx("a",{href:se.url,target:"_blank",rel:"noopener noreferrer",className:`px-4 py-2 rounded-full font-semibold transition-all duration-300 hover:scale-105 ${a?"bg-gray-800 hover:bg-gray-700 text-white shadow-lg shadow-gray-500/25":"bg-gray-700 hover:bg-gray-600 text-white shadow-lg shadow-gray-400/25"}`,children:"ðŸ“– Lire l'article"})]})]})]})})})},`${t}-news-${be}`))]},t)})})]})}),e.jsxs("div",{className:`text-center mt-8 p-6 rounded-xl transition-colors duration-300 ${a?"bg-gradient-to-r from-blue-900/30 to-purple-900/30 border border-blue-500/20":"bg-gradient-to-r from-blue-100/80 to-purple-100/80 border border-blue-300/30"}`,children:[e.jsx("div",{className:`text-lg font-semibold mb-2 transition-colors duration-300 ${a?"text-blue-300":"text-blue-700"}`,children:"ðŸ“œ Section Principale - DonnÃ©es FinanciÃ¨res"}),e.jsx("div",{className:`text-sm transition-colors duration-300 ${a?"text-gray-300":"text-gray-600"}`,children:"Faites dÃ©filer pour voir toutes les donnÃ©es â€¢ Source: Finnhub API â€¢ 3 actualitÃ©s par titre"}),e.jsx("div",{className:`text-xs mt-2 transition-colors duration-300 ${a?"text-gray-400":"text-gray-500"}`,children:"DonnÃ©es mises Ã  jour automatiquement toutes les 5 minutes"})]})]})}),A.length===0&&e.jsx("div",{className:"bg-yellow-900/20 backdrop-blur-sm rounded-lg p-6 border border-yellow-300/20",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("span",{className:"text-yellow-400 text-2xl",children:"âš ï¸"}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-yellow-200 font-semibold",children:"Aucun ticker configurÃ©"}),e.jsx("p",{className:"text-yellow-300/80 text-sm mt-1",children:"Ajoutez des tickers dans l'onglet Seeking Alpha pour voir les donnÃ©es ici."})]})]})}),F.length>0&&e.jsx("div",{className:"mt-12",children:e.jsxs("div",{className:`backdrop-blur-sm rounded-2xl p-8 border-2 shadow-2xl transition-colors duration-300 ${a?"bg-gradient-to-br from-gray-800/90 to-gray-900/90 border-purple-500/30 shadow-purple-500/10":"bg-gradient-to-br from-white/95 to-gray-50/95 border-purple-400/40 shadow-purple-400/10"}`,children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx("h2",{className:`text-2xl font-bold transition-colors duration-300 ${a?"text-white":"text-gray-900"}`,children:"ðŸ“° ActualitÃ©s du MarchÃ©"}),e.jsxs("div",{className:`px-4 py-2 rounded-full text-sm font-semibold transition-colors duration-300 ${a?"bg-purple-500/20 text-purple-300 border border-purple-500/30":"bg-purple-100 text-purple-700 border border-purple-300"}`,children:[F.length," articles"]})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:F.slice(0,12).map((t,g)=>{const x=M(t.source?.name||""),j=re(x);return e.jsxs("div",{role:"button",tabIndex:0,onClick:()=>{t.url},onKeyDown:k=>{(k.key==="Enter"||k.key===" ")&&t.url&&k.preventDefault()},className:`p-6 rounded-xl cursor-pointer transition-all hover:scale-[1.02] focus:outline-none focus:ring-2 focus:ring-emerald-500 ${a?"bg-gradient-to-br from-gray-700/50 to-gray-800/50 hover:from-gray-700/70 hover:to-gray-800/70 border border-gray-600":"bg-gradient-to-br from-white to-gray-50 hover:from-gray-50 hover:to-gray-100 border border-gray-200 shadow-lg"}`,children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsx("div",{className:`px-3 py-1 rounded-full text-xs font-bold ${j==="premium"?"bg-yellow-500/20 text-yellow-500 border border-yellow-500/30":j==="high"?"bg-green-500/20 text-green-500 border border-green-500/30":j==="medium"?"bg-blue-500/20 text-blue-500 border border-blue-500/30":j==="low"?"bg-gray-500/20 text-gray-500 border border-gray-500/30":"bg-red-500/20 text-red-500 border border-red-500/30"}`,children:t.source?.name||"Source inconnue"}),e.jsx("div",{className:`text-xs ${a?"text-gray-400":"text-gray-600"}`,children:new Date(t.publishedAt).toLocaleDateString("fr-FR",{month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"})})]}),e.jsx("h3",{className:`font-bold text-lg mb-3 line-clamp-2 transition-colors duration-300 ${a?"text-white":"text-gray-900"}`,children:t.title}),t.description&&e.jsx("p",{className:`text-sm mb-4 line-clamp-3 transition-colors duration-300 ${a?"text-gray-300":"text-gray-600"}`,children:t.description}),e.jsxs("div",{className:"flex gap-2 mt-4",children:[e.jsxs("a",{href:t.url,target:"_blank",rel:"noopener noreferrer",onClick:k=>k.stopPropagation(),className:`flex-1 px-3 py-2 rounded-lg text-center text-sm font-semibold transition-all ${a?"bg-blue-600 hover:bg-blue-500 text-white":"bg-blue-500 hover:bg-blue-600 text-white"}`,children:[e.jsx(Z,{name:"ExternalLink",className:"w-4 h-4 inline mr-1"}),"Lire"]}),e.jsxs("button",{onClick:k=>{k.stopPropagation(),summarizeWithEmma(t.url,t.title)},className:`flex-1 px-3 py-2 rounded-lg text-center text-sm font-semibold transition-all ${a?"bg-purple-600 hover:bg-purple-500 text-white":"bg-purple-500 hover:bg-purple-600 text-white"}`,children:[e.jsx(Z,{name:"Brain",className:"w-4 h-4 inline mr-1"}),"Emma"]})]})]},g)})}),F.length>12&&e.jsx("div",{className:"text-center mt-6",children:e.jsxs("button",{onClick:()=>L("markets-economy"),className:`px-6 py-3 rounded-lg font-semibold transition-all ${a?"bg-purple-600 hover:bg-purple-500 text-white":"bg-purple-500 hover:bg-purple-600 text-white"}`,children:["Voir toutes les actualitÃ©s (",F.length,") â†’"]})})]})})]})};window.StocksNewsTab=ze;const Ct=()=>typeof window<"u"&&window.EmailBriefingsTab?f.createElement(window.EmailBriefingsTab):e.jsx("div",{className:"p-4 rounded border bg-yellow-50 border-yellow-200 text-yellow-800",children:"EmailBriefingsTab module indisponible (component global manquant)."}),At=()=>typeof window<"u"&&window.AskEmmaTab?f.createElement(window.AskEmmaTab):f.createElement("div",{className:"p-4 rounded border bg-yellow-50 border-yellow-200 text-yellow-800"},"AskEmmaTab module indisponible (component global manquant)."),kt=()=>typeof window<"u"&&window.IntelliStocksTab?f.createElement(window.IntelliStocksTab):e.jsx("div",{className:"p-4 rounded border bg-yellow-50 border-yellow-200 text-yellow-800",children:"IntelliStocksTab module indisponible (component global manquant)."}),Tt=()=>typeof window<"u"?window.BetaCombinedDashboard||{}:{},Et=()=>typeof window<"u"?window.DASHBOARD_UTILS||{}:{},Dt=()=>typeof window<"u"&&window.LucideIcon?window.LucideIcon:()=>null,Ft=()=>typeof window<"u"&&typeof window.summarizeWithEmma=="function"?window.summarizeWithEmma:null,Mt=s=>Array.isArray(s)?s:[],we=(s,n=()=>{})=>typeof s=="function"?s:n,Ve=()=>{const s=Tt(),n=Et(),I=Dt(),_=Ft(),{isDarkMode:o=!0,newsData:Z=[],loading:a=!1,lastUpdate:A=null,fetchNews:T}=s,V=Mt(Z),P=we(T,async()=>{}),u=we(n.cleanText,p=>p||""),K=we(n.getNewsIcon,()=>({icon:"Info",color:"text-gray-400"})),G=we(n.isFrenchArticle,()=>!1),R=we(n.getSourceCredibility,()=>50),B=(p,W)=>{p&&(_?_(p,W):typeof window<"u"&&window.open(p,"_blank","noopener,noreferrer"))},[S,E]=f.useState(!1),[C,F]=f.useState("all"),[H,i]=f.useState("all"),[d,y]=f.useState("all"),[L,ee]=f.useState([]),Q=f.useRef(null),h=f.useRef(null),O=f.useRef(null),l=["Bloomberg","Reuters","WSJ","CNBC","MarketWatch","La Presse","Les Affaires"],m=["US","Canada","Europe","Asie"],c=["Tech","Finance","Ã‰nergie","SantÃ©","Crypto","IA"];f.useEffect(()=>{if(Q.current){Q.current.innerHTML="";const p=document.createElement("script");p.src="https://s3.tradingview.com/external-embedding/embed-widget-market-overview.js",p.async=!0,p.innerHTML=JSON.stringify({colorTheme:o?"dark":"light",dateRange:"1D",showChart:!0,locale:"fr",width:"100%",height:"100%",largeChartUrl:"",isTransparent:!1,showSymbolLogo:!0,showFloatingTooltip:!0,tabs:[{title:"Indices",symbols:[{s:"FOREXCOM:SPXUSD",d:"S&P 500"},{s:"FOREXCOM:NSXUSD",d:"US 100"},{s:"FOREXCOM:DJI",d:"Dow 30"},{s:"INDEX:NKY",d:"Nikkei 225"},{s:"INDEX:DEU40",d:"DAX Index"},{s:"FOREXCOM:UKXGBP",d:"UK 100"}]},{title:"Forex",symbols:[{s:"FX:EURUSD",d:"EUR/USD"},{s:"FX:GBPUSD",d:"GBP/USD"},{s:"FX:USDJPY",d:"USD/JPY"},{s:"FX:USDCAD",d:"USD/CAD"}]},{title:"Crypto",symbols:[{s:"BINANCE:BTCUSDT",d:"Bitcoin"},{s:"BINANCE:ETHUSDT",d:"Ethereum"},{s:"BINANCE:BNBUSDT",d:"BNB"},{s:"BINANCE:SOLUSDT",d:"Solana"}]}]}),Q.current.appendChild(p)}if(h.current){h.current.innerHTML="";const p=document.createElement("script");p.src="https://s3.tradingview.com/external-embedding/embed-widget-stock-heatmap.js",p.async=!0,p.innerHTML=JSON.stringify({exchanges:[],dataSource:"SPX500",grouping:"sector",blockSize:"market_cap_basic",blockColor:"change",locale:"fr",symbolUrl:"",colorTheme:o?"dark":"light",hasTopBar:!0,isDataSetEnabled:!0,isZoomEnabled:!0,hasSymbolTooltip:!0,width:"100%",height:"100%"}),h.current.appendChild(p)}if(O.current){O.current.innerHTML="";const p=document.createElement("script");p.src="https://s3.tradingview.com/external-embedding/embed-widget-screener.js",p.async=!0,p.innerHTML=JSON.stringify({width:"100%",height:"100%",defaultColumn:"overview",defaultScreen:"most_capitalized",market:"america",showToolbar:!0,colorTheme:o?"dark":"light",locale:"fr",isTransparent:!1}),O.current.appendChild(p)}return()=>{Q.current&&(Q.current.innerHTML=""),h.current&&(h.current.innerHTML=""),O.current&&(O.current.innerHTML="")}},[o]);const $=(p,W)=>{if(!p||!W)return!1;const t=p.toLowerCase(),g=W.toLowerCase(),x={bloomberg:["bloomberg","bloomberg.com","bloomberg news"],reuters:["reuters","reuters.com","thomson reuters"],wsj:["wsj","wall street journal","the wall street journal","wsj.com"],cnbc:["cnbc","cnbc.com"],marketwatch:["marketwatch","marketwatch.com","market watch"],"la presse":["la presse","lapresse","lapresse.ca","presse"],"les affaires":["les affaires","lesaffaires","lesaffaires.com","affaires"]};if(t.includes(g)||g.includes(t))return!0;const j=x[g];return j?j.some(k=>t.includes(k)):!1},[M,re]=f.useState(!1);return f.useEffect(()=>{let p=[...V],W=!0;if(S&&(p=p.filter(t=>G(t))),C!=="all"){const t=p.length;p=p.filter(g=>$(g.source?.name,C)),p.length===0&&t>0&&(p=V.filter(g=>{const x=(g.source?.name||"").toLowerCase(),j=C.toLowerCase();return x.includes(j)||j.includes(x)}),W=!1)}if(H!=="all"){const t={US:["u.s.","united states","american","wall street","nasdaq","dow","s&p","sp500","federal reserve","fed","sec","new york","nyse","us market","us economy"],Canada:["canada","canadian","toronto","tsx","montreal","quebec","ontario","alberta","vancouver","canadian market","canadian economy","bank of canada","boc"],Europe:["europe","european","eu","ecb","london","frankfurt","paris","ftse","dax","cac","eurozone","euro","uk","germany","france","italy","spain"],Asie:["asia","asian","china","chinese","japan","japanese","tokyo","shanghai","hong kong","nikkei","south korea","korean","singapore","india","indian","taiwan"]},g=p.length;if(p=p.filter(x=>{const j=((x.title||"")+" "+(x.description||"")).toLowerCase();return t[H]?.some(k=>j.includes(k))}),p.length===0&&g>0){const x={US:["us","usa","america"],Canada:["canada"],Europe:["europe","eu"],Asie:["asia","china","japan"]};p=V.filter(j=>{const k=((j.title||"")+" "+(j.description||"")).toLowerCase();return x[H]?.some(J=>k.includes(J))}),W=!1}}if(d!=="all"){const t={Tech:["tech","technology","software","cloud","apple","google","microsoft","amazon","meta","tesla","nvidia","amd","intel","samsung","iphone","android","ai","artificial intelligence"],Finance:["bank","banque","finance","financial","trading","investment","investor","credit","loan","mortgage","interest rate","fed","central bank","stock market","equity","bond"],Ã‰nergie:["energy","oil","gas","petroleum","renewable","solar","wind","nuclear","exxon","chevron","bp","shell","crude","barrel","opec"],SantÃ©:["health","healthcare","pharma","pharmaceutical","medical","drug","medicine","vaccine","hospital","medicare","pfizer","moderna","johnson & johnson"],Crypto:["crypto","cryptocurrency","bitcoin","btc","ethereum","eth","blockchain","coinbase","binance","crypto market","digital currency"],IA:["ai","artificial intelligence","machine learning","deep learning","chatgpt","openai","nvidia","neural network","llm","large language model"]},g=p.length;if(p=p.filter(x=>{const j=((x.title||"")+" "+(x.description||"")).toLowerCase();return t[d]?.some(k=>j.includes(k))}),p.length===0&&g>0){const x={Tech:["tech","technology"],Finance:["finance","financial","bank"],Ã‰nergie:["energy","oil","gas"],SantÃ©:["health","medical"],Crypto:["crypto","bitcoin"],IA:["ai","artificial intelligence"]};p=V.filter(j=>{const k=((j.title||"")+" "+(j.description||"")).toLowerCase();return x[d]?.some(J=>k.includes(J))}),W=!1}}p.length===0&&V.length>0&&(p=V.slice(0,20),W=!1),re(!W),ee(p)},[V,S,C,H,d]),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("h2",{className:`text-2xl font-bold transition-colors duration-300 ${o?"text-white":"text-gray-900"}`,children:"ðŸ“° MarchÃ©s & Ã‰conomie"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs("button",{onClick:()=>E(!S),className:`px-4 py-2 rounded-lg font-semibold transition-all duration-300 ${S?"bg-blue-600 text-white":o?"bg-gray-800 hover:bg-gray-700 text-white":"bg-gray-200 hover:bg-gray-300 text-gray-900"}`,children:["ðŸ‡«ðŸ‡· FranÃ§ais ",S&&"âœ“"]}),e.jsx("button",{onClick:P,disabled:a,className:`px-4 py-2 rounded-lg font-semibold transition-all duration-300 disabled:opacity-50 ${o?"bg-gray-800 hover:bg-gray-700 text-white":"bg-gray-700 hover:bg-gray-600 text-white"}`,children:a?"â³ Actualisation...":"ðŸ”„ Actualiser"})]})]}),A&&e.jsxs("p",{className:"text-gray-400 text-sm",children:["DerniÃ¨re mise Ã  jour: ",new Date(A).toLocaleString("fr-FR")]}),e.jsxs("div",{className:"grid grid-cols-1 gap-6 mt-6",children:[e.jsxs("div",{className:`rounded-xl overflow-hidden border-2 transition-colors duration-300 ${o?"bg-gray-800/50 border-blue-500/30":"bg-white border-blue-400/40"}`,children:[e.jsxs("div",{className:`p-4 border-b ${o?"border-gray-700":"border-gray-200"}`,children:[e.jsx("h3",{className:`text-lg font-bold transition-colors duration-300 ${o?"text-white":"text-gray-900"}`,children:"ðŸ“Š Vue d'ensemble des MarchÃ©s (Temps RÃ©el)"}),e.jsx("p",{className:`text-sm transition-colors duration-300 ${o?"text-gray-400":"text-gray-600"}`,children:"Indices majeurs, Forex, Crypto - DonnÃ©es en direct"})]}),e.jsx("div",{ref:Q,style:{height:"400px"}})]}),e.jsxs("div",{className:`rounded-xl overflow-hidden border-2 transition-colors duration-300 ${o?"bg-gray-800/50 border-green-500/30":"bg-white border-green-400/40"}`,children:[e.jsxs("div",{className:`p-4 border-b ${o?"border-gray-700":"border-gray-200"}`,children:[e.jsx("h3",{className:`text-lg font-bold transition-colors duration-300 ${o?"text-white":"text-gray-900"}`,children:"ðŸ”¥ Heatmap BoursiÃ¨re"}),e.jsx("p",{className:`text-sm transition-colors duration-300 ${o?"text-gray-400":"text-gray-600"}`,children:"Visualisation des performances par secteur"})]}),e.jsx("div",{ref:h,style:{height:"500px"}})]}),e.jsxs("div",{className:`rounded-xl overflow-hidden border-2 transition-colors duration-300 ${o?"bg-gray-800/50 border-purple-500/30":"bg-white border-purple-400/40"}`,children:[e.jsxs("div",{className:`p-4 border-b ${o?"border-gray-700":"border-gray-200"}`,children:[e.jsx("h3",{className:`text-lg font-bold transition-colors duration-300 ${o?"text-white":"text-gray-900"}`,children:"ðŸš€ Screener - Top Gainers & Losers"}),e.jsx("p",{className:`text-sm transition-colors duration-300 ${o?"text-gray-400":"text-gray-600"}`,children:"Actions les plus performantes et en baisse"})]}),e.jsx("div",{ref:O,style:{height:"500px"}})]})]}),e.jsx("div",{className:`p-4 rounded-xl transition-colors duration-300 ${o?"bg-gradient-to-br from-gray-800 to-gray-900 border border-gray-700":"bg-gradient-to-br from-white to-gray-50 border border-gray-200"}`,children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("div",{className:`text-3xl font-bold ${o?"text-white":"text-gray-900"}`,children:L.length}),e.jsx("div",{className:`text-sm ${o?"text-gray-400":"text-gray-600"}`,children:"Articles filtrÃ©s"})]}),e.jsx(I,{name:"Newspaper",className:`w-12 h-12 ${o?"text-gray-600":"text-gray-300"}`})]})}),e.jsxs("div",{className:`p-6 rounded-xl transition-colors duration-300 ${o?"bg-gradient-to-br from-gray-800 to-gray-900 border border-gray-700":"bg-gradient-to-br from-white to-gray-50 border border-gray-200"}`,children:[e.jsx("h3",{className:`text-lg font-bold mb-4 ${o?"text-white":"text-gray-900"}`,children:"ðŸ” Filtres"}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:`text-sm font-semibold mb-2 block ${o?"text-gray-300":"text-gray-700"}`,children:"ðŸ“° Source"}),e.jsxs("div",{className:"flex flex-wrap gap-2",children:[e.jsx("button",{onClick:()=>F("all"),className:`px-3 py-1.5 rounded-lg text-sm font-medium transition-all ${C==="all"?"bg-blue-600 text-white":o?"bg-gray-700 text-gray-300 hover:bg-gray-600":"bg-gray-200 text-gray-700 hover:bg-gray-300"}`,children:"Toutes"}),l.map(p=>e.jsx("button",{onClick:()=>F(p),className:`px-3 py-1.5 rounded-lg text-sm font-medium transition-all ${C===p?"bg-blue-600 text-white":o?"bg-gray-700 text-gray-300 hover:bg-gray-600":"bg-gray-200 text-gray-700 hover:bg-gray-300"}`,children:p},p))]})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:`text-sm font-semibold mb-2 block ${o?"text-gray-300":"text-gray-700"}`,children:"ðŸŒ MarchÃ©"}),e.jsxs("div",{className:"flex flex-wrap gap-2",children:[e.jsx("button",{onClick:()=>i("all"),className:`px-3 py-1.5 rounded-lg text-sm font-medium transition-all ${H==="all"?"bg-green-600 text-white":o?"bg-gray-700 text-gray-300 hover:bg-gray-600":"bg-gray-200 text-gray-700 hover:bg-gray-300"}`,children:"Tous"}),m.map(p=>e.jsx("button",{onClick:()=>i(p),className:`px-3 py-1.5 rounded-lg text-sm font-medium transition-all ${H===p?"bg-green-600 text-white":o?"bg-gray-700 text-gray-300 hover:bg-gray-600":"bg-gray-200 text-gray-700 hover:bg-gray-300"}`,children:p},p))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:`text-sm font-semibold mb-2 block ${o?"text-gray-300":"text-gray-700"}`,children:"ðŸ·ï¸ ThÃ©matique"}),e.jsxs("div",{className:"flex flex-wrap gap-2",children:[e.jsx("button",{onClick:()=>y("all"),className:`px-3 py-1.5 rounded-lg text-sm font-medium transition-all ${d==="all"?"bg-purple-600 text-white":o?"bg-gray-700 text-gray-300 hover:bg-gray-600":"bg-gray-200 text-gray-700 hover:bg-gray-300"}`,children:"Toutes"}),c.map(p=>e.jsx("button",{onClick:()=>y(p),className:`px-3 py-1.5 rounded-lg text-sm font-medium transition-all ${d===p?"bg-purple-600 text-white":o?"bg-gray-700 text-gray-300 hover:bg-gray-600":"bg-gray-200 text-gray-700 hover:bg-gray-300"}`,children:p},p))]})]}),M&&L.length>0&&e.jsx("div",{className:`mt-4 p-4 rounded-lg border-2 ${o?"bg-yellow-900/20 border-yellow-600/50 text-yellow-200":"bg-yellow-50 border-yellow-300 text-yellow-800"}`,children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("span",{className:"text-xl",children:"ðŸ’¡"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold mb-1",children:"RÃ©sultats similaires affichÃ©s"}),e.jsx("p",{className:"text-sm",children:"Aucun rÃ©sultat exact trouvÃ© pour les filtres sÃ©lectionnÃ©s. Nous affichons des articles similaires qui pourraient vous intÃ©resser."})]})]})})]}),e.jsx("div",{className:"space-y-4",children:L.length===0?e.jsxs("div",{className:`text-center py-12 ${o?"text-gray-400":"text-gray-600"}`,children:[e.jsx(I,{name:"AlertCircle",className:"w-16 h-16 mx-auto mb-4 opacity-50"}),e.jsx("p",{className:"text-lg font-semibold mb-2",children:S?"Aucun article en franÃ§ais trouvÃ©":"Aucune nouvelle disponible"}),e.jsx("p",{className:"text-sm",children:S?"Essayez de dÃ©sactiver le filtre franÃ§ais ou actualisez les donnÃ©es":"Cliquez sur Actualiser pour charger les derniÃ¨res nouvelles"})]}):L.map((p,W)=>{const t=K(p.title,p.description,p.sentiment),g=R(p.source?.name);return e.jsx("div",{className:`p-6 rounded-xl transition-all duration-300 hover:scale-[1.01] ${o?"bg-gradient-to-br from-gray-800 to-gray-900 border border-gray-700 hover:border-gray-600":"bg-gradient-to-br from-white to-gray-50 border border-gray-200 hover:border-gray-300"}`,children:e.jsxs("div",{className:"flex items-start gap-4",children:[e.jsx("div",{className:`p-3 rounded-full transition-colors duration-300 ${o?"bg-gray-700/50":"bg-gray-200/60"}`,children:e.jsx(I,{name:t.icon,className:`w-6 h-6 ${t.color}`})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:`font-bold text-lg mb-2 transition-colors duration-300 ${o?"text-white":"text-gray-900"}`,children:p.url?e.jsx("a",{href:p.url,target:"_blank",rel:"noopener noreferrer",className:`hover:underline transition-colors duration-300 ${o?"text-blue-300 hover:text-blue-200":"text-blue-600 hover:text-blue-700"}`,children:u(p.title)}):u(p.title)}),e.jsx("p",{className:`text-base mb-4 leading-relaxed transition-colors duration-300 ${o?"text-gray-300":"text-gray-600"}`,children:u(p.description)}),e.jsxs("div",{className:"flex items-center gap-4 flex-wrap",children:[e.jsxs("div",{className:`flex items-center gap-2 px-3 py-1 rounded-full transition-colors duration-300 ${g>=100?"bg-purple-500/20 text-purple-500 border border-purple-500/30":g>=85?"bg-blue-500/20 text-blue-500 border border-blue-500/30":g>=75?"bg-green-500/20 text-green-500 border border-green-500/30":o?"bg-gray-800 text-gray-300":"bg-gray-200 text-gray-700"}`,children:[g>=100&&e.jsx("span",{className:"text-xs",children:"â­"}),e.jsx("span",{className:"text-xs font-semibold",children:p.source?.name||"Source inconnue"})]}),e.jsx("span",{className:`text-xs ${o?"text-gray-400":"text-gray-500"}`,children:new Date(p.publishedAt||p.publishedDate).toLocaleString("fr-FR")}),G(p)&&e.jsx("span",{className:"px-2 py-0.5 rounded-full text-xs font-bold bg-blue-500/20 text-blue-500 border border-blue-500/30",children:"ðŸ‡«ðŸ‡· FR"}),p.url&&e.jsx("button",{onClick:()=>B(p.url,p.title),className:`px-3 py-1 rounded-lg text-xs font-semibold transition-all duration-200 hover:scale-105 ${o?"bg-gradient-to-r from-purple-600 to-indigo-600 hover:from-purple-500 hover:to-indigo-500 text-white":"bg-gradient-to-r from-purple-500 to-indigo-500 hover:from-purple-400 hover:to-indigo-400 text-white"}`,children:e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(I,{name:"Brain",className:"w-3 h-3"}),"RÃ©sumÃ© avec Emma"]})})]})]})]})},W)})})]})},Pt=()=>{const n=(window.BetaCombinedDashboard||{}).isDarkMode??!0,I=window.EmailBriefingsTab;return I?f.createElement(I,{isDarkMode:n}):e.jsx("div",{className:"p-4 rounded border bg-yellow-50 border-yellow-200 text-yellow-800",children:"EmailBriefingsTab indisponible (component global manquant)."})},Lt=()=>typeof window<"u"?window.BetaCombinedDashboard||{}:{},He=s=>{typeof window<"u"&&window.open&&s&&window.open(s,"_blank","noopener,noreferrer")},We=()=>{const{isDarkMode:s=!0}=Lt(),n=f.useRef(null),I=f.useRef(null),_=f.useRef(null),o=f.useRef(null),Z=f.useRef(null),a=f.useRef(null),A=f.useRef(null),T=f.useRef(null),V=f.useRef(null),P=f.useRef(null),u=f.useRef(null),K=f.useRef(null),G=f.useRef(null),[R,B]=f.useState("BITSTAMP:BTCUSD"),[S,E]=f.useState(""),[C,F]=f.useState(!1),H=f.useRef(null);return f.useEffect(()=>{if(typeof window>"u")return()=>{};const i=d=>{if(d.origin.includes("tradingview.com")){console.log("ðŸ“Š TradingView message:",d.data);try{const y=typeof d.data=="string"?JSON.parse(d.data):d.data;y.name==="tv-widget-symbol-changed"&&y.data?.symbol&&(console.log("âœ… Symbol changed in Advanced Chart:",y.data.symbol),B(y.data.symbol)),y.type==="symbol-change"&&y.symbol&&(console.log("âœ… Symbol changed in Advanced Chart:",y.symbol),B(y.symbol)),y.symbol&&!y.name&&!y.type&&(console.log("âœ… Symbol changed in Advanced Chart:",y.symbol),B(y.symbol))}catch{}}};return window.addEventListener("message",i),()=>{window.removeEventListener("message",i)}},[]),f.useEffect(()=>{const i=n.current;if(!i)return;i.innerHTML="";const d=document.createElement("div");d.className="tradingview-widget-container__widget",i.appendChild(d);const y=document.createElement("script");return y.src="https://s3.tradingview.com/external-embedding/embed-widget-forex-heat-map.js",y.async=!0,y.innerHTML=JSON.stringify({colorTheme:s?"dark":"light",isTransparent:!0,locale:"fr",currencies:["EUR","USD","JPY","GBP","CHF","AUD","CAD","CNY"],width:"100%",height:400}),i.appendChild(y),()=>{i&&(i.innerHTML="")}},[s]),f.useEffect(()=>{const i=I.current;if(!i)return;i.innerHTML="";const d=document.createElement("div");d.className="tradingview-widget-container__widget",i.appendChild(d);const y=document.createElement("script");return y.src="https://s3.tradingview.com/external-embedding/embed-widget-events.js",y.async=!0,y.innerHTML=JSON.stringify({colorTheme:"light",isTransparent:!1,locale:"en",countryFilter:"ar,au,br,ca,cn,fr,de,in,id,it,jp,kr,mx,ru,sa,za,tr,gb,us,eu",importanceFilter:"-1,0,1",width:400,height:550}),i.appendChild(y),()=>{i&&(i.innerHTML="")}},[]),f.useEffect(()=>{const i=_.current;if(!i)return;i.innerHTML="";const d=document.createElement("script");return d.src="https://s3.tradingview.com/external-embedding/embed-widget-forex-cross-rates.js",d.type="text/javascript",d.async=!0,d.innerHTML=JSON.stringify({colorTheme:s?"dark":"light",isTransparent:!1,locale:"fr",currencies:["EUR","USD","JPY","GBP","CHF","AUD","CAD","NZD","CNY"],backgroundColor:s?"#1f2937":"#ffffff",width:"100%",height:400}),i.appendChild(d),()=>{i&&(i.innerHTML="")}},[s]),f.useEffect(()=>{const i=o.current;if(!i)return;i.innerHTML="";const d=document.createElement("script");return d.src="https://s3.tradingview.com/external-embedding/embed-widget-stock-heatmap.js",d.type="text/javascript",d.async=!0,d.innerHTML=JSON.stringify({dataSource:"AllUSA",blockSize:"market_cap_basic",blockColor:"change",grouping:"sector",locale:"fr",symbolUrl:"",colorTheme:"dark",exchanges:[],hasTopBar:!0,isDataSetEnabled:!0,isZoomEnabled:!0,hasSymbolTooltip:!0,isMonoSize:!1,width:"100%",height:"100%"}),i.appendChild(d),()=>{i&&(i.innerHTML="")}},[]),f.useEffect(()=>{const i=Z.current;if(!i)return;i.innerHTML="";const d=document.createElement("script");return d.src="https://s3.tradingview.com/external-embedding/embed-widget-stock-heatmap.js",d.type="text/javascript",d.async=!0,d.innerHTML=JSON.stringify({dataSource:"TSX",blockSize:"market_cap_basic",blockColor:"change",grouping:"sector",locale:"fr",symbolUrl:"",colorTheme:"dark",exchanges:[],hasTopBar:!0,isDataSetEnabled:!0,isZoomEnabled:!0,hasSymbolTooltip:!0,isMonoSize:!1,width:"100%",height:"100%"}),i.appendChild(d),()=>{i&&(i.innerHTML="")}},[]),f.useEffect(()=>{const i=a.current;if(!i)return;i.innerHTML="";const d=document.createElement("script");return d.src="https://s3.tradingview.com/external-embedding/embed-widget-advanced-chart.js",d.type="text/javascript",d.async=!0,d.innerHTML=JSON.stringify({allow_symbol_change:!0,calendar:!1,details:!0,hide_side_toolbar:!1,hide_top_toolbar:!1,hide_legend:!1,hide_volume:!1,hotlist:!1,interval:"D",locale:"fr",save_image:!0,style:"3",symbol:R,theme:"dark",timezone:"America/Toronto",backgroundColor:"#0F0F0F",gridColor:"rgba(242, 242, 242, 0.06)",watchlist:["FOREXCOM:SPXUSD","FOREXCOM:NSXUSD","FOREXCOM:DJI","NASDAQ:AAPL","NASDAQ:MSFT","NASDAQ:GOOGL","NASDAQ:AMZN","NASDAQ:NVDA","NASDAQ:TSLA","NASDAQ:META","BITSTAMP:BTCUSD","BITSTAMP:ETHUSD","NYSE:JPM","NYSE:BAC","NYSE:GS"],withdateranges:!0,range:"YTD",compareSymbols:[],show_popup_button:!0,popup_height:"800",popup_width:"1200",studies:["STD;Smoothed%1Moving%1Average","STD;RSI"],width:1200,height:800}),i.appendChild(d),()=>{i&&(i.innerHTML="")}},[R]),f.useEffect(()=>{const i=A.current;if(!i)return;i.innerHTML="";const d=document.createElement("script");return d.src="https://s3.tradingview.com/external-embedding/embed-widget-market-quotes.js",d.type="text/javascript",d.async=!0,d.innerHTML=JSON.stringify({colorTheme:"dark",locale:"fr",largeChartUrl:"",isTransparent:!1,showSymbolLogo:!0,backgroundColor:"#0F0F0F",support_host:"https://www.tradingview.com",width:600,height:800,symbolsGroups:[{name:"Indices",symbols:[{name:"FOREXCOM:SPXUSD",displayName:"S&P 500 Index"},{name:"FOREXCOM:NSXUSD",displayName:"US 100 Cash CFD"},{name:"FOREXCOM:DJI",displayName:"Dow Jones Industrial Average Index"},{name:"TSX:TSX",displayName:"TSX"},{name:"XETR:DAX",displayName:"DAX"},{name:"GOMARKETS:FTSE100",displayName:"FTSE100"},{name:"INDEX:NKY",displayName:"Nikkei 225"}]},{name:"Futures",symbols:[{name:"BMFBOVESPA:ISP1!",displayName:"S&P 500"},{name:"CMCMARKETS:GOLD",displayName:"Gold"},{name:"PYTH:WTI3!",displayName:"WTI Crude Oil"}]},{name:"Bonds",symbols:[{name:"TVC:US03MY",displayName:"US yield 3 mois"},{name:"TVC:US02Y",displayName:"US yield 2 ans"},{name:"TVC:US05Y",displayName:"US yield 5 ans"},{name:"TVC:US10Y",displayName:"US yield 10 ans"},{name:"TVC:US30Y",displayName:"US yield 30 ans"},{name:"TVC:CA03MY",displayName:"CAN yield 3 mois"},{name:"TVC:CA01Y",displayName:"CAN yield 1 an"},{name:"TVC:CA05Y",displayName:"CAN yield 5 ans"},{name:"TVC:CA10Y",displayName:"CAN yield 10 ans"},{name:"TVC:CA30Y",displayName:"CAN yield 30 ans"}]},{name:"Forex",symbols:[{name:"FX:USDCAD",displayName:"USD to CAD"},{name:"FX_IDC:CADUSD",displayName:"CAD to USD"},{name:"FX:EURCAD",displayName:"EUR to CAD"},{name:"SAXO:CADEUR",displayName:"CAD to EUR"}]}]}),i.appendChild(d),()=>{i&&(i.innerHTML="")}},[]),f.useEffect(()=>{const i=T.current;if(!i)return;i.innerHTML="";const d=document.createElement("script");return d.src="https://s3.tradingview.com/external-embedding/embed-widget-symbol-info.js",d.type="text/javascript",d.async=!0,d.innerHTML=JSON.stringify({symbol:R,colorTheme:"dark",isTransparent:!1,locale:"fr",width:"100%"}),i.appendChild(d),()=>{i&&(i.innerHTML="")}},[R]),f.useEffect(()=>{const i=V.current;if(!i)return;i.innerHTML="";const d=document.createElement("script");return d.src="https://s3.tradingview.com/external-embedding/embed-widget-timeline.js",d.type="text/javascript",d.async=!0,d.innerHTML=JSON.stringify({feedMode:"symbol",symbol:R,colorTheme:"dark",isTransparent:!1,displayMode:"regular",locale:"fr",width:"100%",height:"100%"}),i.appendChild(d),()=>{i&&(i.innerHTML="")}},[R]),f.useEffect(()=>{const i=P.current;if(!i)return;i.innerHTML="";const d=document.createElement("div");d.className="tradingview-widget-container__widget",i.appendChild(d);const y=document.createElement("script");return y.src="https://s3.tradingview.com/external-embedding/embed-widget-screener.js",y.type="text/javascript",y.async=!0,y.innerHTML=JSON.stringify({market:"america",showToolbar:!0,defaultColumn:"overview",defaultScreen:"most_capitalized",isTransparent:!1,locale:"fr",colorTheme:"dark",width:"100%",height:"100%"}),i.appendChild(y),()=>{i&&(i.innerHTML="")}},[]),f.useEffect(()=>{const i=u.current;if(!i)return;i.innerHTML="";const d=document.createElement("div");d.className="tradingview-widget-container__widget",i.appendChild(d);const y=document.createElement("script");return y.src="https://s3.tradingview.com/external-embedding/embed-widget-symbol-profile.js",y.type="text/javascript",y.async=!0,y.innerHTML=JSON.stringify({symbol:R,colorTheme:"dark",isTransparent:!1,locale:"fr",width:"100%",height:"100%"}),i.appendChild(y),()=>{i&&(i.innerHTML="")}},[R]),f.useEffect(()=>{const i=K.current;if(!i)return;i.innerHTML="";const d=document.createElement("div");d.className="tradingview-widget-container__widget",i.appendChild(d);const y=document.createElement("script");return y.src="https://s3.tradingview.com/external-embedding/embed-widget-financials.js",y.type="text/javascript",y.async=!0,y.innerHTML=JSON.stringify({symbol:R,colorTheme:"dark",displayMode:"regular",isTransparent:!1,locale:"fr",width:"100%",height:"100%"}),i.appendChild(y),()=>{i&&(i.innerHTML="")}},[R]),f.useEffect(()=>{const i=G.current;if(!i)return;i.innerHTML="";const d=document.createElement("div");d.className="tradingview-widget-container__widget",i.appendChild(d);const y=document.createElement("script");return y.src="https://s3.tradingview.com/external-embedding/embed-widget-technical-analysis.js",y.type="text/javascript",y.async=!0,y.innerHTML=JSON.stringify({colorTheme:"dark",displayMode:"multiple",isTransparent:!1,locale:"fr",interval:"1M",disableInterval:!1,width:"100%",height:"100%",symbol:R,showIntervalTabs:!0}),i.appendChild(y),()=>{i&&(i.innerHTML="")}},[R]),e.jsxs("div",{className:"space-y-3 md:space-y-6",children:[e.jsx("div",{className:`p-3 md:p-6 rounded-lg transition-colors duration-300 ${s?"bg-gradient-to-r from-blue-900 to-purple-900":"bg-gradient-to-r from-blue-100 to-purple-100"}`,children:e.jsxs("div",{className:"mb-2",children:[e.jsx("h2",{className:`text-xl md:text-2xl lg:text-3xl font-bold mb-2 transition-colors duration-300 ${s?"text-white":"text-gray-900"}`,children:"ðŸ§ª TESTS JS - Widgets Financiers"}),e.jsx("p",{className:`text-xs md:text-sm transition-colors duration-300 ${s?"text-blue-200":"text-blue-800"}`,children:"Collection complÃ¨te de 14 widgets TradingView et outils d'analyse financiÃ¨re organisÃ©s par catÃ©gorie"})]})}),e.jsx("div",{className:"mb-2 md:mb-4",children:e.jsx("div",{className:`flex items-center gap-2 md:gap-3 mb-2 md:mb-4 pb-2 border-b-2 ${s?"border-blue-500":"border-blue-600"}`,children:e.jsx("h3",{className:`text-base md:text-lg lg:text-xl font-bold transition-colors duration-300 ${s?"text-blue-400":"text-blue-600"}`,children:"ðŸ“… Calendriers & Ã‰vÃ©nements Ã‰conomiques"})})}),e.jsxs("div",{className:`p-3 md:p-6 rounded-lg transition-colors duration-300 ${s?"bg-gray-800":"bg-white"}`,children:[e.jsxs("div",{className:"mb-3 md:mb-6",children:[e.jsx("h2",{className:`text-lg md:text-xl lg:text-2xl font-bold mb-1 md:mb-2 transition-colors duration-300 ${s?"text-white":"text-gray-900"}`,children:"ðŸ“Š Calendrier Ã‰conomique"}),e.jsx("p",{className:`text-xs md:text-sm transition-colors duration-300 ${s?"text-gray-400":"text-gray-600"}`,children:"Calendrier Ã©conomique complet avec Ã©vÃ©nements majeurs et donnÃ©es en temps rÃ©el"})]}),e.jsxs("div",{className:"rounded-lg overflow-hidden relative h-[400px] md:h-[450px] lg:h-[500px]",style:{background:"transparent"},children:[e.jsx("div",{className:`absolute top-0 left-0 z-10 ${s?"bg-gray-800":"bg-white"}`,style:{width:"100%",height:"40px"}}),e.jsx("iframe",{src:"https://sslecal2.investing.com?columns=exc_flags,exc_currency,exc_importance,exc_actual,exc_forecast,exc_previous&category=_employment,_economicActivity,_inflation,_credit,_centralBanks,_confidenceIndex,_balance,_Bonds&importance=1,2,3&features=datepicker,timezone,timeselector,filters&countries=6,5&calType=day&timeZone=8&lang=5&transparentBackground=1",width:"100%",height:"100%",frameBorder:"0",allowTransparency:"true",marginWidth:"0",marginHeight:"0",sandbox:"allow-scripts allow-same-origin allow-forms",className:"relative z-0",style:{minWidth:"100%",background:"transparent"}})]})]}),e.jsx("div",{className:"mb-4",children:e.jsx("div",{className:`flex items-center gap-3 mb-4 pb-2 border-b-2 ${s?"border-green-500":"border-green-600"}`,children:e.jsx("h3",{className:`text-xl font-bold transition-colors duration-300 ${s?"text-green-400":"text-green-600"}`,children:"ðŸ’± MarchÃ©s Forex"})})}),e.jsxs("div",{className:`p-3 md:p-6 rounded-lg transition-colors duration-300 ${s?"bg-gray-800":"bg-white"}`,children:[e.jsxs("div",{className:"mb-3 md:mb-6",children:[e.jsx("h2",{className:`text-lg md:text-xl lg:text-2xl font-bold mb-1 md:mb-2 transition-colors duration-300 ${s?"text-white":"text-gray-900"}`,children:"ðŸ’± Forex Heat Map"}),e.jsx("p",{className:`text-xs md:text-sm transition-colors duration-300 ${s?"text-gray-400":"text-gray-600"}`,children:"Carte de chaleur des devises en temps rÃ©el (EUR, USD, JPY, GBP, CHF, AUD, CAD, CNY)"})]}),e.jsx("div",{className:"h-[350px] md:h-[400px] lg:h-[450px]",children:e.jsx("div",{className:"tradingview-widget-container h-full",ref:n})})]}),e.jsxs("div",{className:`p-3 md:p-6 rounded-lg transition-colors duration-300 ${s?"bg-gray-800":"bg-white"}`,children:[e.jsxs("div",{className:"mb-3 md:mb-6",children:[e.jsx("h2",{className:`text-lg md:text-xl lg:text-2xl font-bold mb-1 md:mb-2 transition-colors duration-300 ${s?"text-white":"text-gray-900"}`,children:"ðŸ“… Economic Calendar Events"}),e.jsx("p",{className:`text-xs md:text-sm transition-colors duration-300 ${s?"text-gray-400":"text-gray-600"}`,children:"Ã‰vÃ©nements Ã©conomiques mondiaux par TradingView"})]}),e.jsx("div",{className:"h-[400px] md:h-[500px] lg:h-[600px]",children:e.jsx("div",{className:"tradingview-widget-container h-full",ref:I})})]}),e.jsxs("div",{className:`p-3 md:p-6 rounded-lg transition-colors duration-300 ${s?"bg-gray-800":"bg-white"}`,children:[e.jsxs("div",{className:"mb-3 md:mb-6",children:[e.jsx("h2",{className:`text-lg md:text-xl lg:text-2xl font-bold mb-1 md:mb-2 transition-colors duration-300 ${s?"text-white":"text-gray-900"}`,children:"ðŸ’± Forex Cross Rates"}),e.jsx("p",{className:`text-xs md:text-sm transition-colors duration-300 ${s?"text-gray-400":"text-gray-600"}`,children:"Taux de change croisÃ©s pour 9 devises majeures (EUR, USD, JPY, GBP, CHF, AUD, CAD, NZD, CNY)"})]}),e.jsx("div",{className:"h-[350px] md:h-[400px] lg:h-[450px]",children:e.jsx("div",{className:"tradingview-widget-container h-full",ref:_})})]}),e.jsx("div",{className:"mb-2 md:mb-4",children:e.jsx("div",{className:`flex items-center gap-2 md:gap-3 mb-2 md:mb-4 pb-2 border-b-2 ${s?"border-purple-500":"border-purple-600"}`,children:e.jsx("h3",{className:`text-base md:text-lg lg:text-xl font-bold transition-colors duration-300 ${s?"text-purple-400":"text-purple-600"}`,children:"ðŸ“Š MarchÃ©s Boursiers - Vues Globales"})})}),e.jsxs("div",{className:`p-3 md:p-6 rounded-lg transition-colors duration-300 ${s?"bg-gray-800":"bg-white"}`,children:[e.jsxs("div",{className:"mb-3 md:mb-6",children:[e.jsx("h2",{className:`text-lg md:text-xl lg:text-2xl font-bold mb-1 md:mb-2 transition-colors duration-300 ${s?"text-white":"text-gray-900"}`,children:"ðŸ‡ºðŸ‡¸ Stock Heatmap All USA"}),e.jsx("p",{className:`text-xs md:text-sm transition-colors duration-300 ${s?"text-gray-400":"text-gray-600"}`,children:"Carte thermique de toutes les actions amÃ©ricaines - Performance par secteur et capitalisation"})]}),e.jsx("div",{className:"h-[500px] md:h-[700px] lg:h-[900px]",children:e.jsxs("div",{className:"tradingview-widget-container h-full",ref:o,children:[e.jsx("div",{className:"tradingview-widget-container__widget"}),e.jsx("div",{className:`tradingview-widget-copyright text-center text-xs mt-2 transition-colors duration-300 ${s?"text-gray-400":"text-gray-600"}`,children:e.jsx("a",{href:"https://fr.tradingview.com/heatmap/stock/",rel:"noopener nofollow",target:"_blank",className:`underline transition-colors duration-300 ${s?"text-blue-400 hover:text-blue-300":"text-blue-600 hover:text-blue-800"}`,children:e.jsx("span",{className:"blue-text",children:"Track all markets on TradingView"})})})]})})]}),e.jsxs("div",{className:`p-3 md:p-6 rounded-lg transition-colors duration-300 ${s?"bg-gray-800":"bg-white"}`,children:[e.jsxs("div",{className:"mb-3 md:mb-6",children:[e.jsx("h2",{className:`text-lg md:text-xl lg:text-2xl font-bold mb-1 md:mb-2 transition-colors duration-300 ${s?"text-white":"text-gray-900"}`,children:"ðŸ‡¨ðŸ‡¦ Stock Heatmap TSX"}),e.jsx("p",{className:`text-xs md:text-sm transition-colors duration-300 ${s?"text-gray-400":"text-gray-600"}`,children:"Carte thermique du Toronto Stock Exchange (TSX) - Performance par secteur et capitalisation"})]}),e.jsx("div",{className:"h-[500px] md:h-[700px] lg:h-[900px]",children:e.jsxs("div",{className:"tradingview-widget-container h-full",ref:Z,children:[e.jsx("div",{className:"tradingview-widget-container__widget"}),e.jsx("div",{className:`tradingview-widget-copyright text-center text-xs mt-2 transition-colors duration-300 ${s?"text-gray-400":"text-gray-600"}`,children:e.jsx("a",{href:"https://fr.tradingview.com/heatmap/stock/",rel:"noopener nofollow",target:"_blank",className:`underline transition-colors duration-300 ${s?"text-blue-400 hover:text-blue-300":"text-blue-600 hover:text-blue-800"}`,children:e.jsx("span",{className:"blue-text",children:"Track all markets on TradingView"})})})]})})]}),e.jsxs("div",{className:`p-3 md:p-6 rounded-lg transition-colors duration-300 ${s?"bg-gray-800":"bg-white"}`,children:[e.jsxs("div",{className:"mb-3 md:mb-6",children:[e.jsx("h2",{className:`text-lg md:text-xl lg:text-2xl font-bold mb-1 md:mb-2 transition-colors duration-300 ${s?"text-white":"text-gray-900"}`,children:"ðŸ“Š Market Quotes - Indices, Futures, Bonds, Forex"}),e.jsx("p",{className:`text-xs md:text-sm transition-colors duration-300 ${s?"text-gray-400":"text-gray-600"}`,children:"Cotations en temps rÃ©el organisÃ©es par catÃ©gories (Indices, Futures, Obligations US/CAN, Forex CAD)"})]}),e.jsx("div",{className:"h-[600px] md:h-[700px] lg:h-[850px]",children:e.jsxs("div",{className:"tradingview-widget-container h-full",ref:A,children:[e.jsx("div",{className:"tradingview-widget-container__widget"}),e.jsx("div",{className:`tradingview-widget-copyright text-center text-xs mt-2 transition-colors duration-300 ${s?"text-gray-400":"text-gray-600"}`,children:e.jsx("a",{href:"https://fr.tradingview.com/markets/",rel:"noopener nofollow",target:"_blank",className:`underline transition-colors duration-300 ${s?"text-blue-400 hover:text-blue-300":"text-blue-600 hover:text-blue-800"}`,children:e.jsx("span",{className:"blue-text",children:"Track all markets on TradingView"})})})]})})]}),e.jsx("div",{className:"mb-2 md:mb-4",children:e.jsx("div",{className:`flex items-center gap-2 md:gap-3 mb-2 md:mb-4 pb-2 border-b-2 ${s?"border-orange-500":"border-orange-600"}`,children:e.jsx("h3",{className:`text-base md:text-lg lg:text-xl font-bold transition-colors duration-300 ${s?"text-orange-400":"text-orange-600"}`,children:"ðŸ“ˆ Outils d'Analyse Fondamentale"})})}),e.jsxs("div",{className:`p-3 md:p-6 rounded-lg transition-colors duration-300 ${s?"bg-gray-800":"bg-white"}`,children:[e.jsxs("div",{className:"mb-3 md:mb-6",children:[e.jsx("h2",{className:`text-lg md:text-xl lg:text-2xl font-bold mb-1 md:mb-2 transition-colors duration-300 ${s?"text-white":"text-gray-900"}`,children:"ðŸ“Š FastGraphs - Analyse Fondamentale"}),e.jsx("p",{className:`text-xs md:text-sm transition-colors duration-300 ${s?"text-gray-400":"text-gray-600"}`,children:"Outil d'analyse fondamentale pour investisseurs Ã  long terme. Visualisez la valeur intrinsÃ¨que, les bÃ©nÃ©fices, revenus, dividendes et ratios de valorisation."}),e.jsxs("p",{className:`text-xs mt-2 transition-colors duration-300 ${s?"text-orange-300":"text-orange-600"}`,children:["ðŸ’¡ ",e.jsx("a",{href:"https://fastgraphs.com/blog/if-you-are-a-long-term-investor-you-need-to-watch-this-introducing-fast-graphs/",target:"_blank",rel:"noopener noreferrer",className:"underline hover:opacity-80",children:"En savoir plus sur FastGraphs"})]})]}),e.jsx("div",{className:"mb-4",children:e.jsxs("div",{className:"flex flex-col md:flex-row gap-2 md:gap-4 items-start md:items-center",children:[e.jsx("label",{className:`text-sm font-medium transition-colors duration-300 ${s?"text-gray-300":"text-gray-700"}`,children:"Symbole:"}),e.jsx("input",{type:"text",id:"fastgraphs-symbol",defaultValue:"AAPL",placeholder:"Ex: AAPL, MSFT, GOOGL",className:`px-3 py-2 rounded-lg border-2 text-sm md:text-base transition-all duration-300 ${s?"bg-gray-700 border-gray-600 text-white placeholder-gray-400 focus:border-orange-500":"bg-white border-gray-300 text-gray-900 placeholder-gray-500 focus:border-orange-500"} focus:outline-none focus:ring-2 focus:ring-orange-500 focus:ring-opacity-50`,style:{minWidth:"200px"},onKeyPress:i=>{if(i.key==="Enter"){const y=document.getElementById("fastgraphs-symbol")?.value?.toUpperCase().trim()||"AAPL",L=document.getElementById("fastgraphs-iframe");L&&(L.src=`https://www.fastgraphs.com/secure/fg.php?ticker=${y}`),He(`https://www.fastgraphs.com/secure/fg.php?ticker=${y}`)}}}),e.jsx("button",{onClick:()=>{const d=document.getElementById("fastgraphs-symbol")?.value?.toUpperCase().trim()||"AAPL",y=document.getElementById("fastgraphs-iframe");y&&(y.src=`https://www.fastgraphs.com/secure/fg.php?ticker=${d}`),He(`https://www.fastgraphs.com/secure/fg.php?ticker=${d}`)},className:`px-4 py-2 rounded-lg font-medium text-sm md:text-base transition-all duration-300 ${s?"bg-orange-600 hover:bg-orange-700 text-white":"bg-orange-500 hover:bg-orange-600 text-white"} focus:outline-none focus:ring-2 focus:ring-orange-500 focus:ring-opacity-50`,children:"Mettre Ã  jour l'iframe + Ouvrir"})]})}),e.jsx("div",{className:"mb-4",children:e.jsxs("div",{className:`rounded-lg overflow-hidden relative h-[600px] md:h-[700px] lg:h-[800px] border-2 transition-colors duration-300 ${s?"border-orange-500/30 bg-gray-800":"border-orange-400/40 bg-white"}`,children:[e.jsx("iframe",{id:"fastgraphs-iframe",src:"https://www.fastgraphs.com/secure/fg.php?ticker=AAPL",width:"100%",height:"100%",frameBorder:"0",allowTransparency:"true",marginWidth:"0",marginHeight:"0",sandbox:"allow-scripts allow-same-origin allow-forms allow-popups allow-popups-to-escape-sandbox",className:"relative z-0",style:{minWidth:"100%",background:"transparent"},title:"FastGraphs - Analyse Fondamentale",onError:()=>{console.warn("FastGraphs iframe failed to load - authentication may be required")}}),e.jsx("div",{id:"fastgraphs-overlay",className:`absolute inset-0 flex items-center justify-center z-10 pointer-events-none ${s?"bg-gray-800/90":"bg-white/90"}`,style:{display:"none"},children:e.jsxs("div",{className:"text-center p-6",children:[e.jsx("div",{className:`text-4xl mb-4 ${s?"text-orange-400":"text-orange-500"}`,children:"ðŸ”’"}),e.jsx("p",{className:`text-lg font-semibold mb-2 ${s?"text-white":"text-gray-900"}`,children:"Authentification requise"}),e.jsx("p",{className:`text-sm ${s?"text-gray-300":"text-gray-600"}`,children:"Utilisez les boutons ci-dessous pour accÃ©der Ã  FastGraphs"})]})})]})}),e.jsx("div",{className:`rounded-lg overflow-hidden relative p-6 border-2 transition-colors duration-300 ${s?"bg-gradient-to-br from-gray-800 to-gray-900 border-orange-500/30":"bg-gradient-to-br from-orange-50 to-orange-100 border-orange-400/40"}`,children:e.jsxs("div",{className:"text-center",children:[e.jsx("h3",{className:`text-lg md:text-xl font-bold mb-3 transition-colors duration-300 ${s?"text-white":"text-gray-900"}`,children:"AccÃ¨s alternatif Ã  FastGraphs"}),e.jsx("p",{className:`text-xs md:text-sm mb-4 transition-colors duration-300 ${s?"text-gray-300":"text-gray-700"}`,children:"Si l'iframe ne s'affiche pas, utilisez ces boutons pour ouvrir FastGraphs dans un nouvel onglet"}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-3 justify-center items-center",children:[e.jsx("a",{href:"https://www.fastgraphs.com/secure/fg.php?ticker=AAPL",target:"_blank",rel:"noopener noreferrer",className:`px-6 py-3 rounded-lg font-semibold text-sm md:text-base transition-all duration-300 ${s?"bg-orange-600 hover:bg-orange-700 text-white shadow-lg shadow-orange-500/20":"bg-orange-500 hover:bg-orange-600 text-white shadow-lg shadow-orange-500/30"} focus:outline-none focus:ring-2 focus:ring-orange-500 focus:ring-opacity-50`,children:"ðŸ“ˆ Ouvrir FastGraphs (AAPL)"}),e.jsx("a",{href:"https://www.fastgraphs.com",target:"_blank",rel:"noopener noreferrer",className:`px-6 py-3 rounded-lg font-semibold text-sm md:text-base transition-all duration-300 border-2 ${s?"bg-transparent border-orange-500 hover:bg-orange-500/20 text-orange-400":"bg-transparent border-orange-500 hover:bg-orange-500/10 text-orange-600"} focus:outline-none focus:ring-2 focus:ring-orange-500 focus:ring-opacity-50`,children:"ðŸŒ Visiter FastGraphs.com"})]})]})}),e.jsx("div",{className:`mt-4 text-xs text-center transition-colors duration-300 ${s?"text-gray-400":"text-gray-600"}`,children:e.jsxs("p",{children:[e.jsx("strong",{children:"Note:"})," FastGraphs est un service d'abonnement qui nÃ©cessite une connexion pour accÃ©der aux graphiques dÃ©taillÃ©s."," ",e.jsx("a",{href:"https://fastgraphs.com/blog/if-you-are-a-long-term-investor-you-need-to-watch-this-introducing-fast-graphs/",target:"_blank",rel:"noopener noreferrer",className:`underline transition-colors duration-300 ${s?"text-orange-400 hover:text-orange-300":"text-orange-600 hover:text-orange-800"}`,children:"En savoir plus sur FastGraphs"})]})})]}),e.jsxs("div",{className:`rounded-xl border-2 md:border-4 shadow-2xl transition-all duration-300 mb-3 md:mb-6 ${s?"bg-gradient-to-br from-gray-900 via-gray-800 to-gray-900 border-red-500":"bg-gradient-to-br from-white via-gray-50 to-white border-red-600"}`,children:[e.jsx("div",{className:`p-3 md:p-4 border-b-2 md:border-b-4 transition-colors duration-300 ${s?"border-red-500 bg-gray-800/50":"border-red-600 bg-gray-100/50"}`,children:e.jsxs("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between gap-3 md:gap-0 mb-3 md:mb-4",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("h2",{className:`text-lg md:text-2xl lg:text-3xl font-bold mb-1 md:mb-2 transition-colors duration-300 ${s?"text-red-400":"text-red-600"}`,children:["ðŸ“Š Analyse ComplÃ¨te - ",R.split(":")[1]||R]}),e.jsx("p",{className:`text-xs md:text-sm transition-colors duration-300 ${s?"text-gray-400":"text-gray-600"}`,children:"6 widgets synchronisÃ©s pour une analyse financiÃ¨re complÃ¨te. Changez le symbole pour mettre Ã  jour tous les widgets simultanÃ©ment."})]}),e.jsxs("div",{className:"relative w-full md:w-auto",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{ref:H,type:"text",value:S||R.split(":")[1]||"",onChange:i=>{E(i.target.value),F(!0)},onFocus:()=>F(!0),onBlur:()=>setTimeout(()=>F(!1),200),placeholder:"Search symbols... (e.g., AAPL, BTC)",className:`flex-1 md:w-64 px-3 md:px-4 py-2 rounded-lg border-2 text-sm md:text-base font-medium transition-all duration-300 ${s?"bg-gray-700 border-gray-600 text-white placeholder-gray-400 hover:border-blue-500 focus:border-blue-500":"bg-white border-gray-300 text-gray-900 placeholder-gray-500 hover:border-blue-500 focus:border-blue-500"} focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-opacity-50`}),e.jsx("div",{className:`text-xs px-2 md:px-3 py-2 rounded-lg font-mono font-bold whitespace-nowrap ${s?"bg-red-900 text-red-200":"bg-red-100 text-red-800"}`,children:R.split(":")[1]})]}),C&&S&&e.jsx("div",{className:`absolute top-full left-0 mt-2 w-full md:w-80 max-h-96 overflow-y-auto rounded-lg border-2 shadow-2xl z-50 ${s?"bg-gray-800 border-gray-600":"bg-white border-gray-300"}`,children:(()=>{const d=[{symbol:"FOREXCOM:SPXUSD",name:"SPY - S&P 500",category:"ðŸ“ˆ Indices"},{symbol:"FOREXCOM:NSXUSD",name:"QQQ - Nasdaq 100",category:"ðŸ“ˆ Indices"},{symbol:"FOREXCOM:DJI",name:"DJI - Dow Jones",category:"ðŸ“ˆ Indices"},{symbol:"NASDAQ:AAPL",name:"AAPL - Apple",category:"ðŸŽ Tech"},{symbol:"NASDAQ:MSFT",name:"MSFT - Microsoft",category:"ðŸŽ Tech"},{symbol:"NASDAQ:GOOGL",name:"GOOGL - Google",category:"ðŸŽ Tech"},{symbol:"NASDAQ:AMZN",name:"AMZN - Amazon",category:"ðŸŽ Tech"},{symbol:"NASDAQ:NVDA",name:"NVDA - NVIDIA",category:"ðŸŽ Tech"},{symbol:"NASDAQ:TSLA",name:"TSLA - Tesla",category:"ðŸŽ Tech"},{symbol:"NASDAQ:META",name:"META - Meta",category:"ðŸŽ Tech"},{symbol:"BITSTAMP:BTCUSD",name:"BTC - Bitcoin",category:"â‚¿ Crypto"},{symbol:"BITSTAMP:ETHUSD",name:"ETH - Ethereum",category:"â‚¿ Crypto"},{symbol:"NYSE:JPM",name:"JPM - JPMorgan",category:"ðŸ¦ Finance"},{symbol:"NYSE:BAC",name:"BAC - Bank of America",category:"ðŸ¦ Finance"},{symbol:"NYSE:GS",name:"GS - Goldman Sachs",category:"ðŸ¦ Finance"}].filter(y=>y.name.toLowerCase().includes(S.toLowerCase())||y.symbol.toLowerCase().includes(S.toLowerCase()));return d.length===0?e.jsxs("div",{className:`px-4 py-3 text-sm ${s?"text-gray-400":"text-gray-600"}`,children:['No symbols found for "',S,'"']}):d.map((y,L)=>e.jsx("div",{onClick:()=>{B(y.symbol),E(""),F(!1)},className:`px-4 py-3 cursor-pointer transition-colors ${s?"hover:bg-gray-700 border-b border-gray-700":"hover:bg-gray-100 border-b border-gray-200"} last:border-b-0`,children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("div",{className:`font-semibold ${s?"text-white":"text-gray-900"}`,children:y.symbol.split(":")[1]}),e.jsx("div",{className:`text-xs ${s?"text-gray-400":"text-gray-600"}`,children:y.name.split(" - ")[1]})]}),e.jsx("div",{className:"text-xs text-gray-500",children:y.category})]})},L))})()})]})]})}),e.jsx("div",{className:"p-2 md:p-4",children:e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-2 md:gap-4",children:[e.jsxs("div",{className:`rounded-lg p-2 md:p-3 transition-colors duration-300 lg:col-span-2 ${s?"bg-gray-800/50":"bg-gray-50/50"}`,children:[e.jsx("h3",{className:`text-sm md:text-base font-bold mb-1 transition-colors duration-300 ${s?"text-white":"text-gray-900"}`,children:"ðŸ“Š Symbol Info"}),e.jsx("div",{className:"h-[300px] md:h-[380px]",children:e.jsx("div",{className:"tradingview-widget-container h-full",ref:T})})]}),e.jsxs("div",{className:`rounded-lg p-2 md:p-3 transition-colors duration-300 lg:col-span-2 ${s?"bg-gray-800/50":"bg-gray-50/50"}`,children:[e.jsxs("h3",{className:`text-sm md:text-base font-bold mb-1 transition-colors duration-300 ${s?"text-white":"text-gray-900"}`,children:["ðŸ“Š ",R.split(":")[1]," - Graphique AvancÃ©"]}),e.jsx("p",{className:`text-xs mb-2 transition-colors duration-300 ${s?"text-gray-400":"text-gray-600"}`,children:"Cliquez sur un symbole dans la watchlist pour changer tous les widgets"}),e.jsx("div",{className:"h-[400px] md:h-[650px] lg:h-[750px]",children:e.jsx("div",{className:"tradingview-widget-container h-full",ref:a})})]}),e.jsxs("div",{className:`rounded-lg p-2 md:p-3 transition-colors duration-300 ${s?"bg-gray-800/50":"bg-gray-50/50"}`,children:[e.jsx("h3",{className:`text-sm md:text-base font-bold mb-1 transition-colors duration-300 ${s?"text-white":"text-gray-900"}`,children:"ðŸ¢ Profil de l'Entreprise"}),e.jsx("div",{className:"h-[300px] md:h-[400px]",children:e.jsx("div",{className:"tradingview-widget-container h-full",ref:u})})]}),e.jsxs("div",{className:`rounded-lg p-2 md:p-3 transition-colors duration-300 ${s?"bg-gray-800/50":"bg-gray-50/50"}`,children:[e.jsx("h3",{className:`text-sm md:text-base font-bold mb-1 transition-colors duration-300 ${s?"text-white":"text-gray-900"}`,children:"ðŸ“° Timeline - Fil d'ActualitÃ©"}),e.jsx("div",{className:"h-[300px] md:h-[400px]",children:e.jsx("div",{className:"tradingview-widget-container h-full",ref:V})})]}),e.jsxs("div",{className:`rounded-lg p-2 md:p-3 transition-colors duration-300 lg:col-span-2 ${s?"bg-gray-800/50":"bg-gray-50/50"}`,children:[e.jsx("h3",{className:`text-sm md:text-base font-bold mb-1 transition-colors duration-300 ${s?"text-white":"text-gray-900"}`,children:"ðŸ’° Ã‰tats Financiers"}),e.jsx("div",{className:"h-[350px] md:h-[450px]",children:e.jsx("div",{className:"tradingview-widget-container h-full",ref:K})})]}),e.jsxs("div",{className:`rounded-lg p-2 md:p-3 transition-colors duration-300 lg:col-span-2 ${s?"bg-gray-800/50":"bg-gray-50/50"}`,children:[e.jsx("h3",{className:`text-sm md:text-base font-bold mb-1 transition-colors duration-300 ${s?"text-white":"text-gray-900"}`,children:"ðŸ“ˆ Analyse Technique"}),e.jsx("div",{className:"h-[300px] md:h-[400px]",children:e.jsx("div",{className:"tradingview-widget-container h-full",ref:G})})]})]})})]}),e.jsxs("div",{className:`p-3 md:p-6 rounded-lg transition-colors duration-300 ${s?"bg-gray-800":"bg-white"}`,children:[e.jsxs("div",{className:"mb-3 md:mb-6",children:[e.jsx("h2",{className:`text-lg md:text-xl lg:text-2xl font-bold mb-1 md:mb-2 transition-colors duration-300 ${s?"text-white":"text-gray-900"}`,children:"ðŸ” Screener de Titres"}),e.jsx("p",{className:`text-xs md:text-sm transition-colors duration-300 ${s?"text-gray-400":"text-gray-600"}`,children:"Outil de filtrage et d'analyse des actions du marchÃ© amÃ©ricain avec critÃ¨res personnalisables"})]}),e.jsx("div",{className:"h-[600px] md:h-[700px] lg:h-[800px]",children:e.jsxs("div",{className:"tradingview-widget-container h-full",ref:P,children:[e.jsx("div",{className:"tradingview-widget-container__widget"}),e.jsx("div",{className:`tradingview-widget-copyright text-center text-xs mt-2 transition-colors duration-300 ${s?"text-gray-400":"text-gray-600"}`,children:e.jsx("a",{href:"https://fr.tradingview.com/screener/",rel:"noopener nofollow",target:"_blank",className:`underline transition-colors duration-300 ${s?"text-blue-400 hover:text-blue-300":"text-blue-600 hover:text-blue-800"}`,children:e.jsx("span",{className:"blue-text",children:"Track all markets on TradingView"})})})]})})]})]})},_t=()=>typeof window<"u"?window.BetaCombinedDashboard||{}:{},Ye=()=>{const{isDarkMode:s=!0}=_t(),[n,I]=f.useState(null),[_,o]=f.useState(!0),[Z,a]=f.useState(null),[A,T]=f.useState("both"),V=f.useRef(null),P=f.useRef(null),u=s,K=S=>S==null?"â€”":Number(S).toFixed(2),G=(S,E,C)=>e.jsxs("div",{className:`p-4 rounded-lg border ${u?"bg-gray-900 border-gray-700":"bg-white border-gray-200"}`,children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsxs("div",{className:"flex items-center gap-2 font-semibold",children:[e.jsx("span",{children:C}),e.jsx("span",{children:S})]}),e.jsx("span",{className:"text-xs opacity-70",children:E?.date||"â€”"})]}),E?.rates?.length?e.jsx("div",{className:"grid grid-cols-2 gap-x-4 gap-y-1 text-sm",children:E.rates.map(F=>e.jsxs("div",{className:"flex items-center justify-between border-b border-dashed border-gray-600/30 pb-1",children:[e.jsx("span",{className:"uppercase tracking-tight",children:F.maturity}),e.jsxs("span",{className:"font-semibold",children:[K(F.rate),"%"]})]},`${S}-${F.maturity}`))}):e.jsx("p",{className:"text-sm opacity-70",children:"DonnÃ©es non disponibles."})]});console.log("ðŸ“Š YieldCurveTab montÃ©, isDarkMode:",u);const R=async()=>{console.log("ðŸ”„ fetchYieldCurve appelÃ© pour country:",A),o(!0),a(null);try{const S=await fetch(`/api/yield-curve?country=${A}`);if(console.log("ðŸ“¡ RÃ©ponse API yield-curve:",S.status,S.ok),!S.ok)throw new Error(`Erreur API: ${S.status}`);const E=await S.json();console.log("âœ… DonnÃ©es yield curve reÃ§ues:",E),I(E),o(!1)}catch(S){console.error("âŒ Erreur yield curve:",S),a(S.message),o(!1)}};f.useEffect(()=>{R()},[A]),f.useEffect(()=>{if(!n||!V.current)return;if(typeof Chart>"u"){console.error("âŒ Chart.js n'est pas chargÃ©");return}P.current&&P.current.destroy();const S=V.current.getContext("2d"),E=[];if(n.data.us&&n.data.us.rates&&E.push({label:"US Treasury",data:n.data.us.rates.map(C=>({x:C.maturity,y:C.rate})),borderColor:"#3b82f6",backgroundColor:"rgba(59, 130, 246, 0.1)",borderWidth:3,tension:.4,pointRadius:6,pointHoverRadius:8,pointBackgroundColor:"#3b82f6",pointBorderColor:"#fff",pointBorderWidth:2}),n.data.canada&&n.data.canada.rates&&E.push({label:"Canada Bonds",data:n.data.canada.rates.map(C=>({x:C.maturity,y:C.rate})),borderColor:"#ef4444",backgroundColor:"rgba(239, 68, 68, 0.1)",borderWidth:3,tension:.4,pointRadius:6,pointHoverRadius:8,pointBackgroundColor:"#ef4444",pointBorderColor:"#fff",pointBorderWidth:2}),E.length===0){console.warn("âš ï¸ Aucune donnÃ©e disponible pour le graphique yield curve");return}return P.current=new Chart(S,{type:"line",data:{datasets:E},options:{responsive:!0,maintainAspectRatio:!1,plugins:{legend:{display:!0,position:"top",labels:{color:u?"#e5e7eb":"#1f2937",font:{size:14,weight:"bold"},padding:20}},tooltip:{backgroundColor:u?"#1f2937":"#fff",titleColor:u?"#e5e7eb":"#1f2937",bodyColor:u?"#e5e7eb":"#1f2937",borderColor:u?"#374151":"#e5e7eb",borderWidth:1,padding:12,displayColors:!0,callbacks:{label:function(C){return`${C.dataset.label}: ${C.parsed.y.toFixed(2)}%`}}}},scales:{x:{type:"category",title:{display:!0,text:"MaturitÃ©",color:u?"#9ca3af":"#6b7280",font:{size:14,weight:"bold"}},grid:{color:u?"#374151":"#e5e7eb"},ticks:{color:u?"#9ca3af":"#6b7280"}},y:{title:{display:!0,text:"Taux (%)",color:u?"#9ca3af":"#6b7280",font:{size:14,weight:"bold"}},grid:{color:u?"#374151":"#e5e7eb"},ticks:{color:u?"#9ca3af":"#6b7280",callback:function(C){return C.toFixed(2)+"%"}}}}}}),()=>{P.current&&P.current.destroy()}},[n,u]);const B=S=>S?new Date(S).toLocaleDateString("fr-CA",{year:"numeric",month:"long",day:"numeric"}):"N/A";return console.log("ðŸŽ¨ YieldCurveTab render - loading:",_,"error:",Z,"yieldData:",n,"darkMode:",u),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:`p-6 rounded-lg transition-colors duration-300 ${u?"bg-gray-800":"bg-white"}`,children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsxs("div",{children:[e.jsx("h2",{className:`text-2xl font-bold mb-2 transition-colors duration-300 ${u?"text-white":"text-gray-900"}`,children:"ðŸ“ˆ Courbe des Taux (Yield Curve)"}),e.jsx("p",{className:`text-sm transition-colors duration-300 ${u?"text-gray-400":"text-gray-600"}`,children:"Visualisation des taux obligataires US Treasury et Canada par maturitÃ©"})]}),e.jsxs("div",{className:"flex gap-3",children:[e.jsxs("select",{value:A,onChange:S=>T(S.target.value),className:`px-4 py-2 rounded-lg border transition-colors duration-300 ${u?"bg-gray-700 border-gray-600 text-white":"bg-white border-gray-300 text-gray-900"}`,children:[e.jsx("option",{value:"both",children:"US + Canada"}),e.jsx("option",{value:"us",children:"US uniquement"}),e.jsx("option",{value:"canada",children:"Canada uniquement"})]}),e.jsx("button",{onClick:R,disabled:_,className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors duration-300",children:_?"ðŸ”„ Chargement...":"ðŸ”„ Actualiser"})]})]}),n?.data?.us?.spread_10y_2y!==void 0&&e.jsx("div",{className:`p-4 rounded-lg border-l-4 ${n.data.us.inverted?"bg-red-50 border-red-500 dark:bg-red-900/20":"bg-green-50 border-green-500 dark:bg-green-900/20"}`,children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h3",{className:`font-bold ${n.data.us.inverted?"text-red-800 dark:text-red-300":"text-green-800 dark:text-green-300"}`,children:n.data.us.inverted?"âš ï¸ Courbe InversÃ©e":"âœ… Courbe Normale"}),e.jsxs("p",{className:`text-sm ${u?"text-gray-300":"text-gray-700"}`,children:["Spread 10Y-2Y: ",e.jsxs("strong",{children:[n.data.us.spread_10y_2y.toFixed(2),"%"]})]})]}),e.jsx("div",{className:`text-xs ${u?"text-gray-400":"text-gray-600"}`,children:n.data.us.inverted?"Indicateur historique de rÃ©cession potentielle":"Conditions Ã©conomiques normales"})]})})]}),_&&e.jsxs("div",{className:`p-12 rounded-lg text-center transition-colors duration-300 ${u?"bg-gray-800":"bg-white"}`,children:[e.jsx("div",{className:"animate-spin rounded-full h-16 w-16 border-b-2 border-blue-600 mx-auto mb-4"}),e.jsx("p",{className:u?"text-gray-400":"text-gray-600",children:"Chargement des donnÃ©es..."})]}),Z&&e.jsxs("div",{className:`p-6 rounded-lg border-l-4 border-red-500 ${u?"bg-red-900/20":"bg-red-50"}`,children:[e.jsx("h3",{className:`font-bold mb-2 ${u?"text-red-300":"text-red-800"}`,children:"âŒ Erreur"}),e.jsx("p",{className:u?"text-gray-300":"text-gray-700",children:Z})]}),!_&&!Z&&n&&e.jsxs(e.Fragment,{children:[n.data?.us?.rates?.length>0||n.data?.canada?.rates?.length>0?e.jsx("div",{className:`p-6 rounded-lg transition-colors duration-300 ${u?"bg-gray-800":"bg-white"}`,children:e.jsx("div",{style:{height:"400px",position:"relative"},children:e.jsx("canvas",{ref:V,style:{width:"100%",height:"100%"}})})}):e.jsxs("div",{className:`p-6 rounded-lg border-l-4 border-yellow-500 ${u?"bg-yellow-900/20":"bg-yellow-50"}`,children:[e.jsx("h3",{className:`font-bold mb-2 ${u?"text-yellow-300":"text-yellow-800"}`,children:"âš ï¸ Aucune donnÃ©e disponible"}),e.jsx("p",{className:u?"text-gray-300":"text-gray-700",children:"Les donnÃ©es de yield curve ne sont pas disponibles. VÃ©rifiez que la clÃ© API FRED_API_KEY est configurÃ©e dans les variables d'environnement Vercel."})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mt-6",children:[n.data.us&&G("US Treasury",n.data.us,"ðŸ‡ºðŸ‡¸"),n.data.canada&&G("Obligations Canada",n.data.canada,"ðŸ‡¨ðŸ‡¦")]}),e.jsxs("div",{className:`p-6 rounded-lg transition-colors duration-300 ${u?"bg-gray-800":"bg-white"}`,children:[e.jsx("h3",{className:`text-xl font-bold mb-4 ${u?"text-white":"text-gray-900"}`,children:"ðŸ“Š Tableau des MaturitÃ©s"}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full text-xs",children:[e.jsx("thead",{children:e.jsxs("tr",{className:`border-b-2 ${u?"border-gray-700":"border-gray-200"}`,children:[e.jsx("th",{className:`px-3 py-2 text-left font-bold text-xs ${u?"text-gray-300":"text-gray-700"}`,children:"MaturitÃ©"}),n.data.us&&e.jsx("th",{className:`px-3 py-2 text-right font-bold text-xs ${u?"text-gray-300":"text-gray-700"}`,children:"ðŸ‡ºðŸ‡¸ US Treasury (%)"}),n.data.canada&&e.jsx("th",{className:`px-3 py-2 text-right font-bold text-xs ${u?"text-gray-300":"text-gray-700"}`,children:"ðŸ‡¨ðŸ‡¦ Canada Bonds (%)"}),n.data.us&&n.data.canada&&e.jsx("th",{className:`px-3 py-2 text-right font-bold text-xs ${u?"text-gray-300":"text-gray-700"}`,children:"Ã‰cart (bps)"})]})}),e.jsx("tbody",{children:(()=>{const S=new Set;return n.data.us&&n.data.us.rates.forEach(E=>S.add(E.maturity)),n.data.canada&&n.data.canada.rates.forEach(E=>S.add(E.maturity)),Array.from(S).sort((E,C)=>maturityToMonths(E)-maturityToMonths(C)).map((E,C)=>{const F=n.data.us?.rates.find(d=>d.maturity===E),H=n.data.canada?.rates.find(d=>d.maturity===E),i=F&&H?((F.rate-H.rate)*100).toFixed(0):null;return e.jsxs("tr",{className:`border-b ${u?"border-gray-700":"border-gray-200"} ${C%2===0?u?"bg-gray-700/30":"bg-gray-50":""}`,children:[e.jsx("td",{className:`px-3 py-2 font-semibold text-xs ${u?"text-white":"text-gray-900"}`,children:E}),n.data.us&&e.jsx("td",{className:`px-3 py-2 text-right text-xs ${u?"text-blue-400":"text-blue-600"}`,children:F?F.rate.toFixed(2):"-"}),n.data.canada&&e.jsx("td",{className:`px-3 py-2 text-right text-xs ${u?"text-red-400":"text-red-600"}`,children:H?H.rate.toFixed(2):"-"}),n.data.us&&n.data.canada&&e.jsx("td",{className:`px-3 py-2 text-right font-mono text-xs ${i>0?u?"text-green-400":"text-green-600":i<0?u?"text-red-400":"text-red-600":u?"text-gray-400":"text-gray-600"}`,children:i!==null?(i>0?"+":"")+i:"-"})]},E)})})()})]})}),e.jsx("div",{className:`mt-4 pt-4 border-t ${u?"border-gray-700":"border-gray-200"}`,children:e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 text-xs",children:[n.data.us&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{children:[e.jsx("span",{className:u?"text-gray-400":"text-gray-600",children:"Source US:"}),e.jsx("strong",{className:`ml-2 ${u?"text-white":"text-gray-900"}`,children:n.data.us.source})]}),e.jsxs("div",{children:[e.jsx("span",{className:u?"text-gray-400":"text-gray-600",children:"Date US:"}),e.jsx("strong",{className:`ml-2 ${u?"text-white":"text-gray-900"}`,children:B(n.data.us.date)})]})]}),n.data.canada&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{children:[e.jsx("span",{className:u?"text-gray-400":"text-gray-600",children:"Source Canada:"}),e.jsx("strong",{className:`ml-2 ${u?"text-white":"text-gray-900"}`,children:n.data.canada.source})]}),e.jsxs("div",{children:[e.jsx("span",{className:u?"text-gray-400":"text-gray-600",children:"Date Canada:"}),e.jsx("strong",{className:`ml-2 ${u?"text-white":"text-gray-900"}`,children:B(n.data.canada.date)})]})]})]})})]}),e.jsxs("div",{className:`p-4 rounded-lg ${u?"bg-blue-900/20 border border-blue-800":"bg-blue-50 border border-blue-200"}`,children:[e.jsx("h4",{className:`font-bold mb-2 ${u?"text-blue-300":"text-blue-800"}`,children:"ðŸ’¡ Ã€ propos de la courbe des taux"}),e.jsxs("ul",{className:`text-sm space-y-1 ${u?"text-gray-300":"text-gray-700"}`,children:[e.jsxs("li",{children:["â€¢ ",e.jsx("strong",{children:"Courbe normale:"})," Les taux longs sont supÃ©rieurs aux taux courts (Ã©conomie saine)"]}),e.jsxs("li",{children:["â€¢ ",e.jsx("strong",{children:"Courbe inversÃ©e:"})," Les taux courts dÃ©passent les taux longs (possibilitÃ© de rÃ©cession)"]}),e.jsxs("li",{children:["â€¢ ",e.jsx("strong",{children:"Spread 10Y-2Y:"})," Indicateur clÃ© surveillÃ© par les Ã©conomistes et investisseurs"]}),e.jsxs("li",{children:["â€¢ ",e.jsx("strong",{children:"Sources:"})," FRED (Federal Reserve Economic Data) et FMP (Financial Modeling Prep)"]})]})]})]})]})},Rt=()=>typeof window<"u"?window.BetaCombinedDashboard||{}:{},Ot=()=>typeof window<"u"?window.BetaCombinedDashboardData||{}:{},It=()=>typeof window<"u"?window.DASHBOARD_UTILS||{}:{},Bt=()=>typeof window<"u"&&window.Icon?window.Icon:()=>null,Ee=s=>Array.isArray(s)?s:[],De=s=>s&&typeof s=="object"?s:{},Ge=(s,n=()=>{})=>typeof s=="function"?s:n,Je=()=>{const s=Rt(),n=Ot(),I=It(),_=Bt(),{isDarkMode:o=!0,tickers:Z,stockData:a,selectedStock:A=null,setSelectedStock:T,seekingAlphaData:V={},seekingAlphaStockData:P={},seekingAlphaViewMode:u="list",setSeekingAlphaViewMode:K,scrapingStatus:G="idle",scrapingProgress:R=0,scrapingLogs:B=[]}=s,S=Ge(T),E=Ge(K),C=Ee(Z),F=De(a),H=De(V),i=De(P),d=Ee(H.stocks),y=I.cleanText||(h=>h||""),L=I.getGradeColor||(()=>"bg-gray-100 text-gray-600"),ee=n.getCompanyLogo||s.getCompanyLogo||(()=>null),Q=Ee(B);return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("h2",{className:`text-2xl font-bold transition-colors duration-300 ${o?"text-white":"text-gray-900"}`,children:"ðŸ”§ Scrapping SA"}),e.jsx("div",{className:"flex gap-2",children:e.jsx("span",{className:`text-sm transition-colors duration-300 ${o?"text-gray-400":"text-gray-600"}`,children:"Outils d'administration dÃ©placÃ©s vers l'onglet Admin-JSLAI"})})]}),A&&e.jsxs("div",{className:"seeking-alpha-card rounded-lg p-6 border border-gray-600",children:[e.jsxs("div",{className:"flex justify-between items-start mb-4",children:[e.jsx("h3",{className:"text-2xl font-bold text-white",children:A}),e.jsx("button",{onClick:()=>S(null),className:"text-blue-400 hover:text-blue-300",children:"âœ• Fermer"})]}),(()=>{const h=i.stocks?.[A],O=d?.find(m=>m.ticker===A),l=O?.parsedData;return h||l?e.jsxs("div",{className:"bg-white rounded-lg shadow-xl overflow-hidden",children:[e.jsx("div",{className:"bg-gradient-to-r from-gray-800 to-gray-900 p-6",children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-2xl font-bold text-white",children:A}),e.jsx("p",{className:"text-blue-100 text-sm",children:h?.companyName||l?.companyName||"N/A"})]}),e.jsx("button",{onClick:()=>S(null),className:"text-white hover:text-gray-200 text-xl",children:"âœ•"})]})}),e.jsxs("div",{className:"p-6 space-y-6 max-h-[80vh] overflow-y-auto",children:[e.jsxs("div",{children:[e.jsxs("h4",{className:"text-lg font-bold text-gray-800 mb-4 flex items-center",children:[e.jsx("div",{className:"w-1 h-6 bg-green-600 mr-3"}),"MÃ©triques ClÃ©s"]}),e.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[e.jsxs("div",{className:"bg-gray-50 rounded-lg p-4",children:[e.jsx("div",{className:"text-gray-600 text-sm",children:"Capitalisation"}),e.jsx("div",{className:"text-gray-800 font-bold text-lg",children:h?.metrics?.marketCap||"N/A"})]}),e.jsxs("div",{className:"bg-gray-50 rounded-lg p-4",children:[e.jsx("div",{className:"text-gray-600 text-sm",children:"Croissance BPA"}),e.jsx("div",{className:"text-gray-800 font-bold text-lg",children:h?.metrics?.bpaGrowth||"N/A"})]}),e.jsxs("div",{className:"bg-gray-50 rounded-lg p-4",children:[e.jsx("div",{className:"text-gray-600 text-sm",children:"P/E Ratio"}),e.jsx("div",{className:"text-gray-800 font-bold text-lg",children:h?.metrics?.peRatio||"N/A"})]}),e.jsxs("div",{className:"bg-gray-50 rounded-lg p-4",children:[e.jsx("div",{className:"text-gray-600 text-sm",children:"Secteur"}),e.jsx("div",{className:"text-gray-800 font-bold text-lg",children:h?.metrics?.sector||"N/A"})]}),e.jsxs("div",{className:"bg-gray-50 rounded-lg p-4",children:[e.jsx("div",{className:"text-gray-600 text-sm",children:"Rendement Dividende"}),e.jsx("div",{className:"text-green-600 font-bold text-lg",children:h?.metrics?.dividendYield||"N/A"})]}),e.jsxs("div",{className:"bg-gray-50 rounded-lg p-4",children:[e.jsx("div",{className:"text-gray-600 text-sm",children:"FrÃ©quence"}),e.jsx("div",{className:"text-gray-800 font-bold text-lg",children:h?.metrics?.dividendFrequency||"N/A"})]}),e.jsxs("div",{className:"bg-gray-50 rounded-lg p-4",children:[e.jsx("div",{className:"text-gray-600 text-sm",children:"Ex-Dividende"}),e.jsx("div",{className:"text-gray-800 font-bold text-lg",children:h?.metrics?.exDivDate||"N/A"})]}),e.jsxs("div",{className:"bg-gray-50 rounded-lg p-4",children:[e.jsx("div",{className:"text-gray-600 text-sm",children:"Paiement Annuel"}),e.jsx("div",{className:"text-green-600 font-bold text-lg",children:h?.metrics?.annualPayout||"N/A"})]}),e.jsxs("div",{className:"bg-gray-50 rounded-lg p-4",children:[e.jsx("div",{className:"text-gray-600 text-sm",children:"Prix Actuel"}),e.jsx("div",{className:"text-blue-600 font-bold text-lg",children:h?.metrics?.price||"N/A"})]})]})]}),h?.companyProfile&&e.jsxs("div",{children:[e.jsx("h4",{className:"text-lg font-bold text-gray-800 mb-4",children:"Profil de l'Entreprise"}),e.jsx("div",{className:"text-gray-700 leading-relaxed",children:y(h.companyProfile.description)})]}),h?.quantRating&&e.jsxs("div",{children:[e.jsx("h4",{className:"text-lg font-bold text-gray-800 mb-4",children:"Analyse Quantitative"}),e.jsx("div",{className:"flex gap-4 mb-6",children:Object.entries(h.quantRating).map(([m,c])=>!c||m==="overall"?null:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-gray-600 text-sm mb-2 capitalize",children:m}),e.jsx("span",{className:`px-3 py-2 rounded-lg text-sm font-bold ${L(c)}`,children:c})]},m))})]}),h?.sectorAnalysis&&e.jsxs("div",{children:[e.jsxs("h4",{className:"text-lg font-bold text-gray-800 mb-4 flex items-center",children:[e.jsx("div",{className:"w-1 h-6 bg-green-600 mr-3"}),"Analyse Sectorielle"]}),e.jsx("div",{className:"bg-gray-50 rounded-lg p-4",children:e.jsx("div",{className:"text-gray-700 leading-relaxed",children:typeof h.sectorAnalysis=="string"?y(h.sectorAnalysis):Object.entries(h.sectorAnalysis).map(([m,c])=>e.jsxs("div",{className:"mb-3",children:[e.jsxs("div",{className:"font-bold text-gray-800 capitalize mb-2",children:[y(m),":"]}),e.jsx("div",{className:"text-gray-700 leading-relaxed",children:y(c)})]},m))})})]}),h?.strengths&&e.jsxs("div",{className:"bg-green-50 rounded-lg p-4",children:[e.jsxs("h4",{className:"text-lg font-bold text-green-800 mb-4 flex items-center",children:[e.jsx("span",{className:"mr-2",children:"âœ…"}),"Points Positifs"]}),e.jsx("div",{className:"space-y-3",children:h.strengths.map((m,c)=>e.jsxs("div",{className:"text-green-700",children:[e.jsxs("span",{className:"font-bold",children:[c+1,"."]})," ",y(m)]},c))})]}),h?.concerns&&e.jsxs("div",{className:"bg-red-50 rounded-lg p-4",children:[e.jsxs("h4",{className:"text-lg font-bold text-red-800 mb-4 flex items-center",children:[e.jsx("span",{className:"mr-2",children:"âš ï¸"}),"PrÃ©occupations"]}),e.jsx("div",{className:"space-y-3",children:h.concerns.map((m,c)=>e.jsxs("div",{className:"text-red-700 flex items-start",children:[e.jsx("span",{className:"mr-2",children:"âš ï¸"}),e.jsx("span",{children:y(m)})]},c))})]}),h?.finalConclusion&&e.jsxs("div",{className:"bg-gray-800 rounded-lg p-6 text-white",children:[e.jsx("h4",{className:"text-xl font-bold mb-4",children:"Conclusion Finale"}),e.jsxs("div",{className:"bg-white rounded-lg p-4 text-gray-800",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsx("span",{className:"font-bold",children:"Recommandation:"}),e.jsx("span",{className:"bg-yellow-400 text-black px-3 py-1 rounded font-bold",children:h.finalConclusion.rating})]}),e.jsx("div",{className:"text-gray-700 leading-relaxed",children:y(h.finalConclusion.recommendation)})]})]}),O?.url&&e.jsx("div",{className:"text-center pt-4 border-t",children:e.jsx("a",{href:O.url,target:"_blank",rel:"noopener noreferrer",className:"inline-flex items-center px-6 py-3 bg-gray-800 text-white rounded-lg hover:bg-gray-700 transition-colors",children:"Lire l'analyse complÃ¨te sur Seeking Alpha â†’"})})]})]}):null})(),(()=>{const h=d?.find(l=>l.ticker===A),O=h?.parsedData;return O?.analysis?e.jsxs("div",{className:"mb-4",children:[e.jsxs("h4",{className:"text-lg font-semibold text-white mb-2 flex items-center gap-2",children:[e.jsx(_,{emoji:"ðŸ“ˆ",size:20}),"Analyse Seeking Alpha"]}),e.jsx("div",{className:"text-gray-200 text-sm leading-relaxed",children:O.analysis}),e.jsx("a",{href:h.url,target:"_blank",rel:"noopener noreferrer",className:"inline-block mt-2 text-blue-300 hover:text-blue-200 underline",children:"Lire l'analyse complÃ¨te sur Seeking Alpha â†’"})]}):null})(),F[A]&&e.jsxs("div",{className:"mb-4",children:[e.jsxs("h4",{className:"text-lg font-semibold text-white mb-2 flex items-center gap-2",children:[e.jsx(_,{emoji:"ðŸ“Š",size:20}),"DonnÃ©es Temps RÃ©el"]}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-3 text-sm",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-blue-200",children:"Ouverture:"}),e.jsxs("span",{className:"text-white ml-2",children:["$",F[A].o?.toFixed(2)||"N/A"]})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-blue-200",children:"Plus haut:"}),e.jsxs("span",{className:"text-white ml-2",children:["$",F[A].h?.toFixed(2)||"N/A"]})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-blue-200",children:"Plus bas:"}),e.jsxs("span",{className:"text-white ml-2",children:["$",F[A].l?.toFixed(2)||"N/A"]})]})]})]})]}),!A&&d.length===0&&C.length>0&&e.jsxs("div",{className:`backdrop-blur-sm rounded-lg p-6 border transition-colors duration-300 ${o?"bg-gray-800/50 border-gray-700":"bg-gray-50 border-gray-200"}`,children:[e.jsxs("h3",{className:`text-lg font-semibold mb-4 ${o?"text-white":"text-gray-900"}`,children:["ðŸ“Š Tickers disponibles (",C.length,")"]}),e.jsx("p",{className:`text-sm mb-4 ${o?"text-gray-400":"text-gray-600"}`,children:"Cliquez sur un ticker pour voir ses dÃ©tails ou lancez le scraper pour collecter les donnÃ©es Seeking Alpha."}),e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 lg:grid-cols-6 gap-3",children:C.map(h=>e.jsxs("button",{onClick:()=>S(h),className:`p-3 rounded-lg border transition-all hover:scale-105 ${o?"bg-gray-700/50 border-gray-600 hover:border-green-500 text-white":"bg-white border-gray-300 hover:border-green-500 text-gray-900"}`,children:[e.jsx("div",{className:"font-mono font-bold text-lg",children:h}),F[h]&&e.jsxs("div",{className:`text-xs mt-1 ${(F[h].dp||F[h].changePercent||0)>=0?"text-green-500":"text-red-500"}`,children:["$",(F[h].c||F[h].price||0).toFixed(2)]})]},h))})]}),!A&&d.length>0&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("h3",{className:"text-lg font-semibold text-white flex items-center gap-2",children:[e.jsx(_,{emoji:"ðŸ“ˆ",size:20}),"Analyses ComplÃ¨tes"]}),e.jsxs("div",{className:"flex bg-gray-700 rounded-lg p-1",children:[e.jsx("button",{onClick:()=>E("list"),className:`px-3 py-1 rounded text-sm transition-colors ${u==="list"?"bg-gray-800 text-white":"text-gray-300 hover:text-white"}`,children:"ðŸ“‹ Liste"}),e.jsx("button",{onClick:()=>E("cards"),className:`px-3 py-1 rounded text-sm transition-colors ${u==="cards"?"bg-gray-800 text-white":"text-gray-300 hover:text-white"}`,children:"ðŸŽ´ Cartes"})]})]}),u==="list"&&e.jsxs("div",{className:"bg-gray-800 rounded-lg p-4 border border-gray-700",children:[e.jsxs("h4",{className:"text-lg font-semibold text-white mb-4 flex items-center gap-2",children:[e.jsx(_,{emoji:"ðŸ“‹",size:20}),"Vue Liste - Analyses"]}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full text-sm",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"border-b border-gray-600",children:[e.jsx("th",{className:"text-left py-2 text-gray-300",children:"Ticker"}),e.jsx("th",{className:"text-left py-2 text-gray-300",children:"Prix"}),e.jsx("th",{className:"text-left py-2 text-gray-300",children:"Change"}),e.jsx("th",{className:"text-left py-2 text-gray-300",children:"P/E"}),e.jsx("th",{className:"text-left py-2 text-gray-300",children:"Dividende"}),e.jsx("th",{className:"text-left py-2 text-gray-300",children:"Secteur"}),e.jsx("th",{className:"text-left py-2 text-gray-300",children:"Quant"}),e.jsx("th",{className:"text-left py-2 text-gray-300",children:"Rating"}),e.jsx("th",{className:"text-left py-2 text-gray-300",children:"Actions"})]})}),e.jsx("tbody",{children:d.slice().sort((h,O)=>h.ticker.localeCompare(O.ticker)).map((h,O)=>{const l=i.stocks?.[h.ticker],m=h.parsedData,c=l?.metrics?.price||m?.price||"N/A",$=l?.metrics?.priceChange||m?.change||"N/A",M=l?.metrics?.peRatio||m?.peRatio||"N/A",re=l?.metrics?.dividendYield||m?.dividendYield||"N/A",p=l?.metrics?.sector||m?.sector||"N/A",W=m?.quantRating||l?.quantRating||"N/A",t=l?.finalConclusion?.rating||"Hold",g=$.includes("+")||$.includes("green")?"text-green-400":"text-red-400";return e.jsxs("tr",{className:"border-b border-gray-700 hover:bg-gray-800 cursor-pointer",onClick:()=>S(h.ticker),children:[e.jsx("td",{className:"py-3",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("img",{src:ee(h.ticker),alt:`${h.ticker} logo`,className:"w-6 h-6 rounded",onError:x=>{x.target.style.display="none"}}),e.jsx("span",{className:"font-mono text-white font-bold",children:h.ticker})]})}),e.jsx("td",{className:"py-3 text-white",children:c}),e.jsx("td",{className:`py-3 ${g}`,children:$}),e.jsx("td",{className:"py-3 text-white",children:M}),e.jsx("td",{className:"py-3 text-white",children:re}),e.jsx("td",{className:"py-3 text-white text-xs",children:y(p)}),e.jsx("td",{className:"py-3",children:W!=="N/A"?e.jsx("span",{className:`px-2 py-1 rounded text-xs font-bold ${L(W)}`,children:W}):e.jsx("span",{className:"text-gray-500 text-xs",children:"N/A"})}),e.jsx("td",{className:"py-3",children:e.jsx("span",{className:"bg-yellow-400 text-black px-2 py-1 rounded text-xs font-bold",children:t})}),e.jsx("td",{className:"py-3",children:e.jsxs("div",{className:"flex flex-col gap-1.5",children:[e.jsxs("button",{onClick:x=>{x.stopPropagation(),S(h.ticker)},className:"px-2 py-1 bg-blue-600 hover:bg-blue-500 text-white rounded text-xs font-semibold transition-colors flex items-center gap-1",children:[e.jsx(LucideIcon,{name:"FileText",className:"w-3 h-3"}),"Fiche"]}),h.url&&e.jsxs("a",{href:h.url,target:"_blank",rel:"noopener noreferrer",onClick:x=>x.stopPropagation(),className:"px-2 py-1 bg-green-600 hover:bg-green-500 text-white rounded text-xs font-semibold transition-colors flex items-center gap-1",children:[e.jsx(LucideIcon,{name:"ExternalLink",className:"w-3 h-3"}),"Article SA"]}),m?.peers&&e.jsxs("button",{onClick:x=>{x.stopPropagation(),alert(`Peers for ${h.ticker}:
${m.peers.join(`
`)}`)},className:"px-2 py-1 bg-purple-600 hover:bg-purple-500 text-white rounded text-xs font-semibold transition-colors flex items-center gap-1",children:[e.jsx(LucideIcon,{name:"Users",className:"w-3 h-3"}),"Peers"]})]})})]},O)})})]})})]}),u==="cards"&&e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:d.slice().sort((h,O)=>h.ticker.localeCompare(O.ticker)).map((h,O)=>{const l=i.stocks?.[h.ticker],m=h.parsedData;return e.jsxs("div",{className:"bg-gray-800 rounded-lg p-6 border border-gray-700 hover:border-blue-300/40 transition-all cursor-pointer",onClick:()=>S(h.ticker),children:[e.jsxs("div",{className:"flex justify-between items-start mb-6",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("img",{src:ee(h.ticker),alt:`${h.ticker} logo`,className:"w-12 h-12 rounded-lg",onError:c=>{c.target.style.display="none"}}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-2xl font-bold text-white",children:h.ticker}),e.jsx("p",{className:"text-sm text-gray-400",children:l?.companyName||m?.companyName||"N/A"})]})]}),e.jsx("div",{className:"bg-yellow-400 text-black px-3 py-1 rounded font-bold text-sm",children:l?.finalConclusion?.rating||"Hold"})]}),e.jsxs("div",{className:"bg-gray-700 rounded-lg p-4 mb-6",children:[e.jsx("div",{className:"text-3xl font-bold text-white mb-1",children:l?.metrics?.price||m?.price||"N/A"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-4 h-4 bg-gray-700 rounded"}),e.jsx("span",{className:`text-sm font-medium ${l?.metrics?.priceChange?.includes("+")?"text-green-400":"text-red-400"}`,children:l?.metrics?.priceChange||m?.change||"N/A"})]})]}),e.jsxs("div",{className:"space-y-3 mb-6",children:[e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"text-gray-400",children:"Market Cap"}),e.jsx("span",{className:"text-white font-medium",children:l?.metrics?.marketCap||m?.marketCap||"N/A"})]}),e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"text-gray-400",children:"P/E Ratio"}),e.jsx("span",{className:"text-white font-medium",children:l?.metrics?.peRatio||m?.peRatio||"N/A"})]}),e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"text-gray-400",children:"Dividend"}),e.jsx("span",{className:"text-white font-medium",children:l?.metrics?.dividendYield||m?.dividendYield||"N/A"})]}),e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"text-gray-400",children:"Secteur"}),e.jsx("span",{className:"text-white font-medium",children:l?.metrics?.sector||m?.sector||"N/A"})]})]}),l?.quantRating&&e.jsx("div",{className:"mb-6",children:e.jsxs("div",{className:"border-t border-gray-600 pt-4",children:[e.jsx("h4",{className:"text-center text-gray-300 text-sm font-medium mb-4",children:"QUANT RATINGS"}),e.jsx("div",{className:"flex justify-center gap-3",children:Object.entries(l.quantRating).map(([c,$])=>{if(!$||c==="overall")return null;const M=c.substring(0,3);return e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-xs text-gray-400 mb-1",children:M}),e.jsx("span",{className:`px-2 py-1 rounded text-xs font-bold ${L($)}`,children:$})]},c)})})]})}),h.url&&e.jsx("div",{className:"mb-4",children:e.jsx("a",{href:h.url,target:"_blank",rel:"noopener noreferrer",onClick:c=>c.stopPropagation(),className:"block w-full px-4 py-2 bg-gray-800 text-white text-sm rounded-lg hover:bg-gray-700 transition-colors text-center",children:"ðŸ“° Lire sur Seeking Alpha â†’"})}),e.jsx("div",{className:"text-center",children:e.jsxs("div",{className:"flex items-center justify-center gap-2 text-gray-400 text-sm",children:[e.jsx("span",{children:"ðŸ‘†"}),e.jsx("span",{children:"Cliquez pour le rapport dÃ©taillÃ©"})]})})]},O)})})]}),e.jsxs("div",{className:`backdrop-blur-sm rounded-lg p-4 border transition-colors duration-300 ${o?"bg-gray-900 border-gray-700":"bg-gray-50 border-gray-200"}`,children:[e.jsx("h3",{className:`text-lg font-semibold mb-4 transition-colors duration-300 ${o?"text-white":"text-gray-900"}`,children:"ðŸ”§ Outils de Scraping"}),e.jsxs("div",{className:"mb-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("span",{className:`font-medium transition-colors duration-300 ${o?"text-white":"text-gray-900"}`,children:"Statut:"}),e.jsx("span",{className:`px-3 py-1 rounded text-sm font-bold ${G==="idle"?"bg-gray-500 text-white":G==="running"?"bg-gray-700 text-white":G==="completed"?"bg-green-500 text-white":"bg-red-500 text-white"}`,children:G==="idle"?"â¸ï¸ En attente":G==="running"?"ðŸ”„ En cours":G==="completed"?"âœ… TerminÃ©":"âŒ Erreur"})]}),G==="running"&&e.jsx("div",{className:"w-full bg-gray-700 rounded-full h-2 mb-2",children:e.jsx("div",{className:"bg-blue-500 h-2 rounded-full transition-all duration-300",style:{width:`${R}%`}})}),e.jsxs("div",{className:`text-sm transition-colors duration-300 ${o?"text-gray-300":"text-gray-600"}`,children:["Progression: ",R,"%"]})]}),e.jsxs("div",{className:`rounded-lg p-4 mb-4 transition-colors duration-300 ${o?"bg-gray-900/30":"bg-blue-50"}`,children:[e.jsx("h4",{className:`font-medium mb-2 transition-colors duration-300 ${o?"text-white":"text-gray-900"}`,children:"ðŸ“– Instructions de Scraping"}),e.jsxs("div",{className:`text-sm space-y-2 transition-colors duration-300 ${o?"text-blue-200":"text-blue-800"}`,children:[e.jsxs("div",{children:["â€¢ ",e.jsx("strong",{children:"MÃ©thode 1:"}),' Cliquez sur "ðŸš€ Lancer le Scraper" pour ouvrir les pages']}),e.jsxs("div",{children:["â€¢ ",e.jsx("strong",{children:"MÃ©thode 2:"}),' Cliquez sur "ðŸ“‹ Script F12" pour copier un script']}),e.jsxs("div",{children:["â€¢ ",e.jsx("strong",{children:"Ã‰tapes:"})," Ouvrez F12 â†’ Console â†’ Collez le script â†’ EntrÃ©e"]}),e.jsxs("div",{children:["â€¢ ",e.jsx("strong",{children:"RÃ©sultat:"})," Les donnÃ©es seront affichÃ©es et copiÃ©es automatiquement"]})]})]}),e.jsxs("div",{className:`rounded-lg p-4 mb-4 transition-colors duration-300 ${o?"bg-yellow-900/30":"bg-yellow-100/80"}`,children:[e.jsx("h4",{className:`font-medium mb-2 transition-colors duration-300 ${o?"text-white":"text-gray-900"}`,children:"ðŸ”§ RÃ©solution des Popups BloquÃ©s"}),e.jsxs("div",{className:`text-sm space-y-2 transition-colors duration-300 ${o?"text-yellow-200":"text-yellow-800"}`,children:[e.jsxs("div",{children:["â€¢ ",e.jsx("strong",{children:"Chrome/Edge:"}),` Cliquez sur l'icÃ´ne popup dans la barre d'adresse â†’ "Toujours autoriser"`]}),e.jsxs("div",{children:["â€¢ ",e.jsx("strong",{children:"Firefox:"}),` Cliquez sur l'icÃ´ne bouclier â†’ "DÃ©sactiver la protection"`]}),e.jsxs("div",{children:["â€¢ ",e.jsx("strong",{children:"Safari:"})," Safari â†’ PrÃ©fÃ©rences â†’ Sites web â†’ Pop-ups â†’ Autoriser"]}),e.jsxs("div",{children:["â€¢ ",e.jsx("strong",{children:"Alternative:"}),' Utilisez le bouton "ðŸŒ Ouvrir Seeking Alpha" ou le script F12']})]})]}),e.jsxs("div",{className:`rounded-lg p-4 mb-4 transition-colors duration-300 ${o?"bg-green-900/30":"bg-green-100/80"}`,children:[e.jsxs("h4",{className:`font-medium mb-2 transition-colors duration-300 ${o?"text-white":"text-gray-900"}`,children:[e.jsx(_,{emoji:"ðŸ¤–",size:18,className:"mr-2 inline-block"}),"Configuration des API"]}),e.jsxs("div",{className:`text-sm space-y-2 transition-colors duration-300 ${o?"text-green-200":"text-green-800"}`,children:[e.jsxs("div",{children:["â€¢ ",e.jsx("strong",{children:"Claude API:"})," Configurez ANTHROPIC_API_KEY pour l'analyse automatique"]}),e.jsxs("div",{children:["â€¢ ",e.jsx("strong",{children:"GitHub API:"})," Configurez GITHUB_TOKEN pour la mise Ã  jour des fichiers"]}),e.jsxs("div",{children:["â€¢ ",e.jsx("strong",{children:"FonctionnalitÃ©:"})," Scraping â†’ Analyse Perplexity â†’ Mise Ã  jour JSON automatique"]}),e.jsxs("div",{children:["â€¢ ",e.jsx("strong",{children:"Bouton:"}),' "ðŸ¤– Analyser avec Claude" pour traiter les donnÃ©es existantes']})]})]}),e.jsxs("div",{className:`rounded-lg p-4 max-h-64 overflow-y-auto transition-colors duration-300 ${o?"bg-black/50":"bg-gray-100"}`,children:[e.jsx("h4",{className:`font-medium mb-2 transition-colors duration-300 ${o?"text-white":"text-gray-900"}`,children:"ðŸ“‹ Logs de Scraping"}),Q.length===0?e.jsx("div",{className:`text-sm transition-colors duration-300 ${o?"text-gray-400":"text-gray-500"}`,children:"Aucun log pour le moment..."}):e.jsx("div",{className:"space-y-1",children:Q.map((h,O)=>e.jsxs("div",{className:`text-xs p-2 rounded ${h.type==="error"?"bg-red-900/50 text-red-300":h.type==="success"?"bg-green-900/50 text-green-300":h.type==="warning"?"bg-yellow-900/50 text-yellow-300":"bg-gray-900/50 text-gray-300"}`,children:[e.jsxs("span",{className:"text-gray-400",children:["[",h.timestamp,"]"]})," ",h.message]},O))})]})]})]})},Ut=()=>typeof window<"u"?window.BetaCombinedDashboard||{}:{},qt=()=>typeof window<"u"?window.DASHBOARD_UTILS||{}:{},zt=()=>typeof window<"u"&&window.Icon?window.Icon:()=>null,Xe=s=>Array.isArray(s)?s:[],Fe=s=>s&&typeof s=="object"?s:{},Ae=s=>typeof s=="function"?s:async()=>{},ke=(s,n=()=>{})=>typeof s=="function"?s:n,Ke=()=>{const s=Ut(),n=qt(),I=zt(),{isDarkMode:_=!0,tickers:o=[],stockData:Z={},selectedStock:a=null,setSelectedStock:A,seekingAlphaData:T={},seekingAlphaStockData:V={},seekingAlphaViewMode:P="list",refreshAllStocks:u,fetchNews:K,runSeekingAlphaScraper:G,openSeekingAlpha:R,generateScrapingScript:B,addScrapingLog:S,analyzeWithClaude:E,scrapingStatus:C="idle",loading:F=!1}=s,H=Xe(o),i=Fe(Z),d=Fe(T),y=Fe(V),L=Xe(d.stocks),ee=n.cleanText||(t=>t||""),Q=n.getGradeColor||(()=>"bg-gray-100 text-gray-600"),h=ke(A),O=Ae(u),l=Ae(K),m=Ae(G),c=ke(R),$=ke(B,()=>""),M=ke(S),re=Ae(E),p=t=>{const g=$(t);!g||typeof navigator>"u"||!navigator.clipboard||navigator.clipboard.writeText(g).then(()=>{M("ðŸ“‹ Script de scraping copiÃ© dans le presse-papiers","success"),M("ðŸ’¡ Collez-le dans la console F12 de Seeking Alpha","info")}).catch(x=>{M(`âŒ Impossible de copier le script: ${x?.message||x}`,"error")})},W=async()=>{M("ðŸ¤– DÃ©marrage de l'analyse Perplexity sur les donnÃ©es existantes...","info");try{for(const t of H){const g=L.find(x=>x.ticker===t);g?.parsedData&&await re(t,g.parsedData)}M("âœ… Analyse Perplexity terminÃ©e pour tous les titres","success")}catch(t){M(`âŒ Erreur analyse Perplexity: ${t?.message||t}`,"error")}};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("h2",{className:`text-2xl font-bold transition-colors duration-300 ${_?"text-white":"text-gray-900"}`,children:[e.jsx(I,{emoji:"ðŸ“ˆ",size:24,className:"mr-2 inline-block"}),"Analyses Seeking Alpha"]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:O,disabled:F,className:"px-4 py-2 bg-emerald-600 text-white rounded hover:bg-emerald-700 disabled:opacity-50 transition-colors",children:F?"Actualisation...":"Actualiser Stocks"}),e.jsx("button",{onClick:l,className:"px-4 py-2 bg-green-600 text-white rounded hover:bg-green-700 transition-colors",children:"Actualiser News"}),e.jsx("button",{onClick:m,disabled:C==="running",className:"px-4 py-2 bg-violet-600 text-white rounded hover:bg-violet-700 disabled:opacity-50 transition-colors",children:C==="running"?"Scraping...":"ðŸš€ Lancer le Scraper"}),e.jsx("button",{onClick:()=>c("AAPL"),className:"px-4 py-2 bg-amber-600 text-white rounded hover:bg-amber-700 transition-colors",children:"ðŸŒ Ouvrir Seeking Alpha"}),e.jsx("button",{onClick:()=>p("CVS"),className:"px-4 py-2 bg-indigo-600 text-white rounded hover:bg-indigo-700 transition-colors",children:"ðŸ“‹ Script F12"}),e.jsx("button",{onClick:W,className:"px-4 py-2 bg-purple-600 text-white rounded hover:bg-purple-700 transition-colors",children:"ðŸ¤– Analyser avec Claude"})]})]}),a&&e.jsxs("div",{className:"seeking-alpha-card rounded-lg p-6 border border-gray-600",children:[e.jsxs("div",{className:"flex justify-between items-start mb-4",children:[e.jsx("h3",{className:"text-2xl font-bold text-white",children:a}),e.jsx("button",{onClick:()=>h(null),className:"text-blue-400 hover:text-blue-300",children:"âœ• Fermer"})]}),(()=>{const t=y.stocks?.[a],g=L?.find(j=>j.ticker===a),x=g?.parsedData;return t||x?e.jsxs("div",{className:"bg-white rounded-lg shadow-xl overflow-hidden",children:[e.jsx("div",{className:"bg-gradient-to-r from-gray-800 to-gray-900 p-6",children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-2xl font-bold text-white",children:a}),e.jsx("p",{className:"text-blue-100 text-sm",children:t?.companyName||x?.companyName||"N/A"})]}),e.jsx("button",{onClick:()=>h(null),className:"text-white hover:text-gray-200 text-xl",children:"âœ•"})]})}),e.jsxs("div",{className:"p-6 space-y-6 max-h-[80vh] overflow-y-auto",children:[e.jsxs("div",{children:[e.jsxs("h4",{className:"text-lg font-bold text-gray-800 mb-4 flex items-center",children:[e.jsx("div",{className:"w-1 h-6 bg-green-600 mr-3"}),"MÃ©triques ClÃ©s"]}),e.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[e.jsxs("div",{className:"bg-gray-50 rounded-lg p-4",children:[e.jsx("div",{className:"text-gray-600 text-sm",children:"Capitalisation"}),e.jsx("div",{className:"text-gray-800 font-bold text-lg",children:t?.metrics?.marketCap||"N/A"})]}),e.jsxs("div",{className:"bg-gray-50 rounded-lg p-4",children:[e.jsx("div",{className:"text-gray-600 text-sm",children:"Croissance BPA"}),e.jsx("div",{className:"text-gray-800 font-bold text-lg",children:t?.metrics?.bpaGrowth||"N/A"})]}),e.jsxs("div",{className:"bg-gray-50 rounded-lg p-4",children:[e.jsx("div",{className:"text-gray-600 text-sm",children:"P/E Ratio"}),e.jsx("div",{className:"text-gray-800 font-bold text-lg",children:t?.metrics?.peRatio||"N/A"})]}),e.jsxs("div",{className:"bg-gray-50 rounded-lg p-4",children:[e.jsx("div",{className:"text-gray-600 text-sm",children:"Secteur"}),e.jsx("div",{className:"text-gray-800 font-bold text-lg",children:t?.metrics?.sector||"N/A"})]}),e.jsxs("div",{className:"bg-gray-50 rounded-lg p-4",children:[e.jsx("div",{className:"text-gray-600 text-sm",children:"Rendement Dividende"}),e.jsx("div",{className:"text-green-600 font-bold text-lg",children:t?.metrics?.dividendYield||"N/A"})]}),e.jsxs("div",{className:"bg-gray-50 rounded-lg p-4",children:[e.jsx("div",{className:"text-gray-600 text-sm",children:"FrÃ©quence"}),e.jsx("div",{className:"text-gray-800 font-bold text-lg",children:t?.metrics?.dividendFrequency||"N/A"})]}),e.jsxs("div",{className:"bg-gray-50 rounded-lg p-4",children:[e.jsx("div",{className:"text-gray-600 text-sm",children:"Ex-Dividende"}),e.jsx("div",{className:"text-gray-800 font-bold text-lg",children:t?.metrics?.exDivDate||"N/A"})]}),e.jsxs("div",{className:"bg-gray-50 rounded-lg p-4",children:[e.jsx("div",{className:"text-gray-600 text-sm",children:"Paiement Annuel"}),e.jsx("div",{className:"text-green-600 font-bold text-lg",children:t?.metrics?.annualPayout||"N/A"})]}),e.jsxs("div",{className:"bg-gray-50 rounded-lg p-4",children:[e.jsx("div",{className:"text-gray-600 text-sm",children:"Prix Actuel"}),e.jsx("div",{className:"text-blue-600 font-bold text-lg",children:t?.metrics?.price||"N/A"})]})]})]}),t?.companyProfile&&e.jsxs("div",{children:[e.jsx("h4",{className:"text-lg font-bold text-gray-800 mb-4",children:"Profil de l'Entreprise"}),e.jsx("div",{className:"text-gray-700 leading-relaxed",children:ee(t.companyProfile.description)})]}),t?.quantRating&&e.jsxs("div",{children:[e.jsx("h4",{className:"text-lg font-bold text-gray-800 mb-4",children:"Analyse Quantitative"}),e.jsx("div",{className:"flex gap-4 mb-6",children:Object.entries(t.quantRating).map(([j,k])=>!k||j==="overall"?null:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-gray-600 text-sm mb-2 capitalize",children:j}),e.jsx("span",{className:`px-3 py-2 rounded-lg text-sm font-bold ${Q(k)}`,children:k})]},j))})]}),t?.sectorAnalysis&&e.jsxs("div",{children:[e.jsxs("h4",{className:"text-lg font-bold text-gray-800 mb-4 flex items-center",children:[e.jsx("div",{className:"w-1 h-6 bg-green-600 mr-3"}),"Analyse Sectorielle"]}),e.jsx("div",{className:"bg-gray-50 rounded-lg p-4",children:e.jsx("div",{className:"text-gray-700 leading-relaxed",children:typeof t.sectorAnalysis=="string"?ee(t.sectorAnalysis):Object.entries(t.sectorAnalysis).map(([j,k])=>e.jsxs("div",{className:"mb-3",children:[e.jsxs("div",{className:"font-bold text-gray-800 capitalize mb-2",children:[ee(j),":"]}),e.jsx("div",{className:"text-gray-700 leading-relaxed",children:ee(k)})]},j))})})]}),t?.strengths&&e.jsxs("div",{className:"bg-green-50 rounded-lg p-4",children:[e.jsxs("h4",{className:"text-lg font-bold text-green-800 mb-4 flex items-center",children:[e.jsx("span",{className:"mr-2",children:"âœ…"}),"Points Positifs"]}),e.jsx("div",{className:"space-y-3",children:t.strengths.map((j,k)=>e.jsxs("div",{className:"text-green-700",children:[e.jsxs("span",{className:"font-bold",children:[k+1,"."]})," ",ee(j)]},k))})]}),t?.concerns&&t.concerns[0]!=="Analyse en attente"&&e.jsxs("div",{className:"bg-red-50 rounded-lg p-4",children:[e.jsxs("h4",{className:"text-lg font-bold text-red-800 mb-4 flex items-center",children:[e.jsx("span",{className:"mr-2",children:"âš ï¸"}),"PrÃ©occupations"]}),e.jsx("div",{className:"space-y-3",children:t.concerns.map((j,k)=>e.jsxs("div",{className:"text-red-700",children:[e.jsxs("span",{className:"font-bold",children:[k+1,"."]})," ",ee(j)]},k))})]}),(t?.recommendation||t?.finalConclusion?.recommendation)&&!t?.recommendation?.includes("En attente")&&!t?.finalConclusion?.recommendation?.includes("En attente")&&e.jsxs("div",{className:"bg-blue-50 rounded-lg p-4",children:[e.jsxs("h4",{className:"text-lg font-bold text-blue-800 mb-4 flex items-center",children:[e.jsx("span",{className:"mr-2",children:"ðŸ’¡"}),"Recommandation"]}),e.jsx("div",{className:"text-blue-700 leading-relaxed",children:ee(t?.recommendation||t?.finalConclusion?.recommendation)})]}),(!x||Object.keys(x).length<5)&&t?.metrics?.marketCap==="En attente d'analyse"&&e.jsxs("div",{className:"bg-yellow-50 rounded-lg p-6 border-2 border-yellow-200",children:[e.jsxs("h4",{className:"text-lg font-bold text-yellow-800 mb-3 flex items-center",children:[e.jsx("span",{className:"mr-2",children:"â³"}),"DonnÃ©es en cours de traitement"]}),e.jsxs("div",{className:"text-yellow-700 leading-relaxed space-y-2",children:[e.jsx("p",{children:"Les donnÃ©es brutes ont Ã©tÃ© collectÃ©es avec succÃ¨s, mais l'analyse dÃ©taillÃ©e n'est pas encore disponible."}),e.jsx("p",{className:"font-semibold",children:"Pour obtenir l'analyse complÃ¨te :"}),e.jsxs("ol",{className:"list-decimal pl-5 space-y-1",children:[e.jsx("li",{children:"Configurez la clÃ© API Claude dans l'onglet Admin-JSLAI"}),e.jsx("li",{children:'Cliquez sur "ðŸ¤– Analyser avec Claude" pour traiter les donnÃ©es'}),e.jsx("li",{children:"Les mÃ©triques dÃ©taillÃ©es seront extraites et affichÃ©es ici"})]}),e.jsx("div",{className:"mt-4 p-3 bg-blue-50 rounded border border-blue-200",children:e.jsxs("p",{className:"text-sm text-blue-800",children:["ðŸ’¡ ",e.jsx("strong",{children:"Astuce :"})," Les donnÃ©es parsÃ©es automatiquement sont affichÃ©es ci-dessus. Pour une analyse plus approfondie avec insights IA, utilisez l'API Claude."]})})]})]}),g?.url&&e.jsx("div",{className:"text-center pt-4 border-t",children:e.jsx("a",{href:g.url,target:"_blank",rel:"noopener noreferrer",className:"inline-flex items-center px-6 py-3 bg-gray-800 text-white rounded-lg hover:bg-gray-700 transition-colors",children:"Lire l'analyse complÃ¨te sur Seeking Alpha â†’"})})]})]}):null})()]}),(!L||L.length===0)&&H.length===0&&e.jsx("div",{className:`backdrop-blur-sm rounded-lg p-8 border transition-colors duration-300 ${_?"bg-yellow-900/20 border-yellow-700":"bg-yellow-50 border-yellow-300"}`,children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-5xl mb-4",children:e.jsx(I,{emoji:"ðŸ“Š",size:48})}),e.jsx("h3",{className:`text-xl font-bold mb-3 ${_?"text-yellow-200":"text-yellow-800"}`,children:"Aucun ticker disponible"}),e.jsx("p",{className:`mb-4 ${_?"text-yellow-300":"text-yellow-700"}`,children:`Ajoutez des normalizedTickers dans l'onglet "Titres & Nouvelles" pour commencer.`}),e.jsx("button",{onClick:()=>setActiveTab("stocks-news"),className:"px-6 py-3 bg-gray-800 text-white rounded-lg hover:bg-gray-700 transition-colors",children:"Aller Ã  Titres & Nouvelles â†’"})]})}),L&&L.length>0&&e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:L.map((t,g)=>{const x=y.stocks?.[t.ticker];return t.parsedData,t.ticker?e.jsxs("div",{className:"seeking-alpha-card rounded-lg p-6 border border-gray-600",children:[e.jsxs("div",{className:"flex justify-between items-start mb-4",children:[e.jsx("h3",{className:"text-xl font-bold text-white",children:t.ticker}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:()=>openPeersComparison(t.ticker),className:"px-3 py-1 bg-gradient-to-r from-purple-600 to-purple-700 hover:from-purple-500 hover:to-purple-600 text-white text-xs rounded-lg transition-all duration-300 shadow-lg",title:"Comparaison avec les peers",children:"ðŸ” Peers"}),e.jsx("button",{onClick:()=>h(t.ticker),className:"text-blue-400 hover:text-blue-300 text-sm",children:"Voir dÃ©tail"})]})]}),e.jsxs("div",{className:"space-y-3 mb-4",children:[x?.metrics?.marketCap&&e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-blue-200",children:"Capitalisation:"}),e.jsx("span",{className:"text-white font-semibold",children:x.metrics.marketCap})]}),x?.metrics?.peRatio&&e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-blue-200",children:"P/E:"}),e.jsx("span",{className:"text-white font-semibold",children:x.metrics.peRatio})]}),x?.metrics?.dividendYield&&e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-blue-200",children:"Dividende:"}),e.jsx("span",{className:"text-green-300 font-semibold",children:x.metrics.dividendYield})]})]}),x?.quantRating?.overall&&e.jsx("div",{className:"mb-4",children:e.jsxs("div",{className:"flex justify-between items-center mb-2",children:[e.jsx("span",{className:"text-blue-200",children:"Rating Quantitatif:"}),e.jsx("span",{className:`px-3 py-1 rounded text-sm font-bold ${Q(x.quantRating.overall)}`,children:x.quantRating.overall})]})}),x?.recommendation&&e.jsxs("div",{className:"text-blue-100 text-sm line-clamp-3",children:[ee(x.recommendation).substring(0,150),"..."]}),t.url&&e.jsx("div",{className:"mt-4 pt-4 border-t border-gray-500",children:e.jsx("a",{href:t.url,target:"_blank",rel:"noopener noreferrer",className:"text-blue-300 hover:text-blue-200 text-sm",children:"Lire l'analyse complÃ¨te â†’"})})]},g):null})}),!a&&(!L||L.length===0)&&H.length>0&&e.jsxs("div",{className:`backdrop-blur-sm rounded-lg p-6 border transition-colors duration-300 ${_?"bg-gray-800/50 border-gray-700":"bg-gray-50 border-gray-200"}`,children:[e.jsxs("h3",{className:`text-lg font-semibold mb-4 ${_?"text-white":"text-gray-900"}`,children:["ðŸ“Š Tickers disponibles (",H.length,")"]}),e.jsx("p",{className:`text-sm mb-4 ${_?"text-gray-400":"text-gray-600"}`,children:"Cliquez sur un ticker pour voir ses dÃ©tails ou lancez le scraper pour collecter les donnÃ©es Seeking Alpha."}),e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 lg:grid-cols-6 gap-3",children:H.map(t=>e.jsxs("button",{onClick:()=>h(t),className:`p-3 rounded-lg border transition-all hover:scale-105 ${_?"bg-gray-700/50 border-gray-600 hover:border-green-500 text-white":"bg-white border-gray-300 hover:border-green-500 text-gray-900"}`,children:[e.jsx("div",{className:"font-mono font-bold text-lg",children:t}),i[t]&&e.jsxs("div",{className:`text-xs mt-1 ${(i[t].dp||i[t].changePercent||0)>=0?"text-green-500":"text-red-500"}`,children:["$",(i[t].c||i[t].price||0).toFixed(2)]})]},t))})]}),!a&&(!L||L.length===0)&&H.length===0&&e.jsxs("div",{className:"seeking-alpha-card rounded-lg p-6 border border-gray-600",children:[e.jsxs("h3",{className:"text-xl font-bold text-white mb-4 flex items-center gap-2",children:[e.jsx(I,{emoji:"ðŸ“‹",size:24}),"Analyses Seeking Alpha"]}),e.jsxs("div",{className:"text-center py-8",children:[e.jsx("p",{className:"text-gray-400 mb-4",children:`Aucun ticker disponible. Ajoutez des normalizedTickers dans l'onglet "Titres & Nouvelles".`}),e.jsx("button",{onClick:()=>setActiveTab("stocks-news"),className:"px-6 py-3 bg-gray-800 text-white rounded-lg hover:bg-gray-700 transition-colors",children:"Aller Ã  Titres & Nouvelles â†’"})]})]}),!a&&L&&L.length>0&&e.jsxs("div",{className:"seeking-alpha-card rounded-lg p-6 border border-gray-600",children:[e.jsxs("h3",{className:"text-xl font-bold text-white mb-4 flex items-center gap-2",children:[e.jsx(I,{emoji:"ðŸ“‹",size:24}),"Analyses Seeking Alpha"]}),e.jsx("div",{className:"space-y-4",children:L.map((t,g)=>{const x=t.ticker,j=y.stocks?.[x],k=L?.find(le=>le.ticker===x),J=k?.parsedData;return!j&&!J?null:e.jsxs("div",{className:"bg-white rounded-lg p-4",children:[e.jsxs("div",{className:"flex justify-between items-start mb-3",children:[e.jsx("h4",{className:"text-lg font-bold text-gray-800",children:x}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:()=>openPeersComparison(x),className:"px-3 py-1 bg-gradient-to-r from-purple-600 to-purple-700 hover:from-purple-500 hover:to-purple-600 text-white text-xs rounded-lg transition-all duration-300 shadow-lg",title:"Comparaison avec les peers",children:"ðŸ” Peers"}),e.jsx("button",{onClick:()=>h(x),className:"text-blue-600 hover:text-blue-700 text-sm",children:"Voir dÃ©tail"})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4 mb-3",children:[j?.metrics?.marketCap&&e.jsxs("div",{children:[e.jsx("div",{className:"text-gray-600 text-sm",children:"Capitalisation"}),e.jsx("div",{className:"text-gray-800 font-semibold",children:j.metrics.marketCap})]}),j?.metrics?.peRatio&&e.jsxs("div",{children:[e.jsx("div",{className:"text-gray-600 text-sm",children:"P/E Ratio"}),e.jsx("div",{className:"text-gray-800 font-semibold",children:j.metrics.peRatio})]}),j?.metrics?.dividendYield&&e.jsxs("div",{children:[e.jsx("div",{className:"text-gray-600 text-sm",children:"Dividende"}),e.jsx("div",{className:"text-green-600 font-semibold",children:j.metrics.dividendYield})]}),j?.quantRating?.overall&&e.jsxs("div",{children:[e.jsx("div",{className:"text-gray-600 text-sm",children:"Rating"}),e.jsx("span",{className:`px-2 py-1 rounded text-sm font-bold ${Q(j.quantRating.overall)}`,children:j.quantRating.overall})]})]}),j?.recommendation&&e.jsxs("div",{className:"text-gray-700 text-sm line-clamp-2",children:[ee(j.recommendation).substring(0,200),"..."]}),k?.url&&e.jsx("div",{className:"mt-3 pt-3 border-t",children:e.jsx("a",{href:k.url,target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 hover:text-blue-700 text-sm",children:"Lire l'analyse complÃ¨te sur Seeking Alpha â†’"})})]},g)})})]})]})},Vt=()=>typeof window<"u"?window.BetaCombinedDashboard||{}:{},Qe=()=>{const{isDarkMode:s=!0}=Vt(),[n,I]=f.useState([]),[_,o]=f.useState(""),[Z,a]=f.useState({}),[A,T]=f.useState(!1),[V,P]=f.useState(!1),[u,K]=f.useState(!1),[G,R]=f.useState([]),[B,S]=f.useState({minMarketCap:0,maxPE:50,minROE:0,sector:"all"}),E=async()=>{const l=n.map(m=>({symbol:m,name:m}));K(!0);try{const m=[];for(const c of l)try{const[$,M,re]=await Promise.allSettled([fetch(`/api/marketdata?endpoint=quote&symbol=${c.symbol}&source=auto`),fetch(`/api/fmp?endpoint=profile&symbol=${c.symbol}`),fetch(`/api/fmp?endpoint=ratios&symbol=${c.symbol}`)]),p=$.status==="fulfilled"&&$.value.ok?await $.value.json():null,W=M.status==="fulfilled"&&M.value.ok?await M.value.json():null,t=re.status==="fulfilled"&&re.value.ok?await re.value.json():null,g={symbol:c.symbol,name:W?.data?.[0]?.companyName||W?.companyName||c.symbol,price:p?.c||0,change:p?.dp||0,marketCap:W?.data?.[0]?.mktCap||W?.mktCap||0,pe:t?.data?.[0]?.peRatioTTM||t?.peRatioTTM||null,roe:t?.data?.[0]?.returnOnEquityTTM||t?.returnOnEquityTTM||null,debtEquity:t?.data?.[0]?.debtEquityRatioTTM||t?.debtEquityRatioTTM||null,sector:W?.data?.[0]?.sector||W?.sector||"Unknown"};g.marketCap>=B.minMarketCap&&(!g.pe||g.pe<=B.maxPE)&&(!g.roe||g.roe*100>=B.minROE)&&(!g.debtEquity||g.debtEquity<=B.maxDebtEquity)&&(B.sector==="all"||g.sector===B.sector)&&m.push(g)}catch($){console.error(`Erreur pour ${c.symbol}:`,$)}R(m),console.log(`âœ… Screener Watchlist: ${m.length} rÃ©sultats trouvÃ©s sur ${l.length} titres`)}catch(m){console.error("Erreur screener:",m)}finally{K(!1)}},C=(l,m)=>{if(m==null||m==="N/A")return"text-gray-400";const c=typeof m=="string"?parseFloat(m):m;if(isNaN(c))return"text-gray-400";switch(l){case"PE":return c<0?"text-red-500":c<15?"text-emerald-500":c<25?"text-blue-500":c<35?"text-yellow-500":"text-red-500";case"ROE":return c<0?"text-red-500":c<10?"text-green-500":c<15?"text-yellow-500":c<20?"text-blue-500":"text-emerald-500";case"DE":return c<.3?"text-emerald-500":c<.7?"text-blue-500":c<1.5?"text-yellow-500":c<2.5?"text-green-500":"text-red-500";default:return"text-gray-400"}},F=(l,m="",c="")=>{if(!l&&l!==0)return"N/A";const $=parseFloat(l);return isNaN($)?"N/A":$>=1e12?`${m}${($/1e12).toFixed(2)}T${c}`:$>=1e9?`${m}${($/1e9).toFixed(2)}B${c}`:$>=1e6?`${m}${($/1e6).toFixed(2)}M${c}`:$>=1e3?`${m}${($/1e3).toFixed(2)}K${c}`:`${m}${$.toFixed(2)}${c}`},[H,i]=f.useState(!1);f.useEffect(()=>{if(H)return;(async()=>{try{const c=await fetch("/api/supabase-watchlist");if(c.ok){const $=await c.json(),M=Array.isArray($.tickers)?$.tickers:[];console.log("âœ… Watchlist chargÃ©e depuis Supabase:",M),I(M),localStorage.setItem("dans-watchlist",JSON.stringify(M)),y(M),i(!0);return}}catch{console.log("âš ï¸ Supabase non disponible, utilisation du localStorage")}const m=localStorage.getItem("dans-watchlist");if(m){const c=JSON.parse(m);console.log("ðŸ“¦ Watchlist chargÃ©e depuis localStorage:",c),I(c),y(c)}i(!0)})()},[]);const d=async(l,m)=>{for(const c of l)try{const $=await fetchStockData(c);$&&!$.message&&(m[c]={...$,timestamp:new Date().toISOString()})}catch($){console.error(`Erreur pour ${c}:`,$?.message||String($))}},y=async(l,m=!1)=>{if(l.length===0)return;T(!0);const c={};try{if(l.length>1){console.log(`ðŸš€ Batch loading ${l.length} tickers...`);const $=l.join(","),M=await fetch(`${API_BASE_URL}/api/marketdata/batch?symbols=${$}&endpoints=quote,fundamentals`);if(M.ok){const re=await M.json();if(console.log(`âœ… Batch loaded: ${re.metadata?.total_data_points||"N/A"} data points`),console.log(`ðŸ’° API Calls Saved: ${re.metadata?.api_calls_saved||"N/A"}`),re.success&&re.data){const p=re.data.quote||{},W=re.data.fundamentals||{};l.forEach(t=>{const g=t.toUpperCase(),x=p[g],j=W[g];(x||j)&&(c[t]={symbol:g,price:x?.c||j?.quote?.price||0,change:x?.d||j?.quote?.change||0,changePercent:x?.dp||j?.quote?.changesPercentage||0,profile:j?.profile||null,ratios:j?.ratios||null,source:x?.source||j?.source||"batch",timestamp:new Date().toISOString()})})}}else console.warn("âš ï¸ Batch endpoint failed, falling back to individual requests"),await d(l,c)}else await d(l,c)}catch($){console.error("âŒ Batch loading error:",$),await d(l,c)}a(m?$=>({...$,...c}):c),T(!1)},L=async()=>{if(!_.trim())return;const l=_.trim().toUpperCase();if(n.includes(l)){showMessage("Ce ticker est dÃ©jÃ  dans la watchlist","warning");return}const m=[...n,l];I(m),localStorage.setItem("dans-watchlist",JSON.stringify(m)),o(""),console.log(`âœ… ${l} ajoutÃ© Ã  la watchlist`),a(c=>({...c,[l]:{symbol:l,loading:!0,timestamp:new Date().toISOString()}})),y([l],!0).catch(c=>{console.error("Erreur chargement:",c)}),O(l,"add").catch(c=>{console.error("Erreur sauvegarde Supabase:",c)})},ee=async l=>{const m=n.filter(c=>c!==l);I(m),localStorage.setItem("dans-watchlist",JSON.stringify(m)),a(c=>{const $={...c};return delete $[l],$}),console.log(`âœ… ${l} supprimÃ© de la watchlist`),O(l,"remove").catch(c=>{console.error("Erreur sauvegarde Supabase:",c)})},Q=async()=>{await y(n),console.log("âœ… Watchlist actualisÃ©e silencieusement")};let h=null;const O=async(l,m)=>{h&&clearTimeout(h),h=setTimeout(async()=>{try{const c=await fetch("/api/supabase-watchlist",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({action:m,ticker:l})});if(!c.ok)throw new Error(`HTTP ${c.status}`);const $=await c.json();console.log(`âœ… Supabase: ${$.message}`)}catch(c){console.error("âš ï¸ Erreur sauvegarde Supabase:",c)}},500)};return f.useEffect(()=>{if(n.length>0){const l=document.getElementById("tradingview-ticker-dan-watchlist");l&&(l.innerHTML="");const m=n.map(M=>M.includes(".TO")||M.includes(".V")?{proName:`TSX:${M.replace(/\.(TO|V)/,"")}`,title:M}:{proName:`NASDAQ:${M}`,title:M}),c=document.createElement("script");c.type="text/javascript",c.src="https://s3.tradingview.com/external-embedding/embed-widget-ticker-tape.js",c.async=!0,c.innerHTML=JSON.stringify({symbols:m.slice(0,20),showSymbolLogo:!0,isTransparent:s,displayMode:"adaptive",colorTheme:s?"dark":"light",locale:"fr"});const $=document.getElementById("tradingview-ticker-dan-watchlist");$&&$.appendChild(c)}},[n,s]),e.jsxs("div",{className:"space-y-6",children:[n.length>0&&e.jsx("div",{className:`rounded-lg overflow-hidden border transition-colors duration-300 ${s?"border-gray-700 bg-gray-900":"border-gray-200 bg-white"}`,children:e.jsx("div",{className:"tradingview-widget-container",style:{height:"62px"},children:e.jsx("div",{id:"tradingview-ticker-dan-watchlist",style:{height:"100%"}})})}),V&&e.jsxs("div",{className:`border rounded-lg p-3 transition-colors duration-300 ${s?"bg-gray-900 border-gray-700":"bg-white border-gray-200"}`,children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-xl",children:"ðŸ”"}),e.jsx("h3",{className:`text-sm font-bold ${s?"text-white":"text-gray-900"}`,children:"Screener - Dan's Watchlist"}),e.jsxs("span",{className:"text-xs text-gray-500",children:["(",n.length," titres)"]})]}),e.jsx("button",{onClick:()=>P(!1),className:`p-1 rounded ${s?"hover:bg-gray-800":"hover:bg-gray-100"}`,children:e.jsx("span",{className:"text-gray-500",children:"âœ•"})})]}),e.jsxs("div",{className:"grid grid-cols-5 gap-2 mb-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-[9px] text-gray-500 mb-1 block",children:"Market Cap Min (B$)"}),e.jsx("input",{type:"number",value:B.minMarketCap/1e9,onChange:l=>S({...B,minMarketCap:parseFloat(l.target.value||0)*1e9}),className:`w-full px-2 py-1 text-xs rounded border ${s?"bg-gray-800 border-gray-700 text-white":"bg-white border-gray-300 text-gray-900"}`})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-[9px] text-gray-500 mb-1 block",children:"P/E Max"}),e.jsx("input",{type:"number",value:B.maxPE,onChange:l=>S({...B,maxPE:parseFloat(l.target.value||50)}),className:`w-full px-2 py-1 text-xs rounded border ${s?"bg-gray-800 border-gray-700 text-white":"bg-white border-gray-300 text-gray-900"}`})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-[9px] text-gray-500 mb-1 block",children:"ROE Min (%)"}),e.jsx("input",{type:"number",value:B.minROE,onChange:l=>S({...B,minROE:parseFloat(l.target.value||0)}),className:`w-full px-2 py-1 text-xs rounded border ${s?"bg-gray-800 border-gray-700 text-white":"bg-white border-gray-300 text-gray-900"}`})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-[9px] text-gray-500 mb-1 block",children:"D/E Max"}),e.jsx("input",{type:"number",step:"0.1",value:B.maxDebtEquity,onChange:l=>S({...B,maxDebtEquity:parseFloat(l.target.value||2)}),className:`w-full px-2 py-1 text-xs rounded border ${s?"bg-gray-800 border-gray-700 text-white":"bg-white border-gray-300 text-gray-900"}`})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-[9px] text-gray-500 mb-1 block",children:"Secteur"}),e.jsxs("select",{value:B.sector,onChange:l=>S({...B,sector:l.target.value}),className:`w-full px-2 py-1 text-xs rounded border ${s?"bg-gray-800 border-gray-700 text-white":"bg-white border-gray-300 text-gray-900"}`,children:[e.jsx("option",{value:"all",children:"Tous"}),e.jsx("option",{value:"Technology",children:"Technologie"}),e.jsx("option",{value:"Consumer Cyclical",children:"Consommation"}),e.jsx("option",{value:"Healthcare",children:"SantÃ©"}),e.jsx("option",{value:"Financial",children:"Finance"})]})]})]}),e.jsx("button",{onClick:E,disabled:u||n.length===0,className:`w-full py-2 rounded text-sm font-semibold transition-colors ${u?"bg-gray-400 cursor-not-allowed":"bg-gray-800 hover:bg-gray-700 text-white"}`,children:u?"â³ Analyse en cours...":`ðŸ” Analyser ma Watchlist (${n.length} titres)`}),G.length>0&&e.jsxs("div",{className:"mt-3",children:[e.jsxs("div",{className:"text-xs text-gray-500 mb-2",children:[G.length," titre(s) correspondant aux critÃ¨res"]}),e.jsx("div",{className:`max-h-64 overflow-y-auto border rounded ${s?"border-gray-700":"border-gray-300"}`,children:e.jsxs("table",{className:"w-full text-xs",children:[e.jsx("thead",{className:`sticky top-0 ${s?"bg-gray-800":"bg-gray-100"}`,children:e.jsxs("tr",{children:[e.jsx("th",{className:"text-left p-2 text-gray-500",children:"Symbole"}),e.jsx("th",{className:"text-right p-2 text-gray-500",children:"Prix"}),e.jsx("th",{className:"text-right p-2 text-gray-500",children:"Var %"}),e.jsx("th",{className:"text-right p-2 text-gray-500",children:"Cap."}),e.jsx("th",{className:"text-right p-2 text-gray-500",children:"P/E"}),e.jsx("th",{className:"text-right p-2 text-gray-500",children:"ROE"}),e.jsx("th",{className:"text-right p-2 text-gray-500",children:"D/E"})]})}),e.jsx("tbody",{children:G.map(l=>e.jsxs("tr",{className:`border-t ${s?"border-gray-700 hover:bg-gray-800":"border-gray-200 hover:bg-gray-50"}`,children:[e.jsxs("td",{className:"p-2",children:[e.jsx("div",{className:`font-bold ${s?"text-white":"text-gray-900"}`,children:l.symbol}),e.jsx("div",{className:"text-[9px] text-gray-500",children:l.name})]}),e.jsxs("td",{className:`text-right p-2 font-semibold ${s?"text-white":"text-gray-900"}`,children:["$",l.price.toFixed(2)]}),e.jsx("td",{className:`text-right p-2 font-semibold ${l.change>=0?"text-emerald-500":"text-red-500"}`,children:(()=>{const m=l.change;if(!m)return"0.00%";const c=typeof m=="number"?m:typeof m=="object"?m.raw||m.fmt||0:parseFloat(m)||0;return(c>=0?"+":"")+c.toFixed(2)+"%"})()}),e.jsx("td",{className:"text-right p-2 text-gray-400",children:F(l.marketCap)}),e.jsx("td",{className:`text-right p-2 font-semibold ${C("PE",l.pe)}`,children:l.pe?l.pe.toFixed(1):"N/A"}),e.jsx("td",{className:`text-right p-2 font-semibold ${C("ROE",l.roe?l.roe*100:null)}`,children:l.roe?(l.roe*100).toFixed(1)+"%":"N/A"}),e.jsx("td",{className:`text-right p-2 font-semibold ${C("DE",l.debtEquity)}`,children:l.debtEquity?l.debtEquity.toFixed(2):"N/A"})]},l.symbol))})]})})]})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("h2",{className:`text-2xl font-bold transition-colors duration-300 ${s?"text-white":"text-gray-900"}`,children:"ðŸ‘€ Dan's Watchlist"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:()=>P(!V),className:`px-4 py-2 rounded transition-colors ${V?"bg-gray-800 text-white":s?"bg-gray-700 hover:bg-gray-600 text-white":"bg-gray-200 hover:bg-gray-300 text-gray-900"}`,children:V?"âœ• Fermer Screener":"ðŸ” Ouvrir Screener"}),e.jsx("button",{onClick:Q,disabled:A||n.length===0,className:"px-4 py-2 bg-gray-800 text-white rounded hover:bg-gray-700 disabled:opacity-50 transition-colors",children:A?"Actualisation...":"ðŸ”„ Actualiser"}),e.jsxs("button",{onClick:emmaPopulateWatchlist,disabled:A,className:"px-4 py-2 bg-purple-600 text-white rounded hover:bg-purple-700 disabled:opacity-50 flex items-center gap-2",children:[e.jsx("span",{children:"ðŸ¤–"}),"Emma Populate"]}),e.jsx("div",{className:`text-sm px-4 py-2 rounded ${s?"bg-gray-800 text-gray-400":"bg-gray-100 text-gray-600"}`,children:initialLoadComplete?"ðŸš€ Supabase + ArriÃ¨re-plan silencieux":"â³ Chargement initial..."})]})]}),e.jsxs("div",{className:`backdrop-blur-sm rounded-lg p-6 border transition-colors duration-300 ${s?"bg-gray-900 border-gray-700":"bg-gray-50 border-gray-200"}`,children:[e.jsx("h3",{className:`text-lg font-semibold mb-4 transition-colors duration-300 ${s?"text-white":"text-gray-900"}`,children:"âž• Ajouter un Ticker"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("input",{type:"text",value:_,onChange:l=>o(l.target.value),placeholder:"Ex: AAPL, TSLA, GOOGL...",className:`flex-1 px-3 py-2 rounded-lg border transition-colors duration-300 ${s?"bg-gray-700 border-gray-600 text-white placeholder-gray-400":"bg-white border-gray-300 text-gray-900 placeholder-gray-500"}`,onKeyPress:l=>l.key==="Enter"&&L()}),e.jsx("button",{onClick:L,className:"px-4 py-2 bg-green-600 text-white rounded hover:bg-green-700 transition-colors",children:"âž• Ajouter"})]}),e.jsx("p",{className:`text-sm mt-2 transition-colors duration-300 ${s?"text-gray-400":"text-gray-600"}`,children:"ðŸ’¡ Ces tickers ne seront visibles que dans cette watchlist personnalisÃ©e"})]}),n.length>0?e.jsxs("div",{className:`backdrop-blur-sm rounded-lg p-6 border transition-colors duration-300 ${s?"bg-gray-900 border-gray-700":"bg-gray-50 border-gray-200"}`,children:[e.jsxs("h3",{className:`text-lg font-semibold mb-4 transition-colors duration-300 ${s?"text-white":"text-gray-900"}`,children:["ðŸ“Š Tickers de la Watchlist (",n.length,")"]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:n.map(l=>{const m=Z[l],c=m?.dp?(m.dp>=0?"+":"")+m.dp.toFixed(2)+"%":"N/A",$=m?.dp>=0?"text-green-400":"text-red-400",M=m?.dp>=0?"bg-green-500":"bg-red-500";return e.jsxs("div",{className:`rounded-lg p-4 border transition-colors duration-300 ${s?"bg-gray-800 border-gray-600 hover:border-blue-400/50":"bg-white border-gray-300 hover:border-blue-300"}`,children:[e.jsxs("div",{className:"flex justify-between items-start mb-3",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("img",{src:getCompanyLogo(l),alt:`${l} logo`,className:"w-8 h-8 rounded",onError:re=>{re.target.style.display="none"}}),e.jsx("h4",{className:`font-bold text-lg transition-colors duration-300 ${s?"text-white":"text-gray-900"}`,children:l})]}),e.jsx("button",{onClick:()=>ee(l),className:`p-1 rounded transition-colors duration-300 ${s?"text-gray-400 hover:text-red-400 hover:bg-red-900/20":"text-gray-500 hover:text-red-600 hover:bg-red-50"}`,title:"Supprimer de la watchlist",children:"âœ•"})]}),m?e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:`rounded-lg p-3 mb-3 transition-colors duration-300 ${s?"bg-gray-700":"bg-gray-100"}`,children:[e.jsxs("div",{className:`text-2xl font-bold mb-1 transition-colors duration-300 ${s?"text-white":"text-gray-900"}`,children:["$",m.c?.toFixed(2)||"N/A"]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:`w-3 h-3 ${M} rounded`}),e.jsx("span",{className:`text-sm font-medium ${$}`,children:c})]})]}),e.jsxs("div",{className:"space-y-2 text-sm",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:`transition-colors duration-300 ${s?"text-gray-400":"text-gray-600"}`,children:"Volume:"}),e.jsx("span",{className:`transition-colors duration-300 ${s?"text-white":"text-gray-900"}`,children:m.v?.toLocaleString()||"N/A"})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:`transition-colors duration-300 ${s?"text-gray-400":"text-gray-600"}`,children:"High:"}),e.jsxs("span",{className:`transition-colors duration-300 ${s?"text-white":"text-gray-900"}`,children:["$",m.h?.toFixed(2)||"N/A"]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:`transition-colors duration-300 ${s?"text-gray-400":"text-gray-600"}`,children:"Low:"}),e.jsxs("span",{className:`transition-colors duration-300 ${s?"text-white":"text-gray-900"}`,children:["$",m.l?.toFixed(2)||"N/A"]})]})]})]}):e.jsxs("div",{className:`text-center py-4 transition-colors duration-300 ${s?"text-gray-400":"text-gray-500"}`,children:[e.jsx("div",{className:"animate-spin w-6 h-6 border-2 border-gray-400 border-t-transparent rounded-full mx-auto mb-2"}),e.jsx("span",{className:"text-sm",children:"Chargement..."})]})]},l)})})]}):e.jsxs("div",{className:`backdrop-blur-sm rounded-lg p-8 border transition-colors duration-300 ${s?"bg-gray-900 border-gray-700":"bg-gray-50 border-gray-200"} text-center`,children:[e.jsx("div",{className:"text-6xl mb-4",children:"ðŸ‘€"}),e.jsx("h3",{className:`text-xl font-semibold mb-2 transition-colors duration-300 ${s?"text-white":"text-gray-900"}`,children:"Watchlist Vide"}),e.jsx("p",{className:`transition-colors duration-300 ${s?"text-gray-400":"text-gray-600"}`,children:"Ajoutez des tickers pour commencer Ã  suivre vos investissements personnalisÃ©s"})]})]})},Ze=(s={})=>typeof window<"u"&&typeof window.AdminJSLaiTab=="function"?f.createElement(window.AdminJSLaiTab,s):e.jsx("div",{className:"p-4 rounded border bg-yellow-50 border-yellow-200 text-yellow-800",children:"AdminJSLaiTab module indisponible (component global manquant)."}),Ht=()=>typeof window<"u"?window.BetaCombinedDashboard||{}:{},et=()=>{const s=Ht(),n=s.isDarkMode??!0,I=s.teamTickers||[],_=s.watchlistTickers||[],[o,Z]=f.useState("economic"),[a,A]=f.useState([{date:"Mon Oct 16",events:[{time:"12:55 PM",currency:"USD",impact:2,event:"Fed Paulson Speech",actual:"N/A",forecast:"N/A",previous:"N/A"},{time:"08:30 AM",currency:"USD",impact:3,event:"NY Empire State Manufacturing Index",actual:"10.70",forecast:"-1.00",previous:"-8.70"}]}]),[T,V]=f.useState(!1),[P,u]=f.useState(null),[K,G]=f.useState(!1),[R,B]=f.useState(""),[S,E]=f.useState("all"),[C,F]=f.useState("all"),[H,i]=f.useState("all"),[d,y]=f.useState("all"),[L,ee]=f.useState("week"),[Q,h]=f.useState(!0),O=["AAPL","MSFT","GOOGL","GOOG","AMZN","NVDA","META","TSLA","BRK.B","UNH","JNJ","V","XOM","WMT","JPM","MA","PG","CVX","HD","ABBV","MRK","PEP","COST","AVGO","ADBE","TMO","CSCO","ACN","DHR","NFLX","VZ","ABT","NKE","CMCSA","WFC","PM","TXN","LIN","NEE","DIS","HON","QCOM","UPS","IBM","RTX","AMGN","T","SPGI","INTU","DE","AMAT","LOW","SBUX","GS","CAT","AXP","BKNG","ADP","SYK","TJX","GE","ISRG","VRTX","ZTS","MU","FI","C","MDT","GILD","REGN","BLK","ETN","SHW","KLAC","WM","APH","LRCX","ADI","CDNS","SNPS"],[l,m]=f.useState(I),[c,$]=f.useState(_),M=()=>[{date:"Mon Oct 16",events:[{time:"12:55 PM",currency:"USD",impact:2,event:"Fed Paulson Speech",actual:"N/A",forecast:"N/A",previous:"N/A"},{time:"08:30 AM",currency:"USD",impact:3,event:"NY Empire State Manufacturing Index",actual:"10.70",forecast:"-1.00",previous:"-8.70"}]}];console.log("ðŸ“… EconomicCalendarTab chargÃ©"),console.log("ðŸ“Š DonnÃ©es init:",a),console.log("ðŸ”§ Ã‰tat du composant:",{activeSubTab:o,loading:T,error:P}),f.useEffect(()=>{(async()=>{try{const U=await(await fetch("/api/tickers-config")).json();U.success&&(m(U.team_tickers||[]),console.log(`âœ… Team tickers loaded: ${U.team_tickers?.length||0}`))}catch(N){console.error("âŒ Error loading team tickers:",N)}try{const U=await(await fetch("/api/supabase-watchlist")).json();U.tickers&&Array.isArray(U.tickers)&&($(U.tickers),console.log(`âœ… Watchlist tickers loaded: ${U.tickers.length}`))}catch(N){console.error("âŒ Error loading watchlist tickers:",N);const U=localStorage.getItem("dans-watchlist");if(U){const q=JSON.parse(U);$(q),console.log(`ðŸ“¦ Watchlist loaded from localStorage: ${q.length}`)}}})()},[]),f.useEffect(()=>{re(),i("all"),y("all"),h(o==="earnings")},[o]);const re=async()=>{console.log("ðŸ”„ fetchCalendarData appelÃ© pour:",o),V(!0),u(null);try{if(o==="earnings"){const N=await(await fetch("/api/calendar-earnings")).json();N.success&&N.data?(A(N.data),console.log(`âœ… ${N.data.length} earnings calendar days loaded from ${N.source}`),N.fallback_tried&&console.log("âš ï¸ Fallback sources tried:",N.fallback_tried)):(u("Aucune donnÃ©e d'earnings disponible"),A(M()))}else if(o==="economic"){const N=await(await fetch("/api/calendar-economic")).json();N.success&&N.data?(A(N.data),console.log(`âœ… ${N.data.length} economic calendar days loaded from ${N.source}`),N.fallback_tried&&console.log("âš ï¸ Fallback sources tried:",N.fallback_tried)):(u("Aucune donnÃ©e Ã©conomique disponible"),A(M()))}else if(o==="dividends"){const N=await(await fetch("/api/calendar-dividends")).json();N.success&&N.data?(A(N.data),console.log(`âœ… ${N.data.length} dividend events loaded from ${N.source}`),N.fallback_tried&&console.log("âš ï¸ Fallback sources tried:",N.fallback_tried)):(u("Aucune donnÃ©e de dividendes disponible"),A(M()))}else A(M())}catch(v){console.error("âŒ Erreur fetchCalendarData:",v),u(`Impossible de charger les donnÃ©es: ${v.message}`),A(M())}finally{V(!1)}},p=async()=>{console.log("ðŸ”„ Actualisation du calendrier..."),G(!0),await re(),setTimeout(()=>G(!1),1e3)},W=v=>{const N=[],U=["bg-yellow-500","bg-green-500","bg-red-500"];for(let q=0;q<3;q++)N.push(e.jsx("div",{className:`w-3 h-5 rounded-sm ${q<v?U[q]:"bg-gray-600"} ${q<v?"opacity-100":"opacity-30"}`},q));return N},t=(v,N)=>{if(v==="N/A"||N==="N/A")return"text-gray-400";const U=parseFloat(v),q=parseFloat(N);return U>q?"text-green-400":U<q?"text-red-400":"text-gray-400"},g=v=>({USD:"ðŸ‡ºðŸ‡¸",EUR:"ðŸ‡ªðŸ‡º",GBP:"ðŸ‡¬ðŸ‡§",JPY:"ðŸ‡¯ðŸ‡µ",CAD:"ðŸ‡¨ðŸ‡¦",AUD:"ðŸ‡¦ðŸ‡º",CHF:"ðŸ‡¨ðŸ‡­",CNY:"ðŸ‡¨ðŸ‡³",NZD:"ðŸ‡³ðŸ‡¿"})[v]||"ðŸŒ",x=v=>{const N=v.match(/^([A-Z]{1,5})\s/);return N?N[1]:null},j=v=>{const N=x(v.event);return N&&l.includes(N)?1:v.currency==="CAD"||N&&N.endsWith(".TO")?2:v.currency==="USD"&&(!N||!N.endsWith(".TO"))?3:4},k=v=>[...v].sort((N,U)=>{const q=j(N),oe=j(U);if(q!==oe)return q-oe;const ge=N.time||"",me=U.time||"";return ge.localeCompare(me)}),J=(Array.isArray(a)?a:[]).map(v=>{const N=(Array.isArray(v.events)?v.events:[]).filter(q=>{if(R&&!q.event.toLowerCase().includes(R.toLowerCase())||S!=="all"&&q.impact!==parseInt(S)||C!=="all"&&q.currency!==C)return!1;if(H!=="all"&&(o==="earnings"||o==="dividends")){const oe=x(q.event);if(!oe||oe!==H)return!1}if(d!=="all"&&(o==="earnings"||o==="dividends")){const oe=x(q.event);if(!oe)return!1;const ge=l.includes(oe),me=c.includes(oe);if(d==="team"&&!ge||d==="watchlist"&&!me||d==="both"&&!(ge||me))return!1}if(Q&&o==="earnings"){const oe=x(q.event);if(!oe||!O.includes(oe))return!1}return!0}),U=k(N);return{...v,events:U}}).filter(v=>v.events.length>0),le=[...new Set((Array.isArray(a)?a:[]).flatMap(v=>(Array.isArray(v.events)?v.events:[]).map(N=>N.currency||"USD")))].sort(),ae=o==="earnings"||o==="dividends"?[...new Set((Array.isArray(a)?a:[]).flatMap(v=>(Array.isArray(v.events)?v.events:[]).map(N=>x(N.event)).filter(N=>N!==null)))].sort():[];return e.jsx("div",{className:`${n?"bg-gray-900 text-gray-200":"bg-white text-gray-900"} p-6`,children:e.jsxs("div",{className:"max-w-full",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"text-2xl",children:"ðŸ“…"}),e.jsx("h2",{className:"text-2xl font-bold",children:"Calendrier financier"})]}),e.jsxs("button",{onClick:p,disabled:T||K,className:`flex items-center gap-2 px-3 py-2 rounded-lg transition-colors text-sm ${T||K?"bg-gray-600 text-gray-400 cursor-not-allowed":"bg-gray-800 hover:bg-gray-700 text-white"}`,children:[e.jsx("div",{className:`w-4 h-4 ${T||K?"animate-spin":""}`,children:"ðŸ”„"}),"Actualiser"]})]}),e.jsxs("div",{className:`${n?"bg-gray-800":"bg-gray-100"} rounded-lg p-4 mb-4`,children:[e.jsxs("div",{className:`grid grid-cols-1 gap-3 ${o==="earnings"||o==="dividends"?"md:grid-cols-6":"md:grid-cols-4"}`,children:[e.jsx("div",{className:"col-span-1 md:col-span-2",children:e.jsx("input",{type:"text",placeholder:"ðŸ” Rechercher un Ã©vÃ©nement...",value:R,onChange:v=>B(v.target.value),className:`w-full px-3 py-2 rounded-md text-sm ${n?"bg-gray-700 text-white border-gray-600":"bg-white text-gray-900 border-gray-300"} border focus:outline-none focus:ring-2 focus:ring-blue-500`})}),(o==="earnings"||o==="dividends")&&e.jsx("div",{children:e.jsxs("select",{value:d,onChange:v=>{y(v.target.value),v.target.value!=="all"&&i("all")},className:`w-full px-3 py-2 rounded-md text-sm ${n?"bg-gray-700 text-white border-gray-600":"bg-white text-gray-900 border-gray-300"} border focus:outline-none focus:ring-2 focus:ring-blue-500`,children:[e.jsx("option",{value:"all",children:"Tous les titres"}),e.jsxs("option",{value:"team",children:["ðŸ‘¥ Ã‰quipe (",l.length,")"]}),e.jsxs("option",{value:"watchlist",children:["â­ Liste de suivi (",c.length,")"]}),e.jsxs("option",{value:"both",children:["ðŸŽ¯ Ã‰quipe + Liste (",l.length+c.length,")"]})]})}),(o==="earnings"||o==="dividends")&&e.jsx("div",{children:e.jsxs("select",{value:H,onChange:v=>i(v.target.value),disabled:d!=="all",className:`w-full px-3 py-2 rounded-md text-sm ${n?"bg-gray-700 text-white border-gray-600":"bg-white text-gray-900 border-gray-300"} border focus:outline-none focus:ring-2 focus:ring-blue-500 ${d!=="all"?"opacity-50 cursor-not-allowed":""}`,children:[e.jsxs("option",{value:"all",children:["SÃ©lectionner un ticker (",ae.length,")"]}),ae.map(v=>e.jsx("option",{value:v,children:v},v))]})}),e.jsx("div",{children:e.jsxs("select",{value:S,onChange:v=>E(v.target.value),className:`w-full px-3 py-2 rounded-md text-sm ${n?"bg-gray-700 text-white border-gray-600":"bg-white text-gray-900 border-gray-300"} border focus:outline-none focus:ring-2 focus:ring-blue-500`,children:[e.jsx("option",{value:"all",children:"Tous les impacts"}),e.jsx("option",{value:"3",children:"ðŸ”´ Impact Ã©levÃ©"}),e.jsx("option",{value:"2",children:"ðŸŸ  Impact moyen"}),e.jsx("option",{value:"1",children:"ðŸŸ¡ Impact faible"})]})}),e.jsx("div",{children:e.jsxs("select",{value:C,onChange:v=>F(v.target.value),className:`w-full px-3 py-2 rounded-md text-sm ${n?"bg-gray-700 text-white border-gray-600":"bg-white text-gray-900 border-gray-300"} border focus:outline-none focus:ring-2 focus:ring-blue-500`,children:[e.jsx("option",{value:"all",children:"Toutes les devises"}),le.map(v=>e.jsxs("option",{value:v,children:[g(v)," ",v]},v))]})}),o==="earnings"&&e.jsx("div",{className:"flex items-center",children:e.jsxs("label",{className:`flex items-center gap-2 px-3 py-2 rounded-md text-sm cursor-pointer transition-colors ${n?Q?"bg-blue-600 text-white":"bg-gray-700 text-gray-300 hover:bg-gray-600":Q?"bg-blue-500 text-white":"bg-white text-gray-700 hover:bg-gray-50"} border ${n?"border-gray-600":"border-gray-300"}`,children:[e.jsx("input",{type:"checkbox",checked:Q,onChange:v=>h(v.target.checked),className:"w-4 h-4 cursor-pointer"}),e.jsx("span",{className:"font-medium",children:"Grandes capitalisations seulement"})]})})]}),(R||S!=="all"||C!=="all"||H!=="all"||d!=="all"||o==="earnings"&&Q)&&e.jsxs("div",{className:"flex flex-wrap gap-2 mt-3",children:[e.jsx("span",{className:"text-xs text-gray-400",children:"Filtres actifs :"}),o==="earnings"&&Q&&e.jsx("span",{className:`text-xs px-2 py-1 rounded ${n?"bg-blue-900 text-blue-200":"bg-blue-100 text-blue-800"}`,children:"ðŸ“Š Grandes capitalisations"}),R&&e.jsxs("span",{className:`text-xs px-2 py-1 rounded ${n?"bg-gray-900 text-gray-200":"bg-gray-700 text-gray-200"}`,children:['RechercheÂ : "',R,'"']}),d!=="all"&&e.jsx("span",{className:`text-xs px-2 py-1 rounded ${n?"bg-cyan-900 text-cyan-200":"bg-cyan-100 text-cyan-800"}`,children:d==="team"?"ðŸ‘¥ Tickers Ã©quipe":d==="watchlist"?"â­ Tickers liste de suivi":"ðŸŽ¯ Ã‰quipe + Liste de suivi"}),H!=="all"&&e.jsxs("span",{className:`text-xs px-2 py-1 rounded ${n?"bg-purple-900 text-purple-200":"bg-purple-100 text-purple-800"}`,children:["TickerÂ : ",H]}),S!=="all"&&e.jsxs("span",{className:`text-xs px-2 py-1 rounded ${n?"bg-green-900 text-green-200":"bg-green-100 text-green-800"}`,children:["ImpactÂ : ",S==="3"?"Ã‰levÃ©":S==="2"?"Moyen":"Faible"]}),C!=="all"&&e.jsxs("span",{className:`text-xs px-2 py-1 rounded ${n?"bg-green-900 text-green-200":"bg-green-100 text-green-800"}`,children:["DeviseÂ : ",C]}),e.jsx("button",{onClick:()=>{B(""),E("all"),F("all"),i("all"),y("all"),h(o==="earnings")},className:"text-xs text-red-400 hover:text-red-300 underline",children:"RÃ©initialiser"})]})]}),P&&e.jsxs("div",{className:"bg-red-900/50 border border-red-500 text-red-200 px-4 py-3 rounded-lg mb-4 text-sm",children:["âš ï¸ ",P]}),e.jsxs("div",{className:"flex gap-0 mb-4 border-b border-gray-700",children:[e.jsx("button",{onClick:()=>Z("economic"),className:`px-4 py-2 font-medium transition-colors text-sm ${o==="economic"?"bg-gray-800 text-white":`${n?"bg-gray-800 text-gray-400 hover:bg-gray-700":"bg-gray-100 text-gray-600 hover:bg-gray-200"}`}`,children:"Ã‰conomique"}),e.jsx("button",{onClick:()=>Z("earnings"),className:`px-4 py-2 font-medium transition-colors text-sm ${o==="earnings"?"bg-gray-800 text-white":`${n?"bg-gray-800 text-gray-400 hover:bg-gray-700":"bg-gray-100 text-gray-600 hover:bg-gray-200"}`}`,children:"Earnings"}),e.jsx("button",{onClick:()=>Z("dividends"),className:`px-4 py-2 font-medium transition-colors text-sm ${o==="dividends"?"bg-gray-800 text-white":`${n?"bg-gray-800 text-gray-400 hover:bg-gray-700":"bg-gray-100 text-gray-600 hover:bg-gray-200"}`}`,children:"Dividendes"})]}),T?e.jsxs("div",{className:`${n?"bg-gray-800":"bg-gray-100"} rounded-lg p-8 text-center`,children:[e.jsx("div",{className:"w-8 h-8 text-blue-500 animate-spin mx-auto mb-3",children:"ðŸ”„"}),e.jsx("p",{className:"text-gray-400 text-sm",children:"Loading data..."})]}):J.length===0?e.jsxs("div",{className:`${n?"bg-gray-800":"bg-gray-100"} rounded-lg p-8 text-center`,children:[e.jsx("p",{className:"text-gray-400 text-sm",children:a.length===0?"No data available":"No events match your filters"}),a.length>0&&e.jsx("button",{onClick:()=>{B(""),E("all"),F("all")},className:"mt-3 text-blue-400 hover:text-blue-300 underline text-sm",children:"Clear filters"})]}):e.jsx("div",{className:`${n?"bg-gray-800":"bg-gray-100"} rounded-lg overflow-hidden shadow-lg`,children:J.map((v,N)=>e.jsxs("div",{className:"border-b border-gray-700 last:border-b-0",children:[e.jsx("div",{className:`${n?"bg-gray-750":"bg-gray-200"} px-4 py-2 font-semibold text-sm`,children:v.date}),N===0&&e.jsxs("div",{className:`grid grid-cols-[80px_1fr_80px_60px_90px_90px_90px] gap-3 px-4 py-3 ${n?"bg-gray-900":"bg-gray-300"} text-xs font-bold ${n?"text-gray-300":"text-gray-700"} border-b-2 ${n?"border-gray-600":"border-gray-400"}`,children:[e.jsx("div",{children:"TIME"}),e.jsx("div",{children:"EVENT"}),e.jsx("div",{children:"IMPACT"}),e.jsx("div",{children:"FOR"}),e.jsx("div",{className:"text-center",children:"ACTUAL"}),e.jsx("div",{className:"text-center",children:"FORECAST"}),e.jsx("div",{className:"text-center",children:"PREVIOUS"})]}),v.events.map((U,q)=>e.jsxs("div",{className:`grid grid-cols-[80px_1fr_80px_60px_90px_90px_90px] gap-3 px-4 py-3 ${n?"hover:bg-gray-750":"hover:bg-gray-200"} transition-colors border-b ${n?"border-gray-700":"border-gray-300"} last:border-b-0 items-center text-sm`,children:[e.jsx("div",{className:`${n?"text-gray-400":"text-gray-600"} font-mono text-xs`,children:U.time}),e.jsxs("div",{className:"font-medium flex items-center gap-2",title:U.event,children:[e.jsx("span",{className:"text-lg",children:g(U.currency)}),e.jsx("span",{className:`${n?"text-gray-200":"text-gray-800"} truncate`,children:U.event})]}),e.jsx("div",{className:"flex gap-1",children:W(U.impact)}),e.jsx("div",{className:`${n?"text-gray-400":"text-gray-600"} font-semibold text-xs`,children:U.currency}),e.jsx("div",{className:`text-center font-bold ${t(U.actual,U.forecast)}`,children:U.actual}),e.jsx("div",{className:`text-center ${n?"text-gray-400":"text-gray-600"}`,children:U.forecast}),e.jsx("div",{className:`text-center ${n?"text-gray-400":"text-gray-600"}`,children:U.previous})]},q))]},N))}),e.jsx("div",{className:`mt-4 ${n?"bg-gray-800":"bg-gray-100"} rounded-lg p-4`,children:e.jsxs("div",{className:"flex flex-wrap items-center gap-4 text-xs",children:[e.jsx("div",{className:"flex items-center gap-2",children:e.jsxs("span",{className:`${n?"text-gray-400":"text-gray-600"}`,children:["Showing ",J.reduce((v,N)=>v+N.events.length,0)," events"]})}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"font-semibold ${isDarkMode ? 'text-gray-300' : 'text-gray-700'}",children:"Impact:"}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("div",{className:"w-3 h-3 bg-red-500 rounded-sm"}),e.jsx("span",{className:`${n?"text-gray-400":"text-gray-600"}`,children:"High"})]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("div",{className:"w-3 h-3 bg-green-500 rounded-sm"}),e.jsx("span",{className:`${n?"text-gray-400":"text-gray-600"}`,children:"Medium"})]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("div",{className:"w-3 h-3 bg-yellow-500 rounded-sm"}),e.jsx("span",{className:`${n?"text-gray-400":"text-gray-600"}`,children:"Low"})]})]}),e.jsx("div",{className:"ml-auto text-gray-500 text-xs italic",children:"Data powered by FMP API"})]})})]})})};typeof globalThis.process>"u"?globalThis.process={env:{}}:globalThis.process.env||(globalThis.process.env={}),typeof window<"u"&&(window.PlusTabMod=pt,window.StocksNewsTabMod=ze,window.EmailBriefingsTabMod=Ct,window.EmailBriefingsTabFull=Pt,window.AskEmmaTabMod=At,window.IntelliStocksTabMod=kt,window.MarketsEconomyTabMod=Ve,window.InvestingCalendarTabMod=We,window.YieldCurveTabMod=Ye,window.ScrappingSATabMod=Je,window.SeekingAlphaTabMod=Ke,window.DansWatchlistTabMod=Qe,window.AdminJSLaiTabMod=Ze,window.EconomicCalendarTabMod=et,window.MarketsEconomyTab||(window.MarketsEconomyTab=Ve),window.InvestingCalendarTab||(window.InvestingCalendarTab=We),window.YieldCurveTab||(window.YieldCurveTab=Ye),window.ScrappingSATab||(window.ScrappingSATab=Je),window.SeekingAlphaTab||(window.SeekingAlphaTab=Ke),window.DansWatchlistTab||(window.DansWatchlistTab=Qe),window.AdminJSLaiTab||(window.AdminJSLaiTab=Ze),window.EconomicCalendarTab||(window.EconomicCalendarTab=et),window.React=window.React||f,window.ReactDOM=window.ReactDOM||mt)})(React,ReactDOM);
//# sourceMappingURL=bundle.js.map
