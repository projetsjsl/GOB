function Sb(n,e){for(var i=0;i<e.length;i++){const r=e[i];if(typeof r!="string"&&!Array.isArray(r)){for(const a in r)if(a!=="default"&&!(a in n)){const l=Object.getOwnPropertyDescriptor(r,a);l&&Object.defineProperty(n,a,l.get?l:{enumerable:!0,get:()=>r[a]})}}}return Object.freeze(Object.defineProperty(n,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))r(a);new MutationObserver(a=>{for(const l of a)if(l.type==="childList")for(const c of l.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&r(c)}).observe(document,{childList:!0,subtree:!0});function i(a){const l={};return a.integrity&&(l.integrity=a.integrity),a.referrerPolicy&&(l.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?l.credentials="include":a.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function r(a){if(a.ep)return;a.ep=!0;const l=i(a);fetch(a.href,l)}})();function ad(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}function Tb(n){if(Object.prototype.hasOwnProperty.call(n,"__esModule"))return n;var e=n.default;if(typeof e=="function"){var i=function r(){return this instanceof r?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};i.prototype=e.prototype}else i={};return Object.defineProperty(i,"__esModule",{value:!0}),Object.keys(n).forEach(function(r){var a=Object.getOwnPropertyDescriptor(n,r);Object.defineProperty(i,r,a.get?a:{enumerable:!0,get:function(){return n[r]}})}),i}var yc={exports:{}},zr={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var km;function Eb(){if(km)return zr;km=1;var n=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function i(r,a,l){var c=null;if(l!==void 0&&(c=""+l),a.key!==void 0&&(c=""+a.key),"key"in a){l={};for(var h in a)h!=="key"&&(l[h]=a[h])}else l=a;return a=l.ref,{$$typeof:n,type:r,key:c,ref:a!==void 0?a:null,props:l}}return zr.Fragment=e,zr.jsx=i,zr.jsxs=i,zr}var Dm;function wb(){return Dm||(Dm=1,yc.exports=Eb()),yc.exports}var y=wb(),vc={exports:{}},pe={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Um;function Cb(){if(Um)return pe;Um=1;var n=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),i=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),a=Symbol.for("react.profiler"),l=Symbol.for("react.consumer"),c=Symbol.for("react.context"),h=Symbol.for("react.forward_ref"),g=Symbol.for("react.suspense"),p=Symbol.for("react.memo"),_=Symbol.for("react.lazy"),x=Symbol.for("react.activity"),S=Symbol.iterator;function T(N){return N===null||typeof N!="object"?null:(N=S&&N[S]||N["@@iterator"],typeof N=="function"?N:null)}var w={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},C=Object.assign,M={};function D(N,H,Z){this.props=N,this.context=H,this.refs=M,this.updater=Z||w}D.prototype.isReactComponent={},D.prototype.setState=function(N,H){if(typeof N!="object"&&typeof N!="function"&&N!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,N,H,"setState")},D.prototype.forceUpdate=function(N){this.updater.enqueueForceUpdate(this,N,"forceUpdate")};function B(){}B.prototype=D.prototype;function I(N,H,Z){this.props=N,this.context=H,this.refs=M,this.updater=Z||w}var z=I.prototype=new B;z.constructor=I,C(z,D.prototype),z.isPureReactComponent=!0;var U=Array.isArray;function K(){}var G={H:null,A:null,T:null,S:null},X=Object.prototype.hasOwnProperty;function Y(N,H,Z){var W=Z.ref;return{$$typeof:n,type:N,key:H,ref:W!==void 0?W:null,props:Z}}function ce(N,H){return Y(N.type,H,N.props)}function he(N){return typeof N=="object"&&N!==null&&N.$$typeof===n}function re(N){var H={"=":"=0",":":"=2"};return"$"+N.replace(/[=:]/g,function(Z){return H[Z]})}var ve=/\/+/g;function Ve(N,H){return typeof N=="object"&&N!==null&&N.key!=null?re(""+N.key):H.toString(36)}function He(N){switch(N.status){case"fulfilled":return N.value;case"rejected":throw N.reason;default:switch(typeof N.status=="string"?N.then(K,K):(N.status="pending",N.then(function(H){N.status==="pending"&&(N.status="fulfilled",N.value=H)},function(H){N.status==="pending"&&(N.status="rejected",N.reason=H)})),N.status){case"fulfilled":return N.value;case"rejected":throw N.reason}}throw N}function q(N,H,Z,W,le){var me=typeof N;(me==="undefined"||me==="boolean")&&(N=null);var Ae=!1;if(N===null)Ae=!0;else switch(me){case"bigint":case"string":case"number":Ae=!0;break;case"object":switch(N.$$typeof){case n:case e:Ae=!0;break;case _:return Ae=N._init,q(Ae(N._payload),H,Z,W,le)}}if(Ae)return le=le(N),Ae=W===""?"."+Ve(N,0):W,U(le)?(Z="",Ae!=null&&(Z=Ae.replace(ve,"$&/")+"/"),q(le,H,Z,"",function(_e){return _e})):le!=null&&(he(le)&&(le=ce(le,Z+(le.key==null||N&&N.key===le.key?"":(""+le.key).replace(ve,"$&/")+"/")+Ae)),H.push(le)),1;Ae=0;var st=W===""?".":W+":";if(U(N))for(var je=0;je<N.length;je++)W=N[je],me=st+Ve(W,je),Ae+=q(W,H,Z,me,le);else if(je=T(N),typeof je=="function")for(N=je.call(N),je=0;!(W=N.next()).done;)W=W.value,me=st+Ve(W,je++),Ae+=q(W,H,Z,me,le);else if(me==="object"){if(typeof N.then=="function")return q(He(N),H,Z,W,le);throw H=String(N),Error("Objects are not valid as a React child (found: "+(H==="[object Object]"?"object with keys {"+Object.keys(N).join(", ")+"}":H)+"). If you meant to render a collection of children, use an array instead.")}return Ae}function Q(N,H,Z){if(N==null)return N;var W=[],le=0;return q(N,W,"","",function(me){return H.call(Z,me,le++)}),W}function ie(N){if(N._status===-1){var H=N._result;H=H(),H.then(function(Z){(N._status===0||N._status===-1)&&(N._status=1,N._result=Z)},function(Z){(N._status===0||N._status===-1)&&(N._status=2,N._result=Z)}),N._status===-1&&(N._status=0,N._result=H)}if(N._status===1)return N._result.default;throw N._result}var ge=typeof reportError=="function"?reportError:function(N){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var H=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof N=="object"&&N!==null&&typeof N.message=="string"?String(N.message):String(N),error:N});if(!window.dispatchEvent(H))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",N);return}console.error(N)},Ee={map:Q,forEach:function(N,H,Z){Q(N,function(){H.apply(this,arguments)},Z)},count:function(N){var H=0;return Q(N,function(){H++}),H},toArray:function(N){return Q(N,function(H){return H})||[]},only:function(N){if(!he(N))throw Error("React.Children.only expected to receive a single React element child.");return N}};return pe.Activity=x,pe.Children=Ee,pe.Component=D,pe.Fragment=i,pe.Profiler=a,pe.PureComponent=I,pe.StrictMode=r,pe.Suspense=g,pe.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=G,pe.__COMPILER_RUNTIME={__proto__:null,c:function(N){return G.H.useMemoCache(N)}},pe.cache=function(N){return function(){return N.apply(null,arguments)}},pe.cacheSignal=function(){return null},pe.cloneElement=function(N,H,Z){if(N==null)throw Error("The argument must be a React element, but you passed "+N+".");var W=C({},N.props),le=N.key;if(H!=null)for(me in H.key!==void 0&&(le=""+H.key),H)!X.call(H,me)||me==="key"||me==="__self"||me==="__source"||me==="ref"&&H.ref===void 0||(W[me]=H[me]);var me=arguments.length-2;if(me===1)W.children=Z;else if(1<me){for(var Ae=Array(me),st=0;st<me;st++)Ae[st]=arguments[st+2];W.children=Ae}return Y(N.type,le,W)},pe.createContext=function(N){return N={$$typeof:c,_currentValue:N,_currentValue2:N,_threadCount:0,Provider:null,Consumer:null},N.Provider=N,N.Consumer={$$typeof:l,_context:N},N},pe.createElement=function(N,H,Z){var W,le={},me=null;if(H!=null)for(W in H.key!==void 0&&(me=""+H.key),H)X.call(H,W)&&W!=="key"&&W!=="__self"&&W!=="__source"&&(le[W]=H[W]);var Ae=arguments.length-2;if(Ae===1)le.children=Z;else if(1<Ae){for(var st=Array(Ae),je=0;je<Ae;je++)st[je]=arguments[je+2];le.children=st}if(N&&N.defaultProps)for(W in Ae=N.defaultProps,Ae)le[W]===void 0&&(le[W]=Ae[W]);return Y(N,me,le)},pe.createRef=function(){return{current:null}},pe.forwardRef=function(N){return{$$typeof:h,render:N}},pe.isValidElement=he,pe.lazy=function(N){return{$$typeof:_,_payload:{_status:-1,_result:N},_init:ie}},pe.memo=function(N,H){return{$$typeof:p,type:N,compare:H===void 0?null:H}},pe.startTransition=function(N){var H=G.T,Z={};G.T=Z;try{var W=N(),le=G.S;le!==null&&le(Z,W),typeof W=="object"&&W!==null&&typeof W.then=="function"&&W.then(K,ge)}catch(me){ge(me)}finally{H!==null&&Z.types!==null&&(H.types=Z.types),G.T=H}},pe.unstable_useCacheRefresh=function(){return G.H.useCacheRefresh()},pe.use=function(N){return G.H.use(N)},pe.useActionState=function(N,H,Z){return G.H.useActionState(N,H,Z)},pe.useCallback=function(N,H){return G.H.useCallback(N,H)},pe.useContext=function(N){return G.H.useContext(N)},pe.useDebugValue=function(){},pe.useDeferredValue=function(N,H){return G.H.useDeferredValue(N,H)},pe.useEffect=function(N,H){return G.H.useEffect(N,H)},pe.useEffectEvent=function(N){return G.H.useEffectEvent(N)},pe.useId=function(){return G.H.useId()},pe.useImperativeHandle=function(N,H,Z){return G.H.useImperativeHandle(N,H,Z)},pe.useInsertionEffect=function(N,H){return G.H.useInsertionEffect(N,H)},pe.useLayoutEffect=function(N,H){return G.H.useLayoutEffect(N,H)},pe.useMemo=function(N,H){return G.H.useMemo(N,H)},pe.useOptimistic=function(N,H){return G.H.useOptimistic(N,H)},pe.useReducer=function(N,H,Z){return G.H.useReducer(N,H,Z)},pe.useRef=function(N){return G.H.useRef(N)},pe.useState=function(N){return G.H.useState(N)},pe.useSyncExternalStore=function(N,H,Z){return G.H.useSyncExternalStore(N,H,Z)},pe.useTransition=function(){return G.H.useTransition()},pe.version="19.2.0",pe}var Pm;function ld(){return Pm||(Pm=1,vc.exports=Cb()),vc.exports}var $=ld();const Qg=ad($);var _c={exports:{}},$r={},xc={exports:{}},bc={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Om;function Ab(){return Om||(Om=1,(function(n){function e(q,Q){var ie=q.length;q.push(Q);e:for(;0<ie;){var ge=ie-1>>>1,Ee=q[ge];if(0<a(Ee,Q))q[ge]=Q,q[ie]=Ee,ie=ge;else break e}}function i(q){return q.length===0?null:q[0]}function r(q){if(q.length===0)return null;var Q=q[0],ie=q.pop();if(ie!==Q){q[0]=ie;e:for(var ge=0,Ee=q.length,N=Ee>>>1;ge<N;){var H=2*(ge+1)-1,Z=q[H],W=H+1,le=q[W];if(0>a(Z,ie))W<Ee&&0>a(le,Z)?(q[ge]=le,q[W]=ie,ge=W):(q[ge]=Z,q[H]=ie,ge=H);else if(W<Ee&&0>a(le,ie))q[ge]=le,q[W]=ie,ge=W;else break e}}return Q}function a(q,Q){var ie=q.sortIndex-Q.sortIndex;return ie!==0?ie:q.id-Q.id}if(n.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var l=performance;n.unstable_now=function(){return l.now()}}else{var c=Date,h=c.now();n.unstable_now=function(){return c.now()-h}}var g=[],p=[],_=1,x=null,S=3,T=!1,w=!1,C=!1,M=!1,D=typeof setTimeout=="function"?setTimeout:null,B=typeof clearTimeout=="function"?clearTimeout:null,I=typeof setImmediate<"u"?setImmediate:null;function z(q){for(var Q=i(p);Q!==null;){if(Q.callback===null)r(p);else if(Q.startTime<=q)r(p),Q.sortIndex=Q.expirationTime,e(g,Q);else break;Q=i(p)}}function U(q){if(C=!1,z(q),!w)if(i(g)!==null)w=!0,K||(K=!0,re());else{var Q=i(p);Q!==null&&He(U,Q.startTime-q)}}var K=!1,G=-1,X=5,Y=-1;function ce(){return M?!0:!(n.unstable_now()-Y<X)}function he(){if(M=!1,K){var q=n.unstable_now();Y=q;var Q=!0;try{e:{w=!1,C&&(C=!1,B(G),G=-1),T=!0;var ie=S;try{t:{for(z(q),x=i(g);x!==null&&!(x.expirationTime>q&&ce());){var ge=x.callback;if(typeof ge=="function"){x.callback=null,S=x.priorityLevel;var Ee=ge(x.expirationTime<=q);if(q=n.unstable_now(),typeof Ee=="function"){x.callback=Ee,z(q),Q=!0;break t}x===i(g)&&r(g),z(q)}else r(g);x=i(g)}if(x!==null)Q=!0;else{var N=i(p);N!==null&&He(U,N.startTime-q),Q=!1}}break e}finally{x=null,S=ie,T=!1}Q=void 0}}finally{Q?re():K=!1}}}var re;if(typeof I=="function")re=function(){I(he)};else if(typeof MessageChannel<"u"){var ve=new MessageChannel,Ve=ve.port2;ve.port1.onmessage=he,re=function(){Ve.postMessage(null)}}else re=function(){D(he,0)};function He(q,Q){G=D(function(){q(n.unstable_now())},Q)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(q){q.callback=null},n.unstable_forceFrameRate=function(q){0>q||125<q?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):X=0<q?Math.floor(1e3/q):5},n.unstable_getCurrentPriorityLevel=function(){return S},n.unstable_next=function(q){switch(S){case 1:case 2:case 3:var Q=3;break;default:Q=S}var ie=S;S=Q;try{return q()}finally{S=ie}},n.unstable_requestPaint=function(){M=!0},n.unstable_runWithPriority=function(q,Q){switch(q){case 1:case 2:case 3:case 4:case 5:break;default:q=3}var ie=S;S=q;try{return Q()}finally{S=ie}},n.unstable_scheduleCallback=function(q,Q,ie){var ge=n.unstable_now();switch(typeof ie=="object"&&ie!==null?(ie=ie.delay,ie=typeof ie=="number"&&0<ie?ge+ie:ge):ie=ge,q){case 1:var Ee=-1;break;case 2:Ee=250;break;case 5:Ee=1073741823;break;case 4:Ee=1e4;break;default:Ee=5e3}return Ee=ie+Ee,q={id:_++,callback:Q,priorityLevel:q,startTime:ie,expirationTime:Ee,sortIndex:-1},ie>ge?(q.sortIndex=ie,e(p,q),i(g)===null&&q===i(p)&&(C?(B(G),G=-1):C=!0,He(U,ie-ge))):(q.sortIndex=Ee,e(g,q),w||T||(w=!0,K||(K=!0,re()))),q},n.unstable_shouldYield=ce,n.unstable_wrapCallback=function(q){var Q=S;return function(){var ie=S;S=Q;try{return q.apply(this,arguments)}finally{S=ie}}}})(bc)),bc}var Lm;function Nb(){return Lm||(Lm=1,xc.exports=Ab()),xc.exports}var Sc={exports:{}},bt={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var qm;function Rb(){if(qm)return bt;qm=1;var n=ld();function e(g){var p="https://react.dev/errors/"+g;if(1<arguments.length){p+="?args[]="+encodeURIComponent(arguments[1]);for(var _=2;_<arguments.length;_++)p+="&args[]="+encodeURIComponent(arguments[_])}return"Minified React error #"+g+"; visit "+p+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function i(){}var r={d:{f:i,r:function(){throw Error(e(522))},D:i,C:i,L:i,m:i,X:i,S:i,M:i},p:0,findDOMNode:null},a=Symbol.for("react.portal");function l(g,p,_){var x=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:a,key:x==null?null:""+x,children:g,containerInfo:p,implementation:_}}var c=n.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function h(g,p){if(g==="font")return"";if(typeof p=="string")return p==="use-credentials"?p:""}return bt.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=r,bt.createPortal=function(g,p){var _=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!p||p.nodeType!==1&&p.nodeType!==9&&p.nodeType!==11)throw Error(e(299));return l(g,p,null,_)},bt.flushSync=function(g){var p=c.T,_=r.p;try{if(c.T=null,r.p=2,g)return g()}finally{c.T=p,r.p=_,r.d.f()}},bt.preconnect=function(g,p){typeof g=="string"&&(p?(p=p.crossOrigin,p=typeof p=="string"?p==="use-credentials"?p:"":void 0):p=null,r.d.C(g,p))},bt.prefetchDNS=function(g){typeof g=="string"&&r.d.D(g)},bt.preinit=function(g,p){if(typeof g=="string"&&p&&typeof p.as=="string"){var _=p.as,x=h(_,p.crossOrigin),S=typeof p.integrity=="string"?p.integrity:void 0,T=typeof p.fetchPriority=="string"?p.fetchPriority:void 0;_==="style"?r.d.S(g,typeof p.precedence=="string"?p.precedence:void 0,{crossOrigin:x,integrity:S,fetchPriority:T}):_==="script"&&r.d.X(g,{crossOrigin:x,integrity:S,fetchPriority:T,nonce:typeof p.nonce=="string"?p.nonce:void 0})}},bt.preinitModule=function(g,p){if(typeof g=="string")if(typeof p=="object"&&p!==null){if(p.as==null||p.as==="script"){var _=h(p.as,p.crossOrigin);r.d.M(g,{crossOrigin:_,integrity:typeof p.integrity=="string"?p.integrity:void 0,nonce:typeof p.nonce=="string"?p.nonce:void 0})}}else p==null&&r.d.M(g)},bt.preload=function(g,p){if(typeof g=="string"&&typeof p=="object"&&p!==null&&typeof p.as=="string"){var _=p.as,x=h(_,p.crossOrigin);r.d.L(g,_,{crossOrigin:x,integrity:typeof p.integrity=="string"?p.integrity:void 0,nonce:typeof p.nonce=="string"?p.nonce:void 0,type:typeof p.type=="string"?p.type:void 0,fetchPriority:typeof p.fetchPriority=="string"?p.fetchPriority:void 0,referrerPolicy:typeof p.referrerPolicy=="string"?p.referrerPolicy:void 0,imageSrcSet:typeof p.imageSrcSet=="string"?p.imageSrcSet:void 0,imageSizes:typeof p.imageSizes=="string"?p.imageSizes:void 0,media:typeof p.media=="string"?p.media:void 0})}},bt.preloadModule=function(g,p){if(typeof g=="string")if(p){var _=h(p.as,p.crossOrigin);r.d.m(g,{as:typeof p.as=="string"&&p.as!=="script"?p.as:void 0,crossOrigin:_,integrity:typeof p.integrity=="string"?p.integrity:void 0})}else r.d.m(g)},bt.requestFormReset=function(g){r.d.r(g)},bt.unstable_batchedUpdates=function(g,p){return g(p)},bt.useFormState=function(g,p,_){return c.H.useFormState(g,p,_)},bt.useFormStatus=function(){return c.H.useHostTransitionStatus()},bt.version="19.2.0",bt}var Bm;function Mb(){if(Bm)return Sc.exports;Bm=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),Sc.exports=Rb(),Sc.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Gm;function Ib(){if(Gm)return $r;Gm=1;var n=Nb(),e=ld(),i=Mb();function r(t){var s="https://react.dev/errors/"+t;if(1<arguments.length){s+="?args[]="+encodeURIComponent(arguments[1]);for(var o=2;o<arguments.length;o++)s+="&args[]="+encodeURIComponent(arguments[o])}return"Minified React error #"+t+"; visit "+s+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function a(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function l(t){var s=t,o=t;if(t.alternate)for(;s.return;)s=s.return;else{t=s;do s=t,(s.flags&4098)!==0&&(o=s.return),t=s.return;while(t)}return s.tag===3?o:null}function c(t){if(t.tag===13){var s=t.memoizedState;if(s===null&&(t=t.alternate,t!==null&&(s=t.memoizedState)),s!==null)return s.dehydrated}return null}function h(t){if(t.tag===31){var s=t.memoizedState;if(s===null&&(t=t.alternate,t!==null&&(s=t.memoizedState)),s!==null)return s.dehydrated}return null}function g(t){if(l(t)!==t)throw Error(r(188))}function p(t){var s=t.alternate;if(!s){if(s=l(t),s===null)throw Error(r(188));return s!==t?null:t}for(var o=t,u=s;;){var m=o.return;if(m===null)break;var v=m.alternate;if(v===null){if(u=m.return,u!==null){o=u;continue}break}if(m.child===v.child){for(v=m.child;v;){if(v===o)return g(m),t;if(v===u)return g(m),s;v=v.sibling}throw Error(r(188))}if(o.return!==u.return)o=m,u=v;else{for(var b=!1,E=m.child;E;){if(E===o){b=!0,o=m,u=v;break}if(E===u){b=!0,u=m,o=v;break}E=E.sibling}if(!b){for(E=v.child;E;){if(E===o){b=!0,o=v,u=m;break}if(E===u){b=!0,u=v,o=m;break}E=E.sibling}if(!b)throw Error(r(189))}}if(o.alternate!==u)throw Error(r(190))}if(o.tag!==3)throw Error(r(188));return o.stateNode.current===o?t:s}function _(t){var s=t.tag;if(s===5||s===26||s===27||s===6)return t;for(t=t.child;t!==null;){if(s=_(t),s!==null)return s;t=t.sibling}return null}var x=Object.assign,S=Symbol.for("react.element"),T=Symbol.for("react.transitional.element"),w=Symbol.for("react.portal"),C=Symbol.for("react.fragment"),M=Symbol.for("react.strict_mode"),D=Symbol.for("react.profiler"),B=Symbol.for("react.consumer"),I=Symbol.for("react.context"),z=Symbol.for("react.forward_ref"),U=Symbol.for("react.suspense"),K=Symbol.for("react.suspense_list"),G=Symbol.for("react.memo"),X=Symbol.for("react.lazy"),Y=Symbol.for("react.activity"),ce=Symbol.for("react.memo_cache_sentinel"),he=Symbol.iterator;function re(t){return t===null||typeof t!="object"?null:(t=he&&t[he]||t["@@iterator"],typeof t=="function"?t:null)}var ve=Symbol.for("react.client.reference");function Ve(t){if(t==null)return null;if(typeof t=="function")return t.$$typeof===ve?null:t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case C:return"Fragment";case D:return"Profiler";case M:return"StrictMode";case U:return"Suspense";case K:return"SuspenseList";case Y:return"Activity"}if(typeof t=="object")switch(t.$$typeof){case w:return"Portal";case I:return t.displayName||"Context";case B:return(t._context.displayName||"Context")+".Consumer";case z:var s=t.render;return t=t.displayName,t||(t=s.displayName||s.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case G:return s=t.displayName||null,s!==null?s:Ve(t.type)||"Memo";case X:s=t._payload,t=t._init;try{return Ve(t(s))}catch{}}return null}var He=Array.isArray,q=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,Q=i.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ie={pending:!1,data:null,method:null,action:null},ge=[],Ee=-1;function N(t){return{current:t}}function H(t){0>Ee||(t.current=ge[Ee],ge[Ee]=null,Ee--)}function Z(t,s){Ee++,ge[Ee]=t.current,t.current=s}var W=N(null),le=N(null),me=N(null),Ae=N(null);function st(t,s){switch(Z(me,s),Z(le,t),Z(W,null),s.nodeType){case 9:case 11:t=(t=s.documentElement)&&(t=t.namespaceURI)?tm(t):0;break;default:if(t=s.tagName,s=s.namespaceURI)s=tm(s),t=nm(s,t);else switch(t){case"svg":t=1;break;case"math":t=2;break;default:t=0}}H(W),Z(W,t)}function je(){H(W),H(le),H(me)}function _e(t){t.memoizedState!==null&&Z(Ae,t);var s=W.current,o=nm(s,t.type);s!==o&&(Z(le,t),Z(W,o))}function Ke(t){le.current===t&&(H(W),H(le)),Ae.current===t&&(H(Ae),Gr._currentValue=ie)}var Xe,De;function tt(t){if(Xe===void 0)try{throw Error()}catch(o){var s=o.stack.trim().match(/\n( *(at )?)/);Xe=s&&s[1]||"",De=-1<o.stack.indexOf(`
    at`)?" (<anonymous>)":-1<o.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Xe+t+De}var rt=!1;function $t(t,s){if(!t||rt)return"";rt=!0;var o=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var u={DetermineComponentFrameRoot:function(){try{if(s){var J=function(){throw Error()};if(Object.defineProperty(J.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(J,[])}catch(V){var L=V}Reflect.construct(t,[],J)}else{try{J.call()}catch(V){L=V}t.call(J.prototype)}}else{try{throw Error()}catch(V){L=V}(J=t())&&typeof J.catch=="function"&&J.catch(function(){})}}catch(V){if(V&&L&&typeof V.stack=="string")return[V.stack,L.stack]}return[null,null]}};u.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var m=Object.getOwnPropertyDescriptor(u.DetermineComponentFrameRoot,"name");m&&m.configurable&&Object.defineProperty(u.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var v=u.DetermineComponentFrameRoot(),b=v[0],E=v[1];if(b&&E){var A=b.split(`
`),O=E.split(`
`);for(m=u=0;u<A.length&&!A[u].includes("DetermineComponentFrameRoot");)u++;for(;m<O.length&&!O[m].includes("DetermineComponentFrameRoot");)m++;if(u===A.length||m===O.length)for(u=A.length-1,m=O.length-1;1<=u&&0<=m&&A[u]!==O[m];)m--;for(;1<=u&&0<=m;u--,m--)if(A[u]!==O[m]){if(u!==1||m!==1)do if(u--,m--,0>m||A[u]!==O[m]){var j=`
`+A[u].replace(" at new "," at ");return t.displayName&&j.includes("<anonymous>")&&(j=j.replace("<anonymous>",t.displayName)),j}while(1<=u&&0<=m);break}}}finally{rt=!1,Error.prepareStackTrace=o}return(o=t?t.displayName||t.name:"")?tt(o):""}function dn(t,s){switch(t.tag){case 26:case 27:case 5:return tt(t.type);case 16:return tt("Lazy");case 13:return t.child!==s&&s!==null?tt("Suspense Fallback"):tt("Suspense");case 19:return tt("SuspenseList");case 0:case 15:return $t(t.type,!1);case 11:return $t(t.type.render,!1);case 1:return $t(t.type,!0);case 31:return tt("Activity");default:return""}}function Id(t){try{var s="",o=null;do s+=dn(t,o),o=t,t=t.return;while(t);return s}catch(u){return`
Error generating stack: `+u.message+`
`+u.stack}}var nl=Object.prototype.hasOwnProperty,il=n.unstable_scheduleCallback,sl=n.unstable_cancelCallback,e_=n.unstable_shouldYield,t_=n.unstable_requestPaint,kt=n.unstable_now,n_=n.unstable_getCurrentPriorityLevel,kd=n.unstable_ImmediatePriority,Dd=n.unstable_UserBlockingPriority,oo=n.unstable_NormalPriority,i_=n.unstable_LowPriority,Ud=n.unstable_IdlePriority,s_=n.log,r_=n.unstable_setDisableYieldValue,Zs=null,Dt=null;function Gn(t){if(typeof s_=="function"&&r_(t),Dt&&typeof Dt.setStrictMode=="function")try{Dt.setStrictMode(Zs,t)}catch{}}var Ut=Math.clz32?Math.clz32:l_,o_=Math.log,a_=Math.LN2;function l_(t){return t>>>=0,t===0?32:31-(o_(t)/a_|0)|0}var ao=256,lo=262144,uo=4194304;function yi(t){var s=t&42;if(s!==0)return s;switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return t&261888;case 262144:case 524288:case 1048576:case 2097152:return t&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return t&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return t}}function co(t,s,o){var u=t.pendingLanes;if(u===0)return 0;var m=0,v=t.suspendedLanes,b=t.pingedLanes;t=t.warmLanes;var E=u&134217727;return E!==0?(u=E&~v,u!==0?m=yi(u):(b&=E,b!==0?m=yi(b):o||(o=E&~t,o!==0&&(m=yi(o))))):(E=u&~v,E!==0?m=yi(E):b!==0?m=yi(b):o||(o=u&~t,o!==0&&(m=yi(o)))),m===0?0:s!==0&&s!==m&&(s&v)===0&&(v=m&-m,o=s&-s,v>=o||v===32&&(o&4194048)!==0)?s:m}function Ws(t,s){return(t.pendingLanes&~(t.suspendedLanes&~t.pingedLanes)&s)===0}function u_(t,s){switch(t){case 1:case 2:case 4:case 8:case 64:return s+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return s+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Pd(){var t=uo;return uo<<=1,(uo&62914560)===0&&(uo=4194304),t}function rl(t){for(var s=[],o=0;31>o;o++)s.push(t);return s}function er(t,s){t.pendingLanes|=s,s!==268435456&&(t.suspendedLanes=0,t.pingedLanes=0,t.warmLanes=0)}function c_(t,s,o,u,m,v){var b=t.pendingLanes;t.pendingLanes=o,t.suspendedLanes=0,t.pingedLanes=0,t.warmLanes=0,t.expiredLanes&=o,t.entangledLanes&=o,t.errorRecoveryDisabledLanes&=o,t.shellSuspendCounter=0;var E=t.entanglements,A=t.expirationTimes,O=t.hiddenUpdates;for(o=b&~o;0<o;){var j=31-Ut(o),J=1<<j;E[j]=0,A[j]=-1;var L=O[j];if(L!==null)for(O[j]=null,j=0;j<L.length;j++){var V=L[j];V!==null&&(V.lane&=-536870913)}o&=~J}u!==0&&Od(t,u,0),v!==0&&m===0&&t.tag!==0&&(t.suspendedLanes|=v&~(b&~s))}function Od(t,s,o){t.pendingLanes|=s,t.suspendedLanes&=~s;var u=31-Ut(s);t.entangledLanes|=s,t.entanglements[u]=t.entanglements[u]|1073741824|o&261930}function Ld(t,s){var o=t.entangledLanes|=s;for(t=t.entanglements;o;){var u=31-Ut(o),m=1<<u;m&s|t[u]&s&&(t[u]|=s),o&=~m}}function qd(t,s){var o=s&-s;return o=(o&42)!==0?1:ol(o),(o&(t.suspendedLanes|s))!==0?0:o}function ol(t){switch(t){case 2:t=1;break;case 8:t=4;break;case 32:t=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:t=128;break;case 268435456:t=134217728;break;default:t=0}return t}function al(t){return t&=-t,2<t?8<t?(t&134217727)!==0?32:268435456:8:2}function Bd(){var t=Q.p;return t!==0?t:(t=window.event,t===void 0?32:wm(t.type))}function Gd(t,s){var o=Q.p;try{return Q.p=t,s()}finally{Q.p=o}}var Vn=Math.random().toString(36).slice(2),mt="__reactFiber$"+Vn,wt="__reactProps$"+Vn,$i="__reactContainer$"+Vn,ll="__reactEvents$"+Vn,d_="__reactListeners$"+Vn,f_="__reactHandles$"+Vn,Vd="__reactResources$"+Vn,tr="__reactMarker$"+Vn;function ul(t){delete t[mt],delete t[wt],delete t[ll],delete t[d_],delete t[f_]}function Fi(t){var s=t[mt];if(s)return s;for(var o=t.parentNode;o;){if(s=o[$i]||o[mt]){if(o=s.alternate,s.child!==null||o!==null&&o.child!==null)for(t=um(t);t!==null;){if(o=t[mt])return o;t=um(t)}return s}t=o,o=t.parentNode}return null}function Ji(t){if(t=t[mt]||t[$i]){var s=t.tag;if(s===5||s===6||s===13||s===31||s===26||s===27||s===3)return t}return null}function nr(t){var s=t.tag;if(s===5||s===26||s===27||s===6)return t.stateNode;throw Error(r(33))}function Ki(t){var s=t[Vd];return s||(s=t[Vd]={hoistableStyles:new Map,hoistableScripts:new Map}),s}function ht(t){t[tr]=!0}var Hd=new Set,jd={};function vi(t,s){Yi(t,s),Yi(t+"Capture",s)}function Yi(t,s){for(jd[t]=s,t=0;t<s.length;t++)Hd.add(s[t])}var h_=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),zd={},$d={};function p_(t){return nl.call($d,t)?!0:nl.call(zd,t)?!1:h_.test(t)?$d[t]=!0:(zd[t]=!0,!1)}function fo(t,s,o){if(p_(s))if(o===null)t.removeAttribute(s);else{switch(typeof o){case"undefined":case"function":case"symbol":t.removeAttribute(s);return;case"boolean":var u=s.toLowerCase().slice(0,5);if(u!=="data-"&&u!=="aria-"){t.removeAttribute(s);return}}t.setAttribute(s,""+o)}}function ho(t,s,o){if(o===null)t.removeAttribute(s);else{switch(typeof o){case"undefined":case"function":case"symbol":case"boolean":t.removeAttribute(s);return}t.setAttribute(s,""+o)}}function gn(t,s,o,u){if(u===null)t.removeAttribute(o);else{switch(typeof u){case"undefined":case"function":case"symbol":case"boolean":t.removeAttribute(o);return}t.setAttributeNS(s,o,""+u)}}function Ft(t){switch(typeof t){case"bigint":case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function Fd(t){var s=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(s==="checkbox"||s==="radio")}function m_(t,s,o){var u=Object.getOwnPropertyDescriptor(t.constructor.prototype,s);if(!t.hasOwnProperty(s)&&typeof u<"u"&&typeof u.get=="function"&&typeof u.set=="function"){var m=u.get,v=u.set;return Object.defineProperty(t,s,{configurable:!0,get:function(){return m.call(this)},set:function(b){o=""+b,v.call(this,b)}}),Object.defineProperty(t,s,{enumerable:u.enumerable}),{getValue:function(){return o},setValue:function(b){o=""+b},stopTracking:function(){t._valueTracker=null,delete t[s]}}}}function cl(t){if(!t._valueTracker){var s=Fd(t)?"checked":"value";t._valueTracker=m_(t,s,""+t[s])}}function Jd(t){if(!t)return!1;var s=t._valueTracker;if(!s)return!0;var o=s.getValue(),u="";return t&&(u=Fd(t)?t.checked?"true":"false":t.value),t=u,t!==o?(s.setValue(t),!0):!1}function po(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}var g_=/[\n"\\]/g;function Jt(t){return t.replace(g_,function(s){return"\\"+s.charCodeAt(0).toString(16)+" "})}function dl(t,s,o,u,m,v,b,E){t.name="",b!=null&&typeof b!="function"&&typeof b!="symbol"&&typeof b!="boolean"?t.type=b:t.removeAttribute("type"),s!=null?b==="number"?(s===0&&t.value===""||t.value!=s)&&(t.value=""+Ft(s)):t.value!==""+Ft(s)&&(t.value=""+Ft(s)):b!=="submit"&&b!=="reset"||t.removeAttribute("value"),s!=null?fl(t,b,Ft(s)):o!=null?fl(t,b,Ft(o)):u!=null&&t.removeAttribute("value"),m==null&&v!=null&&(t.defaultChecked=!!v),m!=null&&(t.checked=m&&typeof m!="function"&&typeof m!="symbol"),E!=null&&typeof E!="function"&&typeof E!="symbol"&&typeof E!="boolean"?t.name=""+Ft(E):t.removeAttribute("name")}function Kd(t,s,o,u,m,v,b,E){if(v!=null&&typeof v!="function"&&typeof v!="symbol"&&typeof v!="boolean"&&(t.type=v),s!=null||o!=null){if(!(v!=="submit"&&v!=="reset"||s!=null)){cl(t);return}o=o!=null?""+Ft(o):"",s=s!=null?""+Ft(s):o,E||s===t.value||(t.value=s),t.defaultValue=s}u=u??m,u=typeof u!="function"&&typeof u!="symbol"&&!!u,t.checked=E?t.checked:!!u,t.defaultChecked=!!u,b!=null&&typeof b!="function"&&typeof b!="symbol"&&typeof b!="boolean"&&(t.name=b),cl(t)}function fl(t,s,o){s==="number"&&po(t.ownerDocument)===t||t.defaultValue===""+o||(t.defaultValue=""+o)}function Qi(t,s,o,u){if(t=t.options,s){s={};for(var m=0;m<o.length;m++)s["$"+o[m]]=!0;for(o=0;o<t.length;o++)m=s.hasOwnProperty("$"+t[o].value),t[o].selected!==m&&(t[o].selected=m),m&&u&&(t[o].defaultSelected=!0)}else{for(o=""+Ft(o),s=null,m=0;m<t.length;m++){if(t[m].value===o){t[m].selected=!0,u&&(t[m].defaultSelected=!0);return}s!==null||t[m].disabled||(s=t[m])}s!==null&&(s.selected=!0)}}function Yd(t,s,o){if(s!=null&&(s=""+Ft(s),s!==t.value&&(t.value=s),o==null)){t.defaultValue!==s&&(t.defaultValue=s);return}t.defaultValue=o!=null?""+Ft(o):""}function Qd(t,s,o,u){if(s==null){if(u!=null){if(o!=null)throw Error(r(92));if(He(u)){if(1<u.length)throw Error(r(93));u=u[0]}o=u}o==null&&(o=""),s=o}o=Ft(s),t.defaultValue=o,u=t.textContent,u===o&&u!==""&&u!==null&&(t.value=u),cl(t)}function Xi(t,s){if(s){var o=t.firstChild;if(o&&o===t.lastChild&&o.nodeType===3){o.nodeValue=s;return}}t.textContent=s}var y_=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Xd(t,s,o){var u=s.indexOf("--")===0;o==null||typeof o=="boolean"||o===""?u?t.setProperty(s,""):s==="float"?t.cssFloat="":t[s]="":u?t.setProperty(s,o):typeof o!="number"||o===0||y_.has(s)?s==="float"?t.cssFloat=o:t[s]=(""+o).trim():t[s]=o+"px"}function Zd(t,s,o){if(s!=null&&typeof s!="object")throw Error(r(62));if(t=t.style,o!=null){for(var u in o)!o.hasOwnProperty(u)||s!=null&&s.hasOwnProperty(u)||(u.indexOf("--")===0?t.setProperty(u,""):u==="float"?t.cssFloat="":t[u]="");for(var m in s)u=s[m],s.hasOwnProperty(m)&&o[m]!==u&&Xd(t,m,u)}else for(var v in s)s.hasOwnProperty(v)&&Xd(t,v,s[v])}function hl(t){if(t.indexOf("-")===-1)return!1;switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var v_=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),__=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function mo(t){return __.test(""+t)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":t}function yn(){}var pl=null;function ml(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var Zi=null,Wi=null;function Wd(t){var s=Ji(t);if(s&&(t=s.stateNode)){var o=t[wt]||null;e:switch(t=s.stateNode,s.type){case"input":if(dl(t,o.value,o.defaultValue,o.defaultValue,o.checked,o.defaultChecked,o.type,o.name),s=o.name,o.type==="radio"&&s!=null){for(o=t;o.parentNode;)o=o.parentNode;for(o=o.querySelectorAll('input[name="'+Jt(""+s)+'"][type="radio"]'),s=0;s<o.length;s++){var u=o[s];if(u!==t&&u.form===t.form){var m=u[wt]||null;if(!m)throw Error(r(90));dl(u,m.value,m.defaultValue,m.defaultValue,m.checked,m.defaultChecked,m.type,m.name)}}for(s=0;s<o.length;s++)u=o[s],u.form===t.form&&Jd(u)}break e;case"textarea":Yd(t,o.value,o.defaultValue);break e;case"select":s=o.value,s!=null&&Qi(t,!!o.multiple,s,!1)}}}var gl=!1;function ef(t,s,o){if(gl)return t(s,o);gl=!0;try{var u=t(s);return u}finally{if(gl=!1,(Zi!==null||Wi!==null)&&(na(),Zi&&(s=Zi,t=Wi,Wi=Zi=null,Wd(s),t)))for(s=0;s<t.length;s++)Wd(t[s])}}function ir(t,s){var o=t.stateNode;if(o===null)return null;var u=o[wt]||null;if(u===null)return null;o=u[s];e:switch(s){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(u=!u.disabled)||(t=t.type,u=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!u;break e;default:t=!1}if(t)return null;if(o&&typeof o!="function")throw Error(r(231,s,typeof o));return o}var vn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),yl=!1;if(vn)try{var sr={};Object.defineProperty(sr,"passive",{get:function(){yl=!0}}),window.addEventListener("test",sr,sr),window.removeEventListener("test",sr,sr)}catch{yl=!1}var Hn=null,vl=null,go=null;function tf(){if(go)return go;var t,s=vl,o=s.length,u,m="value"in Hn?Hn.value:Hn.textContent,v=m.length;for(t=0;t<o&&s[t]===m[t];t++);var b=o-t;for(u=1;u<=b&&s[o-u]===m[v-u];u++);return go=m.slice(t,1<u?1-u:void 0)}function yo(t){var s=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&s===13&&(t=13)):t=s,t===10&&(t=13),32<=t||t===13?t:0}function vo(){return!0}function nf(){return!1}function Ct(t){function s(o,u,m,v,b){this._reactName=o,this._targetInst=m,this.type=u,this.nativeEvent=v,this.target=b,this.currentTarget=null;for(var E in t)t.hasOwnProperty(E)&&(o=t[E],this[E]=o?o(v):v[E]);return this.isDefaultPrevented=(v.defaultPrevented!=null?v.defaultPrevented:v.returnValue===!1)?vo:nf,this.isPropagationStopped=nf,this}return x(s.prototype,{preventDefault:function(){this.defaultPrevented=!0;var o=this.nativeEvent;o&&(o.preventDefault?o.preventDefault():typeof o.returnValue!="unknown"&&(o.returnValue=!1),this.isDefaultPrevented=vo)},stopPropagation:function(){var o=this.nativeEvent;o&&(o.stopPropagation?o.stopPropagation():typeof o.cancelBubble!="unknown"&&(o.cancelBubble=!0),this.isPropagationStopped=vo)},persist:function(){},isPersistent:vo}),s}var _i={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},_o=Ct(_i),rr=x({},_i,{view:0,detail:0}),x_=Ct(rr),_l,xl,or,xo=x({},rr,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Sl,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==or&&(or&&t.type==="mousemove"?(_l=t.screenX-or.screenX,xl=t.screenY-or.screenY):xl=_l=0,or=t),_l)},movementY:function(t){return"movementY"in t?t.movementY:xl}}),sf=Ct(xo),b_=x({},xo,{dataTransfer:0}),S_=Ct(b_),T_=x({},rr,{relatedTarget:0}),bl=Ct(T_),E_=x({},_i,{animationName:0,elapsedTime:0,pseudoElement:0}),w_=Ct(E_),C_=x({},_i,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),A_=Ct(C_),N_=x({},_i,{data:0}),rf=Ct(N_),R_={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},M_={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},I_={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function k_(t){var s=this.nativeEvent;return s.getModifierState?s.getModifierState(t):(t=I_[t])?!!s[t]:!1}function Sl(){return k_}var D_=x({},rr,{key:function(t){if(t.key){var s=R_[t.key]||t.key;if(s!=="Unidentified")return s}return t.type==="keypress"?(t=yo(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?M_[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Sl,charCode:function(t){return t.type==="keypress"?yo(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?yo(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),U_=Ct(D_),P_=x({},xo,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),of=Ct(P_),O_=x({},rr,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Sl}),L_=Ct(O_),q_=x({},_i,{propertyName:0,elapsedTime:0,pseudoElement:0}),B_=Ct(q_),G_=x({},xo,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),V_=Ct(G_),H_=x({},_i,{newState:0,oldState:0}),j_=Ct(H_),z_=[9,13,27,32],Tl=vn&&"CompositionEvent"in window,ar=null;vn&&"documentMode"in document&&(ar=document.documentMode);var $_=vn&&"TextEvent"in window&&!ar,af=vn&&(!Tl||ar&&8<ar&&11>=ar),lf=" ",uf=!1;function cf(t,s){switch(t){case"keyup":return z_.indexOf(s.keyCode)!==-1;case"keydown":return s.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function df(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var es=!1;function F_(t,s){switch(t){case"compositionend":return df(s);case"keypress":return s.which!==32?null:(uf=!0,lf);case"textInput":return t=s.data,t===lf&&uf?null:t;default:return null}}function J_(t,s){if(es)return t==="compositionend"||!Tl&&cf(t,s)?(t=tf(),go=vl=Hn=null,es=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(s.ctrlKey||s.altKey||s.metaKey)||s.ctrlKey&&s.altKey){if(s.char&&1<s.char.length)return s.char;if(s.which)return String.fromCharCode(s.which)}return null;case"compositionend":return af&&s.locale!=="ko"?null:s.data;default:return null}}var K_={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function ff(t){var s=t&&t.nodeName&&t.nodeName.toLowerCase();return s==="input"?!!K_[t.type]:s==="textarea"}function hf(t,s,o,u){Zi?Wi?Wi.push(u):Wi=[u]:Zi=u,s=ua(s,"onChange"),0<s.length&&(o=new _o("onChange","change",null,o,u),t.push({event:o,listeners:s}))}var lr=null,ur=null;function Y_(t){Yp(t,0)}function bo(t){var s=nr(t);if(Jd(s))return t}function pf(t,s){if(t==="change")return s}var mf=!1;if(vn){var El;if(vn){var wl="oninput"in document;if(!wl){var gf=document.createElement("div");gf.setAttribute("oninput","return;"),wl=typeof gf.oninput=="function"}El=wl}else El=!1;mf=El&&(!document.documentMode||9<document.documentMode)}function yf(){lr&&(lr.detachEvent("onpropertychange",vf),ur=lr=null)}function vf(t){if(t.propertyName==="value"&&bo(ur)){var s=[];hf(s,ur,t,ml(t)),ef(Y_,s)}}function Q_(t,s,o){t==="focusin"?(yf(),lr=s,ur=o,lr.attachEvent("onpropertychange",vf)):t==="focusout"&&yf()}function X_(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return bo(ur)}function Z_(t,s){if(t==="click")return bo(s)}function W_(t,s){if(t==="input"||t==="change")return bo(s)}function ex(t,s){return t===s&&(t!==0||1/t===1/s)||t!==t&&s!==s}var Pt=typeof Object.is=="function"?Object.is:ex;function cr(t,s){if(Pt(t,s))return!0;if(typeof t!="object"||t===null||typeof s!="object"||s===null)return!1;var o=Object.keys(t),u=Object.keys(s);if(o.length!==u.length)return!1;for(u=0;u<o.length;u++){var m=o[u];if(!nl.call(s,m)||!Pt(t[m],s[m]))return!1}return!0}function _f(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function xf(t,s){var o=_f(t);t=0;for(var u;o;){if(o.nodeType===3){if(u=t+o.textContent.length,t<=s&&u>=s)return{node:o,offset:s-t};t=u}e:{for(;o;){if(o.nextSibling){o=o.nextSibling;break e}o=o.parentNode}o=void 0}o=_f(o)}}function bf(t,s){return t&&s?t===s?!0:t&&t.nodeType===3?!1:s&&s.nodeType===3?bf(t,s.parentNode):"contains"in t?t.contains(s):t.compareDocumentPosition?!!(t.compareDocumentPosition(s)&16):!1:!1}function Sf(t){t=t!=null&&t.ownerDocument!=null&&t.ownerDocument.defaultView!=null?t.ownerDocument.defaultView:window;for(var s=po(t.document);s instanceof t.HTMLIFrameElement;){try{var o=typeof s.contentWindow.location.href=="string"}catch{o=!1}if(o)t=s.contentWindow;else break;s=po(t.document)}return s}function Cl(t){var s=t&&t.nodeName&&t.nodeName.toLowerCase();return s&&(s==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||s==="textarea"||t.contentEditable==="true")}var tx=vn&&"documentMode"in document&&11>=document.documentMode,ts=null,Al=null,dr=null,Nl=!1;function Tf(t,s,o){var u=o.window===o?o.document:o.nodeType===9?o:o.ownerDocument;Nl||ts==null||ts!==po(u)||(u=ts,"selectionStart"in u&&Cl(u)?u={start:u.selectionStart,end:u.selectionEnd}:(u=(u.ownerDocument&&u.ownerDocument.defaultView||window).getSelection(),u={anchorNode:u.anchorNode,anchorOffset:u.anchorOffset,focusNode:u.focusNode,focusOffset:u.focusOffset}),dr&&cr(dr,u)||(dr=u,u=ua(Al,"onSelect"),0<u.length&&(s=new _o("onSelect","select",null,s,o),t.push({event:s,listeners:u}),s.target=ts)))}function xi(t,s){var o={};return o[t.toLowerCase()]=s.toLowerCase(),o["Webkit"+t]="webkit"+s,o["Moz"+t]="moz"+s,o}var ns={animationend:xi("Animation","AnimationEnd"),animationiteration:xi("Animation","AnimationIteration"),animationstart:xi("Animation","AnimationStart"),transitionrun:xi("Transition","TransitionRun"),transitionstart:xi("Transition","TransitionStart"),transitioncancel:xi("Transition","TransitionCancel"),transitionend:xi("Transition","TransitionEnd")},Rl={},Ef={};vn&&(Ef=document.createElement("div").style,"AnimationEvent"in window||(delete ns.animationend.animation,delete ns.animationiteration.animation,delete ns.animationstart.animation),"TransitionEvent"in window||delete ns.transitionend.transition);function bi(t){if(Rl[t])return Rl[t];if(!ns[t])return t;var s=ns[t],o;for(o in s)if(s.hasOwnProperty(o)&&o in Ef)return Rl[t]=s[o];return t}var wf=bi("animationend"),Cf=bi("animationiteration"),Af=bi("animationstart"),nx=bi("transitionrun"),ix=bi("transitionstart"),sx=bi("transitioncancel"),Nf=bi("transitionend"),Rf=new Map,Ml="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Ml.push("scrollEnd");function sn(t,s){Rf.set(t,s),vi(s,[t])}var So=typeof reportError=="function"?reportError:function(t){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var s=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof t=="object"&&t!==null&&typeof t.message=="string"?String(t.message):String(t),error:t});if(!window.dispatchEvent(s))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",t);return}console.error(t)},Kt=[],is=0,Il=0;function To(){for(var t=is,s=Il=is=0;s<t;){var o=Kt[s];Kt[s++]=null;var u=Kt[s];Kt[s++]=null;var m=Kt[s];Kt[s++]=null;var v=Kt[s];if(Kt[s++]=null,u!==null&&m!==null){var b=u.pending;b===null?m.next=m:(m.next=b.next,b.next=m),u.pending=m}v!==0&&Mf(o,m,v)}}function Eo(t,s,o,u){Kt[is++]=t,Kt[is++]=s,Kt[is++]=o,Kt[is++]=u,Il|=u,t.lanes|=u,t=t.alternate,t!==null&&(t.lanes|=u)}function kl(t,s,o,u){return Eo(t,s,o,u),wo(t)}function Si(t,s){return Eo(t,null,null,s),wo(t)}function Mf(t,s,o){t.lanes|=o;var u=t.alternate;u!==null&&(u.lanes|=o);for(var m=!1,v=t.return;v!==null;)v.childLanes|=o,u=v.alternate,u!==null&&(u.childLanes|=o),v.tag===22&&(t=v.stateNode,t===null||t._visibility&1||(m=!0)),t=v,v=v.return;return t.tag===3?(v=t.stateNode,m&&s!==null&&(m=31-Ut(o),t=v.hiddenUpdates,u=t[m],u===null?t[m]=[s]:u.push(s),s.lane=o|536870912),v):null}function wo(t){if(50<Dr)throw Dr=0,Vu=null,Error(r(185));for(var s=t.return;s!==null;)t=s,s=t.return;return t.tag===3?t.stateNode:null}var ss={};function rx(t,s,o,u){this.tag=t,this.key=o,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=s,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=u,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Ot(t,s,o,u){return new rx(t,s,o,u)}function Dl(t){return t=t.prototype,!(!t||!t.isReactComponent)}function _n(t,s){var o=t.alternate;return o===null?(o=Ot(t.tag,s,t.key,t.mode),o.elementType=t.elementType,o.type=t.type,o.stateNode=t.stateNode,o.alternate=t,t.alternate=o):(o.pendingProps=s,o.type=t.type,o.flags=0,o.subtreeFlags=0,o.deletions=null),o.flags=t.flags&65011712,o.childLanes=t.childLanes,o.lanes=t.lanes,o.child=t.child,o.memoizedProps=t.memoizedProps,o.memoizedState=t.memoizedState,o.updateQueue=t.updateQueue,s=t.dependencies,o.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext},o.sibling=t.sibling,o.index=t.index,o.ref=t.ref,o.refCleanup=t.refCleanup,o}function If(t,s){t.flags&=65011714;var o=t.alternate;return o===null?(t.childLanes=0,t.lanes=s,t.child=null,t.subtreeFlags=0,t.memoizedProps=null,t.memoizedState=null,t.updateQueue=null,t.dependencies=null,t.stateNode=null):(t.childLanes=o.childLanes,t.lanes=o.lanes,t.child=o.child,t.subtreeFlags=0,t.deletions=null,t.memoizedProps=o.memoizedProps,t.memoizedState=o.memoizedState,t.updateQueue=o.updateQueue,t.type=o.type,s=o.dependencies,t.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext}),t}function Co(t,s,o,u,m,v){var b=0;if(u=t,typeof t=="function")Dl(t)&&(b=1);else if(typeof t=="string")b=cb(t,o,W.current)?26:t==="html"||t==="head"||t==="body"?27:5;else e:switch(t){case Y:return t=Ot(31,o,s,m),t.elementType=Y,t.lanes=v,t;case C:return Ti(o.children,m,v,s);case M:b=8,m|=24;break;case D:return t=Ot(12,o,s,m|2),t.elementType=D,t.lanes=v,t;case U:return t=Ot(13,o,s,m),t.elementType=U,t.lanes=v,t;case K:return t=Ot(19,o,s,m),t.elementType=K,t.lanes=v,t;default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case I:b=10;break e;case B:b=9;break e;case z:b=11;break e;case G:b=14;break e;case X:b=16,u=null;break e}b=29,o=Error(r(130,t===null?"null":typeof t,"")),u=null}return s=Ot(b,o,s,m),s.elementType=t,s.type=u,s.lanes=v,s}function Ti(t,s,o,u){return t=Ot(7,t,u,s),t.lanes=o,t}function Ul(t,s,o){return t=Ot(6,t,null,s),t.lanes=o,t}function kf(t){var s=Ot(18,null,null,0);return s.stateNode=t,s}function Pl(t,s,o){return s=Ot(4,t.children!==null?t.children:[],t.key,s),s.lanes=o,s.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},s}var Df=new WeakMap;function Yt(t,s){if(typeof t=="object"&&t!==null){var o=Df.get(t);return o!==void 0?o:(s={value:t,source:s,stack:Id(s)},Df.set(t,s),s)}return{value:t,source:s,stack:Id(s)}}var rs=[],os=0,Ao=null,fr=0,Qt=[],Xt=0,jn=null,fn=1,hn="";function xn(t,s){rs[os++]=fr,rs[os++]=Ao,Ao=t,fr=s}function Uf(t,s,o){Qt[Xt++]=fn,Qt[Xt++]=hn,Qt[Xt++]=jn,jn=t;var u=fn;t=hn;var m=32-Ut(u)-1;u&=~(1<<m),o+=1;var v=32-Ut(s)+m;if(30<v){var b=m-m%5;v=(u&(1<<b)-1).toString(32),u>>=b,m-=b,fn=1<<32-Ut(s)+m|o<<m|u,hn=v+t}else fn=1<<v|o<<m|u,hn=t}function Ol(t){t.return!==null&&(xn(t,1),Uf(t,1,0))}function Ll(t){for(;t===Ao;)Ao=rs[--os],rs[os]=null,fr=rs[--os],rs[os]=null;for(;t===jn;)jn=Qt[--Xt],Qt[Xt]=null,hn=Qt[--Xt],Qt[Xt]=null,fn=Qt[--Xt],Qt[Xt]=null}function Pf(t,s){Qt[Xt++]=fn,Qt[Xt++]=hn,Qt[Xt++]=jn,fn=s.id,hn=s.overflow,jn=t}var gt=null,$e=null,Ne=!1,zn=null,Zt=!1,ql=Error(r(519));function $n(t){var s=Error(r(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw hr(Yt(s,t)),ql}function Of(t){var s=t.stateNode,o=t.type,u=t.memoizedProps;switch(s[mt]=t,s[wt]=u,o){case"dialog":Te("cancel",s),Te("close",s);break;case"iframe":case"object":case"embed":Te("load",s);break;case"video":case"audio":for(o=0;o<Pr.length;o++)Te(Pr[o],s);break;case"source":Te("error",s);break;case"img":case"image":case"link":Te("error",s),Te("load",s);break;case"details":Te("toggle",s);break;case"input":Te("invalid",s),Kd(s,u.value,u.defaultValue,u.checked,u.defaultChecked,u.type,u.name,!0);break;case"select":Te("invalid",s);break;case"textarea":Te("invalid",s),Qd(s,u.value,u.defaultValue,u.children)}o=u.children,typeof o!="string"&&typeof o!="number"&&typeof o!="bigint"||s.textContent===""+o||u.suppressHydrationWarning===!0||Wp(s.textContent,o)?(u.popover!=null&&(Te("beforetoggle",s),Te("toggle",s)),u.onScroll!=null&&Te("scroll",s),u.onScrollEnd!=null&&Te("scrollend",s),u.onClick!=null&&(s.onclick=yn),s=!0):s=!1,s||$n(t,!0)}function Lf(t){for(gt=t.return;gt;)switch(gt.tag){case 5:case 31:case 13:Zt=!1;return;case 27:case 3:Zt=!0;return;default:gt=gt.return}}function as(t){if(t!==gt)return!1;if(!Ne)return Lf(t),Ne=!0,!1;var s=t.tag,o;if((o=s!==3&&s!==27)&&((o=s===5)&&(o=t.type,o=!(o!=="form"&&o!=="button")||nc(t.type,t.memoizedProps)),o=!o),o&&$e&&$n(t),Lf(t),s===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(r(317));$e=lm(t)}else if(s===31){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(r(317));$e=lm(t)}else s===27?(s=$e,ri(t.type)?(t=ac,ac=null,$e=t):$e=s):$e=gt?en(t.stateNode.nextSibling):null;return!0}function Ei(){$e=gt=null,Ne=!1}function Bl(){var t=zn;return t!==null&&(Mt===null?Mt=t:Mt.push.apply(Mt,t),zn=null),t}function hr(t){zn===null?zn=[t]:zn.push(t)}var Gl=N(null),wi=null,bn=null;function Fn(t,s,o){Z(Gl,s._currentValue),s._currentValue=o}function Sn(t){t._currentValue=Gl.current,H(Gl)}function Vl(t,s,o){for(;t!==null;){var u=t.alternate;if((t.childLanes&s)!==s?(t.childLanes|=s,u!==null&&(u.childLanes|=s)):u!==null&&(u.childLanes&s)!==s&&(u.childLanes|=s),t===o)break;t=t.return}}function Hl(t,s,o,u){var m=t.child;for(m!==null&&(m.return=t);m!==null;){var v=m.dependencies;if(v!==null){var b=m.child;v=v.firstContext;e:for(;v!==null;){var E=v;v=m;for(var A=0;A<s.length;A++)if(E.context===s[A]){v.lanes|=o,E=v.alternate,E!==null&&(E.lanes|=o),Vl(v.return,o,t),u||(b=null);break e}v=E.next}}else if(m.tag===18){if(b=m.return,b===null)throw Error(r(341));b.lanes|=o,v=b.alternate,v!==null&&(v.lanes|=o),Vl(b,o,t),b=null}else b=m.child;if(b!==null)b.return=m;else for(b=m;b!==null;){if(b===t){b=null;break}if(m=b.sibling,m!==null){m.return=b.return,b=m;break}b=b.return}m=b}}function ls(t,s,o,u){t=null;for(var m=s,v=!1;m!==null;){if(!v){if((m.flags&524288)!==0)v=!0;else if((m.flags&262144)!==0)break}if(m.tag===10){var b=m.alternate;if(b===null)throw Error(r(387));if(b=b.memoizedProps,b!==null){var E=m.type;Pt(m.pendingProps.value,b.value)||(t!==null?t.push(E):t=[E])}}else if(m===Ae.current){if(b=m.alternate,b===null)throw Error(r(387));b.memoizedState.memoizedState!==m.memoizedState.memoizedState&&(t!==null?t.push(Gr):t=[Gr])}m=m.return}t!==null&&Hl(s,t,o,u),s.flags|=262144}function No(t){for(t=t.firstContext;t!==null;){if(!Pt(t.context._currentValue,t.memoizedValue))return!0;t=t.next}return!1}function Ci(t){wi=t,bn=null,t=t.dependencies,t!==null&&(t.firstContext=null)}function yt(t){return qf(wi,t)}function Ro(t,s){return wi===null&&Ci(t),qf(t,s)}function qf(t,s){var o=s._currentValue;if(s={context:s,memoizedValue:o,next:null},bn===null){if(t===null)throw Error(r(308));bn=s,t.dependencies={lanes:0,firstContext:s},t.flags|=524288}else bn=bn.next=s;return o}var ox=typeof AbortController<"u"?AbortController:function(){var t=[],s=this.signal={aborted:!1,addEventListener:function(o,u){t.push(u)}};this.abort=function(){s.aborted=!0,t.forEach(function(o){return o()})}},ax=n.unstable_scheduleCallback,lx=n.unstable_NormalPriority,ot={$$typeof:I,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function jl(){return{controller:new ox,data:new Map,refCount:0}}function pr(t){t.refCount--,t.refCount===0&&ax(lx,function(){t.controller.abort()})}var mr=null,zl=0,us=0,cs=null;function ux(t,s){if(mr===null){var o=mr=[];zl=0,us=Ju(),cs={status:"pending",value:void 0,then:function(u){o.push(u)}}}return zl++,s.then(Bf,Bf),s}function Bf(){if(--zl===0&&mr!==null){cs!==null&&(cs.status="fulfilled");var t=mr;mr=null,us=0,cs=null;for(var s=0;s<t.length;s++)(0,t[s])()}}function cx(t,s){var o=[],u={status:"pending",value:null,reason:null,then:function(m){o.push(m)}};return t.then(function(){u.status="fulfilled",u.value=s;for(var m=0;m<o.length;m++)(0,o[m])(s)},function(m){for(u.status="rejected",u.reason=m,m=0;m<o.length;m++)(0,o[m])(void 0)}),u}var Gf=q.S;q.S=function(t,s){Tp=kt(),typeof s=="object"&&s!==null&&typeof s.then=="function"&&ux(t,s),Gf!==null&&Gf(t,s)};var Ai=N(null);function $l(){var t=Ai.current;return t!==null?t:Be.pooledCache}function Mo(t,s){s===null?Z(Ai,Ai.current):Z(Ai,s.pool)}function Vf(){var t=$l();return t===null?null:{parent:ot._currentValue,pool:t}}var ds=Error(r(460)),Fl=Error(r(474)),Io=Error(r(542)),ko={then:function(){}};function Hf(t){return t=t.status,t==="fulfilled"||t==="rejected"}function jf(t,s,o){switch(o=t[o],o===void 0?t.push(s):o!==s&&(s.then(yn,yn),s=o),s.status){case"fulfilled":return s.value;case"rejected":throw t=s.reason,$f(t),t;default:if(typeof s.status=="string")s.then(yn,yn);else{if(t=Be,t!==null&&100<t.shellSuspendCounter)throw Error(r(482));t=s,t.status="pending",t.then(function(u){if(s.status==="pending"){var m=s;m.status="fulfilled",m.value=u}},function(u){if(s.status==="pending"){var m=s;m.status="rejected",m.reason=u}})}switch(s.status){case"fulfilled":return s.value;case"rejected":throw t=s.reason,$f(t),t}throw Ri=s,ds}}function Ni(t){try{var s=t._init;return s(t._payload)}catch(o){throw o!==null&&typeof o=="object"&&typeof o.then=="function"?(Ri=o,ds):o}}var Ri=null;function zf(){if(Ri===null)throw Error(r(459));var t=Ri;return Ri=null,t}function $f(t){if(t===ds||t===Io)throw Error(r(483))}var fs=null,gr=0;function Do(t){var s=gr;return gr+=1,fs===null&&(fs=[]),jf(fs,t,s)}function yr(t,s){s=s.props.ref,t.ref=s!==void 0?s:null}function Uo(t,s){throw s.$$typeof===S?Error(r(525)):(t=Object.prototype.toString.call(s),Error(r(31,t==="[object Object]"?"object with keys {"+Object.keys(s).join(", ")+"}":t)))}function Ff(t){function s(k,R){if(t){var P=k.deletions;P===null?(k.deletions=[R],k.flags|=16):P.push(R)}}function o(k,R){if(!t)return null;for(;R!==null;)s(k,R),R=R.sibling;return null}function u(k){for(var R=new Map;k!==null;)k.key!==null?R.set(k.key,k):R.set(k.index,k),k=k.sibling;return R}function m(k,R){return k=_n(k,R),k.index=0,k.sibling=null,k}function v(k,R,P){return k.index=P,t?(P=k.alternate,P!==null?(P=P.index,P<R?(k.flags|=67108866,R):P):(k.flags|=67108866,R)):(k.flags|=1048576,R)}function b(k){return t&&k.alternate===null&&(k.flags|=67108866),k}function E(k,R,P,F){return R===null||R.tag!==6?(R=Ul(P,k.mode,F),R.return=k,R):(R=m(R,P),R.return=k,R)}function A(k,R,P,F){var ue=P.type;return ue===C?j(k,R,P.props.children,F,P.key):R!==null&&(R.elementType===ue||typeof ue=="object"&&ue!==null&&ue.$$typeof===X&&Ni(ue)===R.type)?(R=m(R,P.props),yr(R,P),R.return=k,R):(R=Co(P.type,P.key,P.props,null,k.mode,F),yr(R,P),R.return=k,R)}function O(k,R,P,F){return R===null||R.tag!==4||R.stateNode.containerInfo!==P.containerInfo||R.stateNode.implementation!==P.implementation?(R=Pl(P,k.mode,F),R.return=k,R):(R=m(R,P.children||[]),R.return=k,R)}function j(k,R,P,F,ue){return R===null||R.tag!==7?(R=Ti(P,k.mode,F,ue),R.return=k,R):(R=m(R,P),R.return=k,R)}function J(k,R,P){if(typeof R=="string"&&R!==""||typeof R=="number"||typeof R=="bigint")return R=Ul(""+R,k.mode,P),R.return=k,R;if(typeof R=="object"&&R!==null){switch(R.$$typeof){case T:return P=Co(R.type,R.key,R.props,null,k.mode,P),yr(P,R),P.return=k,P;case w:return R=Pl(R,k.mode,P),R.return=k,R;case X:return R=Ni(R),J(k,R,P)}if(He(R)||re(R))return R=Ti(R,k.mode,P,null),R.return=k,R;if(typeof R.then=="function")return J(k,Do(R),P);if(R.$$typeof===I)return J(k,Ro(k,R),P);Uo(k,R)}return null}function L(k,R,P,F){var ue=R!==null?R.key:null;if(typeof P=="string"&&P!==""||typeof P=="number"||typeof P=="bigint")return ue!==null?null:E(k,R,""+P,F);if(typeof P=="object"&&P!==null){switch(P.$$typeof){case T:return P.key===ue?A(k,R,P,F):null;case w:return P.key===ue?O(k,R,P,F):null;case X:return P=Ni(P),L(k,R,P,F)}if(He(P)||re(P))return ue!==null?null:j(k,R,P,F,null);if(typeof P.then=="function")return L(k,R,Do(P),F);if(P.$$typeof===I)return L(k,R,Ro(k,P),F);Uo(k,P)}return null}function V(k,R,P,F,ue){if(typeof F=="string"&&F!==""||typeof F=="number"||typeof F=="bigint")return k=k.get(P)||null,E(R,k,""+F,ue);if(typeof F=="object"&&F!==null){switch(F.$$typeof){case T:return k=k.get(F.key===null?P:F.key)||null,A(R,k,F,ue);case w:return k=k.get(F.key===null?P:F.key)||null,O(R,k,F,ue);case X:return F=Ni(F),V(k,R,P,F,ue)}if(He(F)||re(F))return k=k.get(P)||null,j(R,k,F,ue,null);if(typeof F.then=="function")return V(k,R,P,Do(F),ue);if(F.$$typeof===I)return V(k,R,P,Ro(R,F),ue);Uo(R,F)}return null}function te(k,R,P,F){for(var ue=null,Re=null,oe=R,xe=R=0,Ce=null;oe!==null&&xe<P.length;xe++){oe.index>xe?(Ce=oe,oe=null):Ce=oe.sibling;var Me=L(k,oe,P[xe],F);if(Me===null){oe===null&&(oe=Ce);break}t&&oe&&Me.alternate===null&&s(k,oe),R=v(Me,R,xe),Re===null?ue=Me:Re.sibling=Me,Re=Me,oe=Ce}if(xe===P.length)return o(k,oe),Ne&&xn(k,xe),ue;if(oe===null){for(;xe<P.length;xe++)oe=J(k,P[xe],F),oe!==null&&(R=v(oe,R,xe),Re===null?ue=oe:Re.sibling=oe,Re=oe);return Ne&&xn(k,xe),ue}for(oe=u(oe);xe<P.length;xe++)Ce=V(oe,k,xe,P[xe],F),Ce!==null&&(t&&Ce.alternate!==null&&oe.delete(Ce.key===null?xe:Ce.key),R=v(Ce,R,xe),Re===null?ue=Ce:Re.sibling=Ce,Re=Ce);return t&&oe.forEach(function(ci){return s(k,ci)}),Ne&&xn(k,xe),ue}function de(k,R,P,F){if(P==null)throw Error(r(151));for(var ue=null,Re=null,oe=R,xe=R=0,Ce=null,Me=P.next();oe!==null&&!Me.done;xe++,Me=P.next()){oe.index>xe?(Ce=oe,oe=null):Ce=oe.sibling;var ci=L(k,oe,Me.value,F);if(ci===null){oe===null&&(oe=Ce);break}t&&oe&&ci.alternate===null&&s(k,oe),R=v(ci,R,xe),Re===null?ue=ci:Re.sibling=ci,Re=ci,oe=Ce}if(Me.done)return o(k,oe),Ne&&xn(k,xe),ue;if(oe===null){for(;!Me.done;xe++,Me=P.next())Me=J(k,Me.value,F),Me!==null&&(R=v(Me,R,xe),Re===null?ue=Me:Re.sibling=Me,Re=Me);return Ne&&xn(k,xe),ue}for(oe=u(oe);!Me.done;xe++,Me=P.next())Me=V(oe,k,xe,Me.value,F),Me!==null&&(t&&Me.alternate!==null&&oe.delete(Me.key===null?xe:Me.key),R=v(Me,R,xe),Re===null?ue=Me:Re.sibling=Me,Re=Me);return t&&oe.forEach(function(bb){return s(k,bb)}),Ne&&xn(k,xe),ue}function qe(k,R,P,F){if(typeof P=="object"&&P!==null&&P.type===C&&P.key===null&&(P=P.props.children),typeof P=="object"&&P!==null){switch(P.$$typeof){case T:e:{for(var ue=P.key;R!==null;){if(R.key===ue){if(ue=P.type,ue===C){if(R.tag===7){o(k,R.sibling),F=m(R,P.props.children),F.return=k,k=F;break e}}else if(R.elementType===ue||typeof ue=="object"&&ue!==null&&ue.$$typeof===X&&Ni(ue)===R.type){o(k,R.sibling),F=m(R,P.props),yr(F,P),F.return=k,k=F;break e}o(k,R);break}else s(k,R);R=R.sibling}P.type===C?(F=Ti(P.props.children,k.mode,F,P.key),F.return=k,k=F):(F=Co(P.type,P.key,P.props,null,k.mode,F),yr(F,P),F.return=k,k=F)}return b(k);case w:e:{for(ue=P.key;R!==null;){if(R.key===ue)if(R.tag===4&&R.stateNode.containerInfo===P.containerInfo&&R.stateNode.implementation===P.implementation){o(k,R.sibling),F=m(R,P.children||[]),F.return=k,k=F;break e}else{o(k,R);break}else s(k,R);R=R.sibling}F=Pl(P,k.mode,F),F.return=k,k=F}return b(k);case X:return P=Ni(P),qe(k,R,P,F)}if(He(P))return te(k,R,P,F);if(re(P)){if(ue=re(P),typeof ue!="function")throw Error(r(150));return P=ue.call(P),de(k,R,P,F)}if(typeof P.then=="function")return qe(k,R,Do(P),F);if(P.$$typeof===I)return qe(k,R,Ro(k,P),F);Uo(k,P)}return typeof P=="string"&&P!==""||typeof P=="number"||typeof P=="bigint"?(P=""+P,R!==null&&R.tag===6?(o(k,R.sibling),F=m(R,P),F.return=k,k=F):(o(k,R),F=Ul(P,k.mode,F),F.return=k,k=F),b(k)):o(k,R)}return function(k,R,P,F){try{gr=0;var ue=qe(k,R,P,F);return fs=null,ue}catch(oe){if(oe===ds||oe===Io)throw oe;var Re=Ot(29,oe,null,k.mode);return Re.lanes=F,Re.return=k,Re}finally{}}}var Mi=Ff(!0),Jf=Ff(!1),Jn=!1;function Jl(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Kl(t,s){t=t.updateQueue,s.updateQueue===t&&(s.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,callbacks:null})}function Kn(t){return{lane:t,tag:0,payload:null,callback:null,next:null}}function Yn(t,s,o){var u=t.updateQueue;if(u===null)return null;if(u=u.shared,(ke&2)!==0){var m=u.pending;return m===null?s.next=s:(s.next=m.next,m.next=s),u.pending=s,s=wo(t),Mf(t,null,o),s}return Eo(t,u,s,o),wo(t)}function vr(t,s,o){if(s=s.updateQueue,s!==null&&(s=s.shared,(o&4194048)!==0)){var u=s.lanes;u&=t.pendingLanes,o|=u,s.lanes=o,Ld(t,o)}}function Yl(t,s){var o=t.updateQueue,u=t.alternate;if(u!==null&&(u=u.updateQueue,o===u)){var m=null,v=null;if(o=o.firstBaseUpdate,o!==null){do{var b={lane:o.lane,tag:o.tag,payload:o.payload,callback:null,next:null};v===null?m=v=b:v=v.next=b,o=o.next}while(o!==null);v===null?m=v=s:v=v.next=s}else m=v=s;o={baseState:u.baseState,firstBaseUpdate:m,lastBaseUpdate:v,shared:u.shared,callbacks:u.callbacks},t.updateQueue=o;return}t=o.lastBaseUpdate,t===null?o.firstBaseUpdate=s:t.next=s,o.lastBaseUpdate=s}var Ql=!1;function _r(){if(Ql){var t=cs;if(t!==null)throw t}}function xr(t,s,o,u){Ql=!1;var m=t.updateQueue;Jn=!1;var v=m.firstBaseUpdate,b=m.lastBaseUpdate,E=m.shared.pending;if(E!==null){m.shared.pending=null;var A=E,O=A.next;A.next=null,b===null?v=O:b.next=O,b=A;var j=t.alternate;j!==null&&(j=j.updateQueue,E=j.lastBaseUpdate,E!==b&&(E===null?j.firstBaseUpdate=O:E.next=O,j.lastBaseUpdate=A))}if(v!==null){var J=m.baseState;b=0,j=O=A=null,E=v;do{var L=E.lane&-536870913,V=L!==E.lane;if(V?(we&L)===L:(u&L)===L){L!==0&&L===us&&(Ql=!0),j!==null&&(j=j.next={lane:0,tag:E.tag,payload:E.payload,callback:null,next:null});e:{var te=t,de=E;L=s;var qe=o;switch(de.tag){case 1:if(te=de.payload,typeof te=="function"){J=te.call(qe,J,L);break e}J=te;break e;case 3:te.flags=te.flags&-65537|128;case 0:if(te=de.payload,L=typeof te=="function"?te.call(qe,J,L):te,L==null)break e;J=x({},J,L);break e;case 2:Jn=!0}}L=E.callback,L!==null&&(t.flags|=64,V&&(t.flags|=8192),V=m.callbacks,V===null?m.callbacks=[L]:V.push(L))}else V={lane:L,tag:E.tag,payload:E.payload,callback:E.callback,next:null},j===null?(O=j=V,A=J):j=j.next=V,b|=L;if(E=E.next,E===null){if(E=m.shared.pending,E===null)break;V=E,E=V.next,V.next=null,m.lastBaseUpdate=V,m.shared.pending=null}}while(!0);j===null&&(A=J),m.baseState=A,m.firstBaseUpdate=O,m.lastBaseUpdate=j,v===null&&(m.shared.lanes=0),ei|=b,t.lanes=b,t.memoizedState=J}}function Kf(t,s){if(typeof t!="function")throw Error(r(191,t));t.call(s)}function Yf(t,s){var o=t.callbacks;if(o!==null)for(t.callbacks=null,t=0;t<o.length;t++)Kf(o[t],s)}var hs=N(null),Po=N(0);function Qf(t,s){t=In,Z(Po,t),Z(hs,s),In=t|s.baseLanes}function Xl(){Z(Po,In),Z(hs,hs.current)}function Zl(){In=Po.current,H(hs),H(Po)}var Lt=N(null),Wt=null;function Qn(t){var s=t.alternate;Z(nt,nt.current&1),Z(Lt,t),Wt===null&&(s===null||hs.current!==null||s.memoizedState!==null)&&(Wt=t)}function Wl(t){Z(nt,nt.current),Z(Lt,t),Wt===null&&(Wt=t)}function Xf(t){t.tag===22?(Z(nt,nt.current),Z(Lt,t),Wt===null&&(Wt=t)):Xn()}function Xn(){Z(nt,nt.current),Z(Lt,Lt.current)}function qt(t){H(Lt),Wt===t&&(Wt=null),H(nt)}var nt=N(0);function Oo(t){for(var s=t;s!==null;){if(s.tag===13){var o=s.memoizedState;if(o!==null&&(o=o.dehydrated,o===null||rc(o)||oc(o)))return s}else if(s.tag===19&&(s.memoizedProps.revealOrder==="forwards"||s.memoizedProps.revealOrder==="backwards"||s.memoizedProps.revealOrder==="unstable_legacy-backwards"||s.memoizedProps.revealOrder==="together")){if((s.flags&128)!==0)return s}else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===t)break;for(;s.sibling===null;){if(s.return===null||s.return===t)return null;s=s.return}s.sibling.return=s.return,s=s.sibling}return null}var Tn=0,ye=null,Oe=null,at=null,Lo=!1,ps=!1,Ii=!1,qo=0,br=0,ms=null,dx=0;function Ze(){throw Error(r(321))}function eu(t,s){if(s===null)return!1;for(var o=0;o<s.length&&o<t.length;o++)if(!Pt(t[o],s[o]))return!1;return!0}function tu(t,s,o,u,m,v){return Tn=v,ye=s,s.memoizedState=null,s.updateQueue=null,s.lanes=0,q.H=t===null||t.memoizedState===null?Uh:gu,Ii=!1,v=o(u,m),Ii=!1,ps&&(v=Wf(s,o,u,m)),Zf(t),v}function Zf(t){q.H=Er;var s=Oe!==null&&Oe.next!==null;if(Tn=0,at=Oe=ye=null,Lo=!1,br=0,ms=null,s)throw Error(r(300));t===null||lt||(t=t.dependencies,t!==null&&No(t)&&(lt=!0))}function Wf(t,s,o,u){ye=t;var m=0;do{if(ps&&(ms=null),br=0,ps=!1,25<=m)throw Error(r(301));if(m+=1,at=Oe=null,t.updateQueue!=null){var v=t.updateQueue;v.lastEffect=null,v.events=null,v.stores=null,v.memoCache!=null&&(v.memoCache.index=0)}q.H=Ph,v=s(o,u)}while(ps);return v}function fx(){var t=q.H,s=t.useState()[0];return s=typeof s.then=="function"?Sr(s):s,t=t.useState()[0],(Oe!==null?Oe.memoizedState:null)!==t&&(ye.flags|=1024),s}function nu(){var t=qo!==0;return qo=0,t}function iu(t,s,o){s.updateQueue=t.updateQueue,s.flags&=-2053,t.lanes&=~o}function su(t){if(Lo){for(t=t.memoizedState;t!==null;){var s=t.queue;s!==null&&(s.pending=null),t=t.next}Lo=!1}Tn=0,at=Oe=ye=null,ps=!1,br=qo=0,ms=null}function Et(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return at===null?ye.memoizedState=at=t:at=at.next=t,at}function it(){if(Oe===null){var t=ye.alternate;t=t!==null?t.memoizedState:null}else t=Oe.next;var s=at===null?ye.memoizedState:at.next;if(s!==null)at=s,Oe=t;else{if(t===null)throw ye.alternate===null?Error(r(467)):Error(r(310));Oe=t,t={memoizedState:Oe.memoizedState,baseState:Oe.baseState,baseQueue:Oe.baseQueue,queue:Oe.queue,next:null},at===null?ye.memoizedState=at=t:at=at.next=t}return at}function Bo(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Sr(t){var s=br;return br+=1,ms===null&&(ms=[]),t=jf(ms,t,s),s=ye,(at===null?s.memoizedState:at.next)===null&&(s=s.alternate,q.H=s===null||s.memoizedState===null?Uh:gu),t}function Go(t){if(t!==null&&typeof t=="object"){if(typeof t.then=="function")return Sr(t);if(t.$$typeof===I)return yt(t)}throw Error(r(438,String(t)))}function ru(t){var s=null,o=ye.updateQueue;if(o!==null&&(s=o.memoCache),s==null){var u=ye.alternate;u!==null&&(u=u.updateQueue,u!==null&&(u=u.memoCache,u!=null&&(s={data:u.data.map(function(m){return m.slice()}),index:0})))}if(s==null&&(s={data:[],index:0}),o===null&&(o=Bo(),ye.updateQueue=o),o.memoCache=s,o=s.data[s.index],o===void 0)for(o=s.data[s.index]=Array(t),u=0;u<t;u++)o[u]=ce;return s.index++,o}function En(t,s){return typeof s=="function"?s(t):s}function Vo(t){var s=it();return ou(s,Oe,t)}function ou(t,s,o){var u=t.queue;if(u===null)throw Error(r(311));u.lastRenderedReducer=o;var m=t.baseQueue,v=u.pending;if(v!==null){if(m!==null){var b=m.next;m.next=v.next,v.next=b}s.baseQueue=m=v,u.pending=null}if(v=t.baseState,m===null)t.memoizedState=v;else{s=m.next;var E=b=null,A=null,O=s,j=!1;do{var J=O.lane&-536870913;if(J!==O.lane?(we&J)===J:(Tn&J)===J){var L=O.revertLane;if(L===0)A!==null&&(A=A.next={lane:0,revertLane:0,gesture:null,action:O.action,hasEagerState:O.hasEagerState,eagerState:O.eagerState,next:null}),J===us&&(j=!0);else if((Tn&L)===L){O=O.next,L===us&&(j=!0);continue}else J={lane:0,revertLane:O.revertLane,gesture:null,action:O.action,hasEagerState:O.hasEagerState,eagerState:O.eagerState,next:null},A===null?(E=A=J,b=v):A=A.next=J,ye.lanes|=L,ei|=L;J=O.action,Ii&&o(v,J),v=O.hasEagerState?O.eagerState:o(v,J)}else L={lane:J,revertLane:O.revertLane,gesture:O.gesture,action:O.action,hasEagerState:O.hasEagerState,eagerState:O.eagerState,next:null},A===null?(E=A=L,b=v):A=A.next=L,ye.lanes|=J,ei|=J;O=O.next}while(O!==null&&O!==s);if(A===null?b=v:A.next=E,!Pt(v,t.memoizedState)&&(lt=!0,j&&(o=cs,o!==null)))throw o;t.memoizedState=v,t.baseState=b,t.baseQueue=A,u.lastRenderedState=v}return m===null&&(u.lanes=0),[t.memoizedState,u.dispatch]}function au(t){var s=it(),o=s.queue;if(o===null)throw Error(r(311));o.lastRenderedReducer=t;var u=o.dispatch,m=o.pending,v=s.memoizedState;if(m!==null){o.pending=null;var b=m=m.next;do v=t(v,b.action),b=b.next;while(b!==m);Pt(v,s.memoizedState)||(lt=!0),s.memoizedState=v,s.baseQueue===null&&(s.baseState=v),o.lastRenderedState=v}return[v,u]}function eh(t,s,o){var u=ye,m=it(),v=Ne;if(v){if(o===void 0)throw Error(r(407));o=o()}else o=s();var b=!Pt((Oe||m).memoizedState,o);if(b&&(m.memoizedState=o,lt=!0),m=m.queue,cu(ih.bind(null,u,m,t),[t]),m.getSnapshot!==s||b||at!==null&&at.memoizedState.tag&1){if(u.flags|=2048,gs(9,{destroy:void 0},nh.bind(null,u,m,o,s),null),Be===null)throw Error(r(349));v||(Tn&127)!==0||th(u,s,o)}return o}function th(t,s,o){t.flags|=16384,t={getSnapshot:s,value:o},s=ye.updateQueue,s===null?(s=Bo(),ye.updateQueue=s,s.stores=[t]):(o=s.stores,o===null?s.stores=[t]:o.push(t))}function nh(t,s,o,u){s.value=o,s.getSnapshot=u,sh(s)&&rh(t)}function ih(t,s,o){return o(function(){sh(s)&&rh(t)})}function sh(t){var s=t.getSnapshot;t=t.value;try{var o=s();return!Pt(t,o)}catch{return!0}}function rh(t){var s=Si(t,2);s!==null&&It(s,t,2)}function lu(t){var s=Et();if(typeof t=="function"){var o=t;if(t=o(),Ii){Gn(!0);try{o()}finally{Gn(!1)}}}return s.memoizedState=s.baseState=t,s.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:En,lastRenderedState:t},s}function oh(t,s,o,u){return t.baseState=o,ou(t,Oe,typeof u=="function"?u:En)}function hx(t,s,o,u,m){if(zo(t))throw Error(r(485));if(t=s.action,t!==null){var v={payload:m,action:t,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(b){v.listeners.push(b)}};q.T!==null?o(!0):v.isTransition=!1,u(v),o=s.pending,o===null?(v.next=s.pending=v,ah(s,v)):(v.next=o.next,s.pending=o.next=v)}}function ah(t,s){var o=s.action,u=s.payload,m=t.state;if(s.isTransition){var v=q.T,b={};q.T=b;try{var E=o(m,u),A=q.S;A!==null&&A(b,E),lh(t,s,E)}catch(O){uu(t,s,O)}finally{v!==null&&b.types!==null&&(v.types=b.types),q.T=v}}else try{v=o(m,u),lh(t,s,v)}catch(O){uu(t,s,O)}}function lh(t,s,o){o!==null&&typeof o=="object"&&typeof o.then=="function"?o.then(function(u){uh(t,s,u)},function(u){return uu(t,s,u)}):uh(t,s,o)}function uh(t,s,o){s.status="fulfilled",s.value=o,ch(s),t.state=o,s=t.pending,s!==null&&(o=s.next,o===s?t.pending=null:(o=o.next,s.next=o,ah(t,o)))}function uu(t,s,o){var u=t.pending;if(t.pending=null,u!==null){u=u.next;do s.status="rejected",s.reason=o,ch(s),s=s.next;while(s!==u)}t.action=null}function ch(t){t=t.listeners;for(var s=0;s<t.length;s++)(0,t[s])()}function dh(t,s){return s}function fh(t,s){if(Ne){var o=Be.formState;if(o!==null){e:{var u=ye;if(Ne){if($e){t:{for(var m=$e,v=Zt;m.nodeType!==8;){if(!v){m=null;break t}if(m=en(m.nextSibling),m===null){m=null;break t}}v=m.data,m=v==="F!"||v==="F"?m:null}if(m){$e=en(m.nextSibling),u=m.data==="F!";break e}}$n(u)}u=!1}u&&(s=o[0])}}return o=Et(),o.memoizedState=o.baseState=s,u={pending:null,lanes:0,dispatch:null,lastRenderedReducer:dh,lastRenderedState:s},o.queue=u,o=Ih.bind(null,ye,u),u.dispatch=o,u=lu(!1),v=mu.bind(null,ye,!1,u.queue),u=Et(),m={state:s,dispatch:null,action:t,pending:null},u.queue=m,o=hx.bind(null,ye,m,v,o),m.dispatch=o,u.memoizedState=t,[s,o,!1]}function hh(t){var s=it();return ph(s,Oe,t)}function ph(t,s,o){if(s=ou(t,s,dh)[0],t=Vo(En)[0],typeof s=="object"&&s!==null&&typeof s.then=="function")try{var u=Sr(s)}catch(b){throw b===ds?Io:b}else u=s;s=it();var m=s.queue,v=m.dispatch;return o!==s.memoizedState&&(ye.flags|=2048,gs(9,{destroy:void 0},px.bind(null,m,o),null)),[u,v,t]}function px(t,s){t.action=s}function mh(t){var s=it(),o=Oe;if(o!==null)return ph(s,o,t);it(),s=s.memoizedState,o=it();var u=o.queue.dispatch;return o.memoizedState=t,[s,u,!1]}function gs(t,s,o,u){return t={tag:t,create:o,deps:u,inst:s,next:null},s=ye.updateQueue,s===null&&(s=Bo(),ye.updateQueue=s),o=s.lastEffect,o===null?s.lastEffect=t.next=t:(u=o.next,o.next=t,t.next=u,s.lastEffect=t),t}function gh(){return it().memoizedState}function Ho(t,s,o,u){var m=Et();ye.flags|=t,m.memoizedState=gs(1|s,{destroy:void 0},o,u===void 0?null:u)}function jo(t,s,o,u){var m=it();u=u===void 0?null:u;var v=m.memoizedState.inst;Oe!==null&&u!==null&&eu(u,Oe.memoizedState.deps)?m.memoizedState=gs(s,v,o,u):(ye.flags|=t,m.memoizedState=gs(1|s,v,o,u))}function yh(t,s){Ho(8390656,8,t,s)}function cu(t,s){jo(2048,8,t,s)}function mx(t){ye.flags|=4;var s=ye.updateQueue;if(s===null)s=Bo(),ye.updateQueue=s,s.events=[t];else{var o=s.events;o===null?s.events=[t]:o.push(t)}}function vh(t){var s=it().memoizedState;return mx({ref:s,nextImpl:t}),function(){if((ke&2)!==0)throw Error(r(440));return s.impl.apply(void 0,arguments)}}function _h(t,s){return jo(4,2,t,s)}function xh(t,s){return jo(4,4,t,s)}function bh(t,s){if(typeof s=="function"){t=t();var o=s(t);return function(){typeof o=="function"?o():s(null)}}if(s!=null)return t=t(),s.current=t,function(){s.current=null}}function Sh(t,s,o){o=o!=null?o.concat([t]):null,jo(4,4,bh.bind(null,s,t),o)}function du(){}function Th(t,s){var o=it();s=s===void 0?null:s;var u=o.memoizedState;return s!==null&&eu(s,u[1])?u[0]:(o.memoizedState=[t,s],t)}function Eh(t,s){var o=it();s=s===void 0?null:s;var u=o.memoizedState;if(s!==null&&eu(s,u[1]))return u[0];if(u=t(),Ii){Gn(!0);try{t()}finally{Gn(!1)}}return o.memoizedState=[u,s],u}function fu(t,s,o){return o===void 0||(Tn&1073741824)!==0&&(we&261930)===0?t.memoizedState=s:(t.memoizedState=o,t=wp(),ye.lanes|=t,ei|=t,o)}function wh(t,s,o,u){return Pt(o,s)?o:hs.current!==null?(t=fu(t,o,u),Pt(t,s)||(lt=!0),t):(Tn&42)===0||(Tn&1073741824)!==0&&(we&261930)===0?(lt=!0,t.memoizedState=o):(t=wp(),ye.lanes|=t,ei|=t,s)}function Ch(t,s,o,u,m){var v=Q.p;Q.p=v!==0&&8>v?v:8;var b=q.T,E={};q.T=E,mu(t,!1,s,o);try{var A=m(),O=q.S;if(O!==null&&O(E,A),A!==null&&typeof A=="object"&&typeof A.then=="function"){var j=cx(A,u);Tr(t,s,j,Vt(t))}else Tr(t,s,u,Vt(t))}catch(J){Tr(t,s,{then:function(){},status:"rejected",reason:J},Vt())}finally{Q.p=v,b!==null&&E.types!==null&&(b.types=E.types),q.T=b}}function gx(){}function hu(t,s,o,u){if(t.tag!==5)throw Error(r(476));var m=Ah(t).queue;Ch(t,m,s,ie,o===null?gx:function(){return Nh(t),o(u)})}function Ah(t){var s=t.memoizedState;if(s!==null)return s;s={memoizedState:ie,baseState:ie,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:En,lastRenderedState:ie},next:null};var o={};return s.next={memoizedState:o,baseState:o,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:En,lastRenderedState:o},next:null},t.memoizedState=s,t=t.alternate,t!==null&&(t.memoizedState=s),s}function Nh(t){var s=Ah(t);s.next===null&&(s=t.alternate.memoizedState),Tr(t,s.next.queue,{},Vt())}function pu(){return yt(Gr)}function Rh(){return it().memoizedState}function Mh(){return it().memoizedState}function yx(t){for(var s=t.return;s!==null;){switch(s.tag){case 24:case 3:var o=Vt();t=Kn(o);var u=Yn(s,t,o);u!==null&&(It(u,s,o),vr(u,s,o)),s={cache:jl()},t.payload=s;return}s=s.return}}function vx(t,s,o){var u=Vt();o={lane:u,revertLane:0,gesture:null,action:o,hasEagerState:!1,eagerState:null,next:null},zo(t)?kh(s,o):(o=kl(t,s,o,u),o!==null&&(It(o,t,u),Dh(o,s,u)))}function Ih(t,s,o){var u=Vt();Tr(t,s,o,u)}function Tr(t,s,o,u){var m={lane:u,revertLane:0,gesture:null,action:o,hasEagerState:!1,eagerState:null,next:null};if(zo(t))kh(s,m);else{var v=t.alternate;if(t.lanes===0&&(v===null||v.lanes===0)&&(v=s.lastRenderedReducer,v!==null))try{var b=s.lastRenderedState,E=v(b,o);if(m.hasEagerState=!0,m.eagerState=E,Pt(E,b))return Eo(t,s,m,0),Be===null&&To(),!1}catch{}finally{}if(o=kl(t,s,m,u),o!==null)return It(o,t,u),Dh(o,s,u),!0}return!1}function mu(t,s,o,u){if(u={lane:2,revertLane:Ju(),gesture:null,action:u,hasEagerState:!1,eagerState:null,next:null},zo(t)){if(s)throw Error(r(479))}else s=kl(t,o,u,2),s!==null&&It(s,t,2)}function zo(t){var s=t.alternate;return t===ye||s!==null&&s===ye}function kh(t,s){ps=Lo=!0;var o=t.pending;o===null?s.next=s:(s.next=o.next,o.next=s),t.pending=s}function Dh(t,s,o){if((o&4194048)!==0){var u=s.lanes;u&=t.pendingLanes,o|=u,s.lanes=o,Ld(t,o)}}var Er={readContext:yt,use:Go,useCallback:Ze,useContext:Ze,useEffect:Ze,useImperativeHandle:Ze,useLayoutEffect:Ze,useInsertionEffect:Ze,useMemo:Ze,useReducer:Ze,useRef:Ze,useState:Ze,useDebugValue:Ze,useDeferredValue:Ze,useTransition:Ze,useSyncExternalStore:Ze,useId:Ze,useHostTransitionStatus:Ze,useFormState:Ze,useActionState:Ze,useOptimistic:Ze,useMemoCache:Ze,useCacheRefresh:Ze};Er.useEffectEvent=Ze;var Uh={readContext:yt,use:Go,useCallback:function(t,s){return Et().memoizedState=[t,s===void 0?null:s],t},useContext:yt,useEffect:yh,useImperativeHandle:function(t,s,o){o=o!=null?o.concat([t]):null,Ho(4194308,4,bh.bind(null,s,t),o)},useLayoutEffect:function(t,s){return Ho(4194308,4,t,s)},useInsertionEffect:function(t,s){Ho(4,2,t,s)},useMemo:function(t,s){var o=Et();s=s===void 0?null:s;var u=t();if(Ii){Gn(!0);try{t()}finally{Gn(!1)}}return o.memoizedState=[u,s],u},useReducer:function(t,s,o){var u=Et();if(o!==void 0){var m=o(s);if(Ii){Gn(!0);try{o(s)}finally{Gn(!1)}}}else m=s;return u.memoizedState=u.baseState=m,t={pending:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:m},u.queue=t,t=t.dispatch=vx.bind(null,ye,t),[u.memoizedState,t]},useRef:function(t){var s=Et();return t={current:t},s.memoizedState=t},useState:function(t){t=lu(t);var s=t.queue,o=Ih.bind(null,ye,s);return s.dispatch=o,[t.memoizedState,o]},useDebugValue:du,useDeferredValue:function(t,s){var o=Et();return fu(o,t,s)},useTransition:function(){var t=lu(!1);return t=Ch.bind(null,ye,t.queue,!0,!1),Et().memoizedState=t,[!1,t]},useSyncExternalStore:function(t,s,o){var u=ye,m=Et();if(Ne){if(o===void 0)throw Error(r(407));o=o()}else{if(o=s(),Be===null)throw Error(r(349));(we&127)!==0||th(u,s,o)}m.memoizedState=o;var v={value:o,getSnapshot:s};return m.queue=v,yh(ih.bind(null,u,v,t),[t]),u.flags|=2048,gs(9,{destroy:void 0},nh.bind(null,u,v,o,s),null),o},useId:function(){var t=Et(),s=Be.identifierPrefix;if(Ne){var o=hn,u=fn;o=(u&~(1<<32-Ut(u)-1)).toString(32)+o,s="_"+s+"R_"+o,o=qo++,0<o&&(s+="H"+o.toString(32)),s+="_"}else o=dx++,s="_"+s+"r_"+o.toString(32)+"_";return t.memoizedState=s},useHostTransitionStatus:pu,useFormState:fh,useActionState:fh,useOptimistic:function(t){var s=Et();s.memoizedState=s.baseState=t;var o={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return s.queue=o,s=mu.bind(null,ye,!0,o),o.dispatch=s,[t,s]},useMemoCache:ru,useCacheRefresh:function(){return Et().memoizedState=yx.bind(null,ye)},useEffectEvent:function(t){var s=Et(),o={impl:t};return s.memoizedState=o,function(){if((ke&2)!==0)throw Error(r(440));return o.impl.apply(void 0,arguments)}}},gu={readContext:yt,use:Go,useCallback:Th,useContext:yt,useEffect:cu,useImperativeHandle:Sh,useInsertionEffect:_h,useLayoutEffect:xh,useMemo:Eh,useReducer:Vo,useRef:gh,useState:function(){return Vo(En)},useDebugValue:du,useDeferredValue:function(t,s){var o=it();return wh(o,Oe.memoizedState,t,s)},useTransition:function(){var t=Vo(En)[0],s=it().memoizedState;return[typeof t=="boolean"?t:Sr(t),s]},useSyncExternalStore:eh,useId:Rh,useHostTransitionStatus:pu,useFormState:hh,useActionState:hh,useOptimistic:function(t,s){var o=it();return oh(o,Oe,t,s)},useMemoCache:ru,useCacheRefresh:Mh};gu.useEffectEvent=vh;var Ph={readContext:yt,use:Go,useCallback:Th,useContext:yt,useEffect:cu,useImperativeHandle:Sh,useInsertionEffect:_h,useLayoutEffect:xh,useMemo:Eh,useReducer:au,useRef:gh,useState:function(){return au(En)},useDebugValue:du,useDeferredValue:function(t,s){var o=it();return Oe===null?fu(o,t,s):wh(o,Oe.memoizedState,t,s)},useTransition:function(){var t=au(En)[0],s=it().memoizedState;return[typeof t=="boolean"?t:Sr(t),s]},useSyncExternalStore:eh,useId:Rh,useHostTransitionStatus:pu,useFormState:mh,useActionState:mh,useOptimistic:function(t,s){var o=it();return Oe!==null?oh(o,Oe,t,s):(o.baseState=t,[t,o.queue.dispatch])},useMemoCache:ru,useCacheRefresh:Mh};Ph.useEffectEvent=vh;function yu(t,s,o,u){s=t.memoizedState,o=o(u,s),o=o==null?s:x({},s,o),t.memoizedState=o,t.lanes===0&&(t.updateQueue.baseState=o)}var vu={enqueueSetState:function(t,s,o){t=t._reactInternals;var u=Vt(),m=Kn(u);m.payload=s,o!=null&&(m.callback=o),s=Yn(t,m,u),s!==null&&(It(s,t,u),vr(s,t,u))},enqueueReplaceState:function(t,s,o){t=t._reactInternals;var u=Vt(),m=Kn(u);m.tag=1,m.payload=s,o!=null&&(m.callback=o),s=Yn(t,m,u),s!==null&&(It(s,t,u),vr(s,t,u))},enqueueForceUpdate:function(t,s){t=t._reactInternals;var o=Vt(),u=Kn(o);u.tag=2,s!=null&&(u.callback=s),s=Yn(t,u,o),s!==null&&(It(s,t,o),vr(s,t,o))}};function Oh(t,s,o,u,m,v,b){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(u,v,b):s.prototype&&s.prototype.isPureReactComponent?!cr(o,u)||!cr(m,v):!0}function Lh(t,s,o,u){t=s.state,typeof s.componentWillReceiveProps=="function"&&s.componentWillReceiveProps(o,u),typeof s.UNSAFE_componentWillReceiveProps=="function"&&s.UNSAFE_componentWillReceiveProps(o,u),s.state!==t&&vu.enqueueReplaceState(s,s.state,null)}function ki(t,s){var o=s;if("ref"in s){o={};for(var u in s)u!=="ref"&&(o[u]=s[u])}if(t=t.defaultProps){o===s&&(o=x({},o));for(var m in t)o[m]===void 0&&(o[m]=t[m])}return o}function qh(t){So(t)}function Bh(t){console.error(t)}function Gh(t){So(t)}function $o(t,s){try{var o=t.onUncaughtError;o(s.value,{componentStack:s.stack})}catch(u){setTimeout(function(){throw u})}}function Vh(t,s,o){try{var u=t.onCaughtError;u(o.value,{componentStack:o.stack,errorBoundary:s.tag===1?s.stateNode:null})}catch(m){setTimeout(function(){throw m})}}function _u(t,s,o){return o=Kn(o),o.tag=3,o.payload={element:null},o.callback=function(){$o(t,s)},o}function Hh(t){return t=Kn(t),t.tag=3,t}function jh(t,s,o,u){var m=o.type.getDerivedStateFromError;if(typeof m=="function"){var v=u.value;t.payload=function(){return m(v)},t.callback=function(){Vh(s,o,u)}}var b=o.stateNode;b!==null&&typeof b.componentDidCatch=="function"&&(t.callback=function(){Vh(s,o,u),typeof m!="function"&&(ti===null?ti=new Set([this]):ti.add(this));var E=u.stack;this.componentDidCatch(u.value,{componentStack:E!==null?E:""})})}function _x(t,s,o,u,m){if(o.flags|=32768,u!==null&&typeof u=="object"&&typeof u.then=="function"){if(s=o.alternate,s!==null&&ls(s,o,m,!0),o=Lt.current,o!==null){switch(o.tag){case 31:case 13:return Wt===null?ia():o.alternate===null&&We===0&&(We=3),o.flags&=-257,o.flags|=65536,o.lanes=m,u===ko?o.flags|=16384:(s=o.updateQueue,s===null?o.updateQueue=new Set([u]):s.add(u),zu(t,u,m)),!1;case 22:return o.flags|=65536,u===ko?o.flags|=16384:(s=o.updateQueue,s===null?(s={transitions:null,markerInstances:null,retryQueue:new Set([u])},o.updateQueue=s):(o=s.retryQueue,o===null?s.retryQueue=new Set([u]):o.add(u)),zu(t,u,m)),!1}throw Error(r(435,o.tag))}return zu(t,u,m),ia(),!1}if(Ne)return s=Lt.current,s!==null?((s.flags&65536)===0&&(s.flags|=256),s.flags|=65536,s.lanes=m,u!==ql&&(t=Error(r(422),{cause:u}),hr(Yt(t,o)))):(u!==ql&&(s=Error(r(423),{cause:u}),hr(Yt(s,o))),t=t.current.alternate,t.flags|=65536,m&=-m,t.lanes|=m,u=Yt(u,o),m=_u(t.stateNode,u,m),Yl(t,m),We!==4&&(We=2)),!1;var v=Error(r(520),{cause:u});if(v=Yt(v,o),kr===null?kr=[v]:kr.push(v),We!==4&&(We=2),s===null)return!0;u=Yt(u,o),o=s;do{switch(o.tag){case 3:return o.flags|=65536,t=m&-m,o.lanes|=t,t=_u(o.stateNode,u,t),Yl(o,t),!1;case 1:if(s=o.type,v=o.stateNode,(o.flags&128)===0&&(typeof s.getDerivedStateFromError=="function"||v!==null&&typeof v.componentDidCatch=="function"&&(ti===null||!ti.has(v))))return o.flags|=65536,m&=-m,o.lanes|=m,m=Hh(m),jh(m,t,o,u),Yl(o,m),!1}o=o.return}while(o!==null);return!1}var xu=Error(r(461)),lt=!1;function vt(t,s,o,u){s.child=t===null?Jf(s,null,o,u):Mi(s,t.child,o,u)}function zh(t,s,o,u,m){o=o.render;var v=s.ref;if("ref"in u){var b={};for(var E in u)E!=="ref"&&(b[E]=u[E])}else b=u;return Ci(s),u=tu(t,s,o,b,v,m),E=nu(),t!==null&&!lt?(iu(t,s,m),wn(t,s,m)):(Ne&&E&&Ol(s),s.flags|=1,vt(t,s,u,m),s.child)}function $h(t,s,o,u,m){if(t===null){var v=o.type;return typeof v=="function"&&!Dl(v)&&v.defaultProps===void 0&&o.compare===null?(s.tag=15,s.type=v,Fh(t,s,v,u,m)):(t=Co(o.type,null,u,s,s.mode,m),t.ref=s.ref,t.return=s,s.child=t)}if(v=t.child,!Nu(t,m)){var b=v.memoizedProps;if(o=o.compare,o=o!==null?o:cr,o(b,u)&&t.ref===s.ref)return wn(t,s,m)}return s.flags|=1,t=_n(v,u),t.ref=s.ref,t.return=s,s.child=t}function Fh(t,s,o,u,m){if(t!==null){var v=t.memoizedProps;if(cr(v,u)&&t.ref===s.ref)if(lt=!1,s.pendingProps=u=v,Nu(t,m))(t.flags&131072)!==0&&(lt=!0);else return s.lanes=t.lanes,wn(t,s,m)}return bu(t,s,o,u,m)}function Jh(t,s,o,u){var m=u.children,v=t!==null?t.memoizedState:null;if(t===null&&s.stateNode===null&&(s.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),u.mode==="hidden"){if((s.flags&128)!==0){if(v=v!==null?v.baseLanes|o:o,t!==null){for(u=s.child=t.child,m=0;u!==null;)m=m|u.lanes|u.childLanes,u=u.sibling;u=m&~v}else u=0,s.child=null;return Kh(t,s,v,o,u)}if((o&536870912)!==0)s.memoizedState={baseLanes:0,cachePool:null},t!==null&&Mo(s,v!==null?v.cachePool:null),v!==null?Qf(s,v):Xl(),Xf(s);else return u=s.lanes=536870912,Kh(t,s,v!==null?v.baseLanes|o:o,o,u)}else v!==null?(Mo(s,v.cachePool),Qf(s,v),Xn(),s.memoizedState=null):(t!==null&&Mo(s,null),Xl(),Xn());return vt(t,s,m,o),s.child}function wr(t,s){return t!==null&&t.tag===22||s.stateNode!==null||(s.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),s.sibling}function Kh(t,s,o,u,m){var v=$l();return v=v===null?null:{parent:ot._currentValue,pool:v},s.memoizedState={baseLanes:o,cachePool:v},t!==null&&Mo(s,null),Xl(),Xf(s),t!==null&&ls(t,s,u,!0),s.childLanes=m,null}function Fo(t,s){return s=Ko({mode:s.mode,children:s.children},t.mode),s.ref=t.ref,t.child=s,s.return=t,s}function Yh(t,s,o){return Mi(s,t.child,null,o),t=Fo(s,s.pendingProps),t.flags|=2,qt(s),s.memoizedState=null,t}function xx(t,s,o){var u=s.pendingProps,m=(s.flags&128)!==0;if(s.flags&=-129,t===null){if(Ne){if(u.mode==="hidden")return t=Fo(s,u),s.lanes=536870912,wr(null,t);if(Wl(s),(t=$e)?(t=am(t,Zt),t=t!==null&&t.data==="&"?t:null,t!==null&&(s.memoizedState={dehydrated:t,treeContext:jn!==null?{id:fn,overflow:hn}:null,retryLane:536870912,hydrationErrors:null},o=kf(t),o.return=s,s.child=o,gt=s,$e=null)):t=null,t===null)throw $n(s);return s.lanes=536870912,null}return Fo(s,u)}var v=t.memoizedState;if(v!==null){var b=v.dehydrated;if(Wl(s),m)if(s.flags&256)s.flags&=-257,s=Yh(t,s,o);else if(s.memoizedState!==null)s.child=t.child,s.flags|=128,s=null;else throw Error(r(558));else if(lt||ls(t,s,o,!1),m=(o&t.childLanes)!==0,lt||m){if(u=Be,u!==null&&(b=qd(u,o),b!==0&&b!==v.retryLane))throw v.retryLane=b,Si(t,b),It(u,t,b),xu;ia(),s=Yh(t,s,o)}else t=v.treeContext,$e=en(b.nextSibling),gt=s,Ne=!0,zn=null,Zt=!1,t!==null&&Pf(s,t),s=Fo(s,u),s.flags|=4096;return s}return t=_n(t.child,{mode:u.mode,children:u.children}),t.ref=s.ref,s.child=t,t.return=s,t}function Jo(t,s){var o=s.ref;if(o===null)t!==null&&t.ref!==null&&(s.flags|=4194816);else{if(typeof o!="function"&&typeof o!="object")throw Error(r(284));(t===null||t.ref!==o)&&(s.flags|=4194816)}}function bu(t,s,o,u,m){return Ci(s),o=tu(t,s,o,u,void 0,m),u=nu(),t!==null&&!lt?(iu(t,s,m),wn(t,s,m)):(Ne&&u&&Ol(s),s.flags|=1,vt(t,s,o,m),s.child)}function Qh(t,s,o,u,m,v){return Ci(s),s.updateQueue=null,o=Wf(s,u,o,m),Zf(t),u=nu(),t!==null&&!lt?(iu(t,s,v),wn(t,s,v)):(Ne&&u&&Ol(s),s.flags|=1,vt(t,s,o,v),s.child)}function Xh(t,s,o,u,m){if(Ci(s),s.stateNode===null){var v=ss,b=o.contextType;typeof b=="object"&&b!==null&&(v=yt(b)),v=new o(u,v),s.memoizedState=v.state!==null&&v.state!==void 0?v.state:null,v.updater=vu,s.stateNode=v,v._reactInternals=s,v=s.stateNode,v.props=u,v.state=s.memoizedState,v.refs={},Jl(s),b=o.contextType,v.context=typeof b=="object"&&b!==null?yt(b):ss,v.state=s.memoizedState,b=o.getDerivedStateFromProps,typeof b=="function"&&(yu(s,o,b,u),v.state=s.memoizedState),typeof o.getDerivedStateFromProps=="function"||typeof v.getSnapshotBeforeUpdate=="function"||typeof v.UNSAFE_componentWillMount!="function"&&typeof v.componentWillMount!="function"||(b=v.state,typeof v.componentWillMount=="function"&&v.componentWillMount(),typeof v.UNSAFE_componentWillMount=="function"&&v.UNSAFE_componentWillMount(),b!==v.state&&vu.enqueueReplaceState(v,v.state,null),xr(s,u,v,m),_r(),v.state=s.memoizedState),typeof v.componentDidMount=="function"&&(s.flags|=4194308),u=!0}else if(t===null){v=s.stateNode;var E=s.memoizedProps,A=ki(o,E);v.props=A;var O=v.context,j=o.contextType;b=ss,typeof j=="object"&&j!==null&&(b=yt(j));var J=o.getDerivedStateFromProps;j=typeof J=="function"||typeof v.getSnapshotBeforeUpdate=="function",E=s.pendingProps!==E,j||typeof v.UNSAFE_componentWillReceiveProps!="function"&&typeof v.componentWillReceiveProps!="function"||(E||O!==b)&&Lh(s,v,u,b),Jn=!1;var L=s.memoizedState;v.state=L,xr(s,u,v,m),_r(),O=s.memoizedState,E||L!==O||Jn?(typeof J=="function"&&(yu(s,o,J,u),O=s.memoizedState),(A=Jn||Oh(s,o,A,u,L,O,b))?(j||typeof v.UNSAFE_componentWillMount!="function"&&typeof v.componentWillMount!="function"||(typeof v.componentWillMount=="function"&&v.componentWillMount(),typeof v.UNSAFE_componentWillMount=="function"&&v.UNSAFE_componentWillMount()),typeof v.componentDidMount=="function"&&(s.flags|=4194308)):(typeof v.componentDidMount=="function"&&(s.flags|=4194308),s.memoizedProps=u,s.memoizedState=O),v.props=u,v.state=O,v.context=b,u=A):(typeof v.componentDidMount=="function"&&(s.flags|=4194308),u=!1)}else{v=s.stateNode,Kl(t,s),b=s.memoizedProps,j=ki(o,b),v.props=j,J=s.pendingProps,L=v.context,O=o.contextType,A=ss,typeof O=="object"&&O!==null&&(A=yt(O)),E=o.getDerivedStateFromProps,(O=typeof E=="function"||typeof v.getSnapshotBeforeUpdate=="function")||typeof v.UNSAFE_componentWillReceiveProps!="function"&&typeof v.componentWillReceiveProps!="function"||(b!==J||L!==A)&&Lh(s,v,u,A),Jn=!1,L=s.memoizedState,v.state=L,xr(s,u,v,m),_r();var V=s.memoizedState;b!==J||L!==V||Jn||t!==null&&t.dependencies!==null&&No(t.dependencies)?(typeof E=="function"&&(yu(s,o,E,u),V=s.memoizedState),(j=Jn||Oh(s,o,j,u,L,V,A)||t!==null&&t.dependencies!==null&&No(t.dependencies))?(O||typeof v.UNSAFE_componentWillUpdate!="function"&&typeof v.componentWillUpdate!="function"||(typeof v.componentWillUpdate=="function"&&v.componentWillUpdate(u,V,A),typeof v.UNSAFE_componentWillUpdate=="function"&&v.UNSAFE_componentWillUpdate(u,V,A)),typeof v.componentDidUpdate=="function"&&(s.flags|=4),typeof v.getSnapshotBeforeUpdate=="function"&&(s.flags|=1024)):(typeof v.componentDidUpdate!="function"||b===t.memoizedProps&&L===t.memoizedState||(s.flags|=4),typeof v.getSnapshotBeforeUpdate!="function"||b===t.memoizedProps&&L===t.memoizedState||(s.flags|=1024),s.memoizedProps=u,s.memoizedState=V),v.props=u,v.state=V,v.context=A,u=j):(typeof v.componentDidUpdate!="function"||b===t.memoizedProps&&L===t.memoizedState||(s.flags|=4),typeof v.getSnapshotBeforeUpdate!="function"||b===t.memoizedProps&&L===t.memoizedState||(s.flags|=1024),u=!1)}return v=u,Jo(t,s),u=(s.flags&128)!==0,v||u?(v=s.stateNode,o=u&&typeof o.getDerivedStateFromError!="function"?null:v.render(),s.flags|=1,t!==null&&u?(s.child=Mi(s,t.child,null,m),s.child=Mi(s,null,o,m)):vt(t,s,o,m),s.memoizedState=v.state,t=s.child):t=wn(t,s,m),t}function Zh(t,s,o,u){return Ei(),s.flags|=256,vt(t,s,o,u),s.child}var Su={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Tu(t){return{baseLanes:t,cachePool:Vf()}}function Eu(t,s,o){return t=t!==null?t.childLanes&~o:0,s&&(t|=Gt),t}function Wh(t,s,o){var u=s.pendingProps,m=!1,v=(s.flags&128)!==0,b;if((b=v)||(b=t!==null&&t.memoizedState===null?!1:(nt.current&2)!==0),b&&(m=!0,s.flags&=-129),b=(s.flags&32)!==0,s.flags&=-33,t===null){if(Ne){if(m?Qn(s):Xn(),(t=$e)?(t=am(t,Zt),t=t!==null&&t.data!=="&"?t:null,t!==null&&(s.memoizedState={dehydrated:t,treeContext:jn!==null?{id:fn,overflow:hn}:null,retryLane:536870912,hydrationErrors:null},o=kf(t),o.return=s,s.child=o,gt=s,$e=null)):t=null,t===null)throw $n(s);return oc(t)?s.lanes=32:s.lanes=536870912,null}var E=u.children;return u=u.fallback,m?(Xn(),m=s.mode,E=Ko({mode:"hidden",children:E},m),u=Ti(u,m,o,null),E.return=s,u.return=s,E.sibling=u,s.child=E,u=s.child,u.memoizedState=Tu(o),u.childLanes=Eu(t,b,o),s.memoizedState=Su,wr(null,u)):(Qn(s),wu(s,E))}var A=t.memoizedState;if(A!==null&&(E=A.dehydrated,E!==null)){if(v)s.flags&256?(Qn(s),s.flags&=-257,s=Cu(t,s,o)):s.memoizedState!==null?(Xn(),s.child=t.child,s.flags|=128,s=null):(Xn(),E=u.fallback,m=s.mode,u=Ko({mode:"visible",children:u.children},m),E=Ti(E,m,o,null),E.flags|=2,u.return=s,E.return=s,u.sibling=E,s.child=u,Mi(s,t.child,null,o),u=s.child,u.memoizedState=Tu(o),u.childLanes=Eu(t,b,o),s.memoizedState=Su,s=wr(null,u));else if(Qn(s),oc(E)){if(b=E.nextSibling&&E.nextSibling.dataset,b)var O=b.dgst;b=O,u=Error(r(419)),u.stack="",u.digest=b,hr({value:u,source:null,stack:null}),s=Cu(t,s,o)}else if(lt||ls(t,s,o,!1),b=(o&t.childLanes)!==0,lt||b){if(b=Be,b!==null&&(u=qd(b,o),u!==0&&u!==A.retryLane))throw A.retryLane=u,Si(t,u),It(b,t,u),xu;rc(E)||ia(),s=Cu(t,s,o)}else rc(E)?(s.flags|=192,s.child=t.child,s=null):(t=A.treeContext,$e=en(E.nextSibling),gt=s,Ne=!0,zn=null,Zt=!1,t!==null&&Pf(s,t),s=wu(s,u.children),s.flags|=4096);return s}return m?(Xn(),E=u.fallback,m=s.mode,A=t.child,O=A.sibling,u=_n(A,{mode:"hidden",children:u.children}),u.subtreeFlags=A.subtreeFlags&65011712,O!==null?E=_n(O,E):(E=Ti(E,m,o,null),E.flags|=2),E.return=s,u.return=s,u.sibling=E,s.child=u,wr(null,u),u=s.child,E=t.child.memoizedState,E===null?E=Tu(o):(m=E.cachePool,m!==null?(A=ot._currentValue,m=m.parent!==A?{parent:A,pool:A}:m):m=Vf(),E={baseLanes:E.baseLanes|o,cachePool:m}),u.memoizedState=E,u.childLanes=Eu(t,b,o),s.memoizedState=Su,wr(t.child,u)):(Qn(s),o=t.child,t=o.sibling,o=_n(o,{mode:"visible",children:u.children}),o.return=s,o.sibling=null,t!==null&&(b=s.deletions,b===null?(s.deletions=[t],s.flags|=16):b.push(t)),s.child=o,s.memoizedState=null,o)}function wu(t,s){return s=Ko({mode:"visible",children:s},t.mode),s.return=t,t.child=s}function Ko(t,s){return t=Ot(22,t,null,s),t.lanes=0,t}function Cu(t,s,o){return Mi(s,t.child,null,o),t=wu(s,s.pendingProps.children),t.flags|=2,s.memoizedState=null,t}function ep(t,s,o){t.lanes|=s;var u=t.alternate;u!==null&&(u.lanes|=s),Vl(t.return,s,o)}function Au(t,s,o,u,m,v){var b=t.memoizedState;b===null?t.memoizedState={isBackwards:s,rendering:null,renderingStartTime:0,last:u,tail:o,tailMode:m,treeForkCount:v}:(b.isBackwards=s,b.rendering=null,b.renderingStartTime=0,b.last=u,b.tail=o,b.tailMode=m,b.treeForkCount=v)}function tp(t,s,o){var u=s.pendingProps,m=u.revealOrder,v=u.tail;u=u.children;var b=nt.current,E=(b&2)!==0;if(E?(b=b&1|2,s.flags|=128):b&=1,Z(nt,b),vt(t,s,u,o),u=Ne?fr:0,!E&&t!==null&&(t.flags&128)!==0)e:for(t=s.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&ep(t,o,s);else if(t.tag===19)ep(t,o,s);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===s)break e;for(;t.sibling===null;){if(t.return===null||t.return===s)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}switch(m){case"forwards":for(o=s.child,m=null;o!==null;)t=o.alternate,t!==null&&Oo(t)===null&&(m=o),o=o.sibling;o=m,o===null?(m=s.child,s.child=null):(m=o.sibling,o.sibling=null),Au(s,!1,m,o,v,u);break;case"backwards":case"unstable_legacy-backwards":for(o=null,m=s.child,s.child=null;m!==null;){if(t=m.alternate,t!==null&&Oo(t)===null){s.child=m;break}t=m.sibling,m.sibling=o,o=m,m=t}Au(s,!0,o,null,v,u);break;case"together":Au(s,!1,null,null,void 0,u);break;default:s.memoizedState=null}return s.child}function wn(t,s,o){if(t!==null&&(s.dependencies=t.dependencies),ei|=s.lanes,(o&s.childLanes)===0)if(t!==null){if(ls(t,s,o,!1),(o&s.childLanes)===0)return null}else return null;if(t!==null&&s.child!==t.child)throw Error(r(153));if(s.child!==null){for(t=s.child,o=_n(t,t.pendingProps),s.child=o,o.return=s;t.sibling!==null;)t=t.sibling,o=o.sibling=_n(t,t.pendingProps),o.return=s;o.sibling=null}return s.child}function Nu(t,s){return(t.lanes&s)!==0?!0:(t=t.dependencies,!!(t!==null&&No(t)))}function bx(t,s,o){switch(s.tag){case 3:st(s,s.stateNode.containerInfo),Fn(s,ot,t.memoizedState.cache),Ei();break;case 27:case 5:_e(s);break;case 4:st(s,s.stateNode.containerInfo);break;case 10:Fn(s,s.type,s.memoizedProps.value);break;case 31:if(s.memoizedState!==null)return s.flags|=128,Wl(s),null;break;case 13:var u=s.memoizedState;if(u!==null)return u.dehydrated!==null?(Qn(s),s.flags|=128,null):(o&s.child.childLanes)!==0?Wh(t,s,o):(Qn(s),t=wn(t,s,o),t!==null?t.sibling:null);Qn(s);break;case 19:var m=(t.flags&128)!==0;if(u=(o&s.childLanes)!==0,u||(ls(t,s,o,!1),u=(o&s.childLanes)!==0),m){if(u)return tp(t,s,o);s.flags|=128}if(m=s.memoizedState,m!==null&&(m.rendering=null,m.tail=null,m.lastEffect=null),Z(nt,nt.current),u)break;return null;case 22:return s.lanes=0,Jh(t,s,o,s.pendingProps);case 24:Fn(s,ot,t.memoizedState.cache)}return wn(t,s,o)}function np(t,s,o){if(t!==null)if(t.memoizedProps!==s.pendingProps)lt=!0;else{if(!Nu(t,o)&&(s.flags&128)===0)return lt=!1,bx(t,s,o);lt=(t.flags&131072)!==0}else lt=!1,Ne&&(s.flags&1048576)!==0&&Uf(s,fr,s.index);switch(s.lanes=0,s.tag){case 16:e:{var u=s.pendingProps;if(t=Ni(s.elementType),s.type=t,typeof t=="function")Dl(t)?(u=ki(t,u),s.tag=1,s=Xh(null,s,t,u,o)):(s.tag=0,s=bu(null,s,t,u,o));else{if(t!=null){var m=t.$$typeof;if(m===z){s.tag=11,s=zh(null,s,t,u,o);break e}else if(m===G){s.tag=14,s=$h(null,s,t,u,o);break e}}throw s=Ve(t)||t,Error(r(306,s,""))}}return s;case 0:return bu(t,s,s.type,s.pendingProps,o);case 1:return u=s.type,m=ki(u,s.pendingProps),Xh(t,s,u,m,o);case 3:e:{if(st(s,s.stateNode.containerInfo),t===null)throw Error(r(387));u=s.pendingProps;var v=s.memoizedState;m=v.element,Kl(t,s),xr(s,u,null,o);var b=s.memoizedState;if(u=b.cache,Fn(s,ot,u),u!==v.cache&&Hl(s,[ot],o,!0),_r(),u=b.element,v.isDehydrated)if(v={element:u,isDehydrated:!1,cache:b.cache},s.updateQueue.baseState=v,s.memoizedState=v,s.flags&256){s=Zh(t,s,u,o);break e}else if(u!==m){m=Yt(Error(r(424)),s),hr(m),s=Zh(t,s,u,o);break e}else{switch(t=s.stateNode.containerInfo,t.nodeType){case 9:t=t.body;break;default:t=t.nodeName==="HTML"?t.ownerDocument.body:t}for($e=en(t.firstChild),gt=s,Ne=!0,zn=null,Zt=!0,o=Jf(s,null,u,o),s.child=o;o;)o.flags=o.flags&-3|4096,o=o.sibling}else{if(Ei(),u===m){s=wn(t,s,o);break e}vt(t,s,u,o)}s=s.child}return s;case 26:return Jo(t,s),t===null?(o=hm(s.type,null,s.pendingProps,null))?s.memoizedState=o:Ne||(o=s.type,t=s.pendingProps,u=ca(me.current).createElement(o),u[mt]=s,u[wt]=t,_t(u,o,t),ht(u),s.stateNode=u):s.memoizedState=hm(s.type,t.memoizedProps,s.pendingProps,t.memoizedState),null;case 27:return _e(s),t===null&&Ne&&(u=s.stateNode=cm(s.type,s.pendingProps,me.current),gt=s,Zt=!0,m=$e,ri(s.type)?(ac=m,$e=en(u.firstChild)):$e=m),vt(t,s,s.pendingProps.children,o),Jo(t,s),t===null&&(s.flags|=4194304),s.child;case 5:return t===null&&Ne&&((m=u=$e)&&(u=Xx(u,s.type,s.pendingProps,Zt),u!==null?(s.stateNode=u,gt=s,$e=en(u.firstChild),Zt=!1,m=!0):m=!1),m||$n(s)),_e(s),m=s.type,v=s.pendingProps,b=t!==null?t.memoizedProps:null,u=v.children,nc(m,v)?u=null:b!==null&&nc(m,b)&&(s.flags|=32),s.memoizedState!==null&&(m=tu(t,s,fx,null,null,o),Gr._currentValue=m),Jo(t,s),vt(t,s,u,o),s.child;case 6:return t===null&&Ne&&((t=o=$e)&&(o=Zx(o,s.pendingProps,Zt),o!==null?(s.stateNode=o,gt=s,$e=null,t=!0):t=!1),t||$n(s)),null;case 13:return Wh(t,s,o);case 4:return st(s,s.stateNode.containerInfo),u=s.pendingProps,t===null?s.child=Mi(s,null,u,o):vt(t,s,u,o),s.child;case 11:return zh(t,s,s.type,s.pendingProps,o);case 7:return vt(t,s,s.pendingProps,o),s.child;case 8:return vt(t,s,s.pendingProps.children,o),s.child;case 12:return vt(t,s,s.pendingProps.children,o),s.child;case 10:return u=s.pendingProps,Fn(s,s.type,u.value),vt(t,s,u.children,o),s.child;case 9:return m=s.type._context,u=s.pendingProps.children,Ci(s),m=yt(m),u=u(m),s.flags|=1,vt(t,s,u,o),s.child;case 14:return $h(t,s,s.type,s.pendingProps,o);case 15:return Fh(t,s,s.type,s.pendingProps,o);case 19:return tp(t,s,o);case 31:return xx(t,s,o);case 22:return Jh(t,s,o,s.pendingProps);case 24:return Ci(s),u=yt(ot),t===null?(m=$l(),m===null&&(m=Be,v=jl(),m.pooledCache=v,v.refCount++,v!==null&&(m.pooledCacheLanes|=o),m=v),s.memoizedState={parent:u,cache:m},Jl(s),Fn(s,ot,m)):((t.lanes&o)!==0&&(Kl(t,s),xr(s,null,null,o),_r()),m=t.memoizedState,v=s.memoizedState,m.parent!==u?(m={parent:u,cache:u},s.memoizedState=m,s.lanes===0&&(s.memoizedState=s.updateQueue.baseState=m),Fn(s,ot,u)):(u=v.cache,Fn(s,ot,u),u!==m.cache&&Hl(s,[ot],o,!0))),vt(t,s,s.pendingProps.children,o),s.child;case 29:throw s.pendingProps}throw Error(r(156,s.tag))}function Cn(t){t.flags|=4}function Ru(t,s,o,u,m){if((s=(t.mode&32)!==0)&&(s=!1),s){if(t.flags|=16777216,(m&335544128)===m)if(t.stateNode.complete)t.flags|=8192;else if(Rp())t.flags|=8192;else throw Ri=ko,Fl}else t.flags&=-16777217}function ip(t,s){if(s.type!=="stylesheet"||(s.state.loading&4)!==0)t.flags&=-16777217;else if(t.flags|=16777216,!vm(s))if(Rp())t.flags|=8192;else throw Ri=ko,Fl}function Yo(t,s){s!==null&&(t.flags|=4),t.flags&16384&&(s=t.tag!==22?Pd():536870912,t.lanes|=s,xs|=s)}function Cr(t,s){if(!Ne)switch(t.tailMode){case"hidden":s=t.tail;for(var o=null;s!==null;)s.alternate!==null&&(o=s),s=s.sibling;o===null?t.tail=null:o.sibling=null;break;case"collapsed":o=t.tail;for(var u=null;o!==null;)o.alternate!==null&&(u=o),o=o.sibling;u===null?s||t.tail===null?t.tail=null:t.tail.sibling=null:u.sibling=null}}function Fe(t){var s=t.alternate!==null&&t.alternate.child===t.child,o=0,u=0;if(s)for(var m=t.child;m!==null;)o|=m.lanes|m.childLanes,u|=m.subtreeFlags&65011712,u|=m.flags&65011712,m.return=t,m=m.sibling;else for(m=t.child;m!==null;)o|=m.lanes|m.childLanes,u|=m.subtreeFlags,u|=m.flags,m.return=t,m=m.sibling;return t.subtreeFlags|=u,t.childLanes=o,s}function Sx(t,s,o){var u=s.pendingProps;switch(Ll(s),s.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Fe(s),null;case 1:return Fe(s),null;case 3:return o=s.stateNode,u=null,t!==null&&(u=t.memoizedState.cache),s.memoizedState.cache!==u&&(s.flags|=2048),Sn(ot),je(),o.pendingContext&&(o.context=o.pendingContext,o.pendingContext=null),(t===null||t.child===null)&&(as(s)?Cn(s):t===null||t.memoizedState.isDehydrated&&(s.flags&256)===0||(s.flags|=1024,Bl())),Fe(s),null;case 26:var m=s.type,v=s.memoizedState;return t===null?(Cn(s),v!==null?(Fe(s),ip(s,v)):(Fe(s),Ru(s,m,null,u,o))):v?v!==t.memoizedState?(Cn(s),Fe(s),ip(s,v)):(Fe(s),s.flags&=-16777217):(t=t.memoizedProps,t!==u&&Cn(s),Fe(s),Ru(s,m,t,u,o)),null;case 27:if(Ke(s),o=me.current,m=s.type,t!==null&&s.stateNode!=null)t.memoizedProps!==u&&Cn(s);else{if(!u){if(s.stateNode===null)throw Error(r(166));return Fe(s),null}t=W.current,as(s)?Of(s):(t=cm(m,u,o),s.stateNode=t,Cn(s))}return Fe(s),null;case 5:if(Ke(s),m=s.type,t!==null&&s.stateNode!=null)t.memoizedProps!==u&&Cn(s);else{if(!u){if(s.stateNode===null)throw Error(r(166));return Fe(s),null}if(v=W.current,as(s))Of(s);else{var b=ca(me.current);switch(v){case 1:v=b.createElementNS("http://www.w3.org/2000/svg",m);break;case 2:v=b.createElementNS("http://www.w3.org/1998/Math/MathML",m);break;default:switch(m){case"svg":v=b.createElementNS("http://www.w3.org/2000/svg",m);break;case"math":v=b.createElementNS("http://www.w3.org/1998/Math/MathML",m);break;case"script":v=b.createElement("div"),v.innerHTML="<script><\/script>",v=v.removeChild(v.firstChild);break;case"select":v=typeof u.is=="string"?b.createElement("select",{is:u.is}):b.createElement("select"),u.multiple?v.multiple=!0:u.size&&(v.size=u.size);break;default:v=typeof u.is=="string"?b.createElement(m,{is:u.is}):b.createElement(m)}}v[mt]=s,v[wt]=u;e:for(b=s.child;b!==null;){if(b.tag===5||b.tag===6)v.appendChild(b.stateNode);else if(b.tag!==4&&b.tag!==27&&b.child!==null){b.child.return=b,b=b.child;continue}if(b===s)break e;for(;b.sibling===null;){if(b.return===null||b.return===s)break e;b=b.return}b.sibling.return=b.return,b=b.sibling}s.stateNode=v;e:switch(_t(v,m,u),m){case"button":case"input":case"select":case"textarea":u=!!u.autoFocus;break e;case"img":u=!0;break e;default:u=!1}u&&Cn(s)}}return Fe(s),Ru(s,s.type,t===null?null:t.memoizedProps,s.pendingProps,o),null;case 6:if(t&&s.stateNode!=null)t.memoizedProps!==u&&Cn(s);else{if(typeof u!="string"&&s.stateNode===null)throw Error(r(166));if(t=me.current,as(s)){if(t=s.stateNode,o=s.memoizedProps,u=null,m=gt,m!==null)switch(m.tag){case 27:case 5:u=m.memoizedProps}t[mt]=s,t=!!(t.nodeValue===o||u!==null&&u.suppressHydrationWarning===!0||Wp(t.nodeValue,o)),t||$n(s,!0)}else t=ca(t).createTextNode(u),t[mt]=s,s.stateNode=t}return Fe(s),null;case 31:if(o=s.memoizedState,t===null||t.memoizedState!==null){if(u=as(s),o!==null){if(t===null){if(!u)throw Error(r(318));if(t=s.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(r(557));t[mt]=s}else Ei(),(s.flags&128)===0&&(s.memoizedState=null),s.flags|=4;Fe(s),t=!1}else o=Bl(),t!==null&&t.memoizedState!==null&&(t.memoizedState.hydrationErrors=o),t=!0;if(!t)return s.flags&256?(qt(s),s):(qt(s),null);if((s.flags&128)!==0)throw Error(r(558))}return Fe(s),null;case 13:if(u=s.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(m=as(s),u!==null&&u.dehydrated!==null){if(t===null){if(!m)throw Error(r(318));if(m=s.memoizedState,m=m!==null?m.dehydrated:null,!m)throw Error(r(317));m[mt]=s}else Ei(),(s.flags&128)===0&&(s.memoizedState=null),s.flags|=4;Fe(s),m=!1}else m=Bl(),t!==null&&t.memoizedState!==null&&(t.memoizedState.hydrationErrors=m),m=!0;if(!m)return s.flags&256?(qt(s),s):(qt(s),null)}return qt(s),(s.flags&128)!==0?(s.lanes=o,s):(o=u!==null,t=t!==null&&t.memoizedState!==null,o&&(u=s.child,m=null,u.alternate!==null&&u.alternate.memoizedState!==null&&u.alternate.memoizedState.cachePool!==null&&(m=u.alternate.memoizedState.cachePool.pool),v=null,u.memoizedState!==null&&u.memoizedState.cachePool!==null&&(v=u.memoizedState.cachePool.pool),v!==m&&(u.flags|=2048)),o!==t&&o&&(s.child.flags|=8192),Yo(s,s.updateQueue),Fe(s),null);case 4:return je(),t===null&&Xu(s.stateNode.containerInfo),Fe(s),null;case 10:return Sn(s.type),Fe(s),null;case 19:if(H(nt),u=s.memoizedState,u===null)return Fe(s),null;if(m=(s.flags&128)!==0,v=u.rendering,v===null)if(m)Cr(u,!1);else{if(We!==0||t!==null&&(t.flags&128)!==0)for(t=s.child;t!==null;){if(v=Oo(t),v!==null){for(s.flags|=128,Cr(u,!1),t=v.updateQueue,s.updateQueue=t,Yo(s,t),s.subtreeFlags=0,t=o,o=s.child;o!==null;)If(o,t),o=o.sibling;return Z(nt,nt.current&1|2),Ne&&xn(s,u.treeForkCount),s.child}t=t.sibling}u.tail!==null&&kt()>ea&&(s.flags|=128,m=!0,Cr(u,!1),s.lanes=4194304)}else{if(!m)if(t=Oo(v),t!==null){if(s.flags|=128,m=!0,t=t.updateQueue,s.updateQueue=t,Yo(s,t),Cr(u,!0),u.tail===null&&u.tailMode==="hidden"&&!v.alternate&&!Ne)return Fe(s),null}else 2*kt()-u.renderingStartTime>ea&&o!==536870912&&(s.flags|=128,m=!0,Cr(u,!1),s.lanes=4194304);u.isBackwards?(v.sibling=s.child,s.child=v):(t=u.last,t!==null?t.sibling=v:s.child=v,u.last=v)}return u.tail!==null?(t=u.tail,u.rendering=t,u.tail=t.sibling,u.renderingStartTime=kt(),t.sibling=null,o=nt.current,Z(nt,m?o&1|2:o&1),Ne&&xn(s,u.treeForkCount),t):(Fe(s),null);case 22:case 23:return qt(s),Zl(),u=s.memoizedState!==null,t!==null?t.memoizedState!==null!==u&&(s.flags|=8192):u&&(s.flags|=8192),u?(o&536870912)!==0&&(s.flags&128)===0&&(Fe(s),s.subtreeFlags&6&&(s.flags|=8192)):Fe(s),o=s.updateQueue,o!==null&&Yo(s,o.retryQueue),o=null,t!==null&&t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(o=t.memoizedState.cachePool.pool),u=null,s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(u=s.memoizedState.cachePool.pool),u!==o&&(s.flags|=2048),t!==null&&H(Ai),null;case 24:return o=null,t!==null&&(o=t.memoizedState.cache),s.memoizedState.cache!==o&&(s.flags|=2048),Sn(ot),Fe(s),null;case 25:return null;case 30:return null}throw Error(r(156,s.tag))}function Tx(t,s){switch(Ll(s),s.tag){case 1:return t=s.flags,t&65536?(s.flags=t&-65537|128,s):null;case 3:return Sn(ot),je(),t=s.flags,(t&65536)!==0&&(t&128)===0?(s.flags=t&-65537|128,s):null;case 26:case 27:case 5:return Ke(s),null;case 31:if(s.memoizedState!==null){if(qt(s),s.alternate===null)throw Error(r(340));Ei()}return t=s.flags,t&65536?(s.flags=t&-65537|128,s):null;case 13:if(qt(s),t=s.memoizedState,t!==null&&t.dehydrated!==null){if(s.alternate===null)throw Error(r(340));Ei()}return t=s.flags,t&65536?(s.flags=t&-65537|128,s):null;case 19:return H(nt),null;case 4:return je(),null;case 10:return Sn(s.type),null;case 22:case 23:return qt(s),Zl(),t!==null&&H(Ai),t=s.flags,t&65536?(s.flags=t&-65537|128,s):null;case 24:return Sn(ot),null;case 25:return null;default:return null}}function sp(t,s){switch(Ll(s),s.tag){case 3:Sn(ot),je();break;case 26:case 27:case 5:Ke(s);break;case 4:je();break;case 31:s.memoizedState!==null&&qt(s);break;case 13:qt(s);break;case 19:H(nt);break;case 10:Sn(s.type);break;case 22:case 23:qt(s),Zl(),t!==null&&H(Ai);break;case 24:Sn(ot)}}function Ar(t,s){try{var o=s.updateQueue,u=o!==null?o.lastEffect:null;if(u!==null){var m=u.next;o=m;do{if((o.tag&t)===t){u=void 0;var v=o.create,b=o.inst;u=v(),b.destroy=u}o=o.next}while(o!==m)}}catch(E){Pe(s,s.return,E)}}function Zn(t,s,o){try{var u=s.updateQueue,m=u!==null?u.lastEffect:null;if(m!==null){var v=m.next;u=v;do{if((u.tag&t)===t){var b=u.inst,E=b.destroy;if(E!==void 0){b.destroy=void 0,m=s;var A=o,O=E;try{O()}catch(j){Pe(m,A,j)}}}u=u.next}while(u!==v)}}catch(j){Pe(s,s.return,j)}}function rp(t){var s=t.updateQueue;if(s!==null){var o=t.stateNode;try{Yf(s,o)}catch(u){Pe(t,t.return,u)}}}function op(t,s,o){o.props=ki(t.type,t.memoizedProps),o.state=t.memoizedState;try{o.componentWillUnmount()}catch(u){Pe(t,s,u)}}function Nr(t,s){try{var o=t.ref;if(o!==null){switch(t.tag){case 26:case 27:case 5:var u=t.stateNode;break;case 30:u=t.stateNode;break;default:u=t.stateNode}typeof o=="function"?t.refCleanup=o(u):o.current=u}}catch(m){Pe(t,s,m)}}function pn(t,s){var o=t.ref,u=t.refCleanup;if(o!==null)if(typeof u=="function")try{u()}catch(m){Pe(t,s,m)}finally{t.refCleanup=null,t=t.alternate,t!=null&&(t.refCleanup=null)}else if(typeof o=="function")try{o(null)}catch(m){Pe(t,s,m)}else o.current=null}function ap(t){var s=t.type,o=t.memoizedProps,u=t.stateNode;try{e:switch(s){case"button":case"input":case"select":case"textarea":o.autoFocus&&u.focus();break e;case"img":o.src?u.src=o.src:o.srcSet&&(u.srcset=o.srcSet)}}catch(m){Pe(t,t.return,m)}}function Mu(t,s,o){try{var u=t.stateNode;$x(u,t.type,o,s),u[wt]=s}catch(m){Pe(t,t.return,m)}}function lp(t){return t.tag===5||t.tag===3||t.tag===26||t.tag===27&&ri(t.type)||t.tag===4}function Iu(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||lp(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.tag===27&&ri(t.type)||t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function ku(t,s,o){var u=t.tag;if(u===5||u===6)t=t.stateNode,s?(o.nodeType===9?o.body:o.nodeName==="HTML"?o.ownerDocument.body:o).insertBefore(t,s):(s=o.nodeType===9?o.body:o.nodeName==="HTML"?o.ownerDocument.body:o,s.appendChild(t),o=o._reactRootContainer,o!=null||s.onclick!==null||(s.onclick=yn));else if(u!==4&&(u===27&&ri(t.type)&&(o=t.stateNode,s=null),t=t.child,t!==null))for(ku(t,s,o),t=t.sibling;t!==null;)ku(t,s,o),t=t.sibling}function Qo(t,s,o){var u=t.tag;if(u===5||u===6)t=t.stateNode,s?o.insertBefore(t,s):o.appendChild(t);else if(u!==4&&(u===27&&ri(t.type)&&(o=t.stateNode),t=t.child,t!==null))for(Qo(t,s,o),t=t.sibling;t!==null;)Qo(t,s,o),t=t.sibling}function up(t){var s=t.stateNode,o=t.memoizedProps;try{for(var u=t.type,m=s.attributes;m.length;)s.removeAttributeNode(m[0]);_t(s,u,o),s[mt]=t,s[wt]=o}catch(v){Pe(t,t.return,v)}}var An=!1,ut=!1,Du=!1,cp=typeof WeakSet=="function"?WeakSet:Set,pt=null;function Ex(t,s){if(t=t.containerInfo,ec=ya,t=Sf(t),Cl(t)){if("selectionStart"in t)var o={start:t.selectionStart,end:t.selectionEnd};else e:{o=(o=t.ownerDocument)&&o.defaultView||window;var u=o.getSelection&&o.getSelection();if(u&&u.rangeCount!==0){o=u.anchorNode;var m=u.anchorOffset,v=u.focusNode;u=u.focusOffset;try{o.nodeType,v.nodeType}catch{o=null;break e}var b=0,E=-1,A=-1,O=0,j=0,J=t,L=null;t:for(;;){for(var V;J!==o||m!==0&&J.nodeType!==3||(E=b+m),J!==v||u!==0&&J.nodeType!==3||(A=b+u),J.nodeType===3&&(b+=J.nodeValue.length),(V=J.firstChild)!==null;)L=J,J=V;for(;;){if(J===t)break t;if(L===o&&++O===m&&(E=b),L===v&&++j===u&&(A=b),(V=J.nextSibling)!==null)break;J=L,L=J.parentNode}J=V}o=E===-1||A===-1?null:{start:E,end:A}}else o=null}o=o||{start:0,end:0}}else o=null;for(tc={focusedElem:t,selectionRange:o},ya=!1,pt=s;pt!==null;)if(s=pt,t=s.child,(s.subtreeFlags&1028)!==0&&t!==null)t.return=s,pt=t;else for(;pt!==null;){switch(s=pt,v=s.alternate,t=s.flags,s.tag){case 0:if((t&4)!==0&&(t=s.updateQueue,t=t!==null?t.events:null,t!==null))for(o=0;o<t.length;o++)m=t[o],m.ref.impl=m.nextImpl;break;case 11:case 15:break;case 1:if((t&1024)!==0&&v!==null){t=void 0,o=s,m=v.memoizedProps,v=v.memoizedState,u=o.stateNode;try{var te=ki(o.type,m);t=u.getSnapshotBeforeUpdate(te,v),u.__reactInternalSnapshotBeforeUpdate=t}catch(de){Pe(o,o.return,de)}}break;case 3:if((t&1024)!==0){if(t=s.stateNode.containerInfo,o=t.nodeType,o===9)sc(t);else if(o===1)switch(t.nodeName){case"HEAD":case"HTML":case"BODY":sc(t);break;default:t.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((t&1024)!==0)throw Error(r(163))}if(t=s.sibling,t!==null){t.return=s.return,pt=t;break}pt=s.return}}function dp(t,s,o){var u=o.flags;switch(o.tag){case 0:case 11:case 15:Rn(t,o),u&4&&Ar(5,o);break;case 1:if(Rn(t,o),u&4)if(t=o.stateNode,s===null)try{t.componentDidMount()}catch(b){Pe(o,o.return,b)}else{var m=ki(o.type,s.memoizedProps);s=s.memoizedState;try{t.componentDidUpdate(m,s,t.__reactInternalSnapshotBeforeUpdate)}catch(b){Pe(o,o.return,b)}}u&64&&rp(o),u&512&&Nr(o,o.return);break;case 3:if(Rn(t,o),u&64&&(t=o.updateQueue,t!==null)){if(s=null,o.child!==null)switch(o.child.tag){case 27:case 5:s=o.child.stateNode;break;case 1:s=o.child.stateNode}try{Yf(t,s)}catch(b){Pe(o,o.return,b)}}break;case 27:s===null&&u&4&&up(o);case 26:case 5:Rn(t,o),s===null&&u&4&&ap(o),u&512&&Nr(o,o.return);break;case 12:Rn(t,o);break;case 31:Rn(t,o),u&4&&pp(t,o);break;case 13:Rn(t,o),u&4&&mp(t,o),u&64&&(t=o.memoizedState,t!==null&&(t=t.dehydrated,t!==null&&(o=Dx.bind(null,o),Wx(t,o))));break;case 22:if(u=o.memoizedState!==null||An,!u){s=s!==null&&s.memoizedState!==null||ut,m=An;var v=ut;An=u,(ut=s)&&!v?Mn(t,o,(o.subtreeFlags&8772)!==0):Rn(t,o),An=m,ut=v}break;case 30:break;default:Rn(t,o)}}function fp(t){var s=t.alternate;s!==null&&(t.alternate=null,fp(s)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(s=t.stateNode,s!==null&&ul(s)),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}var Ye=null,At=!1;function Nn(t,s,o){for(o=o.child;o!==null;)hp(t,s,o),o=o.sibling}function hp(t,s,o){if(Dt&&typeof Dt.onCommitFiberUnmount=="function")try{Dt.onCommitFiberUnmount(Zs,o)}catch{}switch(o.tag){case 26:ut||pn(o,s),Nn(t,s,o),o.memoizedState?o.memoizedState.count--:o.stateNode&&(o=o.stateNode,o.parentNode.removeChild(o));break;case 27:ut||pn(o,s);var u=Ye,m=At;ri(o.type)&&(Ye=o.stateNode,At=!1),Nn(t,s,o),Lr(o.stateNode),Ye=u,At=m;break;case 5:ut||pn(o,s);case 6:if(u=Ye,m=At,Ye=null,Nn(t,s,o),Ye=u,At=m,Ye!==null)if(At)try{(Ye.nodeType===9?Ye.body:Ye.nodeName==="HTML"?Ye.ownerDocument.body:Ye).removeChild(o.stateNode)}catch(v){Pe(o,s,v)}else try{Ye.removeChild(o.stateNode)}catch(v){Pe(o,s,v)}break;case 18:Ye!==null&&(At?(t=Ye,rm(t.nodeType===9?t.body:t.nodeName==="HTML"?t.ownerDocument.body:t,o.stateNode),Ns(t)):rm(Ye,o.stateNode));break;case 4:u=Ye,m=At,Ye=o.stateNode.containerInfo,At=!0,Nn(t,s,o),Ye=u,At=m;break;case 0:case 11:case 14:case 15:Zn(2,o,s),ut||Zn(4,o,s),Nn(t,s,o);break;case 1:ut||(pn(o,s),u=o.stateNode,typeof u.componentWillUnmount=="function"&&op(o,s,u)),Nn(t,s,o);break;case 21:Nn(t,s,o);break;case 22:ut=(u=ut)||o.memoizedState!==null,Nn(t,s,o),ut=u;break;default:Nn(t,s,o)}}function pp(t,s){if(s.memoizedState===null&&(t=s.alternate,t!==null&&(t=t.memoizedState,t!==null))){t=t.dehydrated;try{Ns(t)}catch(o){Pe(s,s.return,o)}}}function mp(t,s){if(s.memoizedState===null&&(t=s.alternate,t!==null&&(t=t.memoizedState,t!==null&&(t=t.dehydrated,t!==null))))try{Ns(t)}catch(o){Pe(s,s.return,o)}}function wx(t){switch(t.tag){case 31:case 13:case 19:var s=t.stateNode;return s===null&&(s=t.stateNode=new cp),s;case 22:return t=t.stateNode,s=t._retryCache,s===null&&(s=t._retryCache=new cp),s;default:throw Error(r(435,t.tag))}}function Xo(t,s){var o=wx(t);s.forEach(function(u){if(!o.has(u)){o.add(u);var m=Ux.bind(null,t,u);u.then(m,m)}})}function Nt(t,s){var o=s.deletions;if(o!==null)for(var u=0;u<o.length;u++){var m=o[u],v=t,b=s,E=b;e:for(;E!==null;){switch(E.tag){case 27:if(ri(E.type)){Ye=E.stateNode,At=!1;break e}break;case 5:Ye=E.stateNode,At=!1;break e;case 3:case 4:Ye=E.stateNode.containerInfo,At=!0;break e}E=E.return}if(Ye===null)throw Error(r(160));hp(v,b,m),Ye=null,At=!1,v=m.alternate,v!==null&&(v.return=null),m.return=null}if(s.subtreeFlags&13886)for(s=s.child;s!==null;)gp(s,t),s=s.sibling}var rn=null;function gp(t,s){var o=t.alternate,u=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:Nt(s,t),Rt(t),u&4&&(Zn(3,t,t.return),Ar(3,t),Zn(5,t,t.return));break;case 1:Nt(s,t),Rt(t),u&512&&(ut||o===null||pn(o,o.return)),u&64&&An&&(t=t.updateQueue,t!==null&&(u=t.callbacks,u!==null&&(o=t.shared.hiddenCallbacks,t.shared.hiddenCallbacks=o===null?u:o.concat(u))));break;case 26:var m=rn;if(Nt(s,t),Rt(t),u&512&&(ut||o===null||pn(o,o.return)),u&4){var v=o!==null?o.memoizedState:null;if(u=t.memoizedState,o===null)if(u===null)if(t.stateNode===null){e:{u=t.type,o=t.memoizedProps,m=m.ownerDocument||m;t:switch(u){case"title":v=m.getElementsByTagName("title")[0],(!v||v[tr]||v[mt]||v.namespaceURI==="http://www.w3.org/2000/svg"||v.hasAttribute("itemprop"))&&(v=m.createElement(u),m.head.insertBefore(v,m.querySelector("head > title"))),_t(v,u,o),v[mt]=t,ht(v),u=v;break e;case"link":var b=gm("link","href",m).get(u+(o.href||""));if(b){for(var E=0;E<b.length;E++)if(v=b[E],v.getAttribute("href")===(o.href==null||o.href===""?null:o.href)&&v.getAttribute("rel")===(o.rel==null?null:o.rel)&&v.getAttribute("title")===(o.title==null?null:o.title)&&v.getAttribute("crossorigin")===(o.crossOrigin==null?null:o.crossOrigin)){b.splice(E,1);break t}}v=m.createElement(u),_t(v,u,o),m.head.appendChild(v);break;case"meta":if(b=gm("meta","content",m).get(u+(o.content||""))){for(E=0;E<b.length;E++)if(v=b[E],v.getAttribute("content")===(o.content==null?null:""+o.content)&&v.getAttribute("name")===(o.name==null?null:o.name)&&v.getAttribute("property")===(o.property==null?null:o.property)&&v.getAttribute("http-equiv")===(o.httpEquiv==null?null:o.httpEquiv)&&v.getAttribute("charset")===(o.charSet==null?null:o.charSet)){b.splice(E,1);break t}}v=m.createElement(u),_t(v,u,o),m.head.appendChild(v);break;default:throw Error(r(468,u))}v[mt]=t,ht(v),u=v}t.stateNode=u}else ym(m,t.type,t.stateNode);else t.stateNode=mm(m,u,t.memoizedProps);else v!==u?(v===null?o.stateNode!==null&&(o=o.stateNode,o.parentNode.removeChild(o)):v.count--,u===null?ym(m,t.type,t.stateNode):mm(m,u,t.memoizedProps)):u===null&&t.stateNode!==null&&Mu(t,t.memoizedProps,o.memoizedProps)}break;case 27:Nt(s,t),Rt(t),u&512&&(ut||o===null||pn(o,o.return)),o!==null&&u&4&&Mu(t,t.memoizedProps,o.memoizedProps);break;case 5:if(Nt(s,t),Rt(t),u&512&&(ut||o===null||pn(o,o.return)),t.flags&32){m=t.stateNode;try{Xi(m,"")}catch(te){Pe(t,t.return,te)}}u&4&&t.stateNode!=null&&(m=t.memoizedProps,Mu(t,m,o!==null?o.memoizedProps:m)),u&1024&&(Du=!0);break;case 6:if(Nt(s,t),Rt(t),u&4){if(t.stateNode===null)throw Error(r(162));u=t.memoizedProps,o=t.stateNode;try{o.nodeValue=u}catch(te){Pe(t,t.return,te)}}break;case 3:if(ha=null,m=rn,rn=da(s.containerInfo),Nt(s,t),rn=m,Rt(t),u&4&&o!==null&&o.memoizedState.isDehydrated)try{Ns(s.containerInfo)}catch(te){Pe(t,t.return,te)}Du&&(Du=!1,yp(t));break;case 4:u=rn,rn=da(t.stateNode.containerInfo),Nt(s,t),Rt(t),rn=u;break;case 12:Nt(s,t),Rt(t);break;case 31:Nt(s,t),Rt(t),u&4&&(u=t.updateQueue,u!==null&&(t.updateQueue=null,Xo(t,u)));break;case 13:Nt(s,t),Rt(t),t.child.flags&8192&&t.memoizedState!==null!=(o!==null&&o.memoizedState!==null)&&(Wo=kt()),u&4&&(u=t.updateQueue,u!==null&&(t.updateQueue=null,Xo(t,u)));break;case 22:m=t.memoizedState!==null;var A=o!==null&&o.memoizedState!==null,O=An,j=ut;if(An=O||m,ut=j||A,Nt(s,t),ut=j,An=O,Rt(t),u&8192)e:for(s=t.stateNode,s._visibility=m?s._visibility&-2:s._visibility|1,m&&(o===null||A||An||ut||Di(t)),o=null,s=t;;){if(s.tag===5||s.tag===26){if(o===null){A=o=s;try{if(v=A.stateNode,m)b=v.style,typeof b.setProperty=="function"?b.setProperty("display","none","important"):b.display="none";else{E=A.stateNode;var J=A.memoizedProps.style,L=J!=null&&J.hasOwnProperty("display")?J.display:null;E.style.display=L==null||typeof L=="boolean"?"":(""+L).trim()}}catch(te){Pe(A,A.return,te)}}}else if(s.tag===6){if(o===null){A=s;try{A.stateNode.nodeValue=m?"":A.memoizedProps}catch(te){Pe(A,A.return,te)}}}else if(s.tag===18){if(o===null){A=s;try{var V=A.stateNode;m?om(V,!0):om(A.stateNode,!1)}catch(te){Pe(A,A.return,te)}}}else if((s.tag!==22&&s.tag!==23||s.memoizedState===null||s===t)&&s.child!==null){s.child.return=s,s=s.child;continue}if(s===t)break e;for(;s.sibling===null;){if(s.return===null||s.return===t)break e;o===s&&(o=null),s=s.return}o===s&&(o=null),s.sibling.return=s.return,s=s.sibling}u&4&&(u=t.updateQueue,u!==null&&(o=u.retryQueue,o!==null&&(u.retryQueue=null,Xo(t,o))));break;case 19:Nt(s,t),Rt(t),u&4&&(u=t.updateQueue,u!==null&&(t.updateQueue=null,Xo(t,u)));break;case 30:break;case 21:break;default:Nt(s,t),Rt(t)}}function Rt(t){var s=t.flags;if(s&2){try{for(var o,u=t.return;u!==null;){if(lp(u)){o=u;break}u=u.return}if(o==null)throw Error(r(160));switch(o.tag){case 27:var m=o.stateNode,v=Iu(t);Qo(t,v,m);break;case 5:var b=o.stateNode;o.flags&32&&(Xi(b,""),o.flags&=-33);var E=Iu(t);Qo(t,E,b);break;case 3:case 4:var A=o.stateNode.containerInfo,O=Iu(t);ku(t,O,A);break;default:throw Error(r(161))}}catch(j){Pe(t,t.return,j)}t.flags&=-3}s&4096&&(t.flags&=-4097)}function yp(t){if(t.subtreeFlags&1024)for(t=t.child;t!==null;){var s=t;yp(s),s.tag===5&&s.flags&1024&&s.stateNode.reset(),t=t.sibling}}function Rn(t,s){if(s.subtreeFlags&8772)for(s=s.child;s!==null;)dp(t,s.alternate,s),s=s.sibling}function Di(t){for(t=t.child;t!==null;){var s=t;switch(s.tag){case 0:case 11:case 14:case 15:Zn(4,s,s.return),Di(s);break;case 1:pn(s,s.return);var o=s.stateNode;typeof o.componentWillUnmount=="function"&&op(s,s.return,o),Di(s);break;case 27:Lr(s.stateNode);case 26:case 5:pn(s,s.return),Di(s);break;case 22:s.memoizedState===null&&Di(s);break;case 30:Di(s);break;default:Di(s)}t=t.sibling}}function Mn(t,s,o){for(o=o&&(s.subtreeFlags&8772)!==0,s=s.child;s!==null;){var u=s.alternate,m=t,v=s,b=v.flags;switch(v.tag){case 0:case 11:case 15:Mn(m,v,o),Ar(4,v);break;case 1:if(Mn(m,v,o),u=v,m=u.stateNode,typeof m.componentDidMount=="function")try{m.componentDidMount()}catch(O){Pe(u,u.return,O)}if(u=v,m=u.updateQueue,m!==null){var E=u.stateNode;try{var A=m.shared.hiddenCallbacks;if(A!==null)for(m.shared.hiddenCallbacks=null,m=0;m<A.length;m++)Kf(A[m],E)}catch(O){Pe(u,u.return,O)}}o&&b&64&&rp(v),Nr(v,v.return);break;case 27:up(v);case 26:case 5:Mn(m,v,o),o&&u===null&&b&4&&ap(v),Nr(v,v.return);break;case 12:Mn(m,v,o);break;case 31:Mn(m,v,o),o&&b&4&&pp(m,v);break;case 13:Mn(m,v,o),o&&b&4&&mp(m,v);break;case 22:v.memoizedState===null&&Mn(m,v,o),Nr(v,v.return);break;case 30:break;default:Mn(m,v,o)}s=s.sibling}}function Uu(t,s){var o=null;t!==null&&t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(o=t.memoizedState.cachePool.pool),t=null,s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(t=s.memoizedState.cachePool.pool),t!==o&&(t!=null&&t.refCount++,o!=null&&pr(o))}function Pu(t,s){t=null,s.alternate!==null&&(t=s.alternate.memoizedState.cache),s=s.memoizedState.cache,s!==t&&(s.refCount++,t!=null&&pr(t))}function on(t,s,o,u){if(s.subtreeFlags&10256)for(s=s.child;s!==null;)vp(t,s,o,u),s=s.sibling}function vp(t,s,o,u){var m=s.flags;switch(s.tag){case 0:case 11:case 15:on(t,s,o,u),m&2048&&Ar(9,s);break;case 1:on(t,s,o,u);break;case 3:on(t,s,o,u),m&2048&&(t=null,s.alternate!==null&&(t=s.alternate.memoizedState.cache),s=s.memoizedState.cache,s!==t&&(s.refCount++,t!=null&&pr(t)));break;case 12:if(m&2048){on(t,s,o,u),t=s.stateNode;try{var v=s.memoizedProps,b=v.id,E=v.onPostCommit;typeof E=="function"&&E(b,s.alternate===null?"mount":"update",t.passiveEffectDuration,-0)}catch(A){Pe(s,s.return,A)}}else on(t,s,o,u);break;case 31:on(t,s,o,u);break;case 13:on(t,s,o,u);break;case 23:break;case 22:v=s.stateNode,b=s.alternate,s.memoizedState!==null?v._visibility&2?on(t,s,o,u):Rr(t,s):v._visibility&2?on(t,s,o,u):(v._visibility|=2,ys(t,s,o,u,(s.subtreeFlags&10256)!==0||!1)),m&2048&&Uu(b,s);break;case 24:on(t,s,o,u),m&2048&&Pu(s.alternate,s);break;default:on(t,s,o,u)}}function ys(t,s,o,u,m){for(m=m&&((s.subtreeFlags&10256)!==0||!1),s=s.child;s!==null;){var v=t,b=s,E=o,A=u,O=b.flags;switch(b.tag){case 0:case 11:case 15:ys(v,b,E,A,m),Ar(8,b);break;case 23:break;case 22:var j=b.stateNode;b.memoizedState!==null?j._visibility&2?ys(v,b,E,A,m):Rr(v,b):(j._visibility|=2,ys(v,b,E,A,m)),m&&O&2048&&Uu(b.alternate,b);break;case 24:ys(v,b,E,A,m),m&&O&2048&&Pu(b.alternate,b);break;default:ys(v,b,E,A,m)}s=s.sibling}}function Rr(t,s){if(s.subtreeFlags&10256)for(s=s.child;s!==null;){var o=t,u=s,m=u.flags;switch(u.tag){case 22:Rr(o,u),m&2048&&Uu(u.alternate,u);break;case 24:Rr(o,u),m&2048&&Pu(u.alternate,u);break;default:Rr(o,u)}s=s.sibling}}var Mr=8192;function vs(t,s,o){if(t.subtreeFlags&Mr)for(t=t.child;t!==null;)_p(t,s,o),t=t.sibling}function _p(t,s,o){switch(t.tag){case 26:vs(t,s,o),t.flags&Mr&&t.memoizedState!==null&&db(o,rn,t.memoizedState,t.memoizedProps);break;case 5:vs(t,s,o);break;case 3:case 4:var u=rn;rn=da(t.stateNode.containerInfo),vs(t,s,o),rn=u;break;case 22:t.memoizedState===null&&(u=t.alternate,u!==null&&u.memoizedState!==null?(u=Mr,Mr=16777216,vs(t,s,o),Mr=u):vs(t,s,o));break;default:vs(t,s,o)}}function xp(t){var s=t.alternate;if(s!==null&&(t=s.child,t!==null)){s.child=null;do s=t.sibling,t.sibling=null,t=s;while(t!==null)}}function Ir(t){var s=t.deletions;if((t.flags&16)!==0){if(s!==null)for(var o=0;o<s.length;o++){var u=s[o];pt=u,Sp(u,t)}xp(t)}if(t.subtreeFlags&10256)for(t=t.child;t!==null;)bp(t),t=t.sibling}function bp(t){switch(t.tag){case 0:case 11:case 15:Ir(t),t.flags&2048&&Zn(9,t,t.return);break;case 3:Ir(t);break;case 12:Ir(t);break;case 22:var s=t.stateNode;t.memoizedState!==null&&s._visibility&2&&(t.return===null||t.return.tag!==13)?(s._visibility&=-3,Zo(t)):Ir(t);break;default:Ir(t)}}function Zo(t){var s=t.deletions;if((t.flags&16)!==0){if(s!==null)for(var o=0;o<s.length;o++){var u=s[o];pt=u,Sp(u,t)}xp(t)}for(t=t.child;t!==null;){switch(s=t,s.tag){case 0:case 11:case 15:Zn(8,s,s.return),Zo(s);break;case 22:o=s.stateNode,o._visibility&2&&(o._visibility&=-3,Zo(s));break;default:Zo(s)}t=t.sibling}}function Sp(t,s){for(;pt!==null;){var o=pt;switch(o.tag){case 0:case 11:case 15:Zn(8,o,s);break;case 23:case 22:if(o.memoizedState!==null&&o.memoizedState.cachePool!==null){var u=o.memoizedState.cachePool.pool;u!=null&&u.refCount++}break;case 24:pr(o.memoizedState.cache)}if(u=o.child,u!==null)u.return=o,pt=u;else e:for(o=t;pt!==null;){u=pt;var m=u.sibling,v=u.return;if(fp(u),u===o){pt=null;break e}if(m!==null){m.return=v,pt=m;break e}pt=v}}}var Cx={getCacheForType:function(t){var s=yt(ot),o=s.data.get(t);return o===void 0&&(o=t(),s.data.set(t,o)),o},cacheSignal:function(){return yt(ot).controller.signal}},Ax=typeof WeakMap=="function"?WeakMap:Map,ke=0,Be=null,Se=null,we=0,Ue=0,Bt=null,Wn=!1,_s=!1,Ou=!1,In=0,We=0,ei=0,Ui=0,Lu=0,Gt=0,xs=0,kr=null,Mt=null,qu=!1,Wo=0,Tp=0,ea=1/0,ta=null,ti=null,dt=0,ni=null,bs=null,kn=0,Bu=0,Gu=null,Ep=null,Dr=0,Vu=null;function Vt(){return(ke&2)!==0&&we!==0?we&-we:q.T!==null?Ju():Bd()}function wp(){if(Gt===0)if((we&536870912)===0||Ne){var t=lo;lo<<=1,(lo&3932160)===0&&(lo=262144),Gt=t}else Gt=536870912;return t=Lt.current,t!==null&&(t.flags|=32),Gt}function It(t,s,o){(t===Be&&(Ue===2||Ue===9)||t.cancelPendingCommit!==null)&&(Ss(t,0),ii(t,we,Gt,!1)),er(t,o),((ke&2)===0||t!==Be)&&(t===Be&&((ke&2)===0&&(Ui|=o),We===4&&ii(t,we,Gt,!1)),mn(t))}function Cp(t,s,o){if((ke&6)!==0)throw Error(r(327));var u=!o&&(s&127)===0&&(s&t.expiredLanes)===0||Ws(t,s),m=u?Mx(t,s):ju(t,s,!0),v=u;do{if(m===0){_s&&!u&&ii(t,s,0,!1);break}else{if(o=t.current.alternate,v&&!Nx(o)){m=ju(t,s,!1),v=!1;continue}if(m===2){if(v=s,t.errorRecoveryDisabledLanes&v)var b=0;else b=t.pendingLanes&-536870913,b=b!==0?b:b&536870912?536870912:0;if(b!==0){s=b;e:{var E=t;m=kr;var A=E.current.memoizedState.isDehydrated;if(A&&(Ss(E,b).flags|=256),b=ju(E,b,!1),b!==2){if(Ou&&!A){E.errorRecoveryDisabledLanes|=v,Ui|=v,m=4;break e}v=Mt,Mt=m,v!==null&&(Mt===null?Mt=v:Mt.push.apply(Mt,v))}m=b}if(v=!1,m!==2)continue}}if(m===1){Ss(t,0),ii(t,s,0,!0);break}e:{switch(u=t,v=m,v){case 0:case 1:throw Error(r(345));case 4:if((s&4194048)!==s)break;case 6:ii(u,s,Gt,!Wn);break e;case 2:Mt=null;break;case 3:case 5:break;default:throw Error(r(329))}if((s&62914560)===s&&(m=Wo+300-kt(),10<m)){if(ii(u,s,Gt,!Wn),co(u,0,!0)!==0)break e;kn=s,u.timeoutHandle=im(Ap.bind(null,u,o,Mt,ta,qu,s,Gt,Ui,xs,Wn,v,"Throttled",-0,0),m);break e}Ap(u,o,Mt,ta,qu,s,Gt,Ui,xs,Wn,v,null,-0,0)}}break}while(!0);mn(t)}function Ap(t,s,o,u,m,v,b,E,A,O,j,J,L,V){if(t.timeoutHandle=-1,J=s.subtreeFlags,J&8192||(J&16785408)===16785408){J={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:yn},_p(s,v,J);var te=(v&62914560)===v?Wo-kt():(v&4194048)===v?Tp-kt():0;if(te=fb(J,te),te!==null){kn=v,t.cancelPendingCommit=te(Pp.bind(null,t,s,v,o,u,m,b,E,A,j,J,null,L,V)),ii(t,v,b,!O);return}}Pp(t,s,v,o,u,m,b,E,A)}function Nx(t){for(var s=t;;){var o=s.tag;if((o===0||o===11||o===15)&&s.flags&16384&&(o=s.updateQueue,o!==null&&(o=o.stores,o!==null)))for(var u=0;u<o.length;u++){var m=o[u],v=m.getSnapshot;m=m.value;try{if(!Pt(v(),m))return!1}catch{return!1}}if(o=s.child,s.subtreeFlags&16384&&o!==null)o.return=s,s=o;else{if(s===t)break;for(;s.sibling===null;){if(s.return===null||s.return===t)return!0;s=s.return}s.sibling.return=s.return,s=s.sibling}}return!0}function ii(t,s,o,u){s&=~Lu,s&=~Ui,t.suspendedLanes|=s,t.pingedLanes&=~s,u&&(t.warmLanes|=s),u=t.expirationTimes;for(var m=s;0<m;){var v=31-Ut(m),b=1<<v;u[v]=-1,m&=~b}o!==0&&Od(t,o,s)}function na(){return(ke&6)===0?(Ur(0),!1):!0}function Hu(){if(Se!==null){if(Ue===0)var t=Se.return;else t=Se,bn=wi=null,su(t),fs=null,gr=0,t=Se;for(;t!==null;)sp(t.alternate,t),t=t.return;Se=null}}function Ss(t,s){var o=t.timeoutHandle;o!==-1&&(t.timeoutHandle=-1,Kx(o)),o=t.cancelPendingCommit,o!==null&&(t.cancelPendingCommit=null,o()),kn=0,Hu(),Be=t,Se=o=_n(t.current,null),we=s,Ue=0,Bt=null,Wn=!1,_s=Ws(t,s),Ou=!1,xs=Gt=Lu=Ui=ei=We=0,Mt=kr=null,qu=!1,(s&8)!==0&&(s|=s&32);var u=t.entangledLanes;if(u!==0)for(t=t.entanglements,u&=s;0<u;){var m=31-Ut(u),v=1<<m;s|=t[m],u&=~v}return In=s,To(),o}function Np(t,s){ye=null,q.H=Er,s===ds||s===Io?(s=zf(),Ue=3):s===Fl?(s=zf(),Ue=4):Ue=s===xu?8:s!==null&&typeof s=="object"&&typeof s.then=="function"?6:1,Bt=s,Se===null&&(We=1,$o(t,Yt(s,t.current)))}function Rp(){var t=Lt.current;return t===null?!0:(we&4194048)===we?Wt===null:(we&62914560)===we||(we&536870912)!==0?t===Wt:!1}function Mp(){var t=q.H;return q.H=Er,t===null?Er:t}function Ip(){var t=q.A;return q.A=Cx,t}function ia(){We=4,Wn||(we&4194048)!==we&&Lt.current!==null||(_s=!0),(ei&134217727)===0&&(Ui&134217727)===0||Be===null||ii(Be,we,Gt,!1)}function ju(t,s,o){var u=ke;ke|=2;var m=Mp(),v=Ip();(Be!==t||we!==s)&&(ta=null,Ss(t,s)),s=!1;var b=We;e:do try{if(Ue!==0&&Se!==null){var E=Se,A=Bt;switch(Ue){case 8:Hu(),b=6;break e;case 3:case 2:case 9:case 6:Lt.current===null&&(s=!0);var O=Ue;if(Ue=0,Bt=null,Ts(t,E,A,O),o&&_s){b=0;break e}break;default:O=Ue,Ue=0,Bt=null,Ts(t,E,A,O)}}Rx(),b=We;break}catch(j){Np(t,j)}while(!0);return s&&t.shellSuspendCounter++,bn=wi=null,ke=u,q.H=m,q.A=v,Se===null&&(Be=null,we=0,To()),b}function Rx(){for(;Se!==null;)kp(Se)}function Mx(t,s){var o=ke;ke|=2;var u=Mp(),m=Ip();Be!==t||we!==s?(ta=null,ea=kt()+500,Ss(t,s)):_s=Ws(t,s);e:do try{if(Ue!==0&&Se!==null){s=Se;var v=Bt;t:switch(Ue){case 1:Ue=0,Bt=null,Ts(t,s,v,1);break;case 2:case 9:if(Hf(v)){Ue=0,Bt=null,Dp(s);break}s=function(){Ue!==2&&Ue!==9||Be!==t||(Ue=7),mn(t)},v.then(s,s);break e;case 3:Ue=7;break e;case 4:Ue=5;break e;case 7:Hf(v)?(Ue=0,Bt=null,Dp(s)):(Ue=0,Bt=null,Ts(t,s,v,7));break;case 5:var b=null;switch(Se.tag){case 26:b=Se.memoizedState;case 5:case 27:var E=Se;if(b?vm(b):E.stateNode.complete){Ue=0,Bt=null;var A=E.sibling;if(A!==null)Se=A;else{var O=E.return;O!==null?(Se=O,sa(O)):Se=null}break t}}Ue=0,Bt=null,Ts(t,s,v,5);break;case 6:Ue=0,Bt=null,Ts(t,s,v,6);break;case 8:Hu(),We=6;break e;default:throw Error(r(462))}}Ix();break}catch(j){Np(t,j)}while(!0);return bn=wi=null,q.H=u,q.A=m,ke=o,Se!==null?0:(Be=null,we=0,To(),We)}function Ix(){for(;Se!==null&&!e_();)kp(Se)}function kp(t){var s=np(t.alternate,t,In);t.memoizedProps=t.pendingProps,s===null?sa(t):Se=s}function Dp(t){var s=t,o=s.alternate;switch(s.tag){case 15:case 0:s=Qh(o,s,s.pendingProps,s.type,void 0,we);break;case 11:s=Qh(o,s,s.pendingProps,s.type.render,s.ref,we);break;case 5:su(s);default:sp(o,s),s=Se=If(s,In),s=np(o,s,In)}t.memoizedProps=t.pendingProps,s===null?sa(t):Se=s}function Ts(t,s,o,u){bn=wi=null,su(s),fs=null,gr=0;var m=s.return;try{if(_x(t,m,s,o,we)){We=1,$o(t,Yt(o,t.current)),Se=null;return}}catch(v){if(m!==null)throw Se=m,v;We=1,$o(t,Yt(o,t.current)),Se=null;return}s.flags&32768?(Ne||u===1?t=!0:_s||(we&536870912)!==0?t=!1:(Wn=t=!0,(u===2||u===9||u===3||u===6)&&(u=Lt.current,u!==null&&u.tag===13&&(u.flags|=16384))),Up(s,t)):sa(s)}function sa(t){var s=t;do{if((s.flags&32768)!==0){Up(s,Wn);return}t=s.return;var o=Sx(s.alternate,s,In);if(o!==null){Se=o;return}if(s=s.sibling,s!==null){Se=s;return}Se=s=t}while(s!==null);We===0&&(We=5)}function Up(t,s){do{var o=Tx(t.alternate,t);if(o!==null){o.flags&=32767,Se=o;return}if(o=t.return,o!==null&&(o.flags|=32768,o.subtreeFlags=0,o.deletions=null),!s&&(t=t.sibling,t!==null)){Se=t;return}Se=t=o}while(t!==null);We=6,Se=null}function Pp(t,s,o,u,m,v,b,E,A){t.cancelPendingCommit=null;do ra();while(dt!==0);if((ke&6)!==0)throw Error(r(327));if(s!==null){if(s===t.current)throw Error(r(177));if(v=s.lanes|s.childLanes,v|=Il,c_(t,o,v,b,E,A),t===Be&&(Se=Be=null,we=0),bs=s,ni=t,kn=o,Bu=v,Gu=m,Ep=u,(s.subtreeFlags&10256)!==0||(s.flags&10256)!==0?(t.callbackNode=null,t.callbackPriority=0,Px(oo,function(){return Gp(),null})):(t.callbackNode=null,t.callbackPriority=0),u=(s.flags&13878)!==0,(s.subtreeFlags&13878)!==0||u){u=q.T,q.T=null,m=Q.p,Q.p=2,b=ke,ke|=4;try{Ex(t,s,o)}finally{ke=b,Q.p=m,q.T=u}}dt=1,Op(),Lp(),qp()}}function Op(){if(dt===1){dt=0;var t=ni,s=bs,o=(s.flags&13878)!==0;if((s.subtreeFlags&13878)!==0||o){o=q.T,q.T=null;var u=Q.p;Q.p=2;var m=ke;ke|=4;try{gp(s,t);var v=tc,b=Sf(t.containerInfo),E=v.focusedElem,A=v.selectionRange;if(b!==E&&E&&E.ownerDocument&&bf(E.ownerDocument.documentElement,E)){if(A!==null&&Cl(E)){var O=A.start,j=A.end;if(j===void 0&&(j=O),"selectionStart"in E)E.selectionStart=O,E.selectionEnd=Math.min(j,E.value.length);else{var J=E.ownerDocument||document,L=J&&J.defaultView||window;if(L.getSelection){var V=L.getSelection(),te=E.textContent.length,de=Math.min(A.start,te),qe=A.end===void 0?de:Math.min(A.end,te);!V.extend&&de>qe&&(b=qe,qe=de,de=b);var k=xf(E,de),R=xf(E,qe);if(k&&R&&(V.rangeCount!==1||V.anchorNode!==k.node||V.anchorOffset!==k.offset||V.focusNode!==R.node||V.focusOffset!==R.offset)){var P=J.createRange();P.setStart(k.node,k.offset),V.removeAllRanges(),de>qe?(V.addRange(P),V.extend(R.node,R.offset)):(P.setEnd(R.node,R.offset),V.addRange(P))}}}}for(J=[],V=E;V=V.parentNode;)V.nodeType===1&&J.push({element:V,left:V.scrollLeft,top:V.scrollTop});for(typeof E.focus=="function"&&E.focus(),E=0;E<J.length;E++){var F=J[E];F.element.scrollLeft=F.left,F.element.scrollTop=F.top}}ya=!!ec,tc=ec=null}finally{ke=m,Q.p=u,q.T=o}}t.current=s,dt=2}}function Lp(){if(dt===2){dt=0;var t=ni,s=bs,o=(s.flags&8772)!==0;if((s.subtreeFlags&8772)!==0||o){o=q.T,q.T=null;var u=Q.p;Q.p=2;var m=ke;ke|=4;try{dp(t,s.alternate,s)}finally{ke=m,Q.p=u,q.T=o}}dt=3}}function qp(){if(dt===4||dt===3){dt=0,t_();var t=ni,s=bs,o=kn,u=Ep;(s.subtreeFlags&10256)!==0||(s.flags&10256)!==0?dt=5:(dt=0,bs=ni=null,Bp(t,t.pendingLanes));var m=t.pendingLanes;if(m===0&&(ti=null),al(o),s=s.stateNode,Dt&&typeof Dt.onCommitFiberRoot=="function")try{Dt.onCommitFiberRoot(Zs,s,void 0,(s.current.flags&128)===128)}catch{}if(u!==null){s=q.T,m=Q.p,Q.p=2,q.T=null;try{for(var v=t.onRecoverableError,b=0;b<u.length;b++){var E=u[b];v(E.value,{componentStack:E.stack})}}finally{q.T=s,Q.p=m}}(kn&3)!==0&&ra(),mn(t),m=t.pendingLanes,(o&261930)!==0&&(m&42)!==0?t===Vu?Dr++:(Dr=0,Vu=t):Dr=0,Ur(0)}}function Bp(t,s){(t.pooledCacheLanes&=s)===0&&(s=t.pooledCache,s!=null&&(t.pooledCache=null,pr(s)))}function ra(){return Op(),Lp(),qp(),Gp()}function Gp(){if(dt!==5)return!1;var t=ni,s=Bu;Bu=0;var o=al(kn),u=q.T,m=Q.p;try{Q.p=32>o?32:o,q.T=null,o=Gu,Gu=null;var v=ni,b=kn;if(dt=0,bs=ni=null,kn=0,(ke&6)!==0)throw Error(r(331));var E=ke;if(ke|=4,bp(v.current),vp(v,v.current,b,o),ke=E,Ur(0,!1),Dt&&typeof Dt.onPostCommitFiberRoot=="function")try{Dt.onPostCommitFiberRoot(Zs,v)}catch{}return!0}finally{Q.p=m,q.T=u,Bp(t,s)}}function Vp(t,s,o){s=Yt(o,s),s=_u(t.stateNode,s,2),t=Yn(t,s,2),t!==null&&(er(t,2),mn(t))}function Pe(t,s,o){if(t.tag===3)Vp(t,t,o);else for(;s!==null;){if(s.tag===3){Vp(s,t,o);break}else if(s.tag===1){var u=s.stateNode;if(typeof s.type.getDerivedStateFromError=="function"||typeof u.componentDidCatch=="function"&&(ti===null||!ti.has(u))){t=Yt(o,t),o=Hh(2),u=Yn(s,o,2),u!==null&&(jh(o,u,s,t),er(u,2),mn(u));break}}s=s.return}}function zu(t,s,o){var u=t.pingCache;if(u===null){u=t.pingCache=new Ax;var m=new Set;u.set(s,m)}else m=u.get(s),m===void 0&&(m=new Set,u.set(s,m));m.has(o)||(Ou=!0,m.add(o),t=kx.bind(null,t,s,o),s.then(t,t))}function kx(t,s,o){var u=t.pingCache;u!==null&&u.delete(s),t.pingedLanes|=t.suspendedLanes&o,t.warmLanes&=~o,Be===t&&(we&o)===o&&(We===4||We===3&&(we&62914560)===we&&300>kt()-Wo?(ke&2)===0&&Ss(t,0):Lu|=o,xs===we&&(xs=0)),mn(t)}function Hp(t,s){s===0&&(s=Pd()),t=Si(t,s),t!==null&&(er(t,s),mn(t))}function Dx(t){var s=t.memoizedState,o=0;s!==null&&(o=s.retryLane),Hp(t,o)}function Ux(t,s){var o=0;switch(t.tag){case 31:case 13:var u=t.stateNode,m=t.memoizedState;m!==null&&(o=m.retryLane);break;case 19:u=t.stateNode;break;case 22:u=t.stateNode._retryCache;break;default:throw Error(r(314))}u!==null&&u.delete(s),Hp(t,o)}function Px(t,s){return il(t,s)}var oa=null,Es=null,$u=!1,aa=!1,Fu=!1,si=0;function mn(t){t!==Es&&t.next===null&&(Es===null?oa=Es=t:Es=Es.next=t),aa=!0,$u||($u=!0,Lx())}function Ur(t,s){if(!Fu&&aa){Fu=!0;do for(var o=!1,u=oa;u!==null;){if(t!==0){var m=u.pendingLanes;if(m===0)var v=0;else{var b=u.suspendedLanes,E=u.pingedLanes;v=(1<<31-Ut(42|t)+1)-1,v&=m&~(b&~E),v=v&201326741?v&201326741|1:v?v|2:0}v!==0&&(o=!0,Fp(u,v))}else v=we,v=co(u,u===Be?v:0,u.cancelPendingCommit!==null||u.timeoutHandle!==-1),(v&3)===0||Ws(u,v)||(o=!0,Fp(u,v));u=u.next}while(o);Fu=!1}}function Ox(){jp()}function jp(){aa=$u=!1;var t=0;si!==0&&Jx()&&(t=si);for(var s=kt(),o=null,u=oa;u!==null;){var m=u.next,v=zp(u,s);v===0?(u.next=null,o===null?oa=m:o.next=m,m===null&&(Es=o)):(o=u,(t!==0||(v&3)!==0)&&(aa=!0)),u=m}dt!==0&&dt!==5||Ur(t),si!==0&&(si=0)}function zp(t,s){for(var o=t.suspendedLanes,u=t.pingedLanes,m=t.expirationTimes,v=t.pendingLanes&-62914561;0<v;){var b=31-Ut(v),E=1<<b,A=m[b];A===-1?((E&o)===0||(E&u)!==0)&&(m[b]=u_(E,s)):A<=s&&(t.expiredLanes|=E),v&=~E}if(s=Be,o=we,o=co(t,t===s?o:0,t.cancelPendingCommit!==null||t.timeoutHandle!==-1),u=t.callbackNode,o===0||t===s&&(Ue===2||Ue===9)||t.cancelPendingCommit!==null)return u!==null&&u!==null&&sl(u),t.callbackNode=null,t.callbackPriority=0;if((o&3)===0||Ws(t,o)){if(s=o&-o,s===t.callbackPriority)return s;switch(u!==null&&sl(u),al(o)){case 2:case 8:o=Dd;break;case 32:o=oo;break;case 268435456:o=Ud;break;default:o=oo}return u=$p.bind(null,t),o=il(o,u),t.callbackPriority=s,t.callbackNode=o,s}return u!==null&&u!==null&&sl(u),t.callbackPriority=2,t.callbackNode=null,2}function $p(t,s){if(dt!==0&&dt!==5)return t.callbackNode=null,t.callbackPriority=0,null;var o=t.callbackNode;if(ra()&&t.callbackNode!==o)return null;var u=we;return u=co(t,t===Be?u:0,t.cancelPendingCommit!==null||t.timeoutHandle!==-1),u===0?null:(Cp(t,u,s),zp(t,kt()),t.callbackNode!=null&&t.callbackNode===o?$p.bind(null,t):null)}function Fp(t,s){if(ra())return null;Cp(t,s,!0)}function Lx(){Yx(function(){(ke&6)!==0?il(kd,Ox):jp()})}function Ju(){if(si===0){var t=us;t===0&&(t=ao,ao<<=1,(ao&261888)===0&&(ao=256)),si=t}return si}function Jp(t){return t==null||typeof t=="symbol"||typeof t=="boolean"?null:typeof t=="function"?t:mo(""+t)}function Kp(t,s){var o=s.ownerDocument.createElement("input");return o.name=s.name,o.value=s.value,t.id&&o.setAttribute("form",t.id),s.parentNode.insertBefore(o,s),t=new FormData(t),o.parentNode.removeChild(o),t}function qx(t,s,o,u,m){if(s==="submit"&&o&&o.stateNode===m){var v=Jp((m[wt]||null).action),b=u.submitter;b&&(s=(s=b[wt]||null)?Jp(s.formAction):b.getAttribute("formAction"),s!==null&&(v=s,b=null));var E=new _o("action","action",null,u,m);t.push({event:E,listeners:[{instance:null,listener:function(){if(u.defaultPrevented){if(si!==0){var A=b?Kp(m,b):new FormData(m);hu(o,{pending:!0,data:A,method:m.method,action:v},null,A)}}else typeof v=="function"&&(E.preventDefault(),A=b?Kp(m,b):new FormData(m),hu(o,{pending:!0,data:A,method:m.method,action:v},v,A))},currentTarget:m}]})}}for(var Ku=0;Ku<Ml.length;Ku++){var Yu=Ml[Ku],Bx=Yu.toLowerCase(),Gx=Yu[0].toUpperCase()+Yu.slice(1);sn(Bx,"on"+Gx)}sn(wf,"onAnimationEnd"),sn(Cf,"onAnimationIteration"),sn(Af,"onAnimationStart"),sn("dblclick","onDoubleClick"),sn("focusin","onFocus"),sn("focusout","onBlur"),sn(nx,"onTransitionRun"),sn(ix,"onTransitionStart"),sn(sx,"onTransitionCancel"),sn(Nf,"onTransitionEnd"),Yi("onMouseEnter",["mouseout","mouseover"]),Yi("onMouseLeave",["mouseout","mouseover"]),Yi("onPointerEnter",["pointerout","pointerover"]),Yi("onPointerLeave",["pointerout","pointerover"]),vi("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),vi("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),vi("onBeforeInput",["compositionend","keypress","textInput","paste"]),vi("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),vi("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),vi("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Pr="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Vx=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Pr));function Yp(t,s){s=(s&4)!==0;for(var o=0;o<t.length;o++){var u=t[o],m=u.event;u=u.listeners;e:{var v=void 0;if(s)for(var b=u.length-1;0<=b;b--){var E=u[b],A=E.instance,O=E.currentTarget;if(E=E.listener,A!==v&&m.isPropagationStopped())break e;v=E,m.currentTarget=O;try{v(m)}catch(j){So(j)}m.currentTarget=null,v=A}else for(b=0;b<u.length;b++){if(E=u[b],A=E.instance,O=E.currentTarget,E=E.listener,A!==v&&m.isPropagationStopped())break e;v=E,m.currentTarget=O;try{v(m)}catch(j){So(j)}m.currentTarget=null,v=A}}}}function Te(t,s){var o=s[ll];o===void 0&&(o=s[ll]=new Set);var u=t+"__bubble";o.has(u)||(Qp(s,t,2,!1),o.add(u))}function Qu(t,s,o){var u=0;s&&(u|=4),Qp(o,t,u,s)}var la="_reactListening"+Math.random().toString(36).slice(2);function Xu(t){if(!t[la]){t[la]=!0,Hd.forEach(function(o){o!=="selectionchange"&&(Vx.has(o)||Qu(o,!1,t),Qu(o,!0,t))});var s=t.nodeType===9?t:t.ownerDocument;s===null||s[la]||(s[la]=!0,Qu("selectionchange",!1,s))}}function Qp(t,s,o,u){switch(wm(s)){case 2:var m=mb;break;case 8:m=gb;break;default:m=fc}o=m.bind(null,s,o,t),m=void 0,!yl||s!=="touchstart"&&s!=="touchmove"&&s!=="wheel"||(m=!0),u?m!==void 0?t.addEventListener(s,o,{capture:!0,passive:m}):t.addEventListener(s,o,!0):m!==void 0?t.addEventListener(s,o,{passive:m}):t.addEventListener(s,o,!1)}function Zu(t,s,o,u,m){var v=u;if((s&1)===0&&(s&2)===0&&u!==null)e:for(;;){if(u===null)return;var b=u.tag;if(b===3||b===4){var E=u.stateNode.containerInfo;if(E===m)break;if(b===4)for(b=u.return;b!==null;){var A=b.tag;if((A===3||A===4)&&b.stateNode.containerInfo===m)return;b=b.return}for(;E!==null;){if(b=Fi(E),b===null)return;if(A=b.tag,A===5||A===6||A===26||A===27){u=v=b;continue e}E=E.parentNode}}u=u.return}ef(function(){var O=v,j=ml(o),J=[];e:{var L=Rf.get(t);if(L!==void 0){var V=_o,te=t;switch(t){case"keypress":if(yo(o)===0)break e;case"keydown":case"keyup":V=U_;break;case"focusin":te="focus",V=bl;break;case"focusout":te="blur",V=bl;break;case"beforeblur":case"afterblur":V=bl;break;case"click":if(o.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":V=sf;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":V=S_;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":V=L_;break;case wf:case Cf:case Af:V=w_;break;case Nf:V=B_;break;case"scroll":case"scrollend":V=x_;break;case"wheel":V=V_;break;case"copy":case"cut":case"paste":V=A_;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":V=of;break;case"toggle":case"beforetoggle":V=j_}var de=(s&4)!==0,qe=!de&&(t==="scroll"||t==="scrollend"),k=de?L!==null?L+"Capture":null:L;de=[];for(var R=O,P;R!==null;){var F=R;if(P=F.stateNode,F=F.tag,F!==5&&F!==26&&F!==27||P===null||k===null||(F=ir(R,k),F!=null&&de.push(Or(R,F,P))),qe)break;R=R.return}0<de.length&&(L=new V(L,te,null,o,j),J.push({event:L,listeners:de}))}}if((s&7)===0){e:{if(L=t==="mouseover"||t==="pointerover",V=t==="mouseout"||t==="pointerout",L&&o!==pl&&(te=o.relatedTarget||o.fromElement)&&(Fi(te)||te[$i]))break e;if((V||L)&&(L=j.window===j?j:(L=j.ownerDocument)?L.defaultView||L.parentWindow:window,V?(te=o.relatedTarget||o.toElement,V=O,te=te?Fi(te):null,te!==null&&(qe=l(te),de=te.tag,te!==qe||de!==5&&de!==27&&de!==6)&&(te=null)):(V=null,te=O),V!==te)){if(de=sf,F="onMouseLeave",k="onMouseEnter",R="mouse",(t==="pointerout"||t==="pointerover")&&(de=of,F="onPointerLeave",k="onPointerEnter",R="pointer"),qe=V==null?L:nr(V),P=te==null?L:nr(te),L=new de(F,R+"leave",V,o,j),L.target=qe,L.relatedTarget=P,F=null,Fi(j)===O&&(de=new de(k,R+"enter",te,o,j),de.target=P,de.relatedTarget=qe,F=de),qe=F,V&&te)t:{for(de=Hx,k=V,R=te,P=0,F=k;F;F=de(F))P++;F=0;for(var ue=R;ue;ue=de(ue))F++;for(;0<P-F;)k=de(k),P--;for(;0<F-P;)R=de(R),F--;for(;P--;){if(k===R||R!==null&&k===R.alternate){de=k;break t}k=de(k),R=de(R)}de=null}else de=null;V!==null&&Xp(J,L,V,de,!1),te!==null&&qe!==null&&Xp(J,qe,te,de,!0)}}e:{if(L=O?nr(O):window,V=L.nodeName&&L.nodeName.toLowerCase(),V==="select"||V==="input"&&L.type==="file")var Re=pf;else if(ff(L))if(mf)Re=W_;else{Re=X_;var oe=Q_}else V=L.nodeName,!V||V.toLowerCase()!=="input"||L.type!=="checkbox"&&L.type!=="radio"?O&&hl(O.elementType)&&(Re=pf):Re=Z_;if(Re&&(Re=Re(t,O))){hf(J,Re,o,j);break e}oe&&oe(t,L,O),t==="focusout"&&O&&L.type==="number"&&O.memoizedProps.value!=null&&fl(L,"number",L.value)}switch(oe=O?nr(O):window,t){case"focusin":(ff(oe)||oe.contentEditable==="true")&&(ts=oe,Al=O,dr=null);break;case"focusout":dr=Al=ts=null;break;case"mousedown":Nl=!0;break;case"contextmenu":case"mouseup":case"dragend":Nl=!1,Tf(J,o,j);break;case"selectionchange":if(tx)break;case"keydown":case"keyup":Tf(J,o,j)}var xe;if(Tl)e:{switch(t){case"compositionstart":var Ce="onCompositionStart";break e;case"compositionend":Ce="onCompositionEnd";break e;case"compositionupdate":Ce="onCompositionUpdate";break e}Ce=void 0}else es?cf(t,o)&&(Ce="onCompositionEnd"):t==="keydown"&&o.keyCode===229&&(Ce="onCompositionStart");Ce&&(af&&o.locale!=="ko"&&(es||Ce!=="onCompositionStart"?Ce==="onCompositionEnd"&&es&&(xe=tf()):(Hn=j,vl="value"in Hn?Hn.value:Hn.textContent,es=!0)),oe=ua(O,Ce),0<oe.length&&(Ce=new rf(Ce,t,null,o,j),J.push({event:Ce,listeners:oe}),xe?Ce.data=xe:(xe=df(o),xe!==null&&(Ce.data=xe)))),(xe=$_?F_(t,o):J_(t,o))&&(Ce=ua(O,"onBeforeInput"),0<Ce.length&&(oe=new rf("onBeforeInput","beforeinput",null,o,j),J.push({event:oe,listeners:Ce}),oe.data=xe)),qx(J,t,O,o,j)}Yp(J,s)})}function Or(t,s,o){return{instance:t,listener:s,currentTarget:o}}function ua(t,s){for(var o=s+"Capture",u=[];t!==null;){var m=t,v=m.stateNode;if(m=m.tag,m!==5&&m!==26&&m!==27||v===null||(m=ir(t,o),m!=null&&u.unshift(Or(t,m,v)),m=ir(t,s),m!=null&&u.push(Or(t,m,v))),t.tag===3)return u;t=t.return}return[]}function Hx(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5&&t.tag!==27);return t||null}function Xp(t,s,o,u,m){for(var v=s._reactName,b=[];o!==null&&o!==u;){var E=o,A=E.alternate,O=E.stateNode;if(E=E.tag,A!==null&&A===u)break;E!==5&&E!==26&&E!==27||O===null||(A=O,m?(O=ir(o,v),O!=null&&b.unshift(Or(o,O,A))):m||(O=ir(o,v),O!=null&&b.push(Or(o,O,A)))),o=o.return}b.length!==0&&t.push({event:s,listeners:b})}var jx=/\r\n?/g,zx=/\u0000|\uFFFD/g;function Zp(t){return(typeof t=="string"?t:""+t).replace(jx,`
`).replace(zx,"")}function Wp(t,s){return s=Zp(s),Zp(t)===s}function Le(t,s,o,u,m,v){switch(o){case"children":typeof u=="string"?s==="body"||s==="textarea"&&u===""||Xi(t,u):(typeof u=="number"||typeof u=="bigint")&&s!=="body"&&Xi(t,""+u);break;case"className":ho(t,"class",u);break;case"tabIndex":ho(t,"tabindex",u);break;case"dir":case"role":case"viewBox":case"width":case"height":ho(t,o,u);break;case"style":Zd(t,u,v);break;case"data":if(s!=="object"){ho(t,"data",u);break}case"src":case"href":if(u===""&&(s!=="a"||o!=="href")){t.removeAttribute(o);break}if(u==null||typeof u=="function"||typeof u=="symbol"||typeof u=="boolean"){t.removeAttribute(o);break}u=mo(""+u),t.setAttribute(o,u);break;case"action":case"formAction":if(typeof u=="function"){t.setAttribute(o,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof v=="function"&&(o==="formAction"?(s!=="input"&&Le(t,s,"name",m.name,m,null),Le(t,s,"formEncType",m.formEncType,m,null),Le(t,s,"formMethod",m.formMethod,m,null),Le(t,s,"formTarget",m.formTarget,m,null)):(Le(t,s,"encType",m.encType,m,null),Le(t,s,"method",m.method,m,null),Le(t,s,"target",m.target,m,null)));if(u==null||typeof u=="symbol"||typeof u=="boolean"){t.removeAttribute(o);break}u=mo(""+u),t.setAttribute(o,u);break;case"onClick":u!=null&&(t.onclick=yn);break;case"onScroll":u!=null&&Te("scroll",t);break;case"onScrollEnd":u!=null&&Te("scrollend",t);break;case"dangerouslySetInnerHTML":if(u!=null){if(typeof u!="object"||!("__html"in u))throw Error(r(61));if(o=u.__html,o!=null){if(m.children!=null)throw Error(r(60));t.innerHTML=o}}break;case"multiple":t.multiple=u&&typeof u!="function"&&typeof u!="symbol";break;case"muted":t.muted=u&&typeof u!="function"&&typeof u!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(u==null||typeof u=="function"||typeof u=="boolean"||typeof u=="symbol"){t.removeAttribute("xlink:href");break}o=mo(""+u),t.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",o);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":u!=null&&typeof u!="function"&&typeof u!="symbol"?t.setAttribute(o,""+u):t.removeAttribute(o);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":u&&typeof u!="function"&&typeof u!="symbol"?t.setAttribute(o,""):t.removeAttribute(o);break;case"capture":case"download":u===!0?t.setAttribute(o,""):u!==!1&&u!=null&&typeof u!="function"&&typeof u!="symbol"?t.setAttribute(o,u):t.removeAttribute(o);break;case"cols":case"rows":case"size":case"span":u!=null&&typeof u!="function"&&typeof u!="symbol"&&!isNaN(u)&&1<=u?t.setAttribute(o,u):t.removeAttribute(o);break;case"rowSpan":case"start":u==null||typeof u=="function"||typeof u=="symbol"||isNaN(u)?t.removeAttribute(o):t.setAttribute(o,u);break;case"popover":Te("beforetoggle",t),Te("toggle",t),fo(t,"popover",u);break;case"xlinkActuate":gn(t,"http://www.w3.org/1999/xlink","xlink:actuate",u);break;case"xlinkArcrole":gn(t,"http://www.w3.org/1999/xlink","xlink:arcrole",u);break;case"xlinkRole":gn(t,"http://www.w3.org/1999/xlink","xlink:role",u);break;case"xlinkShow":gn(t,"http://www.w3.org/1999/xlink","xlink:show",u);break;case"xlinkTitle":gn(t,"http://www.w3.org/1999/xlink","xlink:title",u);break;case"xlinkType":gn(t,"http://www.w3.org/1999/xlink","xlink:type",u);break;case"xmlBase":gn(t,"http://www.w3.org/XML/1998/namespace","xml:base",u);break;case"xmlLang":gn(t,"http://www.w3.org/XML/1998/namespace","xml:lang",u);break;case"xmlSpace":gn(t,"http://www.w3.org/XML/1998/namespace","xml:space",u);break;case"is":fo(t,"is",u);break;case"innerText":case"textContent":break;default:(!(2<o.length)||o[0]!=="o"&&o[0]!=="O"||o[1]!=="n"&&o[1]!=="N")&&(o=v_.get(o)||o,fo(t,o,u))}}function Wu(t,s,o,u,m,v){switch(o){case"style":Zd(t,u,v);break;case"dangerouslySetInnerHTML":if(u!=null){if(typeof u!="object"||!("__html"in u))throw Error(r(61));if(o=u.__html,o!=null){if(m.children!=null)throw Error(r(60));t.innerHTML=o}}break;case"children":typeof u=="string"?Xi(t,u):(typeof u=="number"||typeof u=="bigint")&&Xi(t,""+u);break;case"onScroll":u!=null&&Te("scroll",t);break;case"onScrollEnd":u!=null&&Te("scrollend",t);break;case"onClick":u!=null&&(t.onclick=yn);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!jd.hasOwnProperty(o))e:{if(o[0]==="o"&&o[1]==="n"&&(m=o.endsWith("Capture"),s=o.slice(2,m?o.length-7:void 0),v=t[wt]||null,v=v!=null?v[o]:null,typeof v=="function"&&t.removeEventListener(s,v,m),typeof u=="function")){typeof v!="function"&&v!==null&&(o in t?t[o]=null:t.hasAttribute(o)&&t.removeAttribute(o)),t.addEventListener(s,u,m);break e}o in t?t[o]=u:u===!0?t.setAttribute(o,""):fo(t,o,u)}}}function _t(t,s,o){switch(s){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Te("error",t),Te("load",t);var u=!1,m=!1,v;for(v in o)if(o.hasOwnProperty(v)){var b=o[v];if(b!=null)switch(v){case"src":u=!0;break;case"srcSet":m=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(r(137,s));default:Le(t,s,v,b,o,null)}}m&&Le(t,s,"srcSet",o.srcSet,o,null),u&&Le(t,s,"src",o.src,o,null);return;case"input":Te("invalid",t);var E=v=b=m=null,A=null,O=null;for(u in o)if(o.hasOwnProperty(u)){var j=o[u];if(j!=null)switch(u){case"name":m=j;break;case"type":b=j;break;case"checked":A=j;break;case"defaultChecked":O=j;break;case"value":v=j;break;case"defaultValue":E=j;break;case"children":case"dangerouslySetInnerHTML":if(j!=null)throw Error(r(137,s));break;default:Le(t,s,u,j,o,null)}}Kd(t,v,E,A,O,b,m,!1);return;case"select":Te("invalid",t),u=b=v=null;for(m in o)if(o.hasOwnProperty(m)&&(E=o[m],E!=null))switch(m){case"value":v=E;break;case"defaultValue":b=E;break;case"multiple":u=E;default:Le(t,s,m,E,o,null)}s=v,o=b,t.multiple=!!u,s!=null?Qi(t,!!u,s,!1):o!=null&&Qi(t,!!u,o,!0);return;case"textarea":Te("invalid",t),v=m=u=null;for(b in o)if(o.hasOwnProperty(b)&&(E=o[b],E!=null))switch(b){case"value":u=E;break;case"defaultValue":m=E;break;case"children":v=E;break;case"dangerouslySetInnerHTML":if(E!=null)throw Error(r(91));break;default:Le(t,s,b,E,o,null)}Qd(t,u,m,v);return;case"option":for(A in o)if(o.hasOwnProperty(A)&&(u=o[A],u!=null))switch(A){case"selected":t.selected=u&&typeof u!="function"&&typeof u!="symbol";break;default:Le(t,s,A,u,o,null)}return;case"dialog":Te("beforetoggle",t),Te("toggle",t),Te("cancel",t),Te("close",t);break;case"iframe":case"object":Te("load",t);break;case"video":case"audio":for(u=0;u<Pr.length;u++)Te(Pr[u],t);break;case"image":Te("error",t),Te("load",t);break;case"details":Te("toggle",t);break;case"embed":case"source":case"link":Te("error",t),Te("load",t);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(O in o)if(o.hasOwnProperty(O)&&(u=o[O],u!=null))switch(O){case"children":case"dangerouslySetInnerHTML":throw Error(r(137,s));default:Le(t,s,O,u,o,null)}return;default:if(hl(s)){for(j in o)o.hasOwnProperty(j)&&(u=o[j],u!==void 0&&Wu(t,s,j,u,o,void 0));return}}for(E in o)o.hasOwnProperty(E)&&(u=o[E],u!=null&&Le(t,s,E,u,o,null))}function $x(t,s,o,u){switch(s){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var m=null,v=null,b=null,E=null,A=null,O=null,j=null;for(V in o){var J=o[V];if(o.hasOwnProperty(V)&&J!=null)switch(V){case"checked":break;case"value":break;case"defaultValue":A=J;default:u.hasOwnProperty(V)||Le(t,s,V,null,u,J)}}for(var L in u){var V=u[L];if(J=o[L],u.hasOwnProperty(L)&&(V!=null||J!=null))switch(L){case"type":v=V;break;case"name":m=V;break;case"checked":O=V;break;case"defaultChecked":j=V;break;case"value":b=V;break;case"defaultValue":E=V;break;case"children":case"dangerouslySetInnerHTML":if(V!=null)throw Error(r(137,s));break;default:V!==J&&Le(t,s,L,V,u,J)}}dl(t,b,E,A,O,j,v,m);return;case"select":V=b=E=L=null;for(v in o)if(A=o[v],o.hasOwnProperty(v)&&A!=null)switch(v){case"value":break;case"multiple":V=A;default:u.hasOwnProperty(v)||Le(t,s,v,null,u,A)}for(m in u)if(v=u[m],A=o[m],u.hasOwnProperty(m)&&(v!=null||A!=null))switch(m){case"value":L=v;break;case"defaultValue":E=v;break;case"multiple":b=v;default:v!==A&&Le(t,s,m,v,u,A)}s=E,o=b,u=V,L!=null?Qi(t,!!o,L,!1):!!u!=!!o&&(s!=null?Qi(t,!!o,s,!0):Qi(t,!!o,o?[]:"",!1));return;case"textarea":V=L=null;for(E in o)if(m=o[E],o.hasOwnProperty(E)&&m!=null&&!u.hasOwnProperty(E))switch(E){case"value":break;case"children":break;default:Le(t,s,E,null,u,m)}for(b in u)if(m=u[b],v=o[b],u.hasOwnProperty(b)&&(m!=null||v!=null))switch(b){case"value":L=m;break;case"defaultValue":V=m;break;case"children":break;case"dangerouslySetInnerHTML":if(m!=null)throw Error(r(91));break;default:m!==v&&Le(t,s,b,m,u,v)}Yd(t,L,V);return;case"option":for(var te in o)if(L=o[te],o.hasOwnProperty(te)&&L!=null&&!u.hasOwnProperty(te))switch(te){case"selected":t.selected=!1;break;default:Le(t,s,te,null,u,L)}for(A in u)if(L=u[A],V=o[A],u.hasOwnProperty(A)&&L!==V&&(L!=null||V!=null))switch(A){case"selected":t.selected=L&&typeof L!="function"&&typeof L!="symbol";break;default:Le(t,s,A,L,u,V)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var de in o)L=o[de],o.hasOwnProperty(de)&&L!=null&&!u.hasOwnProperty(de)&&Le(t,s,de,null,u,L);for(O in u)if(L=u[O],V=o[O],u.hasOwnProperty(O)&&L!==V&&(L!=null||V!=null))switch(O){case"children":case"dangerouslySetInnerHTML":if(L!=null)throw Error(r(137,s));break;default:Le(t,s,O,L,u,V)}return;default:if(hl(s)){for(var qe in o)L=o[qe],o.hasOwnProperty(qe)&&L!==void 0&&!u.hasOwnProperty(qe)&&Wu(t,s,qe,void 0,u,L);for(j in u)L=u[j],V=o[j],!u.hasOwnProperty(j)||L===V||L===void 0&&V===void 0||Wu(t,s,j,L,u,V);return}}for(var k in o)L=o[k],o.hasOwnProperty(k)&&L!=null&&!u.hasOwnProperty(k)&&Le(t,s,k,null,u,L);for(J in u)L=u[J],V=o[J],!u.hasOwnProperty(J)||L===V||L==null&&V==null||Le(t,s,J,L,u,V)}function em(t){switch(t){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function Fx(){if(typeof performance.getEntriesByType=="function"){for(var t=0,s=0,o=performance.getEntriesByType("resource"),u=0;u<o.length;u++){var m=o[u],v=m.transferSize,b=m.initiatorType,E=m.duration;if(v&&E&&em(b)){for(b=0,E=m.responseEnd,u+=1;u<o.length;u++){var A=o[u],O=A.startTime;if(O>E)break;var j=A.transferSize,J=A.initiatorType;j&&em(J)&&(A=A.responseEnd,b+=j*(A<E?1:(E-O)/(A-O)))}if(--u,s+=8*(v+b)/(m.duration/1e3),t++,10<t)break}}if(0<t)return s/t/1e6}return navigator.connection&&(t=navigator.connection.downlink,typeof t=="number")?t:5}var ec=null,tc=null;function ca(t){return t.nodeType===9?t:t.ownerDocument}function tm(t){switch(t){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function nm(t,s){if(t===0)switch(s){case"svg":return 1;case"math":return 2;default:return 0}return t===1&&s==="foreignObject"?0:t}function nc(t,s){return t==="textarea"||t==="noscript"||typeof s.children=="string"||typeof s.children=="number"||typeof s.children=="bigint"||typeof s.dangerouslySetInnerHTML=="object"&&s.dangerouslySetInnerHTML!==null&&s.dangerouslySetInnerHTML.__html!=null}var ic=null;function Jx(){var t=window.event;return t&&t.type==="popstate"?t===ic?!1:(ic=t,!0):(ic=null,!1)}var im=typeof setTimeout=="function"?setTimeout:void 0,Kx=typeof clearTimeout=="function"?clearTimeout:void 0,sm=typeof Promise=="function"?Promise:void 0,Yx=typeof queueMicrotask=="function"?queueMicrotask:typeof sm<"u"?function(t){return sm.resolve(null).then(t).catch(Qx)}:im;function Qx(t){setTimeout(function(){throw t})}function ri(t){return t==="head"}function rm(t,s){var o=s,u=0;do{var m=o.nextSibling;if(t.removeChild(o),m&&m.nodeType===8)if(o=m.data,o==="/$"||o==="/&"){if(u===0){t.removeChild(m),Ns(s);return}u--}else if(o==="$"||o==="$?"||o==="$~"||o==="$!"||o==="&")u++;else if(o==="html")Lr(t.ownerDocument.documentElement);else if(o==="head"){o=t.ownerDocument.head,Lr(o);for(var v=o.firstChild;v;){var b=v.nextSibling,E=v.nodeName;v[tr]||E==="SCRIPT"||E==="STYLE"||E==="LINK"&&v.rel.toLowerCase()==="stylesheet"||o.removeChild(v),v=b}}else o==="body"&&Lr(t.ownerDocument.body);o=m}while(o);Ns(s)}function om(t,s){var o=t;t=0;do{var u=o.nextSibling;if(o.nodeType===1?s?(o._stashedDisplay=o.style.display,o.style.display="none"):(o.style.display=o._stashedDisplay||"",o.getAttribute("style")===""&&o.removeAttribute("style")):o.nodeType===3&&(s?(o._stashedText=o.nodeValue,o.nodeValue=""):o.nodeValue=o._stashedText||""),u&&u.nodeType===8)if(o=u.data,o==="/$"){if(t===0)break;t--}else o!=="$"&&o!=="$?"&&o!=="$~"&&o!=="$!"||t++;o=u}while(o)}function sc(t){var s=t.firstChild;for(s&&s.nodeType===10&&(s=s.nextSibling);s;){var o=s;switch(s=s.nextSibling,o.nodeName){case"HTML":case"HEAD":case"BODY":sc(o),ul(o);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(o.rel.toLowerCase()==="stylesheet")continue}t.removeChild(o)}}function Xx(t,s,o,u){for(;t.nodeType===1;){var m=o;if(t.nodeName.toLowerCase()!==s.toLowerCase()){if(!u&&(t.nodeName!=="INPUT"||t.type!=="hidden"))break}else if(u){if(!t[tr])switch(s){case"meta":if(!t.hasAttribute("itemprop"))break;return t;case"link":if(v=t.getAttribute("rel"),v==="stylesheet"&&t.hasAttribute("data-precedence"))break;if(v!==m.rel||t.getAttribute("href")!==(m.href==null||m.href===""?null:m.href)||t.getAttribute("crossorigin")!==(m.crossOrigin==null?null:m.crossOrigin)||t.getAttribute("title")!==(m.title==null?null:m.title))break;return t;case"style":if(t.hasAttribute("data-precedence"))break;return t;case"script":if(v=t.getAttribute("src"),(v!==(m.src==null?null:m.src)||t.getAttribute("type")!==(m.type==null?null:m.type)||t.getAttribute("crossorigin")!==(m.crossOrigin==null?null:m.crossOrigin))&&v&&t.hasAttribute("async")&&!t.hasAttribute("itemprop"))break;return t;default:return t}}else if(s==="input"&&t.type==="hidden"){var v=m.name==null?null:""+m.name;if(m.type==="hidden"&&t.getAttribute("name")===v)return t}else return t;if(t=en(t.nextSibling),t===null)break}return null}function Zx(t,s,o){if(s==="")return null;for(;t.nodeType!==3;)if((t.nodeType!==1||t.nodeName!=="INPUT"||t.type!=="hidden")&&!o||(t=en(t.nextSibling),t===null))return null;return t}function am(t,s){for(;t.nodeType!==8;)if((t.nodeType!==1||t.nodeName!=="INPUT"||t.type!=="hidden")&&!s||(t=en(t.nextSibling),t===null))return null;return t}function rc(t){return t.data==="$?"||t.data==="$~"}function oc(t){return t.data==="$!"||t.data==="$?"&&t.ownerDocument.readyState!=="loading"}function Wx(t,s){var o=t.ownerDocument;if(t.data==="$~")t._reactRetry=s;else if(t.data!=="$?"||o.readyState!=="loading")s();else{var u=function(){s(),o.removeEventListener("DOMContentLoaded",u)};o.addEventListener("DOMContentLoaded",u),t._reactRetry=u}}function en(t){for(;t!=null;t=t.nextSibling){var s=t.nodeType;if(s===1||s===3)break;if(s===8){if(s=t.data,s==="$"||s==="$!"||s==="$?"||s==="$~"||s==="&"||s==="F!"||s==="F")break;if(s==="/$"||s==="/&")return null}}return t}var ac=null;function lm(t){t=t.nextSibling;for(var s=0;t;){if(t.nodeType===8){var o=t.data;if(o==="/$"||o==="/&"){if(s===0)return en(t.nextSibling);s--}else o!=="$"&&o!=="$!"&&o!=="$?"&&o!=="$~"&&o!=="&"||s++}t=t.nextSibling}return null}function um(t){t=t.previousSibling;for(var s=0;t;){if(t.nodeType===8){var o=t.data;if(o==="$"||o==="$!"||o==="$?"||o==="$~"||o==="&"){if(s===0)return t;s--}else o!=="/$"&&o!=="/&"||s++}t=t.previousSibling}return null}function cm(t,s,o){switch(s=ca(o),t){case"html":if(t=s.documentElement,!t)throw Error(r(452));return t;case"head":if(t=s.head,!t)throw Error(r(453));return t;case"body":if(t=s.body,!t)throw Error(r(454));return t;default:throw Error(r(451))}}function Lr(t){for(var s=t.attributes;s.length;)t.removeAttributeNode(s[0]);ul(t)}var tn=new Map,dm=new Set;function da(t){return typeof t.getRootNode=="function"?t.getRootNode():t.nodeType===9?t:t.ownerDocument}var Dn=Q.d;Q.d={f:eb,r:tb,D:nb,C:ib,L:sb,m:rb,X:ab,S:ob,M:lb};function eb(){var t=Dn.f(),s=na();return t||s}function tb(t){var s=Ji(t);s!==null&&s.tag===5&&s.type==="form"?Nh(s):Dn.r(t)}var ws=typeof document>"u"?null:document;function fm(t,s,o){var u=ws;if(u&&typeof s=="string"&&s){var m=Jt(s);m='link[rel="'+t+'"][href="'+m+'"]',typeof o=="string"&&(m+='[crossorigin="'+o+'"]'),dm.has(m)||(dm.add(m),t={rel:t,crossOrigin:o,href:s},u.querySelector(m)===null&&(s=u.createElement("link"),_t(s,"link",t),ht(s),u.head.appendChild(s)))}}function nb(t){Dn.D(t),fm("dns-prefetch",t,null)}function ib(t,s){Dn.C(t,s),fm("preconnect",t,s)}function sb(t,s,o){Dn.L(t,s,o);var u=ws;if(u&&t&&s){var m='link[rel="preload"][as="'+Jt(s)+'"]';s==="image"&&o&&o.imageSrcSet?(m+='[imagesrcset="'+Jt(o.imageSrcSet)+'"]',typeof o.imageSizes=="string"&&(m+='[imagesizes="'+Jt(o.imageSizes)+'"]')):m+='[href="'+Jt(t)+'"]';var v=m;switch(s){case"style":v=Cs(t);break;case"script":v=As(t)}tn.has(v)||(t=x({rel:"preload",href:s==="image"&&o&&o.imageSrcSet?void 0:t,as:s},o),tn.set(v,t),u.querySelector(m)!==null||s==="style"&&u.querySelector(qr(v))||s==="script"&&u.querySelector(Br(v))||(s=u.createElement("link"),_t(s,"link",t),ht(s),u.head.appendChild(s)))}}function rb(t,s){Dn.m(t,s);var o=ws;if(o&&t){var u=s&&typeof s.as=="string"?s.as:"script",m='link[rel="modulepreload"][as="'+Jt(u)+'"][href="'+Jt(t)+'"]',v=m;switch(u){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":v=As(t)}if(!tn.has(v)&&(t=x({rel:"modulepreload",href:t},s),tn.set(v,t),o.querySelector(m)===null)){switch(u){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(o.querySelector(Br(v)))return}u=o.createElement("link"),_t(u,"link",t),ht(u),o.head.appendChild(u)}}}function ob(t,s,o){Dn.S(t,s,o);var u=ws;if(u&&t){var m=Ki(u).hoistableStyles,v=Cs(t);s=s||"default";var b=m.get(v);if(!b){var E={loading:0,preload:null};if(b=u.querySelector(qr(v)))E.loading=5;else{t=x({rel:"stylesheet",href:t,"data-precedence":s},o),(o=tn.get(v))&&lc(t,o);var A=b=u.createElement("link");ht(A),_t(A,"link",t),A._p=new Promise(function(O,j){A.onload=O,A.onerror=j}),A.addEventListener("load",function(){E.loading|=1}),A.addEventListener("error",function(){E.loading|=2}),E.loading|=4,fa(b,s,u)}b={type:"stylesheet",instance:b,count:1,state:E},m.set(v,b)}}}function ab(t,s){Dn.X(t,s);var o=ws;if(o&&t){var u=Ki(o).hoistableScripts,m=As(t),v=u.get(m);v||(v=o.querySelector(Br(m)),v||(t=x({src:t,async:!0},s),(s=tn.get(m))&&uc(t,s),v=o.createElement("script"),ht(v),_t(v,"link",t),o.head.appendChild(v)),v={type:"script",instance:v,count:1,state:null},u.set(m,v))}}function lb(t,s){Dn.M(t,s);var o=ws;if(o&&t){var u=Ki(o).hoistableScripts,m=As(t),v=u.get(m);v||(v=o.querySelector(Br(m)),v||(t=x({src:t,async:!0,type:"module"},s),(s=tn.get(m))&&uc(t,s),v=o.createElement("script"),ht(v),_t(v,"link",t),o.head.appendChild(v)),v={type:"script",instance:v,count:1,state:null},u.set(m,v))}}function hm(t,s,o,u){var m=(m=me.current)?da(m):null;if(!m)throw Error(r(446));switch(t){case"meta":case"title":return null;case"style":return typeof o.precedence=="string"&&typeof o.href=="string"?(s=Cs(o.href),o=Ki(m).hoistableStyles,u=o.get(s),u||(u={type:"style",instance:null,count:0,state:null},o.set(s,u)),u):{type:"void",instance:null,count:0,state:null};case"link":if(o.rel==="stylesheet"&&typeof o.href=="string"&&typeof o.precedence=="string"){t=Cs(o.href);var v=Ki(m).hoistableStyles,b=v.get(t);if(b||(m=m.ownerDocument||m,b={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},v.set(t,b),(v=m.querySelector(qr(t)))&&!v._p&&(b.instance=v,b.state.loading=5),tn.has(t)||(o={rel:"preload",as:"style",href:o.href,crossOrigin:o.crossOrigin,integrity:o.integrity,media:o.media,hrefLang:o.hrefLang,referrerPolicy:o.referrerPolicy},tn.set(t,o),v||ub(m,t,o,b.state))),s&&u===null)throw Error(r(528,""));return b}if(s&&u!==null)throw Error(r(529,""));return null;case"script":return s=o.async,o=o.src,typeof o=="string"&&s&&typeof s!="function"&&typeof s!="symbol"?(s=As(o),o=Ki(m).hoistableScripts,u=o.get(s),u||(u={type:"script",instance:null,count:0,state:null},o.set(s,u)),u):{type:"void",instance:null,count:0,state:null};default:throw Error(r(444,t))}}function Cs(t){return'href="'+Jt(t)+'"'}function qr(t){return'link[rel="stylesheet"]['+t+"]"}function pm(t){return x({},t,{"data-precedence":t.precedence,precedence:null})}function ub(t,s,o,u){t.querySelector('link[rel="preload"][as="style"]['+s+"]")?u.loading=1:(s=t.createElement("link"),u.preload=s,s.addEventListener("load",function(){return u.loading|=1}),s.addEventListener("error",function(){return u.loading|=2}),_t(s,"link",o),ht(s),t.head.appendChild(s))}function As(t){return'[src="'+Jt(t)+'"]'}function Br(t){return"script[async]"+t}function mm(t,s,o){if(s.count++,s.instance===null)switch(s.type){case"style":var u=t.querySelector('style[data-href~="'+Jt(o.href)+'"]');if(u)return s.instance=u,ht(u),u;var m=x({},o,{"data-href":o.href,"data-precedence":o.precedence,href:null,precedence:null});return u=(t.ownerDocument||t).createElement("style"),ht(u),_t(u,"style",m),fa(u,o.precedence,t),s.instance=u;case"stylesheet":m=Cs(o.href);var v=t.querySelector(qr(m));if(v)return s.state.loading|=4,s.instance=v,ht(v),v;u=pm(o),(m=tn.get(m))&&lc(u,m),v=(t.ownerDocument||t).createElement("link"),ht(v);var b=v;return b._p=new Promise(function(E,A){b.onload=E,b.onerror=A}),_t(v,"link",u),s.state.loading|=4,fa(v,o.precedence,t),s.instance=v;case"script":return v=As(o.src),(m=t.querySelector(Br(v)))?(s.instance=m,ht(m),m):(u=o,(m=tn.get(v))&&(u=x({},o),uc(u,m)),t=t.ownerDocument||t,m=t.createElement("script"),ht(m),_t(m,"link",u),t.head.appendChild(m),s.instance=m);case"void":return null;default:throw Error(r(443,s.type))}else s.type==="stylesheet"&&(s.state.loading&4)===0&&(u=s.instance,s.state.loading|=4,fa(u,o.precedence,t));return s.instance}function fa(t,s,o){for(var u=o.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),m=u.length?u[u.length-1]:null,v=m,b=0;b<u.length;b++){var E=u[b];if(E.dataset.precedence===s)v=E;else if(v!==m)break}v?v.parentNode.insertBefore(t,v.nextSibling):(s=o.nodeType===9?o.head:o,s.insertBefore(t,s.firstChild))}function lc(t,s){t.crossOrigin==null&&(t.crossOrigin=s.crossOrigin),t.referrerPolicy==null&&(t.referrerPolicy=s.referrerPolicy),t.title==null&&(t.title=s.title)}function uc(t,s){t.crossOrigin==null&&(t.crossOrigin=s.crossOrigin),t.referrerPolicy==null&&(t.referrerPolicy=s.referrerPolicy),t.integrity==null&&(t.integrity=s.integrity)}var ha=null;function gm(t,s,o){if(ha===null){var u=new Map,m=ha=new Map;m.set(o,u)}else m=ha,u=m.get(o),u||(u=new Map,m.set(o,u));if(u.has(t))return u;for(u.set(t,null),o=o.getElementsByTagName(t),m=0;m<o.length;m++){var v=o[m];if(!(v[tr]||v[mt]||t==="link"&&v.getAttribute("rel")==="stylesheet")&&v.namespaceURI!=="http://www.w3.org/2000/svg"){var b=v.getAttribute(s)||"";b=t+b;var E=u.get(b);E?E.push(v):u.set(b,[v])}}return u}function ym(t,s,o){t=t.ownerDocument||t,t.head.insertBefore(o,s==="title"?t.querySelector("head > title"):null)}function cb(t,s,o){if(o===1||s.itemProp!=null)return!1;switch(t){case"meta":case"title":return!0;case"style":if(typeof s.precedence!="string"||typeof s.href!="string"||s.href==="")break;return!0;case"link":if(typeof s.rel!="string"||typeof s.href!="string"||s.href===""||s.onLoad||s.onError)break;switch(s.rel){case"stylesheet":return t=s.disabled,typeof s.precedence=="string"&&t==null;default:return!0}case"script":if(s.async&&typeof s.async!="function"&&typeof s.async!="symbol"&&!s.onLoad&&!s.onError&&s.src&&typeof s.src=="string")return!0}return!1}function vm(t){return!(t.type==="stylesheet"&&(t.state.loading&3)===0)}function db(t,s,o,u){if(o.type==="stylesheet"&&(typeof u.media!="string"||matchMedia(u.media).matches!==!1)&&(o.state.loading&4)===0){if(o.instance===null){var m=Cs(u.href),v=s.querySelector(qr(m));if(v){s=v._p,s!==null&&typeof s=="object"&&typeof s.then=="function"&&(t.count++,t=pa.bind(t),s.then(t,t)),o.state.loading|=4,o.instance=v,ht(v);return}v=s.ownerDocument||s,u=pm(u),(m=tn.get(m))&&lc(u,m),v=v.createElement("link"),ht(v);var b=v;b._p=new Promise(function(E,A){b.onload=E,b.onerror=A}),_t(v,"link",u),o.instance=v}t.stylesheets===null&&(t.stylesheets=new Map),t.stylesheets.set(o,s),(s=o.state.preload)&&(o.state.loading&3)===0&&(t.count++,o=pa.bind(t),s.addEventListener("load",o),s.addEventListener("error",o))}}var cc=0;function fb(t,s){return t.stylesheets&&t.count===0&&ga(t,t.stylesheets),0<t.count||0<t.imgCount?function(o){var u=setTimeout(function(){if(t.stylesheets&&ga(t,t.stylesheets),t.unsuspend){var v=t.unsuspend;t.unsuspend=null,v()}},6e4+s);0<t.imgBytes&&cc===0&&(cc=62500*Fx());var m=setTimeout(function(){if(t.waitingForImages=!1,t.count===0&&(t.stylesheets&&ga(t,t.stylesheets),t.unsuspend)){var v=t.unsuspend;t.unsuspend=null,v()}},(t.imgBytes>cc?50:800)+s);return t.unsuspend=o,function(){t.unsuspend=null,clearTimeout(u),clearTimeout(m)}}:null}function pa(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)ga(this,this.stylesheets);else if(this.unsuspend){var t=this.unsuspend;this.unsuspend=null,t()}}}var ma=null;function ga(t,s){t.stylesheets=null,t.unsuspend!==null&&(t.count++,ma=new Map,s.forEach(hb,t),ma=null,pa.call(t))}function hb(t,s){if(!(s.state.loading&4)){var o=ma.get(t);if(o)var u=o.get(null);else{o=new Map,ma.set(t,o);for(var m=t.querySelectorAll("link[data-precedence],style[data-precedence]"),v=0;v<m.length;v++){var b=m[v];(b.nodeName==="LINK"||b.getAttribute("media")!=="not all")&&(o.set(b.dataset.precedence,b),u=b)}u&&o.set(null,u)}m=s.instance,b=m.getAttribute("data-precedence"),v=o.get(b)||u,v===u&&o.set(null,m),o.set(b,m),this.count++,u=pa.bind(this),m.addEventListener("load",u),m.addEventListener("error",u),v?v.parentNode.insertBefore(m,v.nextSibling):(t=t.nodeType===9?t.head:t,t.insertBefore(m,t.firstChild)),s.state.loading|=4}}var Gr={$$typeof:I,Provider:null,Consumer:null,_currentValue:ie,_currentValue2:ie,_threadCount:0};function pb(t,s,o,u,m,v,b,E,A){this.tag=1,this.containerInfo=t,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=rl(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=rl(0),this.hiddenUpdates=rl(null),this.identifierPrefix=u,this.onUncaughtError=m,this.onCaughtError=v,this.onRecoverableError=b,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=A,this.incompleteTransitions=new Map}function _m(t,s,o,u,m,v,b,E,A,O,j,J){return t=new pb(t,s,o,b,A,O,j,J,E),s=1,v===!0&&(s|=24),v=Ot(3,null,null,s),t.current=v,v.stateNode=t,s=jl(),s.refCount++,t.pooledCache=s,s.refCount++,v.memoizedState={element:u,isDehydrated:o,cache:s},Jl(v),t}function xm(t){return t?(t=ss,t):ss}function bm(t,s,o,u,m,v){m=xm(m),u.context===null?u.context=m:u.pendingContext=m,u=Kn(s),u.payload={element:o},v=v===void 0?null:v,v!==null&&(u.callback=v),o=Yn(t,u,s),o!==null&&(It(o,t,s),vr(o,t,s))}function Sm(t,s){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var o=t.retryLane;t.retryLane=o!==0&&o<s?o:s}}function dc(t,s){Sm(t,s),(t=t.alternate)&&Sm(t,s)}function Tm(t){if(t.tag===13||t.tag===31){var s=Si(t,67108864);s!==null&&It(s,t,67108864),dc(t,67108864)}}function Em(t){if(t.tag===13||t.tag===31){var s=Vt();s=ol(s);var o=Si(t,s);o!==null&&It(o,t,s),dc(t,s)}}var ya=!0;function mb(t,s,o,u){var m=q.T;q.T=null;var v=Q.p;try{Q.p=2,fc(t,s,o,u)}finally{Q.p=v,q.T=m}}function gb(t,s,o,u){var m=q.T;q.T=null;var v=Q.p;try{Q.p=8,fc(t,s,o,u)}finally{Q.p=v,q.T=m}}function fc(t,s,o,u){if(ya){var m=hc(u);if(m===null)Zu(t,s,u,va,o),Cm(t,u);else if(vb(m,t,s,o,u))u.stopPropagation();else if(Cm(t,u),s&4&&-1<yb.indexOf(t)){for(;m!==null;){var v=Ji(m);if(v!==null)switch(v.tag){case 3:if(v=v.stateNode,v.current.memoizedState.isDehydrated){var b=yi(v.pendingLanes);if(b!==0){var E=v;for(E.pendingLanes|=2,E.entangledLanes|=2;b;){var A=1<<31-Ut(b);E.entanglements[1]|=A,b&=~A}mn(v),(ke&6)===0&&(ea=kt()+500,Ur(0))}}break;case 31:case 13:E=Si(v,2),E!==null&&It(E,v,2),na(),dc(v,2)}if(v=hc(u),v===null&&Zu(t,s,u,va,o),v===m)break;m=v}m!==null&&u.stopPropagation()}else Zu(t,s,u,null,o)}}function hc(t){return t=ml(t),pc(t)}var va=null;function pc(t){if(va=null,t=Fi(t),t!==null){var s=l(t);if(s===null)t=null;else{var o=s.tag;if(o===13){if(t=c(s),t!==null)return t;t=null}else if(o===31){if(t=h(s),t!==null)return t;t=null}else if(o===3){if(s.stateNode.current.memoizedState.isDehydrated)return s.tag===3?s.stateNode.containerInfo:null;t=null}else s!==t&&(t=null)}}return va=t,null}function wm(t){switch(t){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(n_()){case kd:return 2;case Dd:return 8;case oo:case i_:return 32;case Ud:return 268435456;default:return 32}default:return 32}}var mc=!1,oi=null,ai=null,li=null,Vr=new Map,Hr=new Map,ui=[],yb="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function Cm(t,s){switch(t){case"focusin":case"focusout":oi=null;break;case"dragenter":case"dragleave":ai=null;break;case"mouseover":case"mouseout":li=null;break;case"pointerover":case"pointerout":Vr.delete(s.pointerId);break;case"gotpointercapture":case"lostpointercapture":Hr.delete(s.pointerId)}}function jr(t,s,o,u,m,v){return t===null||t.nativeEvent!==v?(t={blockedOn:s,domEventName:o,eventSystemFlags:u,nativeEvent:v,targetContainers:[m]},s!==null&&(s=Ji(s),s!==null&&Tm(s)),t):(t.eventSystemFlags|=u,s=t.targetContainers,m!==null&&s.indexOf(m)===-1&&s.push(m),t)}function vb(t,s,o,u,m){switch(s){case"focusin":return oi=jr(oi,t,s,o,u,m),!0;case"dragenter":return ai=jr(ai,t,s,o,u,m),!0;case"mouseover":return li=jr(li,t,s,o,u,m),!0;case"pointerover":var v=m.pointerId;return Vr.set(v,jr(Vr.get(v)||null,t,s,o,u,m)),!0;case"gotpointercapture":return v=m.pointerId,Hr.set(v,jr(Hr.get(v)||null,t,s,o,u,m)),!0}return!1}function Am(t){var s=Fi(t.target);if(s!==null){var o=l(s);if(o!==null){if(s=o.tag,s===13){if(s=c(o),s!==null){t.blockedOn=s,Gd(t.priority,function(){Em(o)});return}}else if(s===31){if(s=h(o),s!==null){t.blockedOn=s,Gd(t.priority,function(){Em(o)});return}}else if(s===3&&o.stateNode.current.memoizedState.isDehydrated){t.blockedOn=o.tag===3?o.stateNode.containerInfo:null;return}}}t.blockedOn=null}function _a(t){if(t.blockedOn!==null)return!1;for(var s=t.targetContainers;0<s.length;){var o=hc(t.nativeEvent);if(o===null){o=t.nativeEvent;var u=new o.constructor(o.type,o);pl=u,o.target.dispatchEvent(u),pl=null}else return s=Ji(o),s!==null&&Tm(s),t.blockedOn=o,!1;s.shift()}return!0}function Nm(t,s,o){_a(t)&&o.delete(s)}function _b(){mc=!1,oi!==null&&_a(oi)&&(oi=null),ai!==null&&_a(ai)&&(ai=null),li!==null&&_a(li)&&(li=null),Vr.forEach(Nm),Hr.forEach(Nm)}function xa(t,s){t.blockedOn===s&&(t.blockedOn=null,mc||(mc=!0,n.unstable_scheduleCallback(n.unstable_NormalPriority,_b)))}var ba=null;function Rm(t){ba!==t&&(ba=t,n.unstable_scheduleCallback(n.unstable_NormalPriority,function(){ba===t&&(ba=null);for(var s=0;s<t.length;s+=3){var o=t[s],u=t[s+1],m=t[s+2];if(typeof u!="function"){if(pc(u||o)===null)continue;break}var v=Ji(o);v!==null&&(t.splice(s,3),s-=3,hu(v,{pending:!0,data:m,method:o.method,action:u},u,m))}}))}function Ns(t){function s(A){return xa(A,t)}oi!==null&&xa(oi,t),ai!==null&&xa(ai,t),li!==null&&xa(li,t),Vr.forEach(s),Hr.forEach(s);for(var o=0;o<ui.length;o++){var u=ui[o];u.blockedOn===t&&(u.blockedOn=null)}for(;0<ui.length&&(o=ui[0],o.blockedOn===null);)Am(o),o.blockedOn===null&&ui.shift();if(o=(t.ownerDocument||t).$$reactFormReplay,o!=null)for(u=0;u<o.length;u+=3){var m=o[u],v=o[u+1],b=m[wt]||null;if(typeof v=="function")b||Rm(o);else if(b){var E=null;if(v&&v.hasAttribute("formAction")){if(m=v,b=v[wt]||null)E=b.formAction;else if(pc(m)!==null)continue}else E=b.action;typeof E=="function"?o[u+1]=E:(o.splice(u,3),u-=3),Rm(o)}}}function Mm(){function t(v){v.canIntercept&&v.info==="react-transition"&&v.intercept({handler:function(){return new Promise(function(b){return m=b})},focusReset:"manual",scroll:"manual"})}function s(){m!==null&&(m(),m=null),u||setTimeout(o,20)}function o(){if(!u&&!navigation.transition){var v=navigation.currentEntry;v&&v.url!=null&&navigation.navigate(v.url,{state:v.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var u=!1,m=null;return navigation.addEventListener("navigate",t),navigation.addEventListener("navigatesuccess",s),navigation.addEventListener("navigateerror",s),setTimeout(o,100),function(){u=!0,navigation.removeEventListener("navigate",t),navigation.removeEventListener("navigatesuccess",s),navigation.removeEventListener("navigateerror",s),m!==null&&(m(),m=null)}}}function gc(t){this._internalRoot=t}Sa.prototype.render=gc.prototype.render=function(t){var s=this._internalRoot;if(s===null)throw Error(r(409));var o=s.current,u=Vt();bm(o,u,t,s,null,null)},Sa.prototype.unmount=gc.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var s=t.containerInfo;bm(t.current,2,null,t,null,null),na(),s[$i]=null}};function Sa(t){this._internalRoot=t}Sa.prototype.unstable_scheduleHydration=function(t){if(t){var s=Bd();t={blockedOn:null,target:t,priority:s};for(var o=0;o<ui.length&&s!==0&&s<ui[o].priority;o++);ui.splice(o,0,t),o===0&&Am(t)}};var Im=e.version;if(Im!=="19.2.0")throw Error(r(527,Im,"19.2.0"));Q.findDOMNode=function(t){var s=t._reactInternals;if(s===void 0)throw typeof t.render=="function"?Error(r(188)):(t=Object.keys(t).join(","),Error(r(268,t)));return t=p(s),t=t!==null?_(t):null,t=t===null?null:t.stateNode,t};var xb={bundleType:0,version:"19.2.0",rendererPackageName:"react-dom",currentDispatcherRef:q,reconcilerVersion:"19.2.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Ta=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Ta.isDisabled&&Ta.supportsFiber)try{Zs=Ta.inject(xb),Dt=Ta}catch{}}return $r.createRoot=function(t,s){if(!a(t))throw Error(r(299));var o=!1,u="",m=qh,v=Bh,b=Gh;return s!=null&&(s.unstable_strictMode===!0&&(o=!0),s.identifierPrefix!==void 0&&(u=s.identifierPrefix),s.onUncaughtError!==void 0&&(m=s.onUncaughtError),s.onCaughtError!==void 0&&(v=s.onCaughtError),s.onRecoverableError!==void 0&&(b=s.onRecoverableError)),s=_m(t,1,!1,null,null,o,u,null,m,v,b,Mm),t[$i]=s.current,Xu(t),new gc(s)},$r.hydrateRoot=function(t,s,o){if(!a(t))throw Error(r(299));var u=!1,m="",v=qh,b=Bh,E=Gh,A=null;return o!=null&&(o.unstable_strictMode===!0&&(u=!0),o.identifierPrefix!==void 0&&(m=o.identifierPrefix),o.onUncaughtError!==void 0&&(v=o.onUncaughtError),o.onCaughtError!==void 0&&(b=o.onCaughtError),o.onRecoverableError!==void 0&&(E=o.onRecoverableError),o.formState!==void 0&&(A=o.formState)),s=_m(t,1,!0,s,o??null,u,m,A,v,b,E,Mm),s.context=xm(null),o=s.current,u=Vt(),u=ol(u),m=Kn(u),m.callback=null,Yn(o,m,u),o=u,s.current.lanes=o,er(s,o),mn(s),t[$i]=s.current,Xu(t),new Sa(s)},$r.version="19.2.0",$r}var Vm;function kb(){if(Vm)return _c.exports;Vm=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),_c.exports=Ib(),_c.exports}var Db=kb();const Ub=ad(Db);/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */let Pb,Ob;function Lb(){return{geminiUrl:Pb,vertexUrl:Ob}}function qb(n,e,i,r){var a,l;if(!(n!=null&&n.baseUrl)){const c=Lb();return e?(a=c.vertexUrl)!==null&&a!==void 0?a:i:(l=c.geminiUrl)!==null&&l!==void 0?l:r}return n.baseUrl}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Ln{}function ee(n,e){const i=/\{([^}]+)\}/g;return n.replace(i,(r,a)=>{if(Object.prototype.hasOwnProperty.call(e,a)){const l=e[a];return l!=null?String(l):""}else throw new Error(`Key '${a}' not found in valueMap.`)})}function f(n,e,i){for(let l=0;l<e.length-1;l++){const c=e[l];if(c.endsWith("[]")){const h=c.slice(0,-2);if(!(h in n))if(Array.isArray(i))n[h]=Array.from({length:i.length},()=>({}));else throw new Error(`Value must be a list given an array path ${c}`);if(Array.isArray(n[h])){const g=n[h];if(Array.isArray(i))for(let p=0;p<g.length;p++){const _=g[p];f(_,e.slice(l+1),i[p])}else for(const p of g)f(p,e.slice(l+1),i)}return}else if(c.endsWith("[0]")){const h=c.slice(0,-3);h in n||(n[h]=[{}]);const g=n[h];f(g[0],e.slice(l+1),i);return}(!n[c]||typeof n[c]!="object")&&(n[c]={}),n=n[c]}const r=e[e.length-1],a=n[r];if(a!==void 0){if(!i||typeof i=="object"&&Object.keys(i).length===0||i===a)return;if(typeof a=="object"&&typeof i=="object"&&a!==null&&i!==null)Object.assign(a,i);else throw new Error(`Cannot set value for an existing key. Key: ${r}`)}else r==="_self"&&typeof i=="object"&&i!==null&&!Array.isArray(i)?Object.assign(n,i):n[r]=i}function d(n,e,i=void 0){try{if(e.length===1&&e[0]==="_self")return n;for(let r=0;r<e.length;r++){if(typeof n!="object"||n===null)return i;const a=e[r];if(a.endsWith("[]")){const l=a.slice(0,-2);if(l in n){const c=n[l];return Array.isArray(c)?c.map(h=>d(h,e.slice(r+1),i)):i}else return i}else n=n[a]}return n}catch(r){if(r instanceof TypeError)return i;throw r}}function Bb(n,e){for(const[i,r]of Object.entries(e)){const a=i.split("."),l=r.split("."),c=new Set;let h=-1;for(let g=0;g<a.length;g++)if(a[g]==="*"){h=g;break}if(h!==-1&&l.length>h)for(let g=h;g<l.length;g++){const p=l[g];p!=="*"&&!p.endsWith("[]")&&!p.endsWith("[0]")&&c.add(p)}Oc(n,a,l,0,c)}}function Oc(n,e,i,r,a){if(r>=e.length||typeof n!="object"||n===null)return;const l=e[r];if(l.endsWith("[]")){const c=l.slice(0,-2),h=n;if(c in h&&Array.isArray(h[c]))for(const g of h[c])Oc(g,e,i,r+1,a)}else if(l==="*"){if(typeof n=="object"&&n!==null&&!Array.isArray(n)){const c=n,h=Object.keys(c).filter(p=>!p.startsWith("_")&&!a.has(p)),g={};for(const p of h)g[p]=c[p];for(const[p,_]of Object.entries(g)){const x=[];for(const S of i.slice(r))S==="*"?x.push(p):x.push(S);f(c,x,_)}for(const p of h)delete c[p]}}else{const c=n;l in c&&Oc(c[l],e,i,r+1,a)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function ud(n){if(typeof n!="string")throw new Error("fromImageBytes must be a string");return n}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Gb(n){const e={},i=d(n,["operationName"]);i!=null&&f(e,["operationName"],i);const r=d(n,["resourceName"]);return r!=null&&f(e,["_url","resourceName"],r),e}function Vb(n){const e={},i=d(n,["name"]);i!=null&&f(e,["name"],i);const r=d(n,["metadata"]);r!=null&&f(e,["metadata"],r);const a=d(n,["done"]);a!=null&&f(e,["done"],a);const l=d(n,["error"]);l!=null&&f(e,["error"],l);const c=d(n,["response","generateVideoResponse"]);return c!=null&&f(e,["response"],jb(c)),e}function Hb(n){const e={},i=d(n,["name"]);i!=null&&f(e,["name"],i);const r=d(n,["metadata"]);r!=null&&f(e,["metadata"],r);const a=d(n,["done"]);a!=null&&f(e,["done"],a);const l=d(n,["error"]);l!=null&&f(e,["error"],l);const c=d(n,["response"]);return c!=null&&f(e,["response"],zb(c)),e}function jb(n){const e={},i=d(n,["generatedSamples"]);if(i!=null){let l=i;Array.isArray(l)&&(l=l.map(c=>$b(c))),f(e,["generatedVideos"],l)}const r=d(n,["raiMediaFilteredCount"]);r!=null&&f(e,["raiMediaFilteredCount"],r);const a=d(n,["raiMediaFilteredReasons"]);return a!=null&&f(e,["raiMediaFilteredReasons"],a),e}function zb(n){const e={},i=d(n,["videos"]);if(i!=null){let l=i;Array.isArray(l)&&(l=l.map(c=>Fb(c))),f(e,["generatedVideos"],l)}const r=d(n,["raiMediaFilteredCount"]);r!=null&&f(e,["raiMediaFilteredCount"],r);const a=d(n,["raiMediaFilteredReasons"]);return a!=null&&f(e,["raiMediaFilteredReasons"],a),e}function $b(n){const e={},i=d(n,["video"]);return i!=null&&f(e,["video"],Zb(i)),e}function Fb(n){const e={},i=d(n,["_self"]);return i!=null&&f(e,["video"],Wb(i)),e}function Jb(n){const e={},i=d(n,["operationName"]);return i!=null&&f(e,["_url","operationName"],i),e}function Kb(n){const e={},i=d(n,["operationName"]);return i!=null&&f(e,["_url","operationName"],i),e}function Yb(n){const e={},i=d(n,["name"]);i!=null&&f(e,["name"],i);const r=d(n,["metadata"]);r!=null&&f(e,["metadata"],r);const a=d(n,["done"]);a!=null&&f(e,["done"],a);const l=d(n,["error"]);l!=null&&f(e,["error"],l);const c=d(n,["response"]);return c!=null&&f(e,["response"],Qb(c)),e}function Qb(n){const e={},i=d(n,["sdkHttpResponse"]);i!=null&&f(e,["sdkHttpResponse"],i);const r=d(n,["parent"]);r!=null&&f(e,["parent"],r);const a=d(n,["documentName"]);return a!=null&&f(e,["documentName"],a),e}function Xg(n){const e={},i=d(n,["name"]);i!=null&&f(e,["name"],i);const r=d(n,["metadata"]);r!=null&&f(e,["metadata"],r);const a=d(n,["done"]);a!=null&&f(e,["done"],a);const l=d(n,["error"]);l!=null&&f(e,["error"],l);const c=d(n,["response"]);return c!=null&&f(e,["response"],Xb(c)),e}function Xb(n){const e={},i=d(n,["sdkHttpResponse"]);i!=null&&f(e,["sdkHttpResponse"],i);const r=d(n,["parent"]);r!=null&&f(e,["parent"],r);const a=d(n,["documentName"]);return a!=null&&f(e,["documentName"],a),e}function Zb(n){const e={},i=d(n,["uri"]);i!=null&&f(e,["uri"],i);const r=d(n,["encodedVideo"]);r!=null&&f(e,["videoBytes"],ud(r));const a=d(n,["encoding"]);return a!=null&&f(e,["mimeType"],a),e}function Wb(n){const e={},i=d(n,["gcsUri"]);i!=null&&f(e,["uri"],i);const r=d(n,["bytesBase64Encoded"]);r!=null&&f(e,["videoBytes"],ud(r));const a=d(n,["mimeType"]);return a!=null&&f(e,["mimeType"],a),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var Hm;(function(n){n.OUTCOME_UNSPECIFIED="OUTCOME_UNSPECIFIED",n.OUTCOME_OK="OUTCOME_OK",n.OUTCOME_FAILED="OUTCOME_FAILED",n.OUTCOME_DEADLINE_EXCEEDED="OUTCOME_DEADLINE_EXCEEDED"})(Hm||(Hm={}));var jm;(function(n){n.LANGUAGE_UNSPECIFIED="LANGUAGE_UNSPECIFIED",n.PYTHON="PYTHON"})(jm||(jm={}));var zm;(function(n){n.SCHEDULING_UNSPECIFIED="SCHEDULING_UNSPECIFIED",n.SILENT="SILENT",n.WHEN_IDLE="WHEN_IDLE",n.INTERRUPT="INTERRUPT"})(zm||(zm={}));var hi;(function(n){n.TYPE_UNSPECIFIED="TYPE_UNSPECIFIED",n.STRING="STRING",n.NUMBER="NUMBER",n.INTEGER="INTEGER",n.BOOLEAN="BOOLEAN",n.ARRAY="ARRAY",n.OBJECT="OBJECT",n.NULL="NULL"})(hi||(hi={}));var $m;(function(n){n.MODE_UNSPECIFIED="MODE_UNSPECIFIED",n.MODE_DYNAMIC="MODE_DYNAMIC"})($m||($m={}));var Fm;(function(n){n.API_SPEC_UNSPECIFIED="API_SPEC_UNSPECIFIED",n.SIMPLE_SEARCH="SIMPLE_SEARCH",n.ELASTIC_SEARCH="ELASTIC_SEARCH"})(Fm||(Fm={}));var Jm;(function(n){n.AUTH_TYPE_UNSPECIFIED="AUTH_TYPE_UNSPECIFIED",n.NO_AUTH="NO_AUTH",n.API_KEY_AUTH="API_KEY_AUTH",n.HTTP_BASIC_AUTH="HTTP_BASIC_AUTH",n.GOOGLE_SERVICE_ACCOUNT_AUTH="GOOGLE_SERVICE_ACCOUNT_AUTH",n.OAUTH="OAUTH",n.OIDC_AUTH="OIDC_AUTH"})(Jm||(Jm={}));var Km;(function(n){n.HTTP_IN_UNSPECIFIED="HTTP_IN_UNSPECIFIED",n.HTTP_IN_QUERY="HTTP_IN_QUERY",n.HTTP_IN_HEADER="HTTP_IN_HEADER",n.HTTP_IN_PATH="HTTP_IN_PATH",n.HTTP_IN_BODY="HTTP_IN_BODY",n.HTTP_IN_COOKIE="HTTP_IN_COOKIE"})(Km||(Km={}));var Ym;(function(n){n.PHISH_BLOCK_THRESHOLD_UNSPECIFIED="PHISH_BLOCK_THRESHOLD_UNSPECIFIED",n.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",n.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",n.BLOCK_HIGH_AND_ABOVE="BLOCK_HIGH_AND_ABOVE",n.BLOCK_HIGHER_AND_ABOVE="BLOCK_HIGHER_AND_ABOVE",n.BLOCK_VERY_HIGH_AND_ABOVE="BLOCK_VERY_HIGH_AND_ABOVE",n.BLOCK_ONLY_EXTREMELY_HIGH="BLOCK_ONLY_EXTREMELY_HIGH"})(Ym||(Ym={}));var Qm;(function(n){n.THINKING_LEVEL_UNSPECIFIED="THINKING_LEVEL_UNSPECIFIED",n.LOW="LOW",n.HIGH="HIGH"})(Qm||(Qm={}));var Xm;(function(n){n.HARM_CATEGORY_UNSPECIFIED="HARM_CATEGORY_UNSPECIFIED",n.HARM_CATEGORY_HARASSMENT="HARM_CATEGORY_HARASSMENT",n.HARM_CATEGORY_HATE_SPEECH="HARM_CATEGORY_HATE_SPEECH",n.HARM_CATEGORY_SEXUALLY_EXPLICIT="HARM_CATEGORY_SEXUALLY_EXPLICIT",n.HARM_CATEGORY_DANGEROUS_CONTENT="HARM_CATEGORY_DANGEROUS_CONTENT",n.HARM_CATEGORY_CIVIC_INTEGRITY="HARM_CATEGORY_CIVIC_INTEGRITY",n.HARM_CATEGORY_IMAGE_HATE="HARM_CATEGORY_IMAGE_HATE",n.HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT="HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT",n.HARM_CATEGORY_IMAGE_HARASSMENT="HARM_CATEGORY_IMAGE_HARASSMENT",n.HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT="HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT",n.HARM_CATEGORY_JAILBREAK="HARM_CATEGORY_JAILBREAK"})(Xm||(Xm={}));var Zm;(function(n){n.HARM_BLOCK_METHOD_UNSPECIFIED="HARM_BLOCK_METHOD_UNSPECIFIED",n.SEVERITY="SEVERITY",n.PROBABILITY="PROBABILITY"})(Zm||(Zm={}));var Wm;(function(n){n.HARM_BLOCK_THRESHOLD_UNSPECIFIED="HARM_BLOCK_THRESHOLD_UNSPECIFIED",n.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",n.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",n.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",n.BLOCK_NONE="BLOCK_NONE",n.OFF="OFF"})(Wm||(Wm={}));var e0;(function(n){n.FINISH_REASON_UNSPECIFIED="FINISH_REASON_UNSPECIFIED",n.STOP="STOP",n.MAX_TOKENS="MAX_TOKENS",n.SAFETY="SAFETY",n.RECITATION="RECITATION",n.LANGUAGE="LANGUAGE",n.OTHER="OTHER",n.BLOCKLIST="BLOCKLIST",n.PROHIBITED_CONTENT="PROHIBITED_CONTENT",n.SPII="SPII",n.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",n.IMAGE_SAFETY="IMAGE_SAFETY",n.UNEXPECTED_TOOL_CALL="UNEXPECTED_TOOL_CALL",n.IMAGE_PROHIBITED_CONTENT="IMAGE_PROHIBITED_CONTENT",n.NO_IMAGE="NO_IMAGE"})(e0||(e0={}));var t0;(function(n){n.HARM_PROBABILITY_UNSPECIFIED="HARM_PROBABILITY_UNSPECIFIED",n.NEGLIGIBLE="NEGLIGIBLE",n.LOW="LOW",n.MEDIUM="MEDIUM",n.HIGH="HIGH"})(t0||(t0={}));var n0;(function(n){n.HARM_SEVERITY_UNSPECIFIED="HARM_SEVERITY_UNSPECIFIED",n.HARM_SEVERITY_NEGLIGIBLE="HARM_SEVERITY_NEGLIGIBLE",n.HARM_SEVERITY_LOW="HARM_SEVERITY_LOW",n.HARM_SEVERITY_MEDIUM="HARM_SEVERITY_MEDIUM",n.HARM_SEVERITY_HIGH="HARM_SEVERITY_HIGH"})(n0||(n0={}));var i0;(function(n){n.URL_RETRIEVAL_STATUS_UNSPECIFIED="URL_RETRIEVAL_STATUS_UNSPECIFIED",n.URL_RETRIEVAL_STATUS_SUCCESS="URL_RETRIEVAL_STATUS_SUCCESS",n.URL_RETRIEVAL_STATUS_ERROR="URL_RETRIEVAL_STATUS_ERROR",n.URL_RETRIEVAL_STATUS_PAYWALL="URL_RETRIEVAL_STATUS_PAYWALL",n.URL_RETRIEVAL_STATUS_UNSAFE="URL_RETRIEVAL_STATUS_UNSAFE"})(i0||(i0={}));var s0;(function(n){n.BLOCKED_REASON_UNSPECIFIED="BLOCKED_REASON_UNSPECIFIED",n.SAFETY="SAFETY",n.OTHER="OTHER",n.BLOCKLIST="BLOCKLIST",n.PROHIBITED_CONTENT="PROHIBITED_CONTENT",n.IMAGE_SAFETY="IMAGE_SAFETY",n.MODEL_ARMOR="MODEL_ARMOR",n.JAILBREAK="JAILBREAK"})(s0||(s0={}));var r0;(function(n){n.TRAFFIC_TYPE_UNSPECIFIED="TRAFFIC_TYPE_UNSPECIFIED",n.ON_DEMAND="ON_DEMAND",n.PROVISIONED_THROUGHPUT="PROVISIONED_THROUGHPUT"})(r0||(r0={}));var Zr;(function(n){n.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",n.TEXT="TEXT",n.IMAGE="IMAGE",n.AUDIO="AUDIO"})(Zr||(Zr={}));var o0;(function(n){n.MEDIA_RESOLUTION_UNSPECIFIED="MEDIA_RESOLUTION_UNSPECIFIED",n.MEDIA_RESOLUTION_LOW="MEDIA_RESOLUTION_LOW",n.MEDIA_RESOLUTION_MEDIUM="MEDIA_RESOLUTION_MEDIUM",n.MEDIA_RESOLUTION_HIGH="MEDIA_RESOLUTION_HIGH"})(o0||(o0={}));var a0;(function(n){n.TUNING_MODE_UNSPECIFIED="TUNING_MODE_UNSPECIFIED",n.TUNING_MODE_FULL="TUNING_MODE_FULL",n.TUNING_MODE_PEFT_ADAPTER="TUNING_MODE_PEFT_ADAPTER"})(a0||(a0={}));var l0;(function(n){n.ADAPTER_SIZE_UNSPECIFIED="ADAPTER_SIZE_UNSPECIFIED",n.ADAPTER_SIZE_ONE="ADAPTER_SIZE_ONE",n.ADAPTER_SIZE_TWO="ADAPTER_SIZE_TWO",n.ADAPTER_SIZE_FOUR="ADAPTER_SIZE_FOUR",n.ADAPTER_SIZE_EIGHT="ADAPTER_SIZE_EIGHT",n.ADAPTER_SIZE_SIXTEEN="ADAPTER_SIZE_SIXTEEN",n.ADAPTER_SIZE_THIRTY_TWO="ADAPTER_SIZE_THIRTY_TWO"})(l0||(l0={}));var Lc;(function(n){n.JOB_STATE_UNSPECIFIED="JOB_STATE_UNSPECIFIED",n.JOB_STATE_QUEUED="JOB_STATE_QUEUED",n.JOB_STATE_PENDING="JOB_STATE_PENDING",n.JOB_STATE_RUNNING="JOB_STATE_RUNNING",n.JOB_STATE_SUCCEEDED="JOB_STATE_SUCCEEDED",n.JOB_STATE_FAILED="JOB_STATE_FAILED",n.JOB_STATE_CANCELLING="JOB_STATE_CANCELLING",n.JOB_STATE_CANCELLED="JOB_STATE_CANCELLED",n.JOB_STATE_PAUSED="JOB_STATE_PAUSED",n.JOB_STATE_EXPIRED="JOB_STATE_EXPIRED",n.JOB_STATE_UPDATING="JOB_STATE_UPDATING",n.JOB_STATE_PARTIALLY_SUCCEEDED="JOB_STATE_PARTIALLY_SUCCEEDED"})(Lc||(Lc={}));var u0;(function(n){n.TUNING_TASK_UNSPECIFIED="TUNING_TASK_UNSPECIFIED",n.TUNING_TASK_I2V="TUNING_TASK_I2V",n.TUNING_TASK_T2V="TUNING_TASK_T2V",n.TUNING_TASK_R2V="TUNING_TASK_R2V"})(u0||(u0={}));var c0;(function(n){n.MEDIA_RESOLUTION_UNSPECIFIED="MEDIA_RESOLUTION_UNSPECIFIED",n.MEDIA_RESOLUTION_LOW="MEDIA_RESOLUTION_LOW",n.MEDIA_RESOLUTION_MEDIUM="MEDIA_RESOLUTION_MEDIUM",n.MEDIA_RESOLUTION_HIGH="MEDIA_RESOLUTION_HIGH"})(c0||(c0={}));var d0;(function(n){n.FEATURE_SELECTION_PREFERENCE_UNSPECIFIED="FEATURE_SELECTION_PREFERENCE_UNSPECIFIED",n.PRIORITIZE_QUALITY="PRIORITIZE_QUALITY",n.BALANCED="BALANCED",n.PRIORITIZE_COST="PRIORITIZE_COST"})(d0||(d0={}));var f0;(function(n){n.UNSPECIFIED="UNSPECIFIED",n.BLOCKING="BLOCKING",n.NON_BLOCKING="NON_BLOCKING"})(f0||(f0={}));var h0;(function(n){n.MODE_UNSPECIFIED="MODE_UNSPECIFIED",n.MODE_DYNAMIC="MODE_DYNAMIC"})(h0||(h0={}));var p0;(function(n){n.ENVIRONMENT_UNSPECIFIED="ENVIRONMENT_UNSPECIFIED",n.ENVIRONMENT_BROWSER="ENVIRONMENT_BROWSER"})(p0||(p0={}));var m0;(function(n){n.MODE_UNSPECIFIED="MODE_UNSPECIFIED",n.AUTO="AUTO",n.ANY="ANY",n.NONE="NONE",n.VALIDATED="VALIDATED"})(m0||(m0={}));var g0;(function(n){n.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",n.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",n.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",n.BLOCK_NONE="BLOCK_NONE"})(g0||(g0={}));var y0;(function(n){n.DONT_ALLOW="DONT_ALLOW",n.ALLOW_ADULT="ALLOW_ADULT",n.ALLOW_ALL="ALLOW_ALL"})(y0||(y0={}));var v0;(function(n){n.auto="auto",n.en="en",n.ja="ja",n.ko="ko",n.hi="hi",n.zh="zh",n.pt="pt",n.es="es"})(v0||(v0={}));var _0;(function(n){n.MASK_MODE_DEFAULT="MASK_MODE_DEFAULT",n.MASK_MODE_USER_PROVIDED="MASK_MODE_USER_PROVIDED",n.MASK_MODE_BACKGROUND="MASK_MODE_BACKGROUND",n.MASK_MODE_FOREGROUND="MASK_MODE_FOREGROUND",n.MASK_MODE_SEMANTIC="MASK_MODE_SEMANTIC"})(_0||(_0={}));var x0;(function(n){n.CONTROL_TYPE_DEFAULT="CONTROL_TYPE_DEFAULT",n.CONTROL_TYPE_CANNY="CONTROL_TYPE_CANNY",n.CONTROL_TYPE_SCRIBBLE="CONTROL_TYPE_SCRIBBLE",n.CONTROL_TYPE_FACE_MESH="CONTROL_TYPE_FACE_MESH"})(x0||(x0={}));var b0;(function(n){n.SUBJECT_TYPE_DEFAULT="SUBJECT_TYPE_DEFAULT",n.SUBJECT_TYPE_PERSON="SUBJECT_TYPE_PERSON",n.SUBJECT_TYPE_ANIMAL="SUBJECT_TYPE_ANIMAL",n.SUBJECT_TYPE_PRODUCT="SUBJECT_TYPE_PRODUCT"})(b0||(b0={}));var S0;(function(n){n.EDIT_MODE_DEFAULT="EDIT_MODE_DEFAULT",n.EDIT_MODE_INPAINT_REMOVAL="EDIT_MODE_INPAINT_REMOVAL",n.EDIT_MODE_INPAINT_INSERTION="EDIT_MODE_INPAINT_INSERTION",n.EDIT_MODE_OUTPAINT="EDIT_MODE_OUTPAINT",n.EDIT_MODE_CONTROLLED_EDITING="EDIT_MODE_CONTROLLED_EDITING",n.EDIT_MODE_STYLE="EDIT_MODE_STYLE",n.EDIT_MODE_BGSWAP="EDIT_MODE_BGSWAP",n.EDIT_MODE_PRODUCT_IMAGE="EDIT_MODE_PRODUCT_IMAGE"})(S0||(S0={}));var T0;(function(n){n.FOREGROUND="FOREGROUND",n.BACKGROUND="BACKGROUND",n.PROMPT="PROMPT",n.SEMANTIC="SEMANTIC",n.INTERACTIVE="INTERACTIVE"})(T0||(T0={}));var E0;(function(n){n.ASSET="ASSET",n.STYLE="STYLE"})(E0||(E0={}));var w0;(function(n){n.INSERT="INSERT",n.REMOVE="REMOVE",n.REMOVE_STATIC="REMOVE_STATIC",n.OUTPAINT="OUTPAINT"})(w0||(w0={}));var C0;(function(n){n.OPTIMIZED="OPTIMIZED",n.LOSSLESS="LOSSLESS"})(C0||(C0={}));var A0;(function(n){n.SUPERVISED_FINE_TUNING="SUPERVISED_FINE_TUNING",n.PREFERENCE_TUNING="PREFERENCE_TUNING"})(A0||(A0={}));var N0;(function(n){n.STATE_UNSPECIFIED="STATE_UNSPECIFIED",n.STATE_PENDING="STATE_PENDING",n.STATE_ACTIVE="STATE_ACTIVE",n.STATE_FAILED="STATE_FAILED"})(N0||(N0={}));var R0;(function(n){n.STATE_UNSPECIFIED="STATE_UNSPECIFIED",n.PROCESSING="PROCESSING",n.ACTIVE="ACTIVE",n.FAILED="FAILED"})(R0||(R0={}));var M0;(function(n){n.SOURCE_UNSPECIFIED="SOURCE_UNSPECIFIED",n.UPLOADED="UPLOADED",n.GENERATED="GENERATED"})(M0||(M0={}));var I0;(function(n){n.TURN_COMPLETE_REASON_UNSPECIFIED="TURN_COMPLETE_REASON_UNSPECIFIED",n.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",n.RESPONSE_REJECTED="RESPONSE_REJECTED",n.NEED_MORE_INPUT="NEED_MORE_INPUT"})(I0||(I0={}));var k0;(function(n){n.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",n.TEXT="TEXT",n.IMAGE="IMAGE",n.VIDEO="VIDEO",n.AUDIO="AUDIO",n.DOCUMENT="DOCUMENT"})(k0||(k0={}));var D0;(function(n){n.START_SENSITIVITY_UNSPECIFIED="START_SENSITIVITY_UNSPECIFIED",n.START_SENSITIVITY_HIGH="START_SENSITIVITY_HIGH",n.START_SENSITIVITY_LOW="START_SENSITIVITY_LOW"})(D0||(D0={}));var U0;(function(n){n.END_SENSITIVITY_UNSPECIFIED="END_SENSITIVITY_UNSPECIFIED",n.END_SENSITIVITY_HIGH="END_SENSITIVITY_HIGH",n.END_SENSITIVITY_LOW="END_SENSITIVITY_LOW"})(U0||(U0={}));var P0;(function(n){n.ACTIVITY_HANDLING_UNSPECIFIED="ACTIVITY_HANDLING_UNSPECIFIED",n.START_OF_ACTIVITY_INTERRUPTS="START_OF_ACTIVITY_INTERRUPTS",n.NO_INTERRUPTION="NO_INTERRUPTION"})(P0||(P0={}));var O0;(function(n){n.TURN_COVERAGE_UNSPECIFIED="TURN_COVERAGE_UNSPECIFIED",n.TURN_INCLUDES_ONLY_ACTIVITY="TURN_INCLUDES_ONLY_ACTIVITY",n.TURN_INCLUDES_ALL_INPUT="TURN_INCLUDES_ALL_INPUT"})(O0||(O0={}));var L0;(function(n){n.SCALE_UNSPECIFIED="SCALE_UNSPECIFIED",n.C_MAJOR_A_MINOR="C_MAJOR_A_MINOR",n.D_FLAT_MAJOR_B_FLAT_MINOR="D_FLAT_MAJOR_B_FLAT_MINOR",n.D_MAJOR_B_MINOR="D_MAJOR_B_MINOR",n.E_FLAT_MAJOR_C_MINOR="E_FLAT_MAJOR_C_MINOR",n.E_MAJOR_D_FLAT_MINOR="E_MAJOR_D_FLAT_MINOR",n.F_MAJOR_D_MINOR="F_MAJOR_D_MINOR",n.G_FLAT_MAJOR_E_FLAT_MINOR="G_FLAT_MAJOR_E_FLAT_MINOR",n.G_MAJOR_E_MINOR="G_MAJOR_E_MINOR",n.A_FLAT_MAJOR_F_MINOR="A_FLAT_MAJOR_F_MINOR",n.A_MAJOR_G_FLAT_MINOR="A_MAJOR_G_FLAT_MINOR",n.B_FLAT_MAJOR_G_MINOR="B_FLAT_MAJOR_G_MINOR",n.B_MAJOR_A_FLAT_MINOR="B_MAJOR_A_FLAT_MINOR"})(L0||(L0={}));var q0;(function(n){n.MUSIC_GENERATION_MODE_UNSPECIFIED="MUSIC_GENERATION_MODE_UNSPECIFIED",n.QUALITY="QUALITY",n.DIVERSITY="DIVERSITY",n.VOCALIZATION="VOCALIZATION"})(q0||(q0={}));var Ls;(function(n){n.PLAYBACK_CONTROL_UNSPECIFIED="PLAYBACK_CONTROL_UNSPECIFIED",n.PLAY="PLAY",n.PAUSE="PAUSE",n.STOP="STOP",n.RESET_CONTEXT="RESET_CONTEXT"})(Ls||(Ls={}));class qc{constructor(e){const i={};for(const r of e.headers.entries())i[r[0]]=r[1];this.headers=i,this.responseInternal=e}json(){return this.responseInternal.json()}}class Fr{get text(){var e,i,r,a,l,c,h,g;if(((a=(r=(i=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||i===void 0?void 0:i.content)===null||r===void 0?void 0:r.parts)===null||a===void 0?void 0:a.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning text from the first one.");let p="",_=!1;const x=[];for(const S of(g=(h=(c=(l=this.candidates)===null||l===void 0?void 0:l[0])===null||c===void 0?void 0:c.content)===null||h===void 0?void 0:h.parts)!==null&&g!==void 0?g:[]){for(const[T,w]of Object.entries(S))T!=="text"&&T!=="thought"&&T!=="thoughtSignature"&&(w!==null||w!==void 0)&&x.push(T);if(typeof S.text=="string"){if(typeof S.thought=="boolean"&&S.thought)continue;_=!0,p+=S.text}}return x.length>0&&console.warn(`there are non-text parts ${x} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),_?p:void 0}get data(){var e,i,r,a,l,c,h,g;if(((a=(r=(i=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||i===void 0?void 0:i.content)===null||r===void 0?void 0:r.parts)===null||a===void 0?void 0:a.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning data from the first one.");let p="";const _=[];for(const x of(g=(h=(c=(l=this.candidates)===null||l===void 0?void 0:l[0])===null||c===void 0?void 0:c.content)===null||h===void 0?void 0:h.parts)!==null&&g!==void 0?g:[]){for(const[S,T]of Object.entries(x))S!=="inlineData"&&(T!==null||T!==void 0)&&_.push(S);x.inlineData&&typeof x.inlineData.data=="string"&&(p+=atob(x.inlineData.data))}return _.length>0&&console.warn(`there are non-data parts ${_} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),p.length>0?btoa(p):void 0}get functionCalls(){var e,i,r,a,l,c,h,g;if(((a=(r=(i=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||i===void 0?void 0:i.content)===null||r===void 0?void 0:r.parts)===null||a===void 0?void 0:a.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning function calls from the first one.");const p=(g=(h=(c=(l=this.candidates)===null||l===void 0?void 0:l[0])===null||c===void 0?void 0:c.content)===null||h===void 0?void 0:h.parts)===null||g===void 0?void 0:g.filter(_=>_.functionCall).map(_=>_.functionCall).filter(_=>_!==void 0);if((p==null?void 0:p.length)!==0)return p}get executableCode(){var e,i,r,a,l,c,h,g,p;if(((a=(r=(i=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||i===void 0?void 0:i.content)===null||r===void 0?void 0:r.parts)===null||a===void 0?void 0:a.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning executable code from the first one.");const _=(g=(h=(c=(l=this.candidates)===null||l===void 0?void 0:l[0])===null||c===void 0?void 0:c.content)===null||h===void 0?void 0:h.parts)===null||g===void 0?void 0:g.filter(x=>x.executableCode).map(x=>x.executableCode).filter(x=>x!==void 0);if((_==null?void 0:_.length)!==0)return(p=_==null?void 0:_[0])===null||p===void 0?void 0:p.code}get codeExecutionResult(){var e,i,r,a,l,c,h,g,p;if(((a=(r=(i=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||i===void 0?void 0:i.content)===null||r===void 0?void 0:r.parts)===null||a===void 0?void 0:a.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning code execution result from the first one.");const _=(g=(h=(c=(l=this.candidates)===null||l===void 0?void 0:l[0])===null||c===void 0?void 0:c.content)===null||h===void 0?void 0:h.parts)===null||g===void 0?void 0:g.filter(x=>x.codeExecutionResult).map(x=>x.codeExecutionResult).filter(x=>x!==void 0);if((_==null?void 0:_.length)!==0)return(p=_==null?void 0:_[0])===null||p===void 0?void 0:p.output}}class B0{}class G0{}class eS{}class tS{}class nS{}class iS{}class V0{}class H0{}class j0{}class sS{}class Oa{_fromAPIResponse({apiResponse:e,_isVertexAI:i}){const r=new Oa;let a;const l=e;return i?a=Hb(l):a=Vb(l),Object.assign(r,a),r}}class z0{}class $0{}class F0{}class rS{}class oS{}class aS{}class cd{_fromAPIResponse({apiResponse:e,_isVertexAI:i}){const r=new cd,l=Yb(e);return Object.assign(r,l),r}}class lS{}class uS{}class cS{}class J0{}class dS{get text(){var e,i,r;let a="",l=!1;const c=[];for(const h of(r=(i=(e=this.serverContent)===null||e===void 0?void 0:e.modelTurn)===null||i===void 0?void 0:i.parts)!==null&&r!==void 0?r:[]){for(const[g,p]of Object.entries(h))g!=="text"&&g!=="thought"&&p!==null&&c.push(g);if(typeof h.text=="string"){if(typeof h.thought=="boolean"&&h.thought)continue;l=!0,a+=h.text}}return c.length>0&&console.warn(`there are non-text parts ${c} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),l?a:void 0}get data(){var e,i,r;let a="";const l=[];for(const c of(r=(i=(e=this.serverContent)===null||e===void 0?void 0:e.modelTurn)===null||i===void 0?void 0:i.parts)!==null&&r!==void 0?r:[]){for(const[h,g]of Object.entries(c))h!=="inlineData"&&g!==null&&l.push(h);c.inlineData&&typeof c.inlineData.data=="string"&&(a+=atob(c.inlineData.data))}return l.length>0&&console.warn(`there are non-data parts ${l} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),a.length>0?btoa(a):void 0}}class fS{get audioChunk(){if(this.serverContent&&this.serverContent.audioChunks&&this.serverContent.audioChunks.length>0)return this.serverContent.audioChunks[0]}}class dd{_fromAPIResponse({apiResponse:e,_isVertexAI:i}){const r=new dd,l=Xg(e);return Object.assign(r,l),r}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Ie(n,e){if(!e||typeof e!="string")throw new Error("model is required and must be a string");if(e.includes("..")||e.includes("?")||e.includes("&"))throw new Error("invalid model parameter");if(n.isVertexAI()){if(e.startsWith("publishers/")||e.startsWith("projects/")||e.startsWith("models/"))return e;if(e.indexOf("/")>=0){const i=e.split("/",2);return`publishers/${i[0]}/models/${i[1]}`}else return`publishers/google/models/${e}`}else return e.startsWith("models/")||e.startsWith("tunedModels/")?e:`models/${e}`}function Zg(n,e){const i=Ie(n,e);return i?i.startsWith("publishers/")&&n.isVertexAI()?`projects/${n.getProject()}/locations/${n.getLocation()}/${i}`:i.startsWith("models/")&&n.isVertexAI()?`projects/${n.getProject()}/locations/${n.getLocation()}/publishers/google/${i}`:i:""}function Wg(n){return Array.isArray(n)?n.map(e=>La(e)):[La(n)]}function La(n){if(typeof n=="object"&&n!==null)return n;throw new Error(`Could not parse input as Blob. Unsupported blob type: ${typeof n}`)}function ey(n){const e=La(n);if(e.mimeType&&e.mimeType.startsWith("image/"))return e;throw new Error(`Unsupported mime type: ${e.mimeType}`)}function ty(n){const e=La(n);if(e.mimeType&&e.mimeType.startsWith("audio/"))return e;throw new Error(`Unsupported mime type: ${e.mimeType}`)}function K0(n){if(n==null)throw new Error("PartUnion is required");if(typeof n=="object")return n;if(typeof n=="string")return{text:n};throw new Error(`Unsupported part type: ${typeof n}`)}function ny(n){if(n==null||Array.isArray(n)&&n.length===0)throw new Error("PartListUnion is required");return Array.isArray(n)?n.map(e=>K0(e)):[K0(n)]}function Bc(n){return n!=null&&typeof n=="object"&&"parts"in n&&Array.isArray(n.parts)}function Y0(n){return n!=null&&typeof n=="object"&&"functionCall"in n}function Q0(n){return n!=null&&typeof n=="object"&&"functionResponse"in n}function Tt(n){if(n==null)throw new Error("ContentUnion is required");return Bc(n)?n:{role:"user",parts:ny(n)}}function fd(n,e){if(!e)return[];if(n.isVertexAI()&&Array.isArray(e))return e.flatMap(i=>{const r=Tt(i);return r.parts&&r.parts.length>0&&r.parts[0].text!==void 0?[r.parts[0].text]:[]});if(n.isVertexAI()){const i=Tt(e);return i.parts&&i.parts.length>0&&i.parts[0].text!==void 0?[i.parts[0].text]:[]}return Array.isArray(e)?e.map(i=>Tt(i)):[Tt(e)]}function nn(n){if(n==null||Array.isArray(n)&&n.length===0)throw new Error("contents are required");if(!Array.isArray(n)){if(Y0(n)||Q0(n))throw new Error("To specify functionCall or functionResponse parts, please wrap them in a Content object, specifying the role for them");return[Tt(n)]}const e=[],i=[],r=Bc(n[0]);for(const a of n){const l=Bc(a);if(l!=r)throw new Error("Mixing Content and Parts is not supported, please group the parts into a the appropriate Content objects and specify the roles for them");if(l)e.push(a);else{if(Y0(a)||Q0(a))throw new Error("To specify functionCall or functionResponse parts, please wrap them, and any other parts, in Content objects as appropriate, specifying the role for them");i.push(a)}}return r||e.push({role:"user",parts:ny(i)}),e}function hS(n,e){n.includes("null")&&(e.nullable=!0);const i=n.filter(r=>r!=="null");if(i.length===1)e.type=Object.values(hi).includes(i[0].toUpperCase())?i[0].toUpperCase():hi.TYPE_UNSPECIFIED;else{e.anyOf=[];for(const r of i)e.anyOf.push({type:Object.values(hi).includes(r.toUpperCase())?r.toUpperCase():hi.TYPE_UNSPECIFIED})}}function qs(n){const e={},i=["items"],r=["anyOf"],a=["properties"];if(n.type&&n.anyOf)throw new Error("type and anyOf cannot be both populated.");const l=n.anyOf;l!=null&&l.length==2&&(l[0].type==="null"?(e.nullable=!0,n=l[1]):l[1].type==="null"&&(e.nullable=!0,n=l[0])),n.type instanceof Array&&hS(n.type,e);for(const[c,h]of Object.entries(n))if(h!=null)if(c=="type"){if(h==="null")throw new Error("type: null can not be the only possible type for the field.");if(h instanceof Array)continue;e.type=Object.values(hi).includes(h.toUpperCase())?h.toUpperCase():hi.TYPE_UNSPECIFIED}else if(i.includes(c))e[c]=qs(h);else if(r.includes(c)){const g=[];for(const p of h){if(p.type=="null"){e.nullable=!0;continue}g.push(qs(p))}e[c]=g}else if(a.includes(c)){const g={};for(const[p,_]of Object.entries(h))g[p]=qs(_);e[c]=g}else{if(c==="additionalProperties")continue;e[c]=h}return e}function hd(n){return qs(n)}function pd(n){if(typeof n=="object")return n;if(typeof n=="string")return{voiceConfig:{prebuiltVoiceConfig:{voiceName:n}}};throw new Error(`Unsupported speechConfig type: ${typeof n}`)}function md(n){if("multiSpeakerVoiceConfig"in n)throw new Error("multiSpeakerVoiceConfig is not supported in the live API.");return n}function $s(n){if(n.functionDeclarations)for(const e of n.functionDeclarations)e.parameters&&(Object.keys(e.parameters).includes("$schema")?e.parametersJsonSchema||(e.parametersJsonSchema=e.parameters,delete e.parameters):e.parameters=qs(e.parameters)),e.response&&(Object.keys(e.response).includes("$schema")?e.responseJsonSchema||(e.responseJsonSchema=e.response,delete e.response):e.response=qs(e.response));return n}function Fs(n){if(n==null)throw new Error("tools is required");if(!Array.isArray(n))throw new Error("tools is required and must be an array of Tools");const e=[];for(const i of n)e.push(i);return e}function pS(n,e,i,r=1){const a=!e.startsWith(`${i}/`)&&e.split("/").length===r;return n.isVertexAI()?e.startsWith("projects/")?e:e.startsWith("locations/")?`projects/${n.getProject()}/${e}`:e.startsWith(`${i}/`)?`projects/${n.getProject()}/locations/${n.getLocation()}/${e}`:a?`projects/${n.getProject()}/locations/${n.getLocation()}/${i}/${e}`:e:a?`${i}/${e}`:e}function qn(n,e){if(typeof e!="string")throw new Error("name must be a string");return pS(n,e,"cachedContents")}function iy(n){switch(n){case"STATE_UNSPECIFIED":return"JOB_STATE_UNSPECIFIED";case"CREATING":return"JOB_STATE_RUNNING";case"ACTIVE":return"JOB_STATE_SUCCEEDED";case"FAILED":return"JOB_STATE_FAILED";default:return n}}function mi(n){return ud(n)}function mS(n){return n!=null&&typeof n=="object"&&"name"in n}function gS(n){return n!=null&&typeof n=="object"&&"video"in n}function yS(n){return n!=null&&typeof n=="object"&&"uri"in n}function sy(n){var e;let i;if(mS(n)&&(i=n.name),!(yS(n)&&(i=n.uri,i===void 0))&&!(gS(n)&&(i=(e=n.video)===null||e===void 0?void 0:e.uri,i===void 0))){if(typeof n=="string"&&(i=n),i===void 0)throw new Error("Could not extract file name from the provided input.");if(i.startsWith("https://")){const a=i.split("files/")[1].match(/[a-z0-9]+/);if(a===null)throw new Error(`Could not extract file name from URI ${i}`);i=a[0]}else i.startsWith("files/")&&(i=i.split("files/")[1]);return i}}function ry(n,e){let i;return n.isVertexAI()?i=e?"publishers/google/models":"models":i=e?"models":"tunedModels",i}function oy(n){for(const e of["models","tunedModels","publisherModels"])if(vS(n,e))return n[e];return[]}function vS(n,e){return n!==null&&typeof n=="object"&&e in n}function _S(n,e={}){const i=n,r={name:i.name,description:i.description,parametersJsonSchema:i.inputSchema};return i.outputSchema&&(r.responseJsonSchema=i.outputSchema),e.behavior&&(r.behavior=e.behavior),{functionDeclarations:[r]}}function xS(n,e={}){const i=[],r=new Set;for(const a of n){const l=a.name;if(r.has(l))throw new Error(`Duplicate function name ${l} found in MCP tools. Please ensure function names are unique.`);r.add(l);const c=_S(a,e);c.functionDeclarations&&i.push(...c.functionDeclarations)}return{functionDeclarations:i}}function ay(n,e){let i;if(typeof e=="string")if(n.isVertexAI())if(e.startsWith("gs://"))i={format:"jsonl",gcsUri:[e]};else if(e.startsWith("bq://"))i={format:"bigquery",bigqueryUri:e};else throw new Error(`Unsupported string source for Vertex AI: ${e}`);else if(e.startsWith("files/"))i={fileName:e};else throw new Error(`Unsupported string source for Gemini API: ${e}`);else if(Array.isArray(e)){if(n.isVertexAI())throw new Error("InlinedRequest[] is not supported in Vertex AI.");i={inlinedRequests:e}}else i=e;const r=[i.gcsUri,i.bigqueryUri].filter(Boolean).length,a=[i.inlinedRequests,i.fileName].filter(Boolean).length;if(n.isVertexAI()){if(a>0||r!==1)throw new Error("Exactly one of `gcsUri` or `bigqueryUri` must be set for Vertex AI.")}else if(r>0||a!==1)throw new Error("Exactly one of `inlinedRequests`, `fileName`, must be set for Gemini API.");return i}function bS(n){if(typeof n!="string")return n;const e=n;if(e.startsWith("gs://"))return{format:"jsonl",gcsUri:e};if(e.startsWith("bq://"))return{format:"bigquery",bigqueryUri:e};throw new Error(`Unsupported destination: ${e}`)}function ly(n){if(typeof n!="object"||n===null)return{};const e=n,i=e.inlinedResponses;if(typeof i!="object"||i===null)return n;const a=i.inlinedResponses;if(!Array.isArray(a)||a.length===0)return n;let l=!1;for(const c of a){if(typeof c!="object"||c===null)continue;const g=c.response;if(typeof g!="object"||g===null)continue;if(g.embedding!==void 0){l=!0;break}}return l&&(e.inlinedEmbedContentResponses=e.inlinedResponses,delete e.inlinedResponses),n}function Js(n,e){const i=e;if(!n.isVertexAI()){if(/batches\/[^/]+$/.test(i))return i.split("/").pop();throw new Error(`Invalid batch job name: ${i}.`)}if(/^projects\/[^/]+\/locations\/[^/]+\/batchPredictionJobs\/[^/]+$/.test(i))return i.split("/").pop();if(/^\d+$/.test(i))return i;throw new Error(`Invalid batch job name: ${i}.`)}function uy(n){const e=n;return e==="BATCH_STATE_UNSPECIFIED"?"JOB_STATE_UNSPECIFIED":e==="BATCH_STATE_PENDING"?"JOB_STATE_PENDING":e==="BATCH_STATE_RUNNING"?"JOB_STATE_RUNNING":e==="BATCH_STATE_SUCCEEDED"?"JOB_STATE_SUCCEEDED":e==="BATCH_STATE_FAILED"?"JOB_STATE_FAILED":e==="BATCH_STATE_CANCELLED"?"JOB_STATE_CANCELLED":e==="BATCH_STATE_EXPIRED"?"JOB_STATE_EXPIRED":e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function SS(n){const e={},i=d(n,["responsesFile"]);i!=null&&f(e,["fileName"],i);const r=d(n,["inlinedResponses","inlinedResponses"]);if(r!=null){let l=r;Array.isArray(l)&&(l=l.map(c=>nT(c))),f(e,["inlinedResponses"],l)}const a=d(n,["inlinedEmbedContentResponses","inlinedResponses"]);if(a!=null){let l=a;Array.isArray(l)&&(l=l.map(c=>c)),f(e,["inlinedEmbedContentResponses"],l)}return e}function TS(n){const e={},i=d(n,["predictionsFormat"]);i!=null&&f(e,["format"],i);const r=d(n,["gcsDestination","outputUriPrefix"]);r!=null&&f(e,["gcsUri"],r);const a=d(n,["bigqueryDestination","outputUri"]);return a!=null&&f(e,["bigqueryUri"],a),e}function ES(n){const e={},i=d(n,["format"]);i!=null&&f(e,["predictionsFormat"],i);const r=d(n,["gcsUri"]);r!=null&&f(e,["gcsDestination","outputUriPrefix"],r);const a=d(n,["bigqueryUri"]);if(a!=null&&f(e,["bigqueryDestination","outputUri"],a),d(n,["fileName"])!==void 0)throw new Error("fileName parameter is not supported in Vertex AI.");if(d(n,["inlinedResponses"])!==void 0)throw new Error("inlinedResponses parameter is not supported in Vertex AI.");if(d(n,["inlinedEmbedContentResponses"])!==void 0)throw new Error("inlinedEmbedContentResponses parameter is not supported in Vertex AI.");return e}function Ua(n){const e={},i=d(n,["name"]);i!=null&&f(e,["name"],i);const r=d(n,["metadata","displayName"]);r!=null&&f(e,["displayName"],r);const a=d(n,["metadata","state"]);a!=null&&f(e,["state"],uy(a));const l=d(n,["metadata","createTime"]);l!=null&&f(e,["createTime"],l);const c=d(n,["metadata","endTime"]);c!=null&&f(e,["endTime"],c);const h=d(n,["metadata","updateTime"]);h!=null&&f(e,["updateTime"],h);const g=d(n,["metadata","model"]);g!=null&&f(e,["model"],g);const p=d(n,["metadata","output"]);return p!=null&&f(e,["dest"],SS(ly(p))),e}function Gc(n){const e={},i=d(n,["name"]);i!=null&&f(e,["name"],i);const r=d(n,["displayName"]);r!=null&&f(e,["displayName"],r);const a=d(n,["state"]);a!=null&&f(e,["state"],uy(a));const l=d(n,["error"]);l!=null&&f(e,["error"],l);const c=d(n,["createTime"]);c!=null&&f(e,["createTime"],c);const h=d(n,["startTime"]);h!=null&&f(e,["startTime"],h);const g=d(n,["endTime"]);g!=null&&f(e,["endTime"],g);const p=d(n,["updateTime"]);p!=null&&f(e,["updateTime"],p);const _=d(n,["model"]);_!=null&&f(e,["model"],_);const x=d(n,["inputConfig"]);x!=null&&f(e,["src"],wS(x));const S=d(n,["outputConfig"]);S!=null&&f(e,["dest"],TS(ly(S)));const T=d(n,["completionStats"]);return T!=null&&f(e,["completionStats"],T),e}function wS(n){const e={},i=d(n,["instancesFormat"]);i!=null&&f(e,["format"],i);const r=d(n,["gcsSource","uris"]);r!=null&&f(e,["gcsUri"],r);const a=d(n,["bigquerySource","inputUri"]);return a!=null&&f(e,["bigqueryUri"],a),e}function CS(n,e){const i={};if(d(e,["format"])!==void 0)throw new Error("format parameter is not supported in Gemini API.");if(d(e,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");if(d(e,["bigqueryUri"])!==void 0)throw new Error("bigqueryUri parameter is not supported in Gemini API.");const r=d(e,["fileName"]);r!=null&&f(i,["fileName"],r);const a=d(e,["inlinedRequests"]);if(a!=null){let l=a;Array.isArray(l)&&(l=l.map(c=>tT(n,c))),f(i,["requests","requests"],l)}return i}function AS(n){const e={},i=d(n,["format"]);i!=null&&f(e,["instancesFormat"],i);const r=d(n,["gcsUri"]);r!=null&&f(e,["gcsSource","uris"],r);const a=d(n,["bigqueryUri"]);if(a!=null&&f(e,["bigquerySource","inputUri"],a),d(n,["fileName"])!==void 0)throw new Error("fileName parameter is not supported in Vertex AI.");if(d(n,["inlinedRequests"])!==void 0)throw new Error("inlinedRequests parameter is not supported in Vertex AI.");return e}function NS(n){const e={},i=d(n,["data"]);if(i!=null&&f(e,["data"],i),d(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const r=d(n,["mimeType"]);return r!=null&&f(e,["mimeType"],r),e}function RS(n,e){const i={},r=d(e,["name"]);return r!=null&&f(i,["_url","name"],Js(n,r)),i}function MS(n,e){const i={},r=d(e,["name"]);return r!=null&&f(i,["_url","name"],Js(n,r)),i}function IS(n){const e={},i=d(n,["content"]);i!=null&&f(e,["content"],i);const r=d(n,["citationMetadata"]);r!=null&&f(e,["citationMetadata"],kS(r));const a=d(n,["tokenCount"]);a!=null&&f(e,["tokenCount"],a);const l=d(n,["finishReason"]);l!=null&&f(e,["finishReason"],l);const c=d(n,["avgLogprobs"]);c!=null&&f(e,["avgLogprobs"],c);const h=d(n,["groundingMetadata"]);h!=null&&f(e,["groundingMetadata"],h);const g=d(n,["index"]);g!=null&&f(e,["index"],g);const p=d(n,["logprobsResult"]);p!=null&&f(e,["logprobsResult"],p);const _=d(n,["safetyRatings"]);if(_!=null){let S=_;Array.isArray(S)&&(S=S.map(T=>T)),f(e,["safetyRatings"],S)}const x=d(n,["urlContextMetadata"]);return x!=null&&f(e,["urlContextMetadata"],x),e}function kS(n){const e={},i=d(n,["citationSources"]);if(i!=null){let r=i;Array.isArray(r)&&(r=r.map(a=>a)),f(e,["citations"],r)}return e}function cy(n){const e={},i=d(n,["parts"]);if(i!=null){let a=i;Array.isArray(a)&&(a=a.map(l=>uT(l))),f(e,["parts"],a)}const r=d(n,["role"]);return r!=null&&f(e,["role"],r),e}function DS(n,e){const i={},r=d(n,["displayName"]);if(e!==void 0&&r!=null&&f(e,["batch","displayName"],r),d(n,["dest"])!==void 0)throw new Error("dest parameter is not supported in Gemini API.");return i}function US(n,e){const i={},r=d(n,["displayName"]);e!==void 0&&r!=null&&f(e,["displayName"],r);const a=d(n,["dest"]);return e!==void 0&&a!=null&&f(e,["outputConfig"],ES(bS(a))),i}function X0(n,e){const i={},r=d(e,["model"]);r!=null&&f(i,["_url","model"],Ie(n,r));const a=d(e,["src"]);a!=null&&f(i,["batch","inputConfig"],CS(n,ay(n,a)));const l=d(e,["config"]);return l!=null&&DS(l,i),i}function PS(n,e){const i={},r=d(e,["model"]);r!=null&&f(i,["model"],Ie(n,r));const a=d(e,["src"]);a!=null&&f(i,["inputConfig"],AS(ay(n,a)));const l=d(e,["config"]);return l!=null&&US(l,i),i}function OS(n,e){const i={},r=d(n,["displayName"]);return e!==void 0&&r!=null&&f(e,["batch","displayName"],r),i}function LS(n,e){const i={},r=d(e,["model"]);r!=null&&f(i,["_url","model"],Ie(n,r));const a=d(e,["src"]);a!=null&&f(i,["batch","inputConfig"],zS(n,a));const l=d(e,["config"]);return l!=null&&OS(l,i),i}function qS(n,e){const i={},r=d(e,["name"]);return r!=null&&f(i,["_url","name"],Js(n,r)),i}function BS(n,e){const i={},r=d(e,["name"]);return r!=null&&f(i,["_url","name"],Js(n,r)),i}function GS(n){const e={},i=d(n,["sdkHttpResponse"]);i!=null&&f(e,["sdkHttpResponse"],i);const r=d(n,["name"]);r!=null&&f(e,["name"],r);const a=d(n,["done"]);a!=null&&f(e,["done"],a);const l=d(n,["error"]);return l!=null&&f(e,["error"],l),e}function VS(n){const e={},i=d(n,["sdkHttpResponse"]);i!=null&&f(e,["sdkHttpResponse"],i);const r=d(n,["name"]);r!=null&&f(e,["name"],r);const a=d(n,["done"]);a!=null&&f(e,["done"],a);const l=d(n,["error"]);return l!=null&&f(e,["error"],l),e}function HS(n,e){const i={},r=d(e,["contents"]);if(r!=null){let l=fd(n,r);Array.isArray(l)&&(l=l.map(c=>c)),f(i,["requests[]","request","content"],l)}const a=d(e,["config"]);return a!=null&&(f(i,["_self"],jS(a,i)),Bb(i,{"requests[].*":"requests[].request.*"})),i}function jS(n,e){const i={},r=d(n,["taskType"]);e!==void 0&&r!=null&&f(e,["requests[]","taskType"],r);const a=d(n,["title"]);e!==void 0&&a!=null&&f(e,["requests[]","title"],a);const l=d(n,["outputDimensionality"]);if(e!==void 0&&l!=null&&f(e,["requests[]","outputDimensionality"],l),d(n,["mimeType"])!==void 0)throw new Error("mimeType parameter is not supported in Gemini API.");if(d(n,["autoTruncate"])!==void 0)throw new Error("autoTruncate parameter is not supported in Gemini API.");return i}function zS(n,e){const i={},r=d(e,["fileName"]);r!=null&&f(i,["file_name"],r);const a=d(e,["inlinedRequests"]);return a!=null&&f(i,["requests"],HS(n,a)),i}function $S(n){const e={};if(d(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const i=d(n,["fileUri"]);i!=null&&f(e,["fileUri"],i);const r=d(n,["mimeType"]);return r!=null&&f(e,["mimeType"],r),e}function FS(n){const e={},i=d(n,["id"]);i!=null&&f(e,["id"],i);const r=d(n,["args"]);r!=null&&f(e,["args"],r);const a=d(n,["name"]);if(a!=null&&f(e,["name"],a),d(n,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(d(n,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function JS(n){const e={},i=d(n,["mode"]);i!=null&&f(e,["mode"],i);const r=d(n,["allowedFunctionNames"]);if(r!=null&&f(e,["allowedFunctionNames"],r),d(n,["streamFunctionCallArguments"])!==void 0)throw new Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return e}function KS(n,e,i){const r={},a=d(e,["systemInstruction"]);i!==void 0&&a!=null&&f(i,["systemInstruction"],cy(Tt(a)));const l=d(e,["temperature"]);l!=null&&f(r,["temperature"],l);const c=d(e,["topP"]);c!=null&&f(r,["topP"],c);const h=d(e,["topK"]);h!=null&&f(r,["topK"],h);const g=d(e,["candidateCount"]);g!=null&&f(r,["candidateCount"],g);const p=d(e,["maxOutputTokens"]);p!=null&&f(r,["maxOutputTokens"],p);const _=d(e,["stopSequences"]);_!=null&&f(r,["stopSequences"],_);const x=d(e,["responseLogprobs"]);x!=null&&f(r,["responseLogprobs"],x);const S=d(e,["logprobs"]);S!=null&&f(r,["logprobs"],S);const T=d(e,["presencePenalty"]);T!=null&&f(r,["presencePenalty"],T);const w=d(e,["frequencyPenalty"]);w!=null&&f(r,["frequencyPenalty"],w);const C=d(e,["seed"]);C!=null&&f(r,["seed"],C);const M=d(e,["responseMimeType"]);M!=null&&f(r,["responseMimeType"],M);const D=d(e,["responseSchema"]);D!=null&&f(r,["responseSchema"],hd(D));const B=d(e,["responseJsonSchema"]);if(B!=null&&f(r,["responseJsonSchema"],B),d(e,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(d(e,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const I=d(e,["safetySettings"]);if(i!==void 0&&I!=null){let re=I;Array.isArray(re)&&(re=re.map(ve=>cT(ve))),f(i,["safetySettings"],re)}const z=d(e,["tools"]);if(i!==void 0&&z!=null){let re=Fs(z);Array.isArray(re)&&(re=re.map(ve=>fT($s(ve)))),f(i,["tools"],re)}const U=d(e,["toolConfig"]);if(i!==void 0&&U!=null&&f(i,["toolConfig"],dT(U)),d(e,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const K=d(e,["cachedContent"]);i!==void 0&&K!=null&&f(i,["cachedContent"],qn(n,K));const G=d(e,["responseModalities"]);G!=null&&f(r,["responseModalities"],G);const X=d(e,["mediaResolution"]);X!=null&&f(r,["mediaResolution"],X);const Y=d(e,["speechConfig"]);if(Y!=null&&f(r,["speechConfig"],pd(Y)),d(e,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");const ce=d(e,["thinkingConfig"]);ce!=null&&f(r,["thinkingConfig"],ce);const he=d(e,["imageConfig"]);return he!=null&&f(r,["imageConfig"],eT(he)),r}function YS(n){const e={},i=d(n,["sdkHttpResponse"]);i!=null&&f(e,["sdkHttpResponse"],i);const r=d(n,["candidates"]);if(r!=null){let g=r;Array.isArray(g)&&(g=g.map(p=>IS(p))),f(e,["candidates"],g)}const a=d(n,["modelVersion"]);a!=null&&f(e,["modelVersion"],a);const l=d(n,["promptFeedback"]);l!=null&&f(e,["promptFeedback"],l);const c=d(n,["responseId"]);c!=null&&f(e,["responseId"],c);const h=d(n,["usageMetadata"]);return h!=null&&f(e,["usageMetadata"],h),e}function QS(n,e){const i={},r=d(e,["name"]);return r!=null&&f(i,["_url","name"],Js(n,r)),i}function XS(n,e){const i={},r=d(e,["name"]);return r!=null&&f(i,["_url","name"],Js(n,r)),i}function ZS(n){const e={};if(d(n,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const i=d(n,["enableWidget"]);return i!=null&&f(e,["enableWidget"],i),e}function WS(n){const e={};if(d(n,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(d(n,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const i=d(n,["timeRangeFilter"]);return i!=null&&f(e,["timeRangeFilter"],i),e}function eT(n){const e={},i=d(n,["aspectRatio"]);i!=null&&f(e,["aspectRatio"],i);const r=d(n,["imageSize"]);if(r!=null&&f(e,["imageSize"],r),d(n,["outputMimeType"])!==void 0)throw new Error("outputMimeType parameter is not supported in Gemini API.");if(d(n,["outputCompressionQuality"])!==void 0)throw new Error("outputCompressionQuality parameter is not supported in Gemini API.");return e}function tT(n,e){const i={},r=d(e,["model"]);r!=null&&f(i,["request","model"],Ie(n,r));const a=d(e,["contents"]);if(a!=null){let h=nn(a);Array.isArray(h)&&(h=h.map(g=>cy(g))),f(i,["request","contents"],h)}const l=d(e,["metadata"]);l!=null&&f(i,["metadata"],l);const c=d(e,["config"]);return c!=null&&f(i,["request","generationConfig"],KS(n,c,d(i,["request"],{}))),i}function nT(n){const e={},i=d(n,["response"]);i!=null&&f(e,["response"],YS(i));const r=d(n,["error"]);return r!=null&&f(e,["error"],r),e}function iT(n,e){const i={},r=d(n,["pageSize"]);e!==void 0&&r!=null&&f(e,["_query","pageSize"],r);const a=d(n,["pageToken"]);if(e!==void 0&&a!=null&&f(e,["_query","pageToken"],a),d(n,["filter"])!==void 0)throw new Error("filter parameter is not supported in Gemini API.");return i}function sT(n,e){const i={},r=d(n,["pageSize"]);e!==void 0&&r!=null&&f(e,["_query","pageSize"],r);const a=d(n,["pageToken"]);e!==void 0&&a!=null&&f(e,["_query","pageToken"],a);const l=d(n,["filter"]);return e!==void 0&&l!=null&&f(e,["_query","filter"],l),i}function rT(n){const e={},i=d(n,["config"]);return i!=null&&iT(i,e),e}function oT(n){const e={},i=d(n,["config"]);return i!=null&&sT(i,e),e}function aT(n){const e={},i=d(n,["sdkHttpResponse"]);i!=null&&f(e,["sdkHttpResponse"],i);const r=d(n,["nextPageToken"]);r!=null&&f(e,["nextPageToken"],r);const a=d(n,["operations"]);if(a!=null){let l=a;Array.isArray(l)&&(l=l.map(c=>Ua(c))),f(e,["batchJobs"],l)}return e}function lT(n){const e={},i=d(n,["sdkHttpResponse"]);i!=null&&f(e,["sdkHttpResponse"],i);const r=d(n,["nextPageToken"]);r!=null&&f(e,["nextPageToken"],r);const a=d(n,["batchPredictionJobs"]);if(a!=null){let l=a;Array.isArray(l)&&(l=l.map(c=>Gc(c))),f(e,["batchJobs"],l)}return e}function uT(n){const e={},i=d(n,["mediaResolution"]);i!=null&&f(e,["mediaResolution"],i);const r=d(n,["codeExecutionResult"]);r!=null&&f(e,["codeExecutionResult"],r);const a=d(n,["executableCode"]);a!=null&&f(e,["executableCode"],a);const l=d(n,["fileData"]);l!=null&&f(e,["fileData"],$S(l));const c=d(n,["functionCall"]);c!=null&&f(e,["functionCall"],FS(c));const h=d(n,["functionResponse"]);h!=null&&f(e,["functionResponse"],h);const g=d(n,["inlineData"]);g!=null&&f(e,["inlineData"],NS(g));const p=d(n,["text"]);p!=null&&f(e,["text"],p);const _=d(n,["thought"]);_!=null&&f(e,["thought"],_);const x=d(n,["thoughtSignature"]);x!=null&&f(e,["thoughtSignature"],x);const S=d(n,["videoMetadata"]);return S!=null&&f(e,["videoMetadata"],S),e}function cT(n){const e={},i=d(n,["category"]);if(i!=null&&f(e,["category"],i),d(n,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");const r=d(n,["threshold"]);return r!=null&&f(e,["threshold"],r),e}function dT(n){const e={},i=d(n,["functionCallingConfig"]);i!=null&&f(e,["functionCallingConfig"],JS(i));const r=d(n,["retrievalConfig"]);return r!=null&&f(e,["retrievalConfig"],r),e}function fT(n){const e={},i=d(n,["functionDeclarations"]);if(i!=null){let _=i;Array.isArray(_)&&(_=_.map(x=>x)),f(e,["functionDeclarations"],_)}if(d(n,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const r=d(n,["googleSearchRetrieval"]);r!=null&&f(e,["googleSearchRetrieval"],r);const a=d(n,["computerUse"]);a!=null&&f(e,["computerUse"],a);const l=d(n,["fileSearch"]);l!=null&&f(e,["fileSearch"],l);const c=d(n,["codeExecution"]);if(c!=null&&f(e,["codeExecution"],c),d(n,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const h=d(n,["googleMaps"]);h!=null&&f(e,["googleMaps"],ZS(h));const g=d(n,["googleSearch"]);g!=null&&f(e,["googleSearch"],WS(g));const p=d(n,["urlContext"]);return p!=null&&f(e,["urlContext"],p),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var Pn;(function(n){n.PAGED_ITEM_BATCH_JOBS="batchJobs",n.PAGED_ITEM_MODELS="models",n.PAGED_ITEM_TUNING_JOBS="tuningJobs",n.PAGED_ITEM_FILES="files",n.PAGED_ITEM_CACHED_CONTENTS="cachedContents",n.PAGED_ITEM_FILE_SEARCH_STORES="fileSearchStores",n.PAGED_ITEM_DOCUMENTS="documents"})(Pn||(Pn={}));class ji{constructor(e,i,r,a){this.pageInternal=[],this.paramsInternal={},this.requestInternal=i,this.init(e,r,a)}init(e,i,r){var a,l;this.nameInternal=e,this.pageInternal=i[this.nameInternal]||[],this.sdkHttpResponseInternal=i==null?void 0:i.sdkHttpResponse,this.idxInternal=0;let c={config:{}};!r||Object.keys(r).length===0?c={config:{}}:typeof r=="object"?c=Object.assign({},r):c=r,c.config&&(c.config.pageToken=i.nextPageToken),this.paramsInternal=c,this.pageInternalSize=(l=(a=c.config)===null||a===void 0?void 0:a.pageSize)!==null&&l!==void 0?l:this.pageInternal.length}initNextPage(e){this.init(this.nameInternal,e,this.paramsInternal)}get page(){return this.pageInternal}get name(){return this.nameInternal}get pageSize(){return this.pageInternalSize}get sdkHttpResponse(){return this.sdkHttpResponseInternal}get params(){return this.paramsInternal}get pageLength(){return this.pageInternal.length}getItem(e){return this.pageInternal[e]}[Symbol.asyncIterator](){return{next:async()=>{if(this.idxInternal>=this.pageLength)if(this.hasNextPage())await this.nextPage();else return{value:void 0,done:!0};const e=this.getItem(this.idxInternal);return this.idxInternal+=1,{value:e,done:!1}},return:async()=>({value:void 0,done:!0})}}async nextPage(){if(!this.hasNextPage())throw new Error("No more pages to fetch.");const e=await this.requestInternal(this.params);return this.initNextPage(e),this.page}hasNextPage(){var e;return((e=this.params.config)===null||e===void 0?void 0:e.pageToken)!==void 0}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class hT extends Ln{constructor(e){super(),this.apiClient=e,this.create=async i=>(this.apiClient.isVertexAI()&&(i.config=this.formatDestination(i.src,i.config)),this.createInternal(i)),this.createEmbeddings=async i=>{if(console.warn("batches.createEmbeddings() is experimental and may change without notice."),this.apiClient.isVertexAI())throw new Error("Vertex AI does not support batches.createEmbeddings.");return this.createEmbeddingsInternal(i)},this.list=async(i={})=>new ji(Pn.PAGED_ITEM_BATCH_JOBS,r=>this.listInternal(r),await this.listInternal(i),i)}createInlinedGenerateContentRequest(e){const i=X0(this.apiClient,e),r=i._url,a=ee("{model}:batchGenerateContent",r),h=i.batch.inputConfig.requests,g=h.requests,p=[];for(const _ of g){const x=Object.assign({},_);if(x.systemInstruction){const S=x.systemInstruction;delete x.systemInstruction;const T=x.request;T.systemInstruction=S,x.request=T}p.push(x)}return h.requests=p,delete i.config,delete i._url,delete i._query,{path:a,body:i}}getGcsUri(e){if(typeof e=="string")return e.startsWith("gs://")?e:void 0;if(!Array.isArray(e)&&e.gcsUri&&e.gcsUri.length>0)return e.gcsUri[0]}getBigqueryUri(e){if(typeof e=="string")return e.startsWith("bq://")?e:void 0;if(!Array.isArray(e))return e.bigqueryUri}formatDestination(e,i){const r=i?Object.assign({},i):{},a=Date.now().toString();if(r.displayName||(r.displayName=`genaiBatchJob_${a}`),r.dest===void 0){const l=this.getGcsUri(e),c=this.getBigqueryUri(e);if(l)l.endsWith(".jsonl")?r.dest=`${l.slice(0,-6)}/dest`:r.dest=`${l}_dest_${a}`;else if(c)r.dest=`${c}_dest_${a}`;else throw new Error("Unsupported source for Vertex AI: No GCS or BigQuery URI found.")}return r}async createInternal(e){var i,r,a,l;let c,h="",g={};if(this.apiClient.isVertexAI()){const p=PS(this.apiClient,e);return h=ee("batchPredictionJobs",p._url),g=p._query,delete p._url,delete p._query,c=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(_=>_.json()),c.then(_=>Gc(_))}else{const p=X0(this.apiClient,e);return h=ee("{model}:batchGenerateContent",p._url),g=p._query,delete p._url,delete p._query,c=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(a=e.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(_=>_.json()),c.then(_=>Ua(_))}}async createEmbeddingsInternal(e){var i,r;let a,l="",c={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const h=LS(this.apiClient,e);return l=ee("{model}:asyncBatchEmbedContent",h._url),c=h._query,delete h._url,delete h._query,a=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(g=>g.json()),a.then(g=>Ua(g))}}async get(e){var i,r,a,l;let c,h="",g={};if(this.apiClient.isVertexAI()){const p=XS(this.apiClient,e);return h=ee("batchPredictionJobs/{name}",p._url),g=p._query,delete p._url,delete p._query,c=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(_=>_.json()),c.then(_=>Gc(_))}else{const p=QS(this.apiClient,e);return h=ee("batches/{name}",p._url),g=p._query,delete p._url,delete p._query,c=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(a=e.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(_=>_.json()),c.then(_=>Ua(_))}}async cancel(e){var i,r,a,l;let c="",h={};if(this.apiClient.isVertexAI()){const g=MS(this.apiClient,e);c=ee("batchPredictionJobs/{name}:cancel",g._url),h=g._query,delete g._url,delete g._query,await this.apiClient.request({path:c,queryParams:h,body:JSON.stringify(g),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal})}else{const g=RS(this.apiClient,e);c=ee("batches/{name}:cancel",g._url),h=g._query,delete g._url,delete g._query,await this.apiClient.request({path:c,queryParams:h,body:JSON.stringify(g),httpMethod:"POST",httpOptions:(a=e.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal})}}async listInternal(e){var i,r,a,l;let c,h="",g={};if(this.apiClient.isVertexAI()){const p=oT(e);return h=ee("batchPredictionJobs",p._url),g=p._query,delete p._url,delete p._query,c=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(_=>_.json().then(x=>{const S=x;return S.sdkHttpResponse={headers:_.headers},S})),c.then(_=>{const x=lT(_),S=new J0;return Object.assign(S,x),S})}else{const p=rT(e);return h=ee("batches",p._url),g=p._query,delete p._url,delete p._query,c=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(a=e.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(_=>_.json().then(x=>{const S=x;return S.sdkHttpResponse={headers:_.headers},S})),c.then(_=>{const x=aT(_),S=new J0;return Object.assign(S,x),S})}}async delete(e){var i,r,a,l;let c,h="",g={};if(this.apiClient.isVertexAI()){const p=BS(this.apiClient,e);return h=ee("batchPredictionJobs/{name}",p._url),g=p._query,delete p._url,delete p._query,c=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(p),httpMethod:"DELETE",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(_=>_.json().then(x=>{const S=x;return S.sdkHttpResponse={headers:_.headers},S})),c.then(_=>VS(_))}else{const p=qS(this.apiClient,e);return h=ee("batches/{name}",p._url),g=p._query,delete p._url,delete p._query,c=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(p),httpMethod:"DELETE",httpOptions:(a=e.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(_=>_.json().then(x=>{const S=x;return S.sdkHttpResponse={headers:_.headers},S})),c.then(_=>GS(_))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function pT(n){const e={},i=d(n,["data"]);if(i!=null&&f(e,["data"],i),d(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const r=d(n,["mimeType"]);return r!=null&&f(e,["mimeType"],r),e}function Z0(n){const e={},i=d(n,["parts"]);if(i!=null){let a=i;Array.isArray(a)&&(a=a.map(l=>LT(l))),f(e,["parts"],a)}const r=d(n,["role"]);return r!=null&&f(e,["role"],r),e}function mT(n,e){const i={},r=d(n,["ttl"]);e!==void 0&&r!=null&&f(e,["ttl"],r);const a=d(n,["expireTime"]);e!==void 0&&a!=null&&f(e,["expireTime"],a);const l=d(n,["displayName"]);e!==void 0&&l!=null&&f(e,["displayName"],l);const c=d(n,["contents"]);if(e!==void 0&&c!=null){let _=nn(c);Array.isArray(_)&&(_=_.map(x=>Z0(x))),f(e,["contents"],_)}const h=d(n,["systemInstruction"]);e!==void 0&&h!=null&&f(e,["systemInstruction"],Z0(Tt(h)));const g=d(n,["tools"]);if(e!==void 0&&g!=null){let _=g;Array.isArray(_)&&(_=_.map(x=>BT(x))),f(e,["tools"],_)}const p=d(n,["toolConfig"]);if(e!==void 0&&p!=null&&f(e,["toolConfig"],qT(p)),d(n,["kmsKeyName"])!==void 0)throw new Error("kmsKeyName parameter is not supported in Gemini API.");return i}function gT(n,e){const i={},r=d(n,["ttl"]);e!==void 0&&r!=null&&f(e,["ttl"],r);const a=d(n,["expireTime"]);e!==void 0&&a!=null&&f(e,["expireTime"],a);const l=d(n,["displayName"]);e!==void 0&&l!=null&&f(e,["displayName"],l);const c=d(n,["contents"]);if(e!==void 0&&c!=null){let x=nn(c);Array.isArray(x)&&(x=x.map(S=>S)),f(e,["contents"],x)}const h=d(n,["systemInstruction"]);e!==void 0&&h!=null&&f(e,["systemInstruction"],Tt(h));const g=d(n,["tools"]);if(e!==void 0&&g!=null){let x=g;Array.isArray(x)&&(x=x.map(S=>GT(S))),f(e,["tools"],x)}const p=d(n,["toolConfig"]);e!==void 0&&p!=null&&f(e,["toolConfig"],p);const _=d(n,["kmsKeyName"]);return e!==void 0&&_!=null&&f(e,["encryption_spec","kmsKeyName"],_),i}function yT(n,e){const i={},r=d(e,["model"]);r!=null&&f(i,["model"],Zg(n,r));const a=d(e,["config"]);return a!=null&&mT(a,i),i}function vT(n,e){const i={},r=d(e,["model"]);r!=null&&f(i,["model"],Zg(n,r));const a=d(e,["config"]);return a!=null&&gT(a,i),i}function _T(n,e){const i={},r=d(e,["name"]);return r!=null&&f(i,["_url","name"],qn(n,r)),i}function xT(n,e){const i={},r=d(e,["name"]);return r!=null&&f(i,["_url","name"],qn(n,r)),i}function bT(n){const e={},i=d(n,["sdkHttpResponse"]);return i!=null&&f(e,["sdkHttpResponse"],i),e}function ST(n){const e={},i=d(n,["sdkHttpResponse"]);return i!=null&&f(e,["sdkHttpResponse"],i),e}function TT(n){const e={};if(d(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const i=d(n,["fileUri"]);i!=null&&f(e,["fileUri"],i);const r=d(n,["mimeType"]);return r!=null&&f(e,["mimeType"],r),e}function ET(n){const e={},i=d(n,["id"]);i!=null&&f(e,["id"],i);const r=d(n,["args"]);r!=null&&f(e,["args"],r);const a=d(n,["name"]);if(a!=null&&f(e,["name"],a),d(n,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(d(n,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function wT(n){const e={},i=d(n,["mode"]);i!=null&&f(e,["mode"],i);const r=d(n,["allowedFunctionNames"]);if(r!=null&&f(e,["allowedFunctionNames"],r),d(n,["streamFunctionCallArguments"])!==void 0)throw new Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return e}function CT(n){const e={};if(d(n,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const i=d(n,["description"]);i!=null&&f(e,["description"],i);const r=d(n,["name"]);r!=null&&f(e,["name"],r);const a=d(n,["parameters"]);a!=null&&f(e,["parameters"],a);const l=d(n,["parametersJsonSchema"]);l!=null&&f(e,["parametersJsonSchema"],l);const c=d(n,["response"]);c!=null&&f(e,["response"],c);const h=d(n,["responseJsonSchema"]);return h!=null&&f(e,["responseJsonSchema"],h),e}function AT(n,e){const i={},r=d(e,["name"]);return r!=null&&f(i,["_url","name"],qn(n,r)),i}function NT(n,e){const i={},r=d(e,["name"]);return r!=null&&f(i,["_url","name"],qn(n,r)),i}function RT(n){const e={};if(d(n,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const i=d(n,["enableWidget"]);return i!=null&&f(e,["enableWidget"],i),e}function MT(n){const e={};if(d(n,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(d(n,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const i=d(n,["timeRangeFilter"]);return i!=null&&f(e,["timeRangeFilter"],i),e}function IT(n,e){const i={},r=d(n,["pageSize"]);e!==void 0&&r!=null&&f(e,["_query","pageSize"],r);const a=d(n,["pageToken"]);return e!==void 0&&a!=null&&f(e,["_query","pageToken"],a),i}function kT(n,e){const i={},r=d(n,["pageSize"]);e!==void 0&&r!=null&&f(e,["_query","pageSize"],r);const a=d(n,["pageToken"]);return e!==void 0&&a!=null&&f(e,["_query","pageToken"],a),i}function DT(n){const e={},i=d(n,["config"]);return i!=null&&IT(i,e),e}function UT(n){const e={},i=d(n,["config"]);return i!=null&&kT(i,e),e}function PT(n){const e={},i=d(n,["sdkHttpResponse"]);i!=null&&f(e,["sdkHttpResponse"],i);const r=d(n,["nextPageToken"]);r!=null&&f(e,["nextPageToken"],r);const a=d(n,["cachedContents"]);if(a!=null){let l=a;Array.isArray(l)&&(l=l.map(c=>c)),f(e,["cachedContents"],l)}return e}function OT(n){const e={},i=d(n,["sdkHttpResponse"]);i!=null&&f(e,["sdkHttpResponse"],i);const r=d(n,["nextPageToken"]);r!=null&&f(e,["nextPageToken"],r);const a=d(n,["cachedContents"]);if(a!=null){let l=a;Array.isArray(l)&&(l=l.map(c=>c)),f(e,["cachedContents"],l)}return e}function LT(n){const e={},i=d(n,["mediaResolution"]);i!=null&&f(e,["mediaResolution"],i);const r=d(n,["codeExecutionResult"]);r!=null&&f(e,["codeExecutionResult"],r);const a=d(n,["executableCode"]);a!=null&&f(e,["executableCode"],a);const l=d(n,["fileData"]);l!=null&&f(e,["fileData"],TT(l));const c=d(n,["functionCall"]);c!=null&&f(e,["functionCall"],ET(c));const h=d(n,["functionResponse"]);h!=null&&f(e,["functionResponse"],h);const g=d(n,["inlineData"]);g!=null&&f(e,["inlineData"],pT(g));const p=d(n,["text"]);p!=null&&f(e,["text"],p);const _=d(n,["thought"]);_!=null&&f(e,["thought"],_);const x=d(n,["thoughtSignature"]);x!=null&&f(e,["thoughtSignature"],x);const S=d(n,["videoMetadata"]);return S!=null&&f(e,["videoMetadata"],S),e}function qT(n){const e={},i=d(n,["functionCallingConfig"]);i!=null&&f(e,["functionCallingConfig"],wT(i));const r=d(n,["retrievalConfig"]);return r!=null&&f(e,["retrievalConfig"],r),e}function BT(n){const e={},i=d(n,["functionDeclarations"]);if(i!=null){let _=i;Array.isArray(_)&&(_=_.map(x=>x)),f(e,["functionDeclarations"],_)}if(d(n,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const r=d(n,["googleSearchRetrieval"]);r!=null&&f(e,["googleSearchRetrieval"],r);const a=d(n,["computerUse"]);a!=null&&f(e,["computerUse"],a);const l=d(n,["fileSearch"]);l!=null&&f(e,["fileSearch"],l);const c=d(n,["codeExecution"]);if(c!=null&&f(e,["codeExecution"],c),d(n,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const h=d(n,["googleMaps"]);h!=null&&f(e,["googleMaps"],RT(h));const g=d(n,["googleSearch"]);g!=null&&f(e,["googleSearch"],MT(g));const p=d(n,["urlContext"]);return p!=null&&f(e,["urlContext"],p),e}function GT(n){const e={},i=d(n,["functionDeclarations"]);if(i!=null){let x=i;Array.isArray(x)&&(x=x.map(S=>CT(S))),f(e,["functionDeclarations"],x)}const r=d(n,["retrieval"]);r!=null&&f(e,["retrieval"],r);const a=d(n,["googleSearchRetrieval"]);a!=null&&f(e,["googleSearchRetrieval"],a);const l=d(n,["computerUse"]);if(l!=null&&f(e,["computerUse"],l),d(n,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");const c=d(n,["codeExecution"]);c!=null&&f(e,["codeExecution"],c);const h=d(n,["enterpriseWebSearch"]);h!=null&&f(e,["enterpriseWebSearch"],h);const g=d(n,["googleMaps"]);g!=null&&f(e,["googleMaps"],g);const p=d(n,["googleSearch"]);p!=null&&f(e,["googleSearch"],p);const _=d(n,["urlContext"]);return _!=null&&f(e,["urlContext"],_),e}function VT(n,e){const i={},r=d(n,["ttl"]);e!==void 0&&r!=null&&f(e,["ttl"],r);const a=d(n,["expireTime"]);return e!==void 0&&a!=null&&f(e,["expireTime"],a),i}function HT(n,e){const i={},r=d(n,["ttl"]);e!==void 0&&r!=null&&f(e,["ttl"],r);const a=d(n,["expireTime"]);return e!==void 0&&a!=null&&f(e,["expireTime"],a),i}function jT(n,e){const i={},r=d(e,["name"]);r!=null&&f(i,["_url","name"],qn(n,r));const a=d(e,["config"]);return a!=null&&VT(a,i),i}function zT(n,e){const i={},r=d(e,["name"]);r!=null&&f(i,["_url","name"],qn(n,r));const a=d(e,["config"]);return a!=null&&HT(a,i),i}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class $T extends Ln{constructor(e){super(),this.apiClient=e,this.list=async(i={})=>new ji(Pn.PAGED_ITEM_CACHED_CONTENTS,r=>this.listInternal(r),await this.listInternal(i),i)}async create(e){var i,r,a,l;let c,h="",g={};if(this.apiClient.isVertexAI()){const p=vT(this.apiClient,e);return h=ee("cachedContents",p._url),g=p._query,delete p._url,delete p._query,c=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(_=>_.json()),c.then(_=>_)}else{const p=yT(this.apiClient,e);return h=ee("cachedContents",p._url),g=p._query,delete p._url,delete p._query,c=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(a=e.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(_=>_.json()),c.then(_=>_)}}async get(e){var i,r,a,l;let c,h="",g={};if(this.apiClient.isVertexAI()){const p=NT(this.apiClient,e);return h=ee("{name}",p._url),g=p._query,delete p._url,delete p._query,c=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(_=>_.json()),c.then(_=>_)}else{const p=AT(this.apiClient,e);return h=ee("{name}",p._url),g=p._query,delete p._url,delete p._query,c=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(a=e.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(_=>_.json()),c.then(_=>_)}}async delete(e){var i,r,a,l;let c,h="",g={};if(this.apiClient.isVertexAI()){const p=xT(this.apiClient,e);return h=ee("{name}",p._url),g=p._query,delete p._url,delete p._query,c=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(p),httpMethod:"DELETE",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(_=>_.json().then(x=>{const S=x;return S.sdkHttpResponse={headers:_.headers},S})),c.then(_=>{const x=ST(_),S=new $0;return Object.assign(S,x),S})}else{const p=_T(this.apiClient,e);return h=ee("{name}",p._url),g=p._query,delete p._url,delete p._query,c=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(p),httpMethod:"DELETE",httpOptions:(a=e.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(_=>_.json().then(x=>{const S=x;return S.sdkHttpResponse={headers:_.headers},S})),c.then(_=>{const x=bT(_),S=new $0;return Object.assign(S,x),S})}}async update(e){var i,r,a,l;let c,h="",g={};if(this.apiClient.isVertexAI()){const p=zT(this.apiClient,e);return h=ee("{name}",p._url),g=p._query,delete p._url,delete p._query,c=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(p),httpMethod:"PATCH",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(_=>_.json()),c.then(_=>_)}else{const p=jT(this.apiClient,e);return h=ee("{name}",p._url),g=p._query,delete p._url,delete p._query,c=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(p),httpMethod:"PATCH",httpOptions:(a=e.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(_=>_.json()),c.then(_=>_)}}async listInternal(e){var i,r,a,l;let c,h="",g={};if(this.apiClient.isVertexAI()){const p=UT(e);return h=ee("cachedContents",p._url),g=p._query,delete p._url,delete p._query,c=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(_=>_.json().then(x=>{const S=x;return S.sdkHttpResponse={headers:_.headers},S})),c.then(_=>{const x=OT(_),S=new F0;return Object.assign(S,x),S})}else{const p=DT(e);return h=ee("cachedContents",p._url),g=p._query,delete p._url,delete p._query,c=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(a=e.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(_=>_.json().then(x=>{const S=x;return S.sdkHttpResponse={headers:_.headers},S})),c.then(_=>{const x=PT(_),S=new F0;return Object.assign(S,x),S})}}}function W0(n){var e=typeof Symbol=="function"&&Symbol.iterator,i=e&&n[e],r=0;if(i)return i.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function Je(n){return this instanceof Je?(this.v=n,this):new Je(n)}function Bs(n,e,i){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=i.apply(n,e||[]),a,l=[];return a=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),h("next"),h("throw"),h("return",c),a[Symbol.asyncIterator]=function(){return this},a;function c(T){return function(w){return Promise.resolve(w).then(T,x)}}function h(T,w){r[T]&&(a[T]=function(C){return new Promise(function(M,D){l.push([T,C,M,D])>1||g(T,C)})},w&&(a[T]=w(a[T])))}function g(T,w){try{p(r[T](w))}catch(C){S(l[0][3],C)}}function p(T){T.value instanceof Je?Promise.resolve(T.value.v).then(_,x):S(l[0][2],T)}function _(T){g("next",T)}function x(T){g("throw",T)}function S(T,w){T(w),l.shift(),l.length&&g(l[0][0],l[0][1])}}function Kr(n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=n[Symbol.asyncIterator],i;return e?e.call(n):(n=typeof W0=="function"?W0(n):n[Symbol.iterator](),i={},r("next"),r("throw"),r("return"),i[Symbol.asyncIterator]=function(){return this},i);function r(l){i[l]=n[l]&&function(c){return new Promise(function(h,g){c=n[l](c),a(h,g,c.done,c.value)})}}function a(l,c,h,g){Promise.resolve(g).then(function(p){l({value:p,done:h})},c)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function FT(n){var e;if(n.candidates==null||n.candidates.length===0)return!1;const i=(e=n.candidates[0])===null||e===void 0?void 0:e.content;return i===void 0?!1:dy(i)}function dy(n){if(n.parts===void 0||n.parts.length===0)return!1;for(const e of n.parts)if(e===void 0||Object.keys(e).length===0)return!1;return!0}function JT(n){if(n.length!==0){for(const e of n)if(e.role!=="user"&&e.role!=="model")throw new Error(`Role must be user or model, but got ${e.role}.`)}}function eg(n){if(n===void 0||n.length===0)return[];const e=[],i=n.length;let r=0;for(;r<i;)if(n[r].role==="user")e.push(n[r]),r++;else{const a=[];let l=!0;for(;r<i&&n[r].role==="model";)a.push(n[r]),l&&!dy(n[r])&&(l=!1),r++;l?e.push(...a):e.pop()}return e}class KT{constructor(e,i){this.modelsModule=e,this.apiClient=i}create(e){return new YT(this.apiClient,this.modelsModule,e.model,e.config,structuredClone(e.history))}}class YT{constructor(e,i,r,a={},l=[]){this.apiClient=e,this.modelsModule=i,this.model=r,this.config=a,this.history=l,this.sendPromise=Promise.resolve(),JT(l)}async sendMessage(e){var i;await this.sendPromise;const r=Tt(e.message),a=this.modelsModule.generateContent({model:this.model,contents:this.getHistory(!0).concat(r),config:(i=e.config)!==null&&i!==void 0?i:this.config});return this.sendPromise=(async()=>{var l,c,h;const g=await a,p=(c=(l=g.candidates)===null||l===void 0?void 0:l[0])===null||c===void 0?void 0:c.content,_=g.automaticFunctionCallingHistory,x=this.getHistory(!0).length;let S=[];_!=null&&(S=(h=_.slice(x))!==null&&h!==void 0?h:[]);const T=p?[p]:[];this.recordHistory(r,T,S)})(),await this.sendPromise.catch(()=>{this.sendPromise=Promise.resolve()}),a}async sendMessageStream(e){var i;await this.sendPromise;const r=Tt(e.message),a=this.modelsModule.generateContentStream({model:this.model,contents:this.getHistory(!0).concat(r),config:(i=e.config)!==null&&i!==void 0?i:this.config});this.sendPromise=a.then(()=>{}).catch(()=>{});const l=await a;return this.processStreamResponse(l,r)}getHistory(e=!1){const i=e?eg(this.history):this.history;return structuredClone(i)}processStreamResponse(e,i){var r,a;return Bs(this,arguments,function*(){var c,h,g,p;const _=[];try{for(var x=!0,S=Kr(e),T;T=yield Je(S.next()),c=T.done,!c;x=!0){p=T.value,x=!1;const w=p;if(FT(w)){const C=(a=(r=w.candidates)===null||r===void 0?void 0:r[0])===null||a===void 0?void 0:a.content;C!==void 0&&_.push(C)}yield yield Je(w)}}catch(w){h={error:w}}finally{try{!x&&!c&&(g=S.return)&&(yield Je(g.call(S)))}finally{if(h)throw h.error}}this.recordHistory(i,_)})}recordHistory(e,i,r){let a=[];i.length>0&&i.every(l=>l.role!==void 0)?a=i:a.push({role:"model",parts:[]}),r&&r.length>0?this.history.push(...eg(r)):this.history.push(e),this.history.push(...a)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class $a extends Error{constructor(e){super(e.message),this.name="ApiError",this.status=e.status,Object.setPrototypeOf(this,$a.prototype)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function QT(n){const e={},i=d(n,["file"]);return i!=null&&f(e,["file"],i),e}function XT(n){const e={},i=d(n,["sdkHttpResponse"]);return i!=null&&f(e,["sdkHttpResponse"],i),e}function ZT(n){const e={},i=d(n,["name"]);return i!=null&&f(e,["_url","file"],sy(i)),e}function WT(n){const e={},i=d(n,["sdkHttpResponse"]);return i!=null&&f(e,["sdkHttpResponse"],i),e}function eE(n){const e={},i=d(n,["name"]);return i!=null&&f(e,["_url","file"],sy(i)),e}function tE(n,e){const i={},r=d(n,["pageSize"]);e!==void 0&&r!=null&&f(e,["_query","pageSize"],r);const a=d(n,["pageToken"]);return e!==void 0&&a!=null&&f(e,["_query","pageToken"],a),i}function nE(n){const e={},i=d(n,["config"]);return i!=null&&tE(i,e),e}function iE(n){const e={},i=d(n,["sdkHttpResponse"]);i!=null&&f(e,["sdkHttpResponse"],i);const r=d(n,["nextPageToken"]);r!=null&&f(e,["nextPageToken"],r);const a=d(n,["files"]);if(a!=null){let l=a;Array.isArray(l)&&(l=l.map(c=>c)),f(e,["files"],l)}return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class sE extends Ln{constructor(e){super(),this.apiClient=e,this.list=async(i={})=>new ji(Pn.PAGED_ITEM_FILES,r=>this.listInternal(r),await this.listInternal(i),i)}async upload(e){if(this.apiClient.isVertexAI())throw new Error("Vertex AI does not support uploading files. You can share files through a GCS bucket.");return this.apiClient.uploadFile(e.file,e.config).then(i=>i)}async download(e){await this.apiClient.downloadFile(e)}async listInternal(e){var i,r;let a,l="",c={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const h=nE(e);return l=ee("files",h._url),c=h._query,delete h._url,delete h._query,a=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(g=>g.json().then(p=>{const _=p;return _.sdkHttpResponse={headers:g.headers},_})),a.then(g=>{const p=iE(g),_=new lS;return Object.assign(_,p),_})}}async createInternal(e){var i,r;let a,l="",c={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const h=QT(e);return l=ee("upload/v1beta/files",h._url),c=h._query,delete h._url,delete h._query,a=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(g=>g.json()),a.then(g=>{const p=XT(g),_=new uS;return Object.assign(_,p),_})}}async get(e){var i,r;let a,l="",c={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const h=eE(e);return l=ee("files/{file}",h._url),c=h._query,delete h._url,delete h._query,a=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(g=>g.json()),a.then(g=>g)}}async delete(e){var i,r;let a,l="",c={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const h=ZT(e);return l=ee("files/{file}",h._url),c=h._query,delete h._url,delete h._query,a=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(h),httpMethod:"DELETE",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(g=>g.json().then(p=>{const _=p;return _.sdkHttpResponse={headers:g.headers},_})),a.then(g=>{const p=WT(g),_=new cS;return Object.assign(_,p),_})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Pa(n){const e={},i=d(n,["data"]);if(i!=null&&f(e,["data"],i),d(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const r=d(n,["mimeType"]);return r!=null&&f(e,["mimeType"],r),e}function rE(n){const e={},i=d(n,["parts"]);if(i!=null){let a=i;Array.isArray(a)&&(a=a.map(l=>bE(l))),f(e,["parts"],a)}const r=d(n,["role"]);return r!=null&&f(e,["role"],r),e}function oE(n){const e={};if(d(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const i=d(n,["fileUri"]);i!=null&&f(e,["fileUri"],i);const r=d(n,["mimeType"]);return r!=null&&f(e,["mimeType"],r),e}function aE(n){const e={},i=d(n,["id"]);i!=null&&f(e,["id"],i);const r=d(n,["args"]);r!=null&&f(e,["args"],r);const a=d(n,["name"]);if(a!=null&&f(e,["name"],a),d(n,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(d(n,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function lE(n){const e={};if(d(n,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const i=d(n,["description"]);i!=null&&f(e,["description"],i);const r=d(n,["name"]);r!=null&&f(e,["name"],r);const a=d(n,["parameters"]);a!=null&&f(e,["parameters"],a);const l=d(n,["parametersJsonSchema"]);l!=null&&f(e,["parametersJsonSchema"],l);const c=d(n,["response"]);c!=null&&f(e,["response"],c);const h=d(n,["responseJsonSchema"]);return h!=null&&f(e,["responseJsonSchema"],h),e}function uE(n){const e={},i=d(n,["modelSelectionConfig"]);i!=null&&f(e,["modelConfig"],i);const r=d(n,["responseJsonSchema"]);r!=null&&f(e,["responseJsonSchema"],r);const a=d(n,["audioTimestamp"]);a!=null&&f(e,["audioTimestamp"],a);const l=d(n,["candidateCount"]);l!=null&&f(e,["candidateCount"],l);const c=d(n,["enableAffectiveDialog"]);c!=null&&f(e,["enableAffectiveDialog"],c);const h=d(n,["frequencyPenalty"]);h!=null&&f(e,["frequencyPenalty"],h);const g=d(n,["logprobs"]);g!=null&&f(e,["logprobs"],g);const p=d(n,["maxOutputTokens"]);p!=null&&f(e,["maxOutputTokens"],p);const _=d(n,["mediaResolution"]);_!=null&&f(e,["mediaResolution"],_);const x=d(n,["presencePenalty"]);x!=null&&f(e,["presencePenalty"],x);const S=d(n,["responseLogprobs"]);S!=null&&f(e,["responseLogprobs"],S);const T=d(n,["responseMimeType"]);T!=null&&f(e,["responseMimeType"],T);const w=d(n,["responseModalities"]);w!=null&&f(e,["responseModalities"],w);const C=d(n,["responseSchema"]);C!=null&&f(e,["responseSchema"],C);const M=d(n,["routingConfig"]);M!=null&&f(e,["routingConfig"],M);const D=d(n,["seed"]);D!=null&&f(e,["seed"],D);const B=d(n,["speechConfig"]);B!=null&&f(e,["speechConfig"],fy(B));const I=d(n,["stopSequences"]);I!=null&&f(e,["stopSequences"],I);const z=d(n,["temperature"]);z!=null&&f(e,["temperature"],z);const U=d(n,["thinkingConfig"]);U!=null&&f(e,["thinkingConfig"],U);const K=d(n,["topK"]);K!=null&&f(e,["topK"],K);const G=d(n,["topP"]);if(G!=null&&f(e,["topP"],G),d(n,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");return e}function cE(n){const e={};if(d(n,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const i=d(n,["enableWidget"]);return i!=null&&f(e,["enableWidget"],i),e}function dE(n){const e={};if(d(n,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(d(n,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const i=d(n,["timeRangeFilter"]);return i!=null&&f(e,["timeRangeFilter"],i),e}function fE(n,e){const i={},r=d(n,["generationConfig"]);e!==void 0&&r!=null&&f(e,["setup","generationConfig"],r);const a=d(n,["responseModalities"]);e!==void 0&&a!=null&&f(e,["setup","generationConfig","responseModalities"],a);const l=d(n,["temperature"]);e!==void 0&&l!=null&&f(e,["setup","generationConfig","temperature"],l);const c=d(n,["topP"]);e!==void 0&&c!=null&&f(e,["setup","generationConfig","topP"],c);const h=d(n,["topK"]);e!==void 0&&h!=null&&f(e,["setup","generationConfig","topK"],h);const g=d(n,["maxOutputTokens"]);e!==void 0&&g!=null&&f(e,["setup","generationConfig","maxOutputTokens"],g);const p=d(n,["mediaResolution"]);e!==void 0&&p!=null&&f(e,["setup","generationConfig","mediaResolution"],p);const _=d(n,["seed"]);e!==void 0&&_!=null&&f(e,["setup","generationConfig","seed"],_);const x=d(n,["speechConfig"]);e!==void 0&&x!=null&&f(e,["setup","generationConfig","speechConfig"],md(x));const S=d(n,["thinkingConfig"]);e!==void 0&&S!=null&&f(e,["setup","generationConfig","thinkingConfig"],S);const T=d(n,["enableAffectiveDialog"]);e!==void 0&&T!=null&&f(e,["setup","generationConfig","enableAffectiveDialog"],T);const w=d(n,["systemInstruction"]);e!==void 0&&w!=null&&f(e,["setup","systemInstruction"],rE(Tt(w)));const C=d(n,["tools"]);if(e!==void 0&&C!=null){let K=Fs(C);Array.isArray(K)&&(K=K.map(G=>TE($s(G)))),f(e,["setup","tools"],K)}const M=d(n,["sessionResumption"]);e!==void 0&&M!=null&&f(e,["setup","sessionResumption"],SE(M));const D=d(n,["inputAudioTranscription"]);e!==void 0&&D!=null&&f(e,["setup","inputAudioTranscription"],D);const B=d(n,["outputAudioTranscription"]);e!==void 0&&B!=null&&f(e,["setup","outputAudioTranscription"],B);const I=d(n,["realtimeInputConfig"]);e!==void 0&&I!=null&&f(e,["setup","realtimeInputConfig"],I);const z=d(n,["contextWindowCompression"]);e!==void 0&&z!=null&&f(e,["setup","contextWindowCompression"],z);const U=d(n,["proactivity"]);return e!==void 0&&U!=null&&f(e,["setup","proactivity"],U),i}function hE(n,e){const i={},r=d(n,["generationConfig"]);e!==void 0&&r!=null&&f(e,["setup","generationConfig"],uE(r));const a=d(n,["responseModalities"]);e!==void 0&&a!=null&&f(e,["setup","generationConfig","responseModalities"],a);const l=d(n,["temperature"]);e!==void 0&&l!=null&&f(e,["setup","generationConfig","temperature"],l);const c=d(n,["topP"]);e!==void 0&&c!=null&&f(e,["setup","generationConfig","topP"],c);const h=d(n,["topK"]);e!==void 0&&h!=null&&f(e,["setup","generationConfig","topK"],h);const g=d(n,["maxOutputTokens"]);e!==void 0&&g!=null&&f(e,["setup","generationConfig","maxOutputTokens"],g);const p=d(n,["mediaResolution"]);e!==void 0&&p!=null&&f(e,["setup","generationConfig","mediaResolution"],p);const _=d(n,["seed"]);e!==void 0&&_!=null&&f(e,["setup","generationConfig","seed"],_);const x=d(n,["speechConfig"]);e!==void 0&&x!=null&&f(e,["setup","generationConfig","speechConfig"],fy(md(x)));const S=d(n,["thinkingConfig"]);e!==void 0&&S!=null&&f(e,["setup","generationConfig","thinkingConfig"],S);const T=d(n,["enableAffectiveDialog"]);e!==void 0&&T!=null&&f(e,["setup","generationConfig","enableAffectiveDialog"],T);const w=d(n,["systemInstruction"]);e!==void 0&&w!=null&&f(e,["setup","systemInstruction"],Tt(w));const C=d(n,["tools"]);if(e!==void 0&&C!=null){let K=Fs(C);Array.isArray(K)&&(K=K.map(G=>EE($s(G)))),f(e,["setup","tools"],K)}const M=d(n,["sessionResumption"]);e!==void 0&&M!=null&&f(e,["setup","sessionResumption"],M);const D=d(n,["inputAudioTranscription"]);e!==void 0&&D!=null&&f(e,["setup","inputAudioTranscription"],D);const B=d(n,["outputAudioTranscription"]);e!==void 0&&B!=null&&f(e,["setup","outputAudioTranscription"],B);const I=d(n,["realtimeInputConfig"]);e!==void 0&&I!=null&&f(e,["setup","realtimeInputConfig"],I);const z=d(n,["contextWindowCompression"]);e!==void 0&&z!=null&&f(e,["setup","contextWindowCompression"],z);const U=d(n,["proactivity"]);return e!==void 0&&U!=null&&f(e,["setup","proactivity"],U),i}function pE(n,e){const i={},r=d(e,["model"]);r!=null&&f(i,["setup","model"],Ie(n,r));const a=d(e,["config"]);return a!=null&&f(i,["config"],fE(a,i)),i}function mE(n,e){const i={},r=d(e,["model"]);r!=null&&f(i,["setup","model"],Ie(n,r));const a=d(e,["config"]);return a!=null&&f(i,["config"],hE(a,i)),i}function gE(n){const e={},i=d(n,["musicGenerationConfig"]);return i!=null&&f(e,["musicGenerationConfig"],i),e}function yE(n){const e={},i=d(n,["weightedPrompts"]);if(i!=null){let r=i;Array.isArray(r)&&(r=r.map(a=>a)),f(e,["weightedPrompts"],r)}return e}function vE(n){const e={},i=d(n,["media"]);if(i!=null){let p=Wg(i);Array.isArray(p)&&(p=p.map(_=>Pa(_))),f(e,["mediaChunks"],p)}const r=d(n,["audio"]);r!=null&&f(e,["audio"],Pa(ty(r)));const a=d(n,["audioStreamEnd"]);a!=null&&f(e,["audioStreamEnd"],a);const l=d(n,["video"]);l!=null&&f(e,["video"],Pa(ey(l)));const c=d(n,["text"]);c!=null&&f(e,["text"],c);const h=d(n,["activityStart"]);h!=null&&f(e,["activityStart"],h);const g=d(n,["activityEnd"]);return g!=null&&f(e,["activityEnd"],g),e}function _E(n){const e={},i=d(n,["media"]);if(i!=null){let p=Wg(i);Array.isArray(p)&&(p=p.map(_=>_)),f(e,["mediaChunks"],p)}const r=d(n,["audio"]);r!=null&&f(e,["audio"],ty(r));const a=d(n,["audioStreamEnd"]);a!=null&&f(e,["audioStreamEnd"],a);const l=d(n,["video"]);l!=null&&f(e,["video"],ey(l));const c=d(n,["text"]);c!=null&&f(e,["text"],c);const h=d(n,["activityStart"]);h!=null&&f(e,["activityStart"],h);const g=d(n,["activityEnd"]);return g!=null&&f(e,["activityEnd"],g),e}function xE(n){const e={},i=d(n,["setupComplete"]);i!=null&&f(e,["setupComplete"],i);const r=d(n,["serverContent"]);r!=null&&f(e,["serverContent"],r);const a=d(n,["toolCall"]);a!=null&&f(e,["toolCall"],a);const l=d(n,["toolCallCancellation"]);l!=null&&f(e,["toolCallCancellation"],l);const c=d(n,["usageMetadata"]);c!=null&&f(e,["usageMetadata"],wE(c));const h=d(n,["goAway"]);h!=null&&f(e,["goAway"],h);const g=d(n,["sessionResumptionUpdate"]);return g!=null&&f(e,["sessionResumptionUpdate"],g),e}function bE(n){const e={},i=d(n,["mediaResolution"]);i!=null&&f(e,["mediaResolution"],i);const r=d(n,["codeExecutionResult"]);r!=null&&f(e,["codeExecutionResult"],r);const a=d(n,["executableCode"]);a!=null&&f(e,["executableCode"],a);const l=d(n,["fileData"]);l!=null&&f(e,["fileData"],oE(l));const c=d(n,["functionCall"]);c!=null&&f(e,["functionCall"],aE(c));const h=d(n,["functionResponse"]);h!=null&&f(e,["functionResponse"],h);const g=d(n,["inlineData"]);g!=null&&f(e,["inlineData"],Pa(g));const p=d(n,["text"]);p!=null&&f(e,["text"],p);const _=d(n,["thought"]);_!=null&&f(e,["thought"],_);const x=d(n,["thoughtSignature"]);x!=null&&f(e,["thoughtSignature"],x);const S=d(n,["videoMetadata"]);return S!=null&&f(e,["videoMetadata"],S),e}function SE(n){const e={},i=d(n,["handle"]);if(i!=null&&f(e,["handle"],i),d(n,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return e}function fy(n){const e={},i=d(n,["languageCode"]);i!=null&&f(e,["languageCode"],i);const r=d(n,["voiceConfig"]);if(r!=null&&f(e,["voiceConfig"],r),d(n,["multiSpeakerVoiceConfig"])!==void 0)throw new Error("multiSpeakerVoiceConfig parameter is not supported in Vertex AI.");return e}function TE(n){const e={},i=d(n,["functionDeclarations"]);if(i!=null){let _=i;Array.isArray(_)&&(_=_.map(x=>x)),f(e,["functionDeclarations"],_)}if(d(n,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const r=d(n,["googleSearchRetrieval"]);r!=null&&f(e,["googleSearchRetrieval"],r);const a=d(n,["computerUse"]);a!=null&&f(e,["computerUse"],a);const l=d(n,["fileSearch"]);l!=null&&f(e,["fileSearch"],l);const c=d(n,["codeExecution"]);if(c!=null&&f(e,["codeExecution"],c),d(n,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const h=d(n,["googleMaps"]);h!=null&&f(e,["googleMaps"],cE(h));const g=d(n,["googleSearch"]);g!=null&&f(e,["googleSearch"],dE(g));const p=d(n,["urlContext"]);return p!=null&&f(e,["urlContext"],p),e}function EE(n){const e={},i=d(n,["functionDeclarations"]);if(i!=null){let x=i;Array.isArray(x)&&(x=x.map(S=>lE(S))),f(e,["functionDeclarations"],x)}const r=d(n,["retrieval"]);r!=null&&f(e,["retrieval"],r);const a=d(n,["googleSearchRetrieval"]);a!=null&&f(e,["googleSearchRetrieval"],a);const l=d(n,["computerUse"]);if(l!=null&&f(e,["computerUse"],l),d(n,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");const c=d(n,["codeExecution"]);c!=null&&f(e,["codeExecution"],c);const h=d(n,["enterpriseWebSearch"]);h!=null&&f(e,["enterpriseWebSearch"],h);const g=d(n,["googleMaps"]);g!=null&&f(e,["googleMaps"],g);const p=d(n,["googleSearch"]);p!=null&&f(e,["googleSearch"],p);const _=d(n,["urlContext"]);return _!=null&&f(e,["urlContext"],_),e}function wE(n){const e={},i=d(n,["promptTokenCount"]);i!=null&&f(e,["promptTokenCount"],i);const r=d(n,["cachedContentTokenCount"]);r!=null&&f(e,["cachedContentTokenCount"],r);const a=d(n,["candidatesTokenCount"]);a!=null&&f(e,["responseTokenCount"],a);const l=d(n,["toolUsePromptTokenCount"]);l!=null&&f(e,["toolUsePromptTokenCount"],l);const c=d(n,["thoughtsTokenCount"]);c!=null&&f(e,["thoughtsTokenCount"],c);const h=d(n,["totalTokenCount"]);h!=null&&f(e,["totalTokenCount"],h);const g=d(n,["promptTokensDetails"]);if(g!=null){let T=g;Array.isArray(T)&&(T=T.map(w=>w)),f(e,["promptTokensDetails"],T)}const p=d(n,["cacheTokensDetails"]);if(p!=null){let T=p;Array.isArray(T)&&(T=T.map(w=>w)),f(e,["cacheTokensDetails"],T)}const _=d(n,["candidatesTokensDetails"]);if(_!=null){let T=_;Array.isArray(T)&&(T=T.map(w=>w)),f(e,["responseTokensDetails"],T)}const x=d(n,["toolUsePromptTokensDetails"]);if(x!=null){let T=x;Array.isArray(T)&&(T=T.map(w=>w)),f(e,["toolUsePromptTokensDetails"],T)}const S=d(n,["trafficType"]);return S!=null&&f(e,["trafficType"],S),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function CE(n){const e={},i=d(n,["data"]);if(i!=null&&f(e,["data"],i),d(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const r=d(n,["mimeType"]);return r!=null&&f(e,["mimeType"],r),e}function AE(n){const e={},i=d(n,["content"]);i!=null&&f(e,["content"],i);const r=d(n,["citationMetadata"]);r!=null&&f(e,["citationMetadata"],NE(r));const a=d(n,["tokenCount"]);a!=null&&f(e,["tokenCount"],a);const l=d(n,["finishReason"]);l!=null&&f(e,["finishReason"],l);const c=d(n,["avgLogprobs"]);c!=null&&f(e,["avgLogprobs"],c);const h=d(n,["groundingMetadata"]);h!=null&&f(e,["groundingMetadata"],h);const g=d(n,["index"]);g!=null&&f(e,["index"],g);const p=d(n,["logprobsResult"]);p!=null&&f(e,["logprobsResult"],p);const _=d(n,["safetyRatings"]);if(_!=null){let S=_;Array.isArray(S)&&(S=S.map(T=>T)),f(e,["safetyRatings"],S)}const x=d(n,["urlContextMetadata"]);return x!=null&&f(e,["urlContextMetadata"],x),e}function NE(n){const e={},i=d(n,["citationSources"]);if(i!=null){let r=i;Array.isArray(r)&&(r=r.map(a=>a)),f(e,["citations"],r)}return e}function RE(n,e){const i={},r=d(e,["model"]);r!=null&&f(i,["_url","model"],Ie(n,r));const a=d(e,["contents"]);if(a!=null){let l=nn(a);Array.isArray(l)&&(l=l.map(c=>c)),f(i,["contents"],l)}return i}function ME(n){const e={},i=d(n,["sdkHttpResponse"]);i!=null&&f(e,["sdkHttpResponse"],i);const r=d(n,["tokensInfo"]);if(r!=null){let a=r;Array.isArray(a)&&(a=a.map(l=>l)),f(e,["tokensInfo"],a)}return e}function IE(n){const e={},i=d(n,["values"]);i!=null&&f(e,["values"],i);const r=d(n,["statistics"]);return r!=null&&f(e,["statistics"],kE(r)),e}function kE(n){const e={},i=d(n,["truncated"]);i!=null&&f(e,["truncated"],i);const r=d(n,["token_count"]);return r!=null&&f(e,["tokenCount"],r),e}function Fa(n){const e={},i=d(n,["parts"]);if(i!=null){let a=i;Array.isArray(a)&&(a=a.map(l=>Vw(l))),f(e,["parts"],a)}const r=d(n,["role"]);return r!=null&&f(e,["role"],r),e}function DE(n){const e={},i=d(n,["controlType"]);i!=null&&f(e,["controlType"],i);const r=d(n,["enableControlImageComputation"]);return r!=null&&f(e,["computeControl"],r),e}function UE(n){const e={};if(d(n,["systemInstruction"])!==void 0)throw new Error("systemInstruction parameter is not supported in Gemini API.");if(d(n,["tools"])!==void 0)throw new Error("tools parameter is not supported in Gemini API.");if(d(n,["generationConfig"])!==void 0)throw new Error("generationConfig parameter is not supported in Gemini API.");return e}function PE(n,e){const i={},r=d(n,["systemInstruction"]);e!==void 0&&r!=null&&f(e,["systemInstruction"],Tt(r));const a=d(n,["tools"]);if(e!==void 0&&a!=null){let c=a;Array.isArray(c)&&(c=c.map(h=>yy(h))),f(e,["tools"],c)}const l=d(n,["generationConfig"]);return e!==void 0&&l!=null&&f(e,["generationConfig"],Cw(l)),i}function OE(n,e){const i={},r=d(e,["model"]);r!=null&&f(i,["_url","model"],Ie(n,r));const a=d(e,["contents"]);if(a!=null){let c=nn(a);Array.isArray(c)&&(c=c.map(h=>Fa(h))),f(i,["contents"],c)}const l=d(e,["config"]);return l!=null&&UE(l),i}function LE(n,e){const i={},r=d(e,["model"]);r!=null&&f(i,["_url","model"],Ie(n,r));const a=d(e,["contents"]);if(a!=null){let c=nn(a);Array.isArray(c)&&(c=c.map(h=>h)),f(i,["contents"],c)}const l=d(e,["config"]);return l!=null&&PE(l,i),i}function qE(n){const e={},i=d(n,["sdkHttpResponse"]);i!=null&&f(e,["sdkHttpResponse"],i);const r=d(n,["totalTokens"]);r!=null&&f(e,["totalTokens"],r);const a=d(n,["cachedContentTokenCount"]);return a!=null&&f(e,["cachedContentTokenCount"],a),e}function BE(n){const e={},i=d(n,["sdkHttpResponse"]);i!=null&&f(e,["sdkHttpResponse"],i);const r=d(n,["totalTokens"]);return r!=null&&f(e,["totalTokens"],r),e}function GE(n,e){const i={},r=d(e,["model"]);return r!=null&&f(i,["_url","name"],Ie(n,r)),i}function VE(n,e){const i={},r=d(e,["model"]);return r!=null&&f(i,["_url","name"],Ie(n,r)),i}function HE(n){const e={},i=d(n,["sdkHttpResponse"]);return i!=null&&f(e,["sdkHttpResponse"],i),e}function jE(n){const e={},i=d(n,["sdkHttpResponse"]);return i!=null&&f(e,["sdkHttpResponse"],i),e}function zE(n,e){const i={},r=d(n,["outputGcsUri"]);e!==void 0&&r!=null&&f(e,["parameters","storageUri"],r);const a=d(n,["negativePrompt"]);e!==void 0&&a!=null&&f(e,["parameters","negativePrompt"],a);const l=d(n,["numberOfImages"]);e!==void 0&&l!=null&&f(e,["parameters","sampleCount"],l);const c=d(n,["aspectRatio"]);e!==void 0&&c!=null&&f(e,["parameters","aspectRatio"],c);const h=d(n,["guidanceScale"]);e!==void 0&&h!=null&&f(e,["parameters","guidanceScale"],h);const g=d(n,["seed"]);e!==void 0&&g!=null&&f(e,["parameters","seed"],g);const p=d(n,["safetyFilterLevel"]);e!==void 0&&p!=null&&f(e,["parameters","safetySetting"],p);const _=d(n,["personGeneration"]);e!==void 0&&_!=null&&f(e,["parameters","personGeneration"],_);const x=d(n,["includeSafetyAttributes"]);e!==void 0&&x!=null&&f(e,["parameters","includeSafetyAttributes"],x);const S=d(n,["includeRaiReason"]);e!==void 0&&S!=null&&f(e,["parameters","includeRaiReason"],S);const T=d(n,["language"]);e!==void 0&&T!=null&&f(e,["parameters","language"],T);const w=d(n,["outputMimeType"]);e!==void 0&&w!=null&&f(e,["parameters","outputOptions","mimeType"],w);const C=d(n,["outputCompressionQuality"]);e!==void 0&&C!=null&&f(e,["parameters","outputOptions","compressionQuality"],C);const M=d(n,["addWatermark"]);e!==void 0&&M!=null&&f(e,["parameters","addWatermark"],M);const D=d(n,["labels"]);e!==void 0&&D!=null&&f(e,["labels"],D);const B=d(n,["editMode"]);e!==void 0&&B!=null&&f(e,["parameters","editMode"],B);const I=d(n,["baseSteps"]);return e!==void 0&&I!=null&&f(e,["parameters","editConfig","baseSteps"],I),i}function $E(n,e){const i={},r=d(e,["model"]);r!=null&&f(i,["_url","model"],Ie(n,r));const a=d(e,["prompt"]);a!=null&&f(i,["instances[0]","prompt"],a);const l=d(e,["referenceImages"]);if(l!=null){let h=l;Array.isArray(h)&&(h=h.map(g=>Jw(g))),f(i,["instances[0]","referenceImages"],h)}const c=d(e,["config"]);return c!=null&&zE(c,i),i}function FE(n){const e={},i=d(n,["sdkHttpResponse"]);i!=null&&f(e,["sdkHttpResponse"],i);const r=d(n,["predictions"]);if(r!=null){let a=r;Array.isArray(a)&&(a=a.map(l=>Ja(l))),f(e,["generatedImages"],a)}return e}function JE(n,e){const i={},r=d(n,["taskType"]);e!==void 0&&r!=null&&f(e,["requests[]","taskType"],r);const a=d(n,["title"]);e!==void 0&&a!=null&&f(e,["requests[]","title"],a);const l=d(n,["outputDimensionality"]);if(e!==void 0&&l!=null&&f(e,["requests[]","outputDimensionality"],l),d(n,["mimeType"])!==void 0)throw new Error("mimeType parameter is not supported in Gemini API.");if(d(n,["autoTruncate"])!==void 0)throw new Error("autoTruncate parameter is not supported in Gemini API.");return i}function KE(n,e){const i={},r=d(n,["taskType"]);e!==void 0&&r!=null&&f(e,["instances[]","task_type"],r);const a=d(n,["title"]);e!==void 0&&a!=null&&f(e,["instances[]","title"],a);const l=d(n,["outputDimensionality"]);e!==void 0&&l!=null&&f(e,["parameters","outputDimensionality"],l);const c=d(n,["mimeType"]);e!==void 0&&c!=null&&f(e,["instances[]","mimeType"],c);const h=d(n,["autoTruncate"]);return e!==void 0&&h!=null&&f(e,["parameters","autoTruncate"],h),i}function YE(n,e){const i={},r=d(e,["model"]);r!=null&&f(i,["_url","model"],Ie(n,r));const a=d(e,["contents"]);if(a!=null){let h=fd(n,a);Array.isArray(h)&&(h=h.map(g=>g)),f(i,["requests[]","content"],h)}const l=d(e,["config"]);l!=null&&JE(l,i);const c=d(e,["model"]);return c!==void 0&&f(i,["requests[]","model"],Ie(n,c)),i}function QE(n,e){const i={},r=d(e,["model"]);r!=null&&f(i,["_url","model"],Ie(n,r));const a=d(e,["contents"]);if(a!=null){let c=fd(n,a);Array.isArray(c)&&(c=c.map(h=>h)),f(i,["instances[]","content"],c)}const l=d(e,["config"]);return l!=null&&KE(l,i),i}function XE(n){const e={},i=d(n,["sdkHttpResponse"]);i!=null&&f(e,["sdkHttpResponse"],i);const r=d(n,["embeddings"]);if(r!=null){let l=r;Array.isArray(l)&&(l=l.map(c=>c)),f(e,["embeddings"],l)}const a=d(n,["metadata"]);return a!=null&&f(e,["metadata"],a),e}function ZE(n){const e={},i=d(n,["sdkHttpResponse"]);i!=null&&f(e,["sdkHttpResponse"],i);const r=d(n,["predictions[]","embeddings"]);if(r!=null){let l=r;Array.isArray(l)&&(l=l.map(c=>IE(c))),f(e,["embeddings"],l)}const a=d(n,["metadata"]);return a!=null&&f(e,["metadata"],a),e}function WE(n){const e={},i=d(n,["endpoint"]);i!=null&&f(e,["name"],i);const r=d(n,["deployedModelId"]);return r!=null&&f(e,["deployedModelId"],r),e}function ew(n){const e={};if(d(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const i=d(n,["fileUri"]);i!=null&&f(e,["fileUri"],i);const r=d(n,["mimeType"]);return r!=null&&f(e,["mimeType"],r),e}function tw(n){const e={},i=d(n,["id"]);i!=null&&f(e,["id"],i);const r=d(n,["args"]);r!=null&&f(e,["args"],r);const a=d(n,["name"]);if(a!=null&&f(e,["name"],a),d(n,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(d(n,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function nw(n){const e={},i=d(n,["mode"]);i!=null&&f(e,["mode"],i);const r=d(n,["allowedFunctionNames"]);if(r!=null&&f(e,["allowedFunctionNames"],r),d(n,["streamFunctionCallArguments"])!==void 0)throw new Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return e}function iw(n){const e={};if(d(n,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const i=d(n,["description"]);i!=null&&f(e,["description"],i);const r=d(n,["name"]);r!=null&&f(e,["name"],r);const a=d(n,["parameters"]);a!=null&&f(e,["parameters"],a);const l=d(n,["parametersJsonSchema"]);l!=null&&f(e,["parametersJsonSchema"],l);const c=d(n,["response"]);c!=null&&f(e,["response"],c);const h=d(n,["responseJsonSchema"]);return h!=null&&f(e,["responseJsonSchema"],h),e}function sw(n,e,i){const r={},a=d(e,["systemInstruction"]);i!==void 0&&a!=null&&f(i,["systemInstruction"],Fa(Tt(a)));const l=d(e,["temperature"]);l!=null&&f(r,["temperature"],l);const c=d(e,["topP"]);c!=null&&f(r,["topP"],c);const h=d(e,["topK"]);h!=null&&f(r,["topK"],h);const g=d(e,["candidateCount"]);g!=null&&f(r,["candidateCount"],g);const p=d(e,["maxOutputTokens"]);p!=null&&f(r,["maxOutputTokens"],p);const _=d(e,["stopSequences"]);_!=null&&f(r,["stopSequences"],_);const x=d(e,["responseLogprobs"]);x!=null&&f(r,["responseLogprobs"],x);const S=d(e,["logprobs"]);S!=null&&f(r,["logprobs"],S);const T=d(e,["presencePenalty"]);T!=null&&f(r,["presencePenalty"],T);const w=d(e,["frequencyPenalty"]);w!=null&&f(r,["frequencyPenalty"],w);const C=d(e,["seed"]);C!=null&&f(r,["seed"],C);const M=d(e,["responseMimeType"]);M!=null&&f(r,["responseMimeType"],M);const D=d(e,["responseSchema"]);D!=null&&f(r,["responseSchema"],hd(D));const B=d(e,["responseJsonSchema"]);if(B!=null&&f(r,["responseJsonSchema"],B),d(e,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(d(e,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const I=d(e,["safetySettings"]);if(i!==void 0&&I!=null){let re=I;Array.isArray(re)&&(re=re.map(ve=>Kw(ve))),f(i,["safetySettings"],re)}const z=d(e,["tools"]);if(i!==void 0&&z!=null){let re=Fs(z);Array.isArray(re)&&(re=re.map(ve=>tC($s(ve)))),f(i,["tools"],re)}const U=d(e,["toolConfig"]);if(i!==void 0&&U!=null&&f(i,["toolConfig"],eC(U)),d(e,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const K=d(e,["cachedContent"]);i!==void 0&&K!=null&&f(i,["cachedContent"],qn(n,K));const G=d(e,["responseModalities"]);G!=null&&f(r,["responseModalities"],G);const X=d(e,["mediaResolution"]);X!=null&&f(r,["mediaResolution"],X);const Y=d(e,["speechConfig"]);if(Y!=null&&f(r,["speechConfig"],pd(Y)),d(e,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");const ce=d(e,["thinkingConfig"]);ce!=null&&f(r,["thinkingConfig"],ce);const he=d(e,["imageConfig"]);return he!=null&&f(r,["imageConfig"],Iw(he)),r}function rw(n,e,i){const r={},a=d(e,["systemInstruction"]);i!==void 0&&a!=null&&f(i,["systemInstruction"],Tt(a));const l=d(e,["temperature"]);l!=null&&f(r,["temperature"],l);const c=d(e,["topP"]);c!=null&&f(r,["topP"],c);const h=d(e,["topK"]);h!=null&&f(r,["topK"],h);const g=d(e,["candidateCount"]);g!=null&&f(r,["candidateCount"],g);const p=d(e,["maxOutputTokens"]);p!=null&&f(r,["maxOutputTokens"],p);const _=d(e,["stopSequences"]);_!=null&&f(r,["stopSequences"],_);const x=d(e,["responseLogprobs"]);x!=null&&f(r,["responseLogprobs"],x);const S=d(e,["logprobs"]);S!=null&&f(r,["logprobs"],S);const T=d(e,["presencePenalty"]);T!=null&&f(r,["presencePenalty"],T);const w=d(e,["frequencyPenalty"]);w!=null&&f(r,["frequencyPenalty"],w);const C=d(e,["seed"]);C!=null&&f(r,["seed"],C);const M=d(e,["responseMimeType"]);M!=null&&f(r,["responseMimeType"],M);const D=d(e,["responseSchema"]);D!=null&&f(r,["responseSchema"],hd(D));const B=d(e,["responseJsonSchema"]);B!=null&&f(r,["responseJsonSchema"],B);const I=d(e,["routingConfig"]);I!=null&&f(r,["routingConfig"],I);const z=d(e,["modelSelectionConfig"]);z!=null&&f(r,["modelConfig"],z);const U=d(e,["safetySettings"]);if(i!==void 0&&U!=null){let q=U;Array.isArray(q)&&(q=q.map(Q=>Q)),f(i,["safetySettings"],q)}const K=d(e,["tools"]);if(i!==void 0&&K!=null){let q=Fs(K);Array.isArray(q)&&(q=q.map(Q=>yy($s(Q)))),f(i,["tools"],q)}const G=d(e,["toolConfig"]);i!==void 0&&G!=null&&f(i,["toolConfig"],G);const X=d(e,["labels"]);i!==void 0&&X!=null&&f(i,["labels"],X);const Y=d(e,["cachedContent"]);i!==void 0&&Y!=null&&f(i,["cachedContent"],qn(n,Y));const ce=d(e,["responseModalities"]);ce!=null&&f(r,["responseModalities"],ce);const he=d(e,["mediaResolution"]);he!=null&&f(r,["mediaResolution"],he);const re=d(e,["speechConfig"]);re!=null&&f(r,["speechConfig"],gy(pd(re)));const ve=d(e,["audioTimestamp"]);ve!=null&&f(r,["audioTimestamp"],ve);const Ve=d(e,["thinkingConfig"]);Ve!=null&&f(r,["thinkingConfig"],Ve);const He=d(e,["imageConfig"]);return He!=null&&f(r,["imageConfig"],kw(He)),r}function tg(n,e){const i={},r=d(e,["model"]);r!=null&&f(i,["_url","model"],Ie(n,r));const a=d(e,["contents"]);if(a!=null){let c=nn(a);Array.isArray(c)&&(c=c.map(h=>Fa(h))),f(i,["contents"],c)}const l=d(e,["config"]);return l!=null&&f(i,["generationConfig"],sw(n,l,i)),i}function ng(n,e){const i={},r=d(e,["model"]);r!=null&&f(i,["_url","model"],Ie(n,r));const a=d(e,["contents"]);if(a!=null){let c=nn(a);Array.isArray(c)&&(c=c.map(h=>h)),f(i,["contents"],c)}const l=d(e,["config"]);return l!=null&&f(i,["generationConfig"],rw(n,l,i)),i}function ig(n){const e={},i=d(n,["sdkHttpResponse"]);i!=null&&f(e,["sdkHttpResponse"],i);const r=d(n,["candidates"]);if(r!=null){let g=r;Array.isArray(g)&&(g=g.map(p=>AE(p))),f(e,["candidates"],g)}const a=d(n,["modelVersion"]);a!=null&&f(e,["modelVersion"],a);const l=d(n,["promptFeedback"]);l!=null&&f(e,["promptFeedback"],l);const c=d(n,["responseId"]);c!=null&&f(e,["responseId"],c);const h=d(n,["usageMetadata"]);return h!=null&&f(e,["usageMetadata"],h),e}function sg(n){const e={},i=d(n,["sdkHttpResponse"]);i!=null&&f(e,["sdkHttpResponse"],i);const r=d(n,["candidates"]);if(r!=null){let p=r;Array.isArray(p)&&(p=p.map(_=>_)),f(e,["candidates"],p)}const a=d(n,["createTime"]);a!=null&&f(e,["createTime"],a);const l=d(n,["modelVersion"]);l!=null&&f(e,["modelVersion"],l);const c=d(n,["promptFeedback"]);c!=null&&f(e,["promptFeedback"],c);const h=d(n,["responseId"]);h!=null&&f(e,["responseId"],h);const g=d(n,["usageMetadata"]);return g!=null&&f(e,["usageMetadata"],g),e}function ow(n,e){const i={};if(d(n,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(d(n,["negativePrompt"])!==void 0)throw new Error("negativePrompt parameter is not supported in Gemini API.");const r=d(n,["numberOfImages"]);e!==void 0&&r!=null&&f(e,["parameters","sampleCount"],r);const a=d(n,["aspectRatio"]);e!==void 0&&a!=null&&f(e,["parameters","aspectRatio"],a);const l=d(n,["guidanceScale"]);if(e!==void 0&&l!=null&&f(e,["parameters","guidanceScale"],l),d(n,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const c=d(n,["safetyFilterLevel"]);e!==void 0&&c!=null&&f(e,["parameters","safetySetting"],c);const h=d(n,["personGeneration"]);e!==void 0&&h!=null&&f(e,["parameters","personGeneration"],h);const g=d(n,["includeSafetyAttributes"]);e!==void 0&&g!=null&&f(e,["parameters","includeSafetyAttributes"],g);const p=d(n,["includeRaiReason"]);e!==void 0&&p!=null&&f(e,["parameters","includeRaiReason"],p);const _=d(n,["language"]);e!==void 0&&_!=null&&f(e,["parameters","language"],_);const x=d(n,["outputMimeType"]);e!==void 0&&x!=null&&f(e,["parameters","outputOptions","mimeType"],x);const S=d(n,["outputCompressionQuality"]);if(e!==void 0&&S!=null&&f(e,["parameters","outputOptions","compressionQuality"],S),d(n,["addWatermark"])!==void 0)throw new Error("addWatermark parameter is not supported in Gemini API.");if(d(n,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const T=d(n,["imageSize"]);if(e!==void 0&&T!=null&&f(e,["parameters","sampleImageSize"],T),d(n,["enhancePrompt"])!==void 0)throw new Error("enhancePrompt parameter is not supported in Gemini API.");return i}function aw(n,e){const i={},r=d(n,["outputGcsUri"]);e!==void 0&&r!=null&&f(e,["parameters","storageUri"],r);const a=d(n,["negativePrompt"]);e!==void 0&&a!=null&&f(e,["parameters","negativePrompt"],a);const l=d(n,["numberOfImages"]);e!==void 0&&l!=null&&f(e,["parameters","sampleCount"],l);const c=d(n,["aspectRatio"]);e!==void 0&&c!=null&&f(e,["parameters","aspectRatio"],c);const h=d(n,["guidanceScale"]);e!==void 0&&h!=null&&f(e,["parameters","guidanceScale"],h);const g=d(n,["seed"]);e!==void 0&&g!=null&&f(e,["parameters","seed"],g);const p=d(n,["safetyFilterLevel"]);e!==void 0&&p!=null&&f(e,["parameters","safetySetting"],p);const _=d(n,["personGeneration"]);e!==void 0&&_!=null&&f(e,["parameters","personGeneration"],_);const x=d(n,["includeSafetyAttributes"]);e!==void 0&&x!=null&&f(e,["parameters","includeSafetyAttributes"],x);const S=d(n,["includeRaiReason"]);e!==void 0&&S!=null&&f(e,["parameters","includeRaiReason"],S);const T=d(n,["language"]);e!==void 0&&T!=null&&f(e,["parameters","language"],T);const w=d(n,["outputMimeType"]);e!==void 0&&w!=null&&f(e,["parameters","outputOptions","mimeType"],w);const C=d(n,["outputCompressionQuality"]);e!==void 0&&C!=null&&f(e,["parameters","outputOptions","compressionQuality"],C);const M=d(n,["addWatermark"]);e!==void 0&&M!=null&&f(e,["parameters","addWatermark"],M);const D=d(n,["labels"]);e!==void 0&&D!=null&&f(e,["labels"],D);const B=d(n,["imageSize"]);e!==void 0&&B!=null&&f(e,["parameters","sampleImageSize"],B);const I=d(n,["enhancePrompt"]);return e!==void 0&&I!=null&&f(e,["parameters","enhancePrompt"],I),i}function lw(n,e){const i={},r=d(e,["model"]);r!=null&&f(i,["_url","model"],Ie(n,r));const a=d(e,["prompt"]);a!=null&&f(i,["instances[0]","prompt"],a);const l=d(e,["config"]);return l!=null&&ow(l,i),i}function uw(n,e){const i={},r=d(e,["model"]);r!=null&&f(i,["_url","model"],Ie(n,r));const a=d(e,["prompt"]);a!=null&&f(i,["instances[0]","prompt"],a);const l=d(e,["config"]);return l!=null&&aw(l,i),i}function cw(n){const e={},i=d(n,["sdkHttpResponse"]);i!=null&&f(e,["sdkHttpResponse"],i);const r=d(n,["predictions"]);if(r!=null){let l=r;Array.isArray(l)&&(l=l.map(c=>Sw(c))),f(e,["generatedImages"],l)}const a=d(n,["positivePromptSafetyAttributes"]);return a!=null&&f(e,["positivePromptSafetyAttributes"],py(a)),e}function dw(n){const e={},i=d(n,["sdkHttpResponse"]);i!=null&&f(e,["sdkHttpResponse"],i);const r=d(n,["predictions"]);if(r!=null){let l=r;Array.isArray(l)&&(l=l.map(c=>Ja(c))),f(e,["generatedImages"],l)}const a=d(n,["positivePromptSafetyAttributes"]);return a!=null&&f(e,["positivePromptSafetyAttributes"],my(a)),e}function fw(n,e){const i={},r=d(n,["numberOfVideos"]);if(e!==void 0&&r!=null&&f(e,["parameters","sampleCount"],r),d(n,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(d(n,["fps"])!==void 0)throw new Error("fps parameter is not supported in Gemini API.");const a=d(n,["durationSeconds"]);if(e!==void 0&&a!=null&&f(e,["parameters","durationSeconds"],a),d(n,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const l=d(n,["aspectRatio"]);e!==void 0&&l!=null&&f(e,["parameters","aspectRatio"],l);const c=d(n,["resolution"]);e!==void 0&&c!=null&&f(e,["parameters","resolution"],c);const h=d(n,["personGeneration"]);if(e!==void 0&&h!=null&&f(e,["parameters","personGeneration"],h),d(n,["pubsubTopic"])!==void 0)throw new Error("pubsubTopic parameter is not supported in Gemini API.");const g=d(n,["negativePrompt"]);e!==void 0&&g!=null&&f(e,["parameters","negativePrompt"],g);const p=d(n,["enhancePrompt"]);if(e!==void 0&&p!=null&&f(e,["parameters","enhancePrompt"],p),d(n,["generateAudio"])!==void 0)throw new Error("generateAudio parameter is not supported in Gemini API.");const _=d(n,["lastFrame"]);e!==void 0&&_!=null&&f(e,["instances[0]","lastFrame"],Ka(_));const x=d(n,["referenceImages"]);if(e!==void 0&&x!=null){let S=x;Array.isArray(S)&&(S=S.map(T=>pC(T))),f(e,["instances[0]","referenceImages"],S)}if(d(n,["mask"])!==void 0)throw new Error("mask parameter is not supported in Gemini API.");if(d(n,["compressionQuality"])!==void 0)throw new Error("compressionQuality parameter is not supported in Gemini API.");return i}function hw(n,e){const i={},r=d(n,["numberOfVideos"]);e!==void 0&&r!=null&&f(e,["parameters","sampleCount"],r);const a=d(n,["outputGcsUri"]);e!==void 0&&a!=null&&f(e,["parameters","storageUri"],a);const l=d(n,["fps"]);e!==void 0&&l!=null&&f(e,["parameters","fps"],l);const c=d(n,["durationSeconds"]);e!==void 0&&c!=null&&f(e,["parameters","durationSeconds"],c);const h=d(n,["seed"]);e!==void 0&&h!=null&&f(e,["parameters","seed"],h);const g=d(n,["aspectRatio"]);e!==void 0&&g!=null&&f(e,["parameters","aspectRatio"],g);const p=d(n,["resolution"]);e!==void 0&&p!=null&&f(e,["parameters","resolution"],p);const _=d(n,["personGeneration"]);e!==void 0&&_!=null&&f(e,["parameters","personGeneration"],_);const x=d(n,["pubsubTopic"]);e!==void 0&&x!=null&&f(e,["parameters","pubsubTopic"],x);const S=d(n,["negativePrompt"]);e!==void 0&&S!=null&&f(e,["parameters","negativePrompt"],S);const T=d(n,["enhancePrompt"]);e!==void 0&&T!=null&&f(e,["parameters","enhancePrompt"],T);const w=d(n,["generateAudio"]);e!==void 0&&w!=null&&f(e,["parameters","generateAudio"],w);const C=d(n,["lastFrame"]);e!==void 0&&C!=null&&f(e,["instances[0]","lastFrame"],cn(C));const M=d(n,["referenceImages"]);if(e!==void 0&&M!=null){let I=M;Array.isArray(I)&&(I=I.map(z=>mC(z))),f(e,["instances[0]","referenceImages"],I)}const D=d(n,["mask"]);e!==void 0&&D!=null&&f(e,["instances[0]","mask"],hC(D));const B=d(n,["compressionQuality"]);return e!==void 0&&B!=null&&f(e,["parameters","compressionQuality"],B),i}function pw(n){const e={},i=d(n,["name"]);i!=null&&f(e,["name"],i);const r=d(n,["metadata"]);r!=null&&f(e,["metadata"],r);const a=d(n,["done"]);a!=null&&f(e,["done"],a);const l=d(n,["error"]);l!=null&&f(e,["error"],l);const c=d(n,["response","generateVideoResponse"]);return c!=null&&f(e,["response"],vw(c)),e}function mw(n){const e={},i=d(n,["name"]);i!=null&&f(e,["name"],i);const r=d(n,["metadata"]);r!=null&&f(e,["metadata"],r);const a=d(n,["done"]);a!=null&&f(e,["done"],a);const l=d(n,["error"]);l!=null&&f(e,["error"],l);const c=d(n,["response"]);return c!=null&&f(e,["response"],_w(c)),e}function gw(n,e){const i={},r=d(e,["model"]);r!=null&&f(i,["_url","model"],Ie(n,r));const a=d(e,["prompt"]);a!=null&&f(i,["instances[0]","prompt"],a);const l=d(e,["image"]);l!=null&&f(i,["instances[0]","image"],Ka(l));const c=d(e,["video"]);c!=null&&f(i,["instances[0]","video"],vy(c));const h=d(e,["source"]);h!=null&&xw(h,i);const g=d(e,["config"]);return g!=null&&fw(g,i),i}function yw(n,e){const i={},r=d(e,["model"]);r!=null&&f(i,["_url","model"],Ie(n,r));const a=d(e,["prompt"]);a!=null&&f(i,["instances[0]","prompt"],a);const l=d(e,["image"]);l!=null&&f(i,["instances[0]","image"],cn(l));const c=d(e,["video"]);c!=null&&f(i,["instances[0]","video"],_y(c));const h=d(e,["source"]);h!=null&&bw(h,i);const g=d(e,["config"]);return g!=null&&hw(g,i),i}function vw(n){const e={},i=d(n,["generatedSamples"]);if(i!=null){let l=i;Array.isArray(l)&&(l=l.map(c=>Ew(c))),f(e,["generatedVideos"],l)}const r=d(n,["raiMediaFilteredCount"]);r!=null&&f(e,["raiMediaFilteredCount"],r);const a=d(n,["raiMediaFilteredReasons"]);return a!=null&&f(e,["raiMediaFilteredReasons"],a),e}function _w(n){const e={},i=d(n,["videos"]);if(i!=null){let l=i;Array.isArray(l)&&(l=l.map(c=>ww(c))),f(e,["generatedVideos"],l)}const r=d(n,["raiMediaFilteredCount"]);r!=null&&f(e,["raiMediaFilteredCount"],r);const a=d(n,["raiMediaFilteredReasons"]);return a!=null&&f(e,["raiMediaFilteredReasons"],a),e}function xw(n,e){const i={},r=d(n,["prompt"]);e!==void 0&&r!=null&&f(e,["instances[0]","prompt"],r);const a=d(n,["image"]);e!==void 0&&a!=null&&f(e,["instances[0]","image"],Ka(a));const l=d(n,["video"]);return e!==void 0&&l!=null&&f(e,["instances[0]","video"],vy(l)),i}function bw(n,e){const i={},r=d(n,["prompt"]);e!==void 0&&r!=null&&f(e,["instances[0]","prompt"],r);const a=d(n,["image"]);e!==void 0&&a!=null&&f(e,["instances[0]","image"],cn(a));const l=d(n,["video"]);return e!==void 0&&l!=null&&f(e,["instances[0]","video"],_y(l)),i}function Sw(n){const e={},i=d(n,["_self"]);i!=null&&f(e,["image"],Dw(i));const r=d(n,["raiFilteredReason"]);r!=null&&f(e,["raiFilteredReason"],r);const a=d(n,["_self"]);return a!=null&&f(e,["safetyAttributes"],py(a)),e}function Ja(n){const e={},i=d(n,["_self"]);i!=null&&f(e,["image"],hy(i));const r=d(n,["raiFilteredReason"]);r!=null&&f(e,["raiFilteredReason"],r);const a=d(n,["_self"]);a!=null&&f(e,["safetyAttributes"],my(a));const l=d(n,["prompt"]);return l!=null&&f(e,["enhancedPrompt"],l),e}function Tw(n){const e={},i=d(n,["_self"]);i!=null&&f(e,["mask"],hy(i));const r=d(n,["labels"]);if(r!=null){let a=r;Array.isArray(a)&&(a=a.map(l=>l)),f(e,["labels"],a)}return e}function Ew(n){const e={},i=d(n,["video"]);return i!=null&&f(e,["video"],dC(i)),e}function ww(n){const e={},i=d(n,["_self"]);return i!=null&&f(e,["video"],fC(i)),e}function Cw(n){const e={},i=d(n,["modelSelectionConfig"]);i!=null&&f(e,["modelConfig"],i);const r=d(n,["responseJsonSchema"]);r!=null&&f(e,["responseJsonSchema"],r);const a=d(n,["audioTimestamp"]);a!=null&&f(e,["audioTimestamp"],a);const l=d(n,["candidateCount"]);l!=null&&f(e,["candidateCount"],l);const c=d(n,["enableAffectiveDialog"]);c!=null&&f(e,["enableAffectiveDialog"],c);const h=d(n,["frequencyPenalty"]);h!=null&&f(e,["frequencyPenalty"],h);const g=d(n,["logprobs"]);g!=null&&f(e,["logprobs"],g);const p=d(n,["maxOutputTokens"]);p!=null&&f(e,["maxOutputTokens"],p);const _=d(n,["mediaResolution"]);_!=null&&f(e,["mediaResolution"],_);const x=d(n,["presencePenalty"]);x!=null&&f(e,["presencePenalty"],x);const S=d(n,["responseLogprobs"]);S!=null&&f(e,["responseLogprobs"],S);const T=d(n,["responseMimeType"]);T!=null&&f(e,["responseMimeType"],T);const w=d(n,["responseModalities"]);w!=null&&f(e,["responseModalities"],w);const C=d(n,["responseSchema"]);C!=null&&f(e,["responseSchema"],C);const M=d(n,["routingConfig"]);M!=null&&f(e,["routingConfig"],M);const D=d(n,["seed"]);D!=null&&f(e,["seed"],D);const B=d(n,["speechConfig"]);B!=null&&f(e,["speechConfig"],gy(B));const I=d(n,["stopSequences"]);I!=null&&f(e,["stopSequences"],I);const z=d(n,["temperature"]);z!=null&&f(e,["temperature"],z);const U=d(n,["thinkingConfig"]);U!=null&&f(e,["thinkingConfig"],U);const K=d(n,["topK"]);K!=null&&f(e,["topK"],K);const G=d(n,["topP"]);if(G!=null&&f(e,["topP"],G),d(n,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");return e}function Aw(n,e){const i={},r=d(e,["model"]);return r!=null&&f(i,["_url","name"],Ie(n,r)),i}function Nw(n,e){const i={},r=d(e,["model"]);return r!=null&&f(i,["_url","name"],Ie(n,r)),i}function Rw(n){const e={};if(d(n,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const i=d(n,["enableWidget"]);return i!=null&&f(e,["enableWidget"],i),e}function Mw(n){const e={};if(d(n,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(d(n,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const i=d(n,["timeRangeFilter"]);return i!=null&&f(e,["timeRangeFilter"],i),e}function Iw(n){const e={},i=d(n,["aspectRatio"]);i!=null&&f(e,["aspectRatio"],i);const r=d(n,["imageSize"]);if(r!=null&&f(e,["imageSize"],r),d(n,["outputMimeType"])!==void 0)throw new Error("outputMimeType parameter is not supported in Gemini API.");if(d(n,["outputCompressionQuality"])!==void 0)throw new Error("outputCompressionQuality parameter is not supported in Gemini API.");return e}function kw(n){const e={},i=d(n,["aspectRatio"]);i!=null&&f(e,["aspectRatio"],i);const r=d(n,["imageSize"]);r!=null&&f(e,["imageSize"],r);const a=d(n,["outputMimeType"]);a!=null&&f(e,["imageOutputOptions","mimeType"],a);const l=d(n,["outputCompressionQuality"]);return l!=null&&f(e,["imageOutputOptions","compressionQuality"],l),e}function Dw(n){const e={},i=d(n,["bytesBase64Encoded"]);i!=null&&f(e,["imageBytes"],mi(i));const r=d(n,["mimeType"]);return r!=null&&f(e,["mimeType"],r),e}function hy(n){const e={},i=d(n,["gcsUri"]);i!=null&&f(e,["gcsUri"],i);const r=d(n,["bytesBase64Encoded"]);r!=null&&f(e,["imageBytes"],mi(r));const a=d(n,["mimeType"]);return a!=null&&f(e,["mimeType"],a),e}function Ka(n){const e={};if(d(n,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");const i=d(n,["imageBytes"]);i!=null&&f(e,["bytesBase64Encoded"],mi(i));const r=d(n,["mimeType"]);return r!=null&&f(e,["mimeType"],r),e}function cn(n){const e={},i=d(n,["gcsUri"]);i!=null&&f(e,["gcsUri"],i);const r=d(n,["imageBytes"]);r!=null&&f(e,["bytesBase64Encoded"],mi(r));const a=d(n,["mimeType"]);return a!=null&&f(e,["mimeType"],a),e}function Uw(n,e,i){const r={},a=d(e,["pageSize"]);i!==void 0&&a!=null&&f(i,["_query","pageSize"],a);const l=d(e,["pageToken"]);i!==void 0&&l!=null&&f(i,["_query","pageToken"],l);const c=d(e,["filter"]);i!==void 0&&c!=null&&f(i,["_query","filter"],c);const h=d(e,["queryBase"]);return i!==void 0&&h!=null&&f(i,["_url","models_url"],ry(n,h)),r}function Pw(n,e,i){const r={},a=d(e,["pageSize"]);i!==void 0&&a!=null&&f(i,["_query","pageSize"],a);const l=d(e,["pageToken"]);i!==void 0&&l!=null&&f(i,["_query","pageToken"],l);const c=d(e,["filter"]);i!==void 0&&c!=null&&f(i,["_query","filter"],c);const h=d(e,["queryBase"]);return i!==void 0&&h!=null&&f(i,["_url","models_url"],ry(n,h)),r}function Ow(n,e){const i={},r=d(e,["config"]);return r!=null&&Uw(n,r,i),i}function Lw(n,e){const i={},r=d(e,["config"]);return r!=null&&Pw(n,r,i),i}function qw(n){const e={},i=d(n,["sdkHttpResponse"]);i!=null&&f(e,["sdkHttpResponse"],i);const r=d(n,["nextPageToken"]);r!=null&&f(e,["nextPageToken"],r);const a=d(n,["_self"]);if(a!=null){let l=oy(a);Array.isArray(l)&&(l=l.map(c=>Vc(c))),f(e,["models"],l)}return e}function Bw(n){const e={},i=d(n,["sdkHttpResponse"]);i!=null&&f(e,["sdkHttpResponse"],i);const r=d(n,["nextPageToken"]);r!=null&&f(e,["nextPageToken"],r);const a=d(n,["_self"]);if(a!=null){let l=oy(a);Array.isArray(l)&&(l=l.map(c=>Hc(c))),f(e,["models"],l)}return e}function Gw(n){const e={},i=d(n,["maskMode"]);i!=null&&f(e,["maskMode"],i);const r=d(n,["segmentationClasses"]);r!=null&&f(e,["maskClasses"],r);const a=d(n,["maskDilation"]);return a!=null&&f(e,["dilation"],a),e}function Vc(n){const e={},i=d(n,["name"]);i!=null&&f(e,["name"],i);const r=d(n,["displayName"]);r!=null&&f(e,["displayName"],r);const a=d(n,["description"]);a!=null&&f(e,["description"],a);const l=d(n,["version"]);l!=null&&f(e,["version"],l);const c=d(n,["_self"]);c!=null&&f(e,["tunedModelInfo"],nC(c));const h=d(n,["inputTokenLimit"]);h!=null&&f(e,["inputTokenLimit"],h);const g=d(n,["outputTokenLimit"]);g!=null&&f(e,["outputTokenLimit"],g);const p=d(n,["supportedGenerationMethods"]);p!=null&&f(e,["supportedActions"],p);const _=d(n,["temperature"]);_!=null&&f(e,["temperature"],_);const x=d(n,["maxTemperature"]);x!=null&&f(e,["maxTemperature"],x);const S=d(n,["topP"]);S!=null&&f(e,["topP"],S);const T=d(n,["topK"]);T!=null&&f(e,["topK"],T);const w=d(n,["thinking"]);return w!=null&&f(e,["thinking"],w),e}function Hc(n){const e={},i=d(n,["name"]);i!=null&&f(e,["name"],i);const r=d(n,["displayName"]);r!=null&&f(e,["displayName"],r);const a=d(n,["description"]);a!=null&&f(e,["description"],a);const l=d(n,["versionId"]);l!=null&&f(e,["version"],l);const c=d(n,["deployedModels"]);if(c!=null){let x=c;Array.isArray(x)&&(x=x.map(S=>WE(S))),f(e,["endpoints"],x)}const h=d(n,["labels"]);h!=null&&f(e,["labels"],h);const g=d(n,["_self"]);g!=null&&f(e,["tunedModelInfo"],iC(g));const p=d(n,["defaultCheckpointId"]);p!=null&&f(e,["defaultCheckpointId"],p);const _=d(n,["checkpoints"]);if(_!=null){let x=_;Array.isArray(x)&&(x=x.map(S=>S)),f(e,["checkpoints"],x)}return e}function Vw(n){const e={},i=d(n,["mediaResolution"]);i!=null&&f(e,["mediaResolution"],i);const r=d(n,["codeExecutionResult"]);r!=null&&f(e,["codeExecutionResult"],r);const a=d(n,["executableCode"]);a!=null&&f(e,["executableCode"],a);const l=d(n,["fileData"]);l!=null&&f(e,["fileData"],ew(l));const c=d(n,["functionCall"]);c!=null&&f(e,["functionCall"],tw(c));const h=d(n,["functionResponse"]);h!=null&&f(e,["functionResponse"],h);const g=d(n,["inlineData"]);g!=null&&f(e,["inlineData"],CE(g));const p=d(n,["text"]);p!=null&&f(e,["text"],p);const _=d(n,["thought"]);_!=null&&f(e,["thought"],_);const x=d(n,["thoughtSignature"]);x!=null&&f(e,["thoughtSignature"],x);const S=d(n,["videoMetadata"]);return S!=null&&f(e,["videoMetadata"],S),e}function Hw(n){const e={},i=d(n,["productImage"]);return i!=null&&f(e,["image"],cn(i)),e}function jw(n,e){const i={},r=d(n,["numberOfImages"]);e!==void 0&&r!=null&&f(e,["parameters","sampleCount"],r);const a=d(n,["baseSteps"]);e!==void 0&&a!=null&&f(e,["parameters","baseSteps"],a);const l=d(n,["outputGcsUri"]);e!==void 0&&l!=null&&f(e,["parameters","storageUri"],l);const c=d(n,["seed"]);e!==void 0&&c!=null&&f(e,["parameters","seed"],c);const h=d(n,["safetyFilterLevel"]);e!==void 0&&h!=null&&f(e,["parameters","safetySetting"],h);const g=d(n,["personGeneration"]);e!==void 0&&g!=null&&f(e,["parameters","personGeneration"],g);const p=d(n,["addWatermark"]);e!==void 0&&p!=null&&f(e,["parameters","addWatermark"],p);const _=d(n,["outputMimeType"]);e!==void 0&&_!=null&&f(e,["parameters","outputOptions","mimeType"],_);const x=d(n,["outputCompressionQuality"]);e!==void 0&&x!=null&&f(e,["parameters","outputOptions","compressionQuality"],x);const S=d(n,["enhancePrompt"]);e!==void 0&&S!=null&&f(e,["parameters","enhancePrompt"],S);const T=d(n,["labels"]);return e!==void 0&&T!=null&&f(e,["labels"],T),i}function zw(n,e){const i={},r=d(e,["model"]);r!=null&&f(i,["_url","model"],Ie(n,r));const a=d(e,["source"]);a!=null&&Fw(a,i);const l=d(e,["config"]);return l!=null&&jw(l,i),i}function $w(n){const e={},i=d(n,["predictions"]);if(i!=null){let r=i;Array.isArray(r)&&(r=r.map(a=>Ja(a))),f(e,["generatedImages"],r)}return e}function Fw(n,e){const i={},r=d(n,["prompt"]);e!==void 0&&r!=null&&f(e,["instances[0]","prompt"],r);const a=d(n,["personImage"]);e!==void 0&&a!=null&&f(e,["instances[0]","personImage","image"],cn(a));const l=d(n,["productImages"]);if(e!==void 0&&l!=null){let c=l;Array.isArray(c)&&(c=c.map(h=>Hw(h))),f(e,["instances[0]","productImages"],c)}return i}function Jw(n){const e={},i=d(n,["referenceImage"]);i!=null&&f(e,["referenceImage"],cn(i));const r=d(n,["referenceId"]);r!=null&&f(e,["referenceId"],r);const a=d(n,["referenceType"]);a!=null&&f(e,["referenceType"],a);const l=d(n,["maskImageConfig"]);l!=null&&f(e,["maskImageConfig"],Gw(l));const c=d(n,["controlImageConfig"]);c!=null&&f(e,["controlImageConfig"],DE(c));const h=d(n,["styleImageConfig"]);h!=null&&f(e,["styleImageConfig"],h);const g=d(n,["subjectImageConfig"]);return g!=null&&f(e,["subjectImageConfig"],g),e}function py(n){const e={},i=d(n,["safetyAttributes","categories"]);i!=null&&f(e,["categories"],i);const r=d(n,["safetyAttributes","scores"]);r!=null&&f(e,["scores"],r);const a=d(n,["contentType"]);return a!=null&&f(e,["contentType"],a),e}function my(n){const e={},i=d(n,["safetyAttributes","categories"]);i!=null&&f(e,["categories"],i);const r=d(n,["safetyAttributes","scores"]);r!=null&&f(e,["scores"],r);const a=d(n,["contentType"]);return a!=null&&f(e,["contentType"],a),e}function Kw(n){const e={},i=d(n,["category"]);if(i!=null&&f(e,["category"],i),d(n,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");const r=d(n,["threshold"]);return r!=null&&f(e,["threshold"],r),e}function Yw(n){const e={},i=d(n,["image"]);return i!=null&&f(e,["image"],cn(i)),e}function Qw(n,e){const i={},r=d(n,["mode"]);e!==void 0&&r!=null&&f(e,["parameters","mode"],r);const a=d(n,["maxPredictions"]);e!==void 0&&a!=null&&f(e,["parameters","maxPredictions"],a);const l=d(n,["confidenceThreshold"]);e!==void 0&&l!=null&&f(e,["parameters","confidenceThreshold"],l);const c=d(n,["maskDilation"]);e!==void 0&&c!=null&&f(e,["parameters","maskDilation"],c);const h=d(n,["binaryColorThreshold"]);e!==void 0&&h!=null&&f(e,["parameters","binaryColorThreshold"],h);const g=d(n,["labels"]);return e!==void 0&&g!=null&&f(e,["labels"],g),i}function Xw(n,e){const i={},r=d(e,["model"]);r!=null&&f(i,["_url","model"],Ie(n,r));const a=d(e,["source"]);a!=null&&Ww(a,i);const l=d(e,["config"]);return l!=null&&Qw(l,i),i}function Zw(n){const e={},i=d(n,["predictions"]);if(i!=null){let r=i;Array.isArray(r)&&(r=r.map(a=>Tw(a))),f(e,["generatedMasks"],r)}return e}function Ww(n,e){const i={},r=d(n,["prompt"]);e!==void 0&&r!=null&&f(e,["instances[0]","prompt"],r);const a=d(n,["image"]);e!==void 0&&a!=null&&f(e,["instances[0]","image"],cn(a));const l=d(n,["scribbleImage"]);return e!==void 0&&l!=null&&f(e,["instances[0]","scribble"],Yw(l)),i}function gy(n){const e={},i=d(n,["languageCode"]);i!=null&&f(e,["languageCode"],i);const r=d(n,["voiceConfig"]);if(r!=null&&f(e,["voiceConfig"],r),d(n,["multiSpeakerVoiceConfig"])!==void 0)throw new Error("multiSpeakerVoiceConfig parameter is not supported in Vertex AI.");return e}function eC(n){const e={},i=d(n,["functionCallingConfig"]);i!=null&&f(e,["functionCallingConfig"],nw(i));const r=d(n,["retrievalConfig"]);return r!=null&&f(e,["retrievalConfig"],r),e}function tC(n){const e={},i=d(n,["functionDeclarations"]);if(i!=null){let _=i;Array.isArray(_)&&(_=_.map(x=>x)),f(e,["functionDeclarations"],_)}if(d(n,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const r=d(n,["googleSearchRetrieval"]);r!=null&&f(e,["googleSearchRetrieval"],r);const a=d(n,["computerUse"]);a!=null&&f(e,["computerUse"],a);const l=d(n,["fileSearch"]);l!=null&&f(e,["fileSearch"],l);const c=d(n,["codeExecution"]);if(c!=null&&f(e,["codeExecution"],c),d(n,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const h=d(n,["googleMaps"]);h!=null&&f(e,["googleMaps"],Rw(h));const g=d(n,["googleSearch"]);g!=null&&f(e,["googleSearch"],Mw(g));const p=d(n,["urlContext"]);return p!=null&&f(e,["urlContext"],p),e}function yy(n){const e={},i=d(n,["functionDeclarations"]);if(i!=null){let x=i;Array.isArray(x)&&(x=x.map(S=>iw(S))),f(e,["functionDeclarations"],x)}const r=d(n,["retrieval"]);r!=null&&f(e,["retrieval"],r);const a=d(n,["googleSearchRetrieval"]);a!=null&&f(e,["googleSearchRetrieval"],a);const l=d(n,["computerUse"]);if(l!=null&&f(e,["computerUse"],l),d(n,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");const c=d(n,["codeExecution"]);c!=null&&f(e,["codeExecution"],c);const h=d(n,["enterpriseWebSearch"]);h!=null&&f(e,["enterpriseWebSearch"],h);const g=d(n,["googleMaps"]);g!=null&&f(e,["googleMaps"],g);const p=d(n,["googleSearch"]);p!=null&&f(e,["googleSearch"],p);const _=d(n,["urlContext"]);return _!=null&&f(e,["urlContext"],_),e}function nC(n){const e={},i=d(n,["baseModel"]);i!=null&&f(e,["baseModel"],i);const r=d(n,["createTime"]);r!=null&&f(e,["createTime"],r);const a=d(n,["updateTime"]);return a!=null&&f(e,["updateTime"],a),e}function iC(n){const e={},i=d(n,["labels","google-vertex-llm-tuning-base-model-id"]);i!=null&&f(e,["baseModel"],i);const r=d(n,["createTime"]);r!=null&&f(e,["createTime"],r);const a=d(n,["updateTime"]);return a!=null&&f(e,["updateTime"],a),e}function sC(n,e){const i={},r=d(n,["displayName"]);e!==void 0&&r!=null&&f(e,["displayName"],r);const a=d(n,["description"]);e!==void 0&&a!=null&&f(e,["description"],a);const l=d(n,["defaultCheckpointId"]);return e!==void 0&&l!=null&&f(e,["defaultCheckpointId"],l),i}function rC(n,e){const i={},r=d(n,["displayName"]);e!==void 0&&r!=null&&f(e,["displayName"],r);const a=d(n,["description"]);e!==void 0&&a!=null&&f(e,["description"],a);const l=d(n,["defaultCheckpointId"]);return e!==void 0&&l!=null&&f(e,["defaultCheckpointId"],l),i}function oC(n,e){const i={},r=d(e,["model"]);r!=null&&f(i,["_url","name"],Ie(n,r));const a=d(e,["config"]);return a!=null&&sC(a,i),i}function aC(n,e){const i={},r=d(e,["model"]);r!=null&&f(i,["_url","model"],Ie(n,r));const a=d(e,["config"]);return a!=null&&rC(a,i),i}function lC(n,e){const i={},r=d(n,["outputGcsUri"]);e!==void 0&&r!=null&&f(e,["parameters","storageUri"],r);const a=d(n,["safetyFilterLevel"]);e!==void 0&&a!=null&&f(e,["parameters","safetySetting"],a);const l=d(n,["personGeneration"]);e!==void 0&&l!=null&&f(e,["parameters","personGeneration"],l);const c=d(n,["includeRaiReason"]);e!==void 0&&c!=null&&f(e,["parameters","includeRaiReason"],c);const h=d(n,["outputMimeType"]);e!==void 0&&h!=null&&f(e,["parameters","outputOptions","mimeType"],h);const g=d(n,["outputCompressionQuality"]);e!==void 0&&g!=null&&f(e,["parameters","outputOptions","compressionQuality"],g);const p=d(n,["enhanceInputImage"]);e!==void 0&&p!=null&&f(e,["parameters","upscaleConfig","enhanceInputImage"],p);const _=d(n,["imagePreservationFactor"]);e!==void 0&&_!=null&&f(e,["parameters","upscaleConfig","imagePreservationFactor"],_);const x=d(n,["labels"]);e!==void 0&&x!=null&&f(e,["labels"],x);const S=d(n,["numberOfImages"]);e!==void 0&&S!=null&&f(e,["parameters","sampleCount"],S);const T=d(n,["mode"]);return e!==void 0&&T!=null&&f(e,["parameters","mode"],T),i}function uC(n,e){const i={},r=d(e,["model"]);r!=null&&f(i,["_url","model"],Ie(n,r));const a=d(e,["image"]);a!=null&&f(i,["instances[0]","image"],cn(a));const l=d(e,["upscaleFactor"]);l!=null&&f(i,["parameters","upscaleConfig","upscaleFactor"],l);const c=d(e,["config"]);return c!=null&&lC(c,i),i}function cC(n){const e={},i=d(n,["sdkHttpResponse"]);i!=null&&f(e,["sdkHttpResponse"],i);const r=d(n,["predictions"]);if(r!=null){let a=r;Array.isArray(a)&&(a=a.map(l=>Ja(l))),f(e,["generatedImages"],a)}return e}function dC(n){const e={},i=d(n,["uri"]);i!=null&&f(e,["uri"],i);const r=d(n,["encodedVideo"]);r!=null&&f(e,["videoBytes"],mi(r));const a=d(n,["encoding"]);return a!=null&&f(e,["mimeType"],a),e}function fC(n){const e={},i=d(n,["gcsUri"]);i!=null&&f(e,["uri"],i);const r=d(n,["bytesBase64Encoded"]);r!=null&&f(e,["videoBytes"],mi(r));const a=d(n,["mimeType"]);return a!=null&&f(e,["mimeType"],a),e}function hC(n){const e={},i=d(n,["image"]);i!=null&&f(e,["_self"],cn(i));const r=d(n,["maskMode"]);return r!=null&&f(e,["maskMode"],r),e}function pC(n){const e={},i=d(n,["image"]);i!=null&&f(e,["image"],Ka(i));const r=d(n,["referenceType"]);return r!=null&&f(e,["referenceType"],r),e}function mC(n){const e={},i=d(n,["image"]);i!=null&&f(e,["image"],cn(i));const r=d(n,["referenceType"]);return r!=null&&f(e,["referenceType"],r),e}function vy(n){const e={},i=d(n,["uri"]);i!=null&&f(e,["uri"],i);const r=d(n,["videoBytes"]);r!=null&&f(e,["encodedVideo"],mi(r));const a=d(n,["mimeType"]);return a!=null&&f(e,["encoding"],a),e}function _y(n){const e={},i=d(n,["uri"]);i!=null&&f(e,["gcsUri"],i);const r=d(n,["videoBytes"]);r!=null&&f(e,["bytesBase64Encoded"],mi(r));const a=d(n,["mimeType"]);return a!=null&&f(e,["mimeType"],a),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const gC="Content-Type",yC="X-Server-Timeout",vC="User-Agent",jc="x-goog-api-client",_C="1.30.0",xC=`google-genai-sdk/${_C}`,bC="v1beta1",SC="v1beta",rg=/^\s*data: (.*)(?:\n\n|\r\r|\r\n\r\n)/;class TC{constructor(e){var i,r;this.clientOptions=Object.assign(Object.assign({},e),{project:e.project,location:e.location,apiKey:e.apiKey,vertexai:e.vertexai});const a={};this.clientOptions.vertexai?(a.apiVersion=(i=this.clientOptions.apiVersion)!==null&&i!==void 0?i:bC,a.baseUrl=this.baseUrlFromProjectLocation(),this.normalizeAuthParameters()):(a.apiVersion=(r=this.clientOptions.apiVersion)!==null&&r!==void 0?r:SC,a.baseUrl="https://generativelanguage.googleapis.com/"),a.headers=this.getDefaultHeaders(),this.clientOptions.httpOptions=a,e.httpOptions&&(this.clientOptions.httpOptions=this.patchHttpOptions(a,e.httpOptions))}baseUrlFromProjectLocation(){return this.clientOptions.project&&this.clientOptions.location&&this.clientOptions.location!=="global"?`https://${this.clientOptions.location}-aiplatform.googleapis.com/`:"https://aiplatform.googleapis.com/"}normalizeAuthParameters(){if(this.clientOptions.project&&this.clientOptions.location){this.clientOptions.apiKey=void 0;return}this.clientOptions.project=void 0,this.clientOptions.location=void 0}isVertexAI(){var e;return(e=this.clientOptions.vertexai)!==null&&e!==void 0?e:!1}getProject(){return this.clientOptions.project}getLocation(){return this.clientOptions.location}getApiVersion(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.apiVersion!==void 0)return this.clientOptions.httpOptions.apiVersion;throw new Error("API version is not set.")}getBaseUrl(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.baseUrl!==void 0)return this.clientOptions.httpOptions.baseUrl;throw new Error("Base URL is not set.")}getRequestUrl(){return this.getRequestUrlInternal(this.clientOptions.httpOptions)}getHeaders(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.headers!==void 0)return this.clientOptions.httpOptions.headers;throw new Error("Headers are not set.")}getRequestUrlInternal(e){if(!e||e.baseUrl===void 0||e.apiVersion===void 0)throw new Error("HTTP options are not correctly set.");const r=[e.baseUrl.endsWith("/")?e.baseUrl.slice(0,-1):e.baseUrl];return e.apiVersion&&e.apiVersion!==""&&r.push(e.apiVersion),r.join("/")}getBaseResourcePath(){return`projects/${this.clientOptions.project}/locations/${this.clientOptions.location}`}getApiKey(){return this.clientOptions.apiKey}getWebsocketBaseUrl(){const e=this.getBaseUrl(),i=new URL(e);return i.protocol=i.protocol=="http:"?"ws":"wss",i.toString()}setBaseUrl(e){if(this.clientOptions.httpOptions)this.clientOptions.httpOptions.baseUrl=e;else throw new Error("HTTP options are not correctly set.")}constructUrl(e,i,r){const a=[this.getRequestUrlInternal(i)];return r&&a.push(this.getBaseResourcePath()),e!==""&&a.push(e),new URL(`${a.join("/")}`)}shouldPrependVertexProjectPath(e){return!(this.clientOptions.apiKey||!this.clientOptions.vertexai||e.path.startsWith("projects/")||e.httpMethod==="GET"&&e.path.startsWith("publishers/google/models"))}async request(e){let i=this.clientOptions.httpOptions;e.httpOptions&&(i=this.patchHttpOptions(this.clientOptions.httpOptions,e.httpOptions));const r=this.shouldPrependVertexProjectPath(e),a=this.constructUrl(e.path,i,r);if(e.queryParams)for(const[c,h]of Object.entries(e.queryParams))a.searchParams.append(c,String(h));let l={};if(e.httpMethod==="GET"){if(e.body&&e.body!=="{}")throw new Error("Request body should be empty for GET request, but got non empty request body")}else l.body=e.body;return l=await this.includeExtraHttpOptionsToRequestInit(l,i,a.toString(),e.abortSignal),this.unaryApiCall(a,l,e.httpMethod)}patchHttpOptions(e,i){const r=JSON.parse(JSON.stringify(e));for(const[a,l]of Object.entries(i))typeof l=="object"?r[a]=Object.assign(Object.assign({},r[a]),l):l!==void 0&&(r[a]=l);return r}async requestStream(e){let i=this.clientOptions.httpOptions;e.httpOptions&&(i=this.patchHttpOptions(this.clientOptions.httpOptions,e.httpOptions));const r=this.shouldPrependVertexProjectPath(e),a=this.constructUrl(e.path,i,r);(!a.searchParams.has("alt")||a.searchParams.get("alt")!=="sse")&&a.searchParams.set("alt","sse");let l={};return l.body=e.body,l=await this.includeExtraHttpOptionsToRequestInit(l,i,a.toString(),e.abortSignal),this.streamApiCall(a,l,e.httpMethod)}async includeExtraHttpOptionsToRequestInit(e,i,r,a){if(i&&i.timeout||a){const l=new AbortController,c=l.signal;if(i.timeout&&(i==null?void 0:i.timeout)>0){const h=setTimeout(()=>l.abort(),i.timeout);h&&typeof h.unref=="function"&&h.unref()}a&&a.addEventListener("abort",()=>{l.abort()}),e.signal=c}return i&&i.extraBody!==null&&EC(e,i.extraBody),e.headers=await this.getHeadersInternal(i,r),e}async unaryApiCall(e,i,r){return this.apiCall(e.toString(),Object.assign(Object.assign({},i),{method:r})).then(async a=>(await og(a),new qc(a))).catch(a=>{throw a instanceof Error?a:new Error(JSON.stringify(a))})}async streamApiCall(e,i,r){return this.apiCall(e.toString(),Object.assign(Object.assign({},i),{method:r})).then(async a=>(await og(a),this.processStreamResponse(a))).catch(a=>{throw a instanceof Error?a:new Error(JSON.stringify(a))})}processStreamResponse(e){var i;return Bs(this,arguments,function*(){const a=(i=e==null?void 0:e.body)===null||i===void 0?void 0:i.getReader(),l=new TextDecoder("utf-8");if(!a)throw new Error("Response body is empty");try{let c="";for(;;){const{done:h,value:g}=yield Je(a.read());if(h){if(c.trim().length>0)throw new Error("Incomplete JSON segment at the end");break}const p=l.decode(g,{stream:!0});try{const x=JSON.parse(p);if("error"in x){const S=JSON.parse(JSON.stringify(x.error)),T=S.status,w=S.code,C=`got status: ${T}. ${JSON.stringify(x)}`;if(w>=400&&w<600)throw new $a({message:C,status:w})}}catch(x){if(x.name==="ApiError")throw x}c+=p;let _=c.match(rg);for(;_;){const x=_[1];try{const S=new Response(x,{headers:e==null?void 0:e.headers,status:e==null?void 0:e.status,statusText:e==null?void 0:e.statusText});yield yield Je(new qc(S)),c=c.slice(_[0].length),_=c.match(rg)}catch(S){throw new Error(`exception parsing stream chunk ${x}. ${S}`)}}}}finally{a.releaseLock()}})}async apiCall(e,i){return fetch(e,i).catch(r=>{throw new Error(`exception ${r} sending request`)})}getDefaultHeaders(){const e={},i=xC+" "+this.clientOptions.userAgentExtra;return e[vC]=i,e[jc]=i,e[gC]="application/json",e}async getHeadersInternal(e,i){const r=new Headers;if(e&&e.headers){for(const[a,l]of Object.entries(e.headers))r.append(a,l);e.timeout&&e.timeout>0&&r.append(yC,String(Math.ceil(e.timeout/1e3)))}return await this.clientOptions.auth.addAuthHeaders(r,i),r}getFileName(e){var i;let r="";return typeof e=="string"&&(r=e.replace(/[/\\]+$/,""),r=(i=r.split(/[/\\]/).pop())!==null&&i!==void 0?i:""),r}async uploadFile(e,i){var r;const a={};i!=null&&(a.mimeType=i.mimeType,a.name=i.name,a.displayName=i.displayName),a.name&&!a.name.startsWith("files/")&&(a.name=`files/${a.name}`);const l=this.clientOptions.uploader,c=await l.stat(e);a.sizeBytes=String(c.size);const h=(r=i==null?void 0:i.mimeType)!==null&&r!==void 0?r:c.type;if(h===void 0||h==="")throw new Error("Can not determine mimeType. Please provide mimeType in the config.");a.mimeType=h;const g={file:a},p=this.getFileName(e),_=ee("upload/v1beta/files",g._url),x=await this.fetchUploadUrl(_,a.sizeBytes,a.mimeType,p,g,i==null?void 0:i.httpOptions);return l.upload(e,x,this)}async uploadFileToFileSearchStore(e,i,r){var a;const l=this.clientOptions.uploader,c=await l.stat(i),h=String(c.size),g=(a=r==null?void 0:r.mimeType)!==null&&a!==void 0?a:c.type;if(g===void 0||g==="")throw new Error("Can not determine mimeType. Please provide mimeType in the config.");const p=`upload/v1beta/${e}:uploadToFileSearchStore`,_=this.getFileName(i),x={};r!=null&&r.customMetadata&&(x.customMetadata=r.customMetadata),r!=null&&r.chunkingConfig&&(x.chunkingConfig=r.chunkingConfig);const S=await this.fetchUploadUrl(p,h,g,_,x,r==null?void 0:r.httpOptions);return l.uploadToFileSearchStore(i,S,this)}async downloadFile(e){await this.clientOptions.downloader.download(e,this)}async fetchUploadUrl(e,i,r,a,l,c){var h;let g={};c?g=c:g={apiVersion:"",headers:Object.assign({"Content-Type":"application/json","X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${i}`,"X-Goog-Upload-Header-Content-Type":`${r}`},a?{"X-Goog-Upload-File-Name":a}:{})};const p=await this.request({path:e,body:JSON.stringify(l),httpMethod:"POST",httpOptions:g});if(!p||!(p!=null&&p.headers))throw new Error("Server did not return an HttpResponse or the returned HttpResponse did not have headers.");const _=(h=p==null?void 0:p.headers)===null||h===void 0?void 0:h["x-goog-upload-url"];if(_===void 0)throw new Error("Failed to get upload url. Server did not return the x-google-upload-url in the headers");return _}}async function og(n){var e;if(n===void 0)throw new Error("response is undefined");if(!n.ok){const i=n.status;let r;!((e=n.headers.get("content-type"))===null||e===void 0)&&e.includes("application/json")?r=await n.json():r={error:{message:await n.text(),code:n.status,status:n.statusText}};const a=JSON.stringify(r);throw i>=400&&i<600?new $a({message:a,status:i}):new Error(a)}}function EC(n,e){if(!e||Object.keys(e).length===0)return;if(n.body instanceof Blob){console.warn("includeExtraBodyToRequestInit: extraBody provided but current request body is a Blob. extraBody will be ignored as merging is not supported for Blob bodies.");return}let i={};if(typeof n.body=="string"&&n.body.length>0)try{const l=JSON.parse(n.body);if(typeof l=="object"&&l!==null&&!Array.isArray(l))i=l;else{console.warn("includeExtraBodyToRequestInit: Original request body is valid JSON but not a non-array object. Skip applying extraBody to the request body.");return}}catch{console.warn("includeExtraBodyToRequestInit: Original request body is not valid JSON. Skip applying extraBody to the request body.");return}function r(l,c){const h=Object.assign({},l);for(const g in c)if(Object.prototype.hasOwnProperty.call(c,g)){const p=c[g],_=h[g];p&&typeof p=="object"&&!Array.isArray(p)&&_&&typeof _=="object"&&!Array.isArray(_)?h[g]=r(_,p):(_&&p&&typeof _!=typeof p&&console.warn(`includeExtraBodyToRequestInit:deepMerge: Type mismatch for key "${g}". Original type: ${typeof _}, New type: ${typeof p}. Overwriting.`),h[g]=p)}return h}const a=r(i,e);n.body=JSON.stringify(a)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const wC="mcp_used/unknown";let CC=!1;function xy(n){for(const e of n)if(AC(e)||typeof e=="object"&&"inputSchema"in e)return!0;return CC}function by(n){var e;const i=(e=n[jc])!==null&&e!==void 0?e:"";n[jc]=(i+` ${wC}`).trimStart()}function AC(n){return n!==null&&typeof n=="object"&&n instanceof gd}function NC(n,e=100){return Bs(this,arguments,function*(){let r,a=0;for(;a<e;){const l=yield Je(n.listTools({cursor:r}));for(const c of l.tools)yield yield Je(c),a++;if(!l.nextCursor)break;r=l.nextCursor}})}class gd{constructor(e=[],i){this.mcpTools=[],this.functionNameToMcpClient={},this.mcpClients=e,this.config=i}static create(e,i){return new gd(e,i)}async initialize(){var e,i,r,a;if(this.mcpTools.length>0)return;const l={},c=[];for(const _ of this.mcpClients)try{for(var h=!0,g=(i=void 0,Kr(NC(_))),p;p=await g.next(),e=p.done,!e;h=!0){a=p.value,h=!1;const x=a;c.push(x);const S=x.name;if(l[S])throw new Error(`Duplicate function name ${S} found in MCP tools. Please ensure function names are unique.`);l[S]=_}}catch(x){i={error:x}}finally{try{!h&&!e&&(r=g.return)&&await r.call(g)}finally{if(i)throw i.error}}this.mcpTools=c,this.functionNameToMcpClient=l}async tool(){return await this.initialize(),xS(this.mcpTools,this.config)}async callTool(e){await this.initialize();const i=[];for(const r of e)if(r.name in this.functionNameToMcpClient){const a=this.functionNameToMcpClient[r.name];let l;this.config.timeout&&(l={timeout:this.config.timeout});const c=await a.callTool({name:r.name,arguments:r.args},void 0,l);i.push({functionResponse:{name:r.name,response:c.isError?{error:c}:c}})}return i}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */async function RC(n,e,i){const r=new fS;let a;i.data instanceof Blob?a=JSON.parse(await i.data.text()):a=JSON.parse(i.data),Object.assign(r,a),e(r)}class MC{constructor(e,i,r){this.apiClient=e,this.auth=i,this.webSocketFactory=r}async connect(e){var i,r;if(this.apiClient.isVertexAI())throw new Error("Live music is not supported for Vertex AI.");console.warn("Live music generation is experimental and may change in future versions.");const a=this.apiClient.getWebsocketBaseUrl(),l=this.apiClient.getApiVersion(),c=DC(this.apiClient.getDefaultHeaders()),h=this.apiClient.getApiKey(),g=`${a}/ws/google.ai.generativelanguage.${l}.GenerativeService.BidiGenerateMusic?key=${h}`;let p=()=>{};const _=new Promise(I=>{p=I}),x=e.callbacks,S=function(){p({})},T=this.apiClient,w={onopen:S,onmessage:I=>{RC(T,x.onmessage,I)},onerror:(i=x==null?void 0:x.onerror)!==null&&i!==void 0?i:function(I){},onclose:(r=x==null?void 0:x.onclose)!==null&&r!==void 0?r:function(I){}},C=this.webSocketFactory.create(g,kC(c),w);C.connect(),await _;const B={setup:{model:Ie(this.apiClient,e.model)}};return C.send(JSON.stringify(B)),new IC(C,this.apiClient)}}class IC{constructor(e,i){this.conn=e,this.apiClient=i}async setWeightedPrompts(e){if(!e.weightedPrompts||Object.keys(e.weightedPrompts).length===0)throw new Error("Weighted prompts must be set and contain at least one entry.");const i=yE(e);this.conn.send(JSON.stringify({clientContent:i}))}async setMusicGenerationConfig(e){e.musicGenerationConfig||(e.musicGenerationConfig={});const i=gE(e);this.conn.send(JSON.stringify(i))}sendPlaybackControl(e){const i={playbackControl:e};this.conn.send(JSON.stringify(i))}play(){this.sendPlaybackControl(Ls.PLAY)}pause(){this.sendPlaybackControl(Ls.PAUSE)}stop(){this.sendPlaybackControl(Ls.STOP)}resetContext(){this.sendPlaybackControl(Ls.RESET_CONTEXT)}close(){this.conn.close()}}function kC(n){const e={};return n.forEach((i,r)=>{e[r]=i}),e}function DC(n){const e=new Headers;for(const[i,r]of Object.entries(n))e.append(i,r);return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const UC="FunctionResponse request must have an `id` field from the response of a ToolCall.FunctionalCalls in Google AI.";async function PC(n,e,i){const r=new dS;let a;i.data instanceof Blob?a=await i.data.text():i.data instanceof ArrayBuffer?a=new TextDecoder().decode(i.data):a=i.data;const l=JSON.parse(a);if(n.isVertexAI()){const c=xE(l);Object.assign(r,c)}else Object.assign(r,l);e(r)}class OC{constructor(e,i,r){this.apiClient=e,this.auth=i,this.webSocketFactory=r,this.music=new MC(this.apiClient,this.auth,this.webSocketFactory)}async connect(e){var i,r,a,l,c,h;if(e.config&&e.config.httpOptions)throw new Error("The Live module does not support httpOptions at request-level in LiveConnectConfig yet. Please use the client-level httpOptions configuration instead.");const g=this.apiClient.getWebsocketBaseUrl(),p=this.apiClient.getApiVersion();let _;const x=this.apiClient.getHeaders();e.config&&e.config.tools&&xy(e.config.tools)&&by(x);const S=GC(x);if(this.apiClient.isVertexAI())_=`${g}/ws/google.cloud.aiplatform.${p}.LlmBidiService/BidiGenerateContent`,await this.auth.addAuthHeaders(S,_);else{const Y=this.apiClient.getApiKey();let ce="BidiGenerateContent",he="key";Y!=null&&Y.startsWith("auth_tokens/")&&(console.warn("Warning: Ephemeral token support is experimental and may change in future versions."),p!=="v1alpha"&&console.warn("Warning: The SDK's ephemeral token support is in v1alpha only. Please use const ai = new GoogleGenAI({apiKey: token.name, httpOptions: { apiVersion: 'v1alpha' }}); before session connection."),ce="BidiGenerateContentConstrained",he="access_token"),_=`${g}/ws/google.ai.generativelanguage.${p}.GenerativeService.${ce}?${he}=${Y}`}let T=()=>{};const w=new Promise(Y=>{T=Y}),C=e.callbacks,M=function(){var Y;(Y=C==null?void 0:C.onopen)===null||Y===void 0||Y.call(C),T({})},D=this.apiClient,B={onopen:M,onmessage:Y=>{PC(D,C.onmessage,Y)},onerror:(i=C==null?void 0:C.onerror)!==null&&i!==void 0?i:function(Y){},onclose:(r=C==null?void 0:C.onclose)!==null&&r!==void 0?r:function(Y){}},I=this.webSocketFactory.create(_,BC(S),B);I.connect(),await w;let z=Ie(this.apiClient,e.model);if(this.apiClient.isVertexAI()&&z.startsWith("publishers/")){const Y=this.apiClient.getProject(),ce=this.apiClient.getLocation();z=`projects/${Y}/locations/${ce}/`+z}let U={};this.apiClient.isVertexAI()&&((a=e.config)===null||a===void 0?void 0:a.responseModalities)===void 0&&(e.config===void 0?e.config={responseModalities:[Zr.AUDIO]}:e.config.responseModalities=[Zr.AUDIO]),!((l=e.config)===null||l===void 0)&&l.generationConfig&&console.warn("Setting `LiveConnectConfig.generation_config` is deprecated, please set the fields on `LiveConnectConfig` directly. This will become an error in a future version (not before Q3 2025).");const K=(h=(c=e.config)===null||c===void 0?void 0:c.tools)!==null&&h!==void 0?h:[],G=[];for(const Y of K)if(this.isCallableTool(Y)){const ce=Y;G.push(await ce.tool())}else G.push(Y);G.length>0&&(e.config.tools=G);const X={model:z,config:e.config,callbacks:e.callbacks};return this.apiClient.isVertexAI()?U=mE(this.apiClient,X):U=pE(this.apiClient,X),delete U.config,I.send(JSON.stringify(U)),new qC(I,this.apiClient)}isCallableTool(e){return"callTool"in e&&typeof e.callTool=="function"}}const LC={turnComplete:!0};class qC{constructor(e,i){this.conn=e,this.apiClient=i}tLiveClientContent(e,i){if(i.turns!==null&&i.turns!==void 0){let r=[];try{r=nn(i.turns),e.isVertexAI()||(r=r.map(a=>Fa(a)))}catch{throw new Error(`Failed to parse client content "turns", type: '${typeof i.turns}'`)}return{clientContent:{turns:r,turnComplete:i.turnComplete}}}return{clientContent:{turnComplete:i.turnComplete}}}tLiveClienttToolResponse(e,i){let r=[];if(i.functionResponses==null)throw new Error("functionResponses is required.");if(Array.isArray(i.functionResponses)?r=i.functionResponses:r=[i.functionResponses],r.length===0)throw new Error("functionResponses is required.");for(const l of r){if(typeof l!="object"||l===null||!("name"in l)||!("response"in l))throw new Error(`Could not parse function response, type '${typeof l}'.`);if(!e.isVertexAI()&&!("id"in l))throw new Error(UC)}return{toolResponse:{functionResponses:r}}}sendClientContent(e){e=Object.assign(Object.assign({},LC),e);const i=this.tLiveClientContent(this.apiClient,e);this.conn.send(JSON.stringify(i))}sendRealtimeInput(e){let i={};this.apiClient.isVertexAI()?i={realtimeInput:_E(e)}:i={realtimeInput:vE(e)},this.conn.send(JSON.stringify(i))}sendToolResponse(e){if(e.functionResponses==null)throw new Error("Tool response parameters are required.");const i=this.tLiveClienttToolResponse(this.apiClient,e);this.conn.send(JSON.stringify(i))}close(){this.conn.close()}}function BC(n){const e={};return n.forEach((i,r)=>{e[r]=i}),e}function GC(n){const e=new Headers;for(const[i,r]of Object.entries(n))e.append(i,r);return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const ag=10;function lg(n){var e,i,r;if(!((e=n==null?void 0:n.automaticFunctionCalling)===null||e===void 0)&&e.disable)return!0;let a=!1;for(const c of(i=n==null?void 0:n.tools)!==null&&i!==void 0?i:[])if(Gs(c)){a=!0;break}if(!a)return!0;const l=(r=n==null?void 0:n.automaticFunctionCalling)===null||r===void 0?void 0:r.maximumRemoteCalls;return l&&(l<0||!Number.isInteger(l))||l==0?(console.warn("Invalid maximumRemoteCalls value provided for automatic function calling. Disabled automatic function calling. Please provide a valid integer value greater than 0. maximumRemoteCalls provided:",l),!0):!1}function Gs(n){return"callTool"in n&&typeof n.callTool=="function"}function VC(n){var e,i,r;return(r=(i=(e=n.config)===null||e===void 0?void 0:e.tools)===null||i===void 0?void 0:i.some(a=>Gs(a)))!==null&&r!==void 0?r:!1}function ug(n){var e;const i=[];return!((e=n==null?void 0:n.config)===null||e===void 0)&&e.tools&&n.config.tools.forEach((r,a)=>{if(Gs(r))return;const l=r;l.functionDeclarations&&l.functionDeclarations.length>0&&i.push(a)}),i}function cg(n){var e;return!(!((e=n==null?void 0:n.automaticFunctionCalling)===null||e===void 0)&&e.ignoreCallHistory)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class HC extends Ln{constructor(e){super(),this.apiClient=e,this.generateContent=async i=>{var r,a,l,c,h;const g=await this.processParamsMaybeAddMcpUsage(i);if(this.maybeMoveToResponseJsonSchem(i),!VC(i)||lg(i.config))return await this.generateContentInternal(g);const p=ug(i);if(p.length>0){const C=p.map(M=>`tools[${M}]`).join(", ");throw new Error(`Automatic function calling with CallableTools (or MCP objects) and basic FunctionDeclarations is not yet supported. Incompatible tools found at ${C}.`)}let _,x;const S=nn(g.contents),T=(l=(a=(r=g.config)===null||r===void 0?void 0:r.automaticFunctionCalling)===null||a===void 0?void 0:a.maximumRemoteCalls)!==null&&l!==void 0?l:ag;let w=0;for(;w<T&&(_=await this.generateContentInternal(g),!(!_.functionCalls||_.functionCalls.length===0));){const C=_.candidates[0].content,M=[];for(const D of(h=(c=i.config)===null||c===void 0?void 0:c.tools)!==null&&h!==void 0?h:[])if(Gs(D)){const I=await D.callTool(_.functionCalls);M.push(...I)}w++,x={role:"user",parts:M},g.contents=nn(g.contents),g.contents.push(C),g.contents.push(x),cg(g.config)&&(S.push(C),S.push(x))}return cg(g.config)&&(_.automaticFunctionCallingHistory=S),_},this.generateContentStream=async i=>{var r,a,l,c,h;if(this.maybeMoveToResponseJsonSchem(i),lg(i.config)){const x=await this.processParamsMaybeAddMcpUsage(i);return await this.generateContentStreamInternal(x)}const g=ug(i);if(g.length>0){const x=g.map(S=>`tools[${S}]`).join(", ");throw new Error(`Incompatible tools found at ${x}. Automatic function calling with CallableTools (or MCP objects) and basic FunctionDeclarations" is not yet supported.`)}const p=(l=(a=(r=i==null?void 0:i.config)===null||r===void 0?void 0:r.toolConfig)===null||a===void 0?void 0:a.functionCallingConfig)===null||l===void 0?void 0:l.streamFunctionCallArguments,_=(h=(c=i==null?void 0:i.config)===null||c===void 0?void 0:c.automaticFunctionCalling)===null||h===void 0?void 0:h.disable;if(p&&!_)throw new Error("Running in streaming mode with 'streamFunctionCallArguments' enabled, this feature is not compatible with automatic function calling (AFC). Please set 'config.automaticFunctionCalling.disable' to true to disable AFC or leave 'config.toolConfig.functionCallingConfig.streamFunctionCallArguments' to be undefined or set to false to disable streaming function call arguments feature.");return await this.processAfcStream(i)},this.generateImages=async i=>await this.generateImagesInternal(i).then(r=>{var a;let l;const c=[];if(r!=null&&r.generatedImages)for(const g of r.generatedImages)g&&(g!=null&&g.safetyAttributes)&&((a=g==null?void 0:g.safetyAttributes)===null||a===void 0?void 0:a.contentType)==="Positive Prompt"?l=g==null?void 0:g.safetyAttributes:c.push(g);let h;return l?h={generatedImages:c,positivePromptSafetyAttributes:l,sdkHttpResponse:r.sdkHttpResponse}:h={generatedImages:c,sdkHttpResponse:r.sdkHttpResponse},h}),this.list=async i=>{var r;const c={config:Object.assign(Object.assign({},{queryBase:!0}),i==null?void 0:i.config)};if(this.apiClient.isVertexAI()&&!c.config.queryBase){if(!((r=c.config)===null||r===void 0)&&r.filter)throw new Error("Filtering tuned models list for Vertex AI is not currently supported");c.config.filter="labels.tune-type:*"}return new ji(Pn.PAGED_ITEM_MODELS,h=>this.listInternal(h),await this.listInternal(c),c)},this.editImage=async i=>{const r={model:i.model,prompt:i.prompt,referenceImages:[],config:i.config};return i.referenceImages&&i.referenceImages&&(r.referenceImages=i.referenceImages.map(a=>a.toReferenceImageAPI())),await this.editImageInternal(r)},this.upscaleImage=async i=>{let r={numberOfImages:1,mode:"upscale"};i.config&&(r=Object.assign(Object.assign({},r),i.config));const a={model:i.model,image:i.image,upscaleFactor:i.upscaleFactor,config:r};return await this.upscaleImageInternal(a)},this.generateVideos=async i=>{var r,a,l,c,h,g;if((i.prompt||i.image||i.video)&&i.source)throw new Error("Source and prompt/image/video are mutually exclusive. Please only use source.");return this.apiClient.isVertexAI()||(!((r=i.video)===null||r===void 0)&&r.uri&&(!((a=i.video)===null||a===void 0)&&a.videoBytes)?i.video={uri:i.video.uri,mimeType:i.video.mimeType}:!((c=(l=i.source)===null||l===void 0?void 0:l.video)===null||c===void 0)&&c.uri&&(!((g=(h=i.source)===null||h===void 0?void 0:h.video)===null||g===void 0)&&g.videoBytes)&&(i.source.video={uri:i.source.video.uri,mimeType:i.source.video.mimeType})),await this.generateVideosInternal(i)}}maybeMoveToResponseJsonSchem(e){e.config&&e.config.responseSchema&&(e.config.responseJsonSchema||Object.keys(e.config.responseSchema).includes("$schema")&&(e.config.responseJsonSchema=e.config.responseSchema,delete e.config.responseSchema))}async processParamsMaybeAddMcpUsage(e){var i,r,a;const l=(i=e.config)===null||i===void 0?void 0:i.tools;if(!l)return e;const c=await Promise.all(l.map(async g=>Gs(g)?await g.tool():g)),h={model:e.model,contents:e.contents,config:Object.assign(Object.assign({},e.config),{tools:c})};if(h.config.tools=c,e.config&&e.config.tools&&xy(e.config.tools)){const g=(a=(r=e.config.httpOptions)===null||r===void 0?void 0:r.headers)!==null&&a!==void 0?a:{};let p=Object.assign({},g);Object.keys(p).length===0&&(p=this.apiClient.getDefaultHeaders()),by(p),h.config.httpOptions=Object.assign(Object.assign({},e.config.httpOptions),{headers:p})}return h}async initAfcToolsMap(e){var i,r,a;const l=new Map;for(const c of(r=(i=e.config)===null||i===void 0?void 0:i.tools)!==null&&r!==void 0?r:[])if(Gs(c)){const h=c,g=await h.tool();for(const p of(a=g.functionDeclarations)!==null&&a!==void 0?a:[]){if(!p.name)throw new Error("Function declaration name is required.");if(l.has(p.name))throw new Error(`Duplicate tool declaration name: ${p.name}`);l.set(p.name,h)}}return l}async processAfcStream(e){var i,r,a;const l=(a=(r=(i=e.config)===null||i===void 0?void 0:i.automaticFunctionCalling)===null||r===void 0?void 0:r.maximumRemoteCalls)!==null&&a!==void 0?a:ag;let c=!1,h=0;const g=await this.initAfcToolsMap(e);return(function(p,_,x){var S,T;return Bs(this,arguments,function*(){for(var w,C,M,D;h<l;){c&&(h++,c=!1);const U=yield Je(p.processParamsMaybeAddMcpUsage(x)),K=yield Je(p.generateContentStreamInternal(U)),G=[],X=[];try{for(var B=!0,I=(C=void 0,Kr(K)),z;z=yield Je(I.next()),w=z.done,!w;B=!0){D=z.value,B=!1;const Y=D;if(yield yield Je(Y),Y.candidates&&(!((S=Y.candidates[0])===null||S===void 0)&&S.content)){X.push(Y.candidates[0].content);for(const ce of(T=Y.candidates[0].content.parts)!==null&&T!==void 0?T:[])if(h<l&&ce.functionCall){if(!ce.functionCall.name)throw new Error("Function call name was not returned by the model.");if(_.has(ce.functionCall.name)){const he=yield Je(_.get(ce.functionCall.name).callTool([ce.functionCall]));G.push(...he)}else throw new Error(`Automatic function calling was requested, but not all the tools the model used implement the CallableTool interface. Available tools: ${_.keys()}, mising tool: ${ce.functionCall.name}`)}}}}catch(Y){C={error:Y}}finally{try{!B&&!w&&(M=I.return)&&(yield Je(M.call(I)))}finally{if(C)throw C.error}}if(G.length>0){c=!0;const Y=new Fr;Y.candidates=[{content:{role:"user",parts:G}}],yield yield Je(Y);const ce=[];ce.push(...X),ce.push({role:"user",parts:G});const he=nn(x.contents).concat(ce);x.contents=he}else break}})})(this,g,e)}async generateContentInternal(e){var i,r,a,l;let c,h="",g={};if(this.apiClient.isVertexAI()){const p=ng(this.apiClient,e);return h=ee("{model}:generateContent",p._url),g=p._query,delete p._url,delete p._query,c=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(_=>_.json().then(x=>{const S=x;return S.sdkHttpResponse={headers:_.headers},S})),c.then(_=>{const x=sg(_),S=new Fr;return Object.assign(S,x),S})}else{const p=tg(this.apiClient,e);return h=ee("{model}:generateContent",p._url),g=p._query,delete p._url,delete p._query,c=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(a=e.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(_=>_.json().then(x=>{const S=x;return S.sdkHttpResponse={headers:_.headers},S})),c.then(_=>{const x=ig(_),S=new Fr;return Object.assign(S,x),S})}}async generateContentStreamInternal(e){var i,r,a,l;let c,h="",g={};if(this.apiClient.isVertexAI()){const p=ng(this.apiClient,e);return h=ee("{model}:streamGenerateContent?alt=sse",p._url),g=p._query,delete p._url,delete p._query,c=this.apiClient.requestStream({path:h,queryParams:g,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}),c.then(function(x){return Bs(this,arguments,function*(){var S,T,w,C;try{for(var M=!0,D=Kr(x),B;B=yield Je(D.next()),S=B.done,!S;M=!0){C=B.value,M=!1;const I=C,z=sg(yield Je(I.json()));z.sdkHttpResponse={headers:I.headers};const U=new Fr;Object.assign(U,z),yield yield Je(U)}}catch(I){T={error:I}}finally{try{!M&&!S&&(w=D.return)&&(yield Je(w.call(D)))}finally{if(T)throw T.error}}})})}else{const p=tg(this.apiClient,e);return h=ee("{model}:streamGenerateContent?alt=sse",p._url),g=p._query,delete p._url,delete p._query,c=this.apiClient.requestStream({path:h,queryParams:g,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(a=e.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}),c.then(function(x){return Bs(this,arguments,function*(){var S,T,w,C;try{for(var M=!0,D=Kr(x),B;B=yield Je(D.next()),S=B.done,!S;M=!0){C=B.value,M=!1;const I=C,z=ig(yield Je(I.json()));z.sdkHttpResponse={headers:I.headers};const U=new Fr;Object.assign(U,z),yield yield Je(U)}}catch(I){T={error:I}}finally{try{!M&&!S&&(w=D.return)&&(yield Je(w.call(D)))}finally{if(T)throw T.error}}})})}}async embedContent(e){var i,r,a,l;let c,h="",g={};if(this.apiClient.isVertexAI()){const p=QE(this.apiClient,e);return h=ee("{model}:predict",p._url),g=p._query,delete p._url,delete p._query,c=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(_=>_.json().then(x=>{const S=x;return S.sdkHttpResponse={headers:_.headers},S})),c.then(_=>{const x=ZE(_),S=new B0;return Object.assign(S,x),S})}else{const p=YE(this.apiClient,e);return h=ee("{model}:batchEmbedContents",p._url),g=p._query,delete p._url,delete p._query,c=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(a=e.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(_=>_.json().then(x=>{const S=x;return S.sdkHttpResponse={headers:_.headers},S})),c.then(_=>{const x=XE(_),S=new B0;return Object.assign(S,x),S})}}async generateImagesInternal(e){var i,r,a,l;let c,h="",g={};if(this.apiClient.isVertexAI()){const p=uw(this.apiClient,e);return h=ee("{model}:predict",p._url),g=p._query,delete p._url,delete p._query,c=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(_=>_.json().then(x=>{const S=x;return S.sdkHttpResponse={headers:_.headers},S})),c.then(_=>{const x=dw(_),S=new G0;return Object.assign(S,x),S})}else{const p=lw(this.apiClient,e);return h=ee("{model}:predict",p._url),g=p._query,delete p._url,delete p._query,c=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(a=e.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(_=>_.json().then(x=>{const S=x;return S.sdkHttpResponse={headers:_.headers},S})),c.then(_=>{const x=cw(_),S=new G0;return Object.assign(S,x),S})}}async editImageInternal(e){var i,r;let a,l="",c={};if(this.apiClient.isVertexAI()){const h=$E(this.apiClient,e);return l=ee("{model}:predict",h._url),c=h._query,delete h._url,delete h._query,a=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(g=>g.json().then(p=>{const _=p;return _.sdkHttpResponse={headers:g.headers},_})),a.then(g=>{const p=FE(g),_=new eS;return Object.assign(_,p),_})}else throw new Error("This method is only supported by the Vertex AI.")}async upscaleImageInternal(e){var i,r;let a,l="",c={};if(this.apiClient.isVertexAI()){const h=uC(this.apiClient,e);return l=ee("{model}:predict",h._url),c=h._query,delete h._url,delete h._query,a=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(g=>g.json().then(p=>{const _=p;return _.sdkHttpResponse={headers:g.headers},_})),a.then(g=>{const p=cC(g),_=new tS;return Object.assign(_,p),_})}else throw new Error("This method is only supported by the Vertex AI.")}async recontextImage(e){var i,r;let a,l="",c={};if(this.apiClient.isVertexAI()){const h=zw(this.apiClient,e);return l=ee("{model}:predict",h._url),c=h._query,delete h._url,delete h._query,a=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(g=>g.json()),a.then(g=>{const p=$w(g),_=new nS;return Object.assign(_,p),_})}else throw new Error("This method is only supported by the Vertex AI.")}async segmentImage(e){var i,r;let a,l="",c={};if(this.apiClient.isVertexAI()){const h=Xw(this.apiClient,e);return l=ee("{model}:predict",h._url),c=h._query,delete h._url,delete h._query,a=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(g=>g.json()),a.then(g=>{const p=Zw(g),_=new iS;return Object.assign(_,p),_})}else throw new Error("This method is only supported by the Vertex AI.")}async get(e){var i,r,a,l;let c,h="",g={};if(this.apiClient.isVertexAI()){const p=Nw(this.apiClient,e);return h=ee("{name}",p._url),g=p._query,delete p._url,delete p._query,c=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(_=>_.json()),c.then(_=>Hc(_))}else{const p=Aw(this.apiClient,e);return h=ee("{name}",p._url),g=p._query,delete p._url,delete p._query,c=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(a=e.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(_=>_.json()),c.then(_=>Vc(_))}}async listInternal(e){var i,r,a,l;let c,h="",g={};if(this.apiClient.isVertexAI()){const p=Lw(this.apiClient,e);return h=ee("{models_url}",p._url),g=p._query,delete p._url,delete p._query,c=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(_=>_.json().then(x=>{const S=x;return S.sdkHttpResponse={headers:_.headers},S})),c.then(_=>{const x=Bw(_),S=new V0;return Object.assign(S,x),S})}else{const p=Ow(this.apiClient,e);return h=ee("{models_url}",p._url),g=p._query,delete p._url,delete p._query,c=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(a=e.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(_=>_.json().then(x=>{const S=x;return S.sdkHttpResponse={headers:_.headers},S})),c.then(_=>{const x=qw(_),S=new V0;return Object.assign(S,x),S})}}async update(e){var i,r,a,l;let c,h="",g={};if(this.apiClient.isVertexAI()){const p=aC(this.apiClient,e);return h=ee("{model}",p._url),g=p._query,delete p._url,delete p._query,c=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(p),httpMethod:"PATCH",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(_=>_.json()),c.then(_=>Hc(_))}else{const p=oC(this.apiClient,e);return h=ee("{name}",p._url),g=p._query,delete p._url,delete p._query,c=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(p),httpMethod:"PATCH",httpOptions:(a=e.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(_=>_.json()),c.then(_=>Vc(_))}}async delete(e){var i,r,a,l;let c,h="",g={};if(this.apiClient.isVertexAI()){const p=VE(this.apiClient,e);return h=ee("{name}",p._url),g=p._query,delete p._url,delete p._query,c=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(p),httpMethod:"DELETE",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(_=>_.json().then(x=>{const S=x;return S.sdkHttpResponse={headers:_.headers},S})),c.then(_=>{const x=jE(_),S=new H0;return Object.assign(S,x),S})}else{const p=GE(this.apiClient,e);return h=ee("{name}",p._url),g=p._query,delete p._url,delete p._query,c=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(p),httpMethod:"DELETE",httpOptions:(a=e.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(_=>_.json().then(x=>{const S=x;return S.sdkHttpResponse={headers:_.headers},S})),c.then(_=>{const x=HE(_),S=new H0;return Object.assign(S,x),S})}}async countTokens(e){var i,r,a,l;let c,h="",g={};if(this.apiClient.isVertexAI()){const p=LE(this.apiClient,e);return h=ee("{model}:countTokens",p._url),g=p._query,delete p._url,delete p._query,c=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(_=>_.json().then(x=>{const S=x;return S.sdkHttpResponse={headers:_.headers},S})),c.then(_=>{const x=BE(_),S=new j0;return Object.assign(S,x),S})}else{const p=OE(this.apiClient,e);return h=ee("{model}:countTokens",p._url),g=p._query,delete p._url,delete p._query,c=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(a=e.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(_=>_.json().then(x=>{const S=x;return S.sdkHttpResponse={headers:_.headers},S})),c.then(_=>{const x=qE(_),S=new j0;return Object.assign(S,x),S})}}async computeTokens(e){var i,r;let a,l="",c={};if(this.apiClient.isVertexAI()){const h=RE(this.apiClient,e);return l=ee("{model}:computeTokens",h._url),c=h._query,delete h._url,delete h._query,a=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(g=>g.json().then(p=>{const _=p;return _.sdkHttpResponse={headers:g.headers},_})),a.then(g=>{const p=ME(g),_=new sS;return Object.assign(_,p),_})}else throw new Error("This method is only supported by the Vertex AI.")}async generateVideosInternal(e){var i,r,a,l;let c,h="",g={};if(this.apiClient.isVertexAI()){const p=yw(this.apiClient,e);return h=ee("{model}:predictLongRunning",p._url),g=p._query,delete p._url,delete p._query,c=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(_=>_.json()),c.then(_=>{const x=mw(_),S=new Oa;return Object.assign(S,x),S})}else{const p=gw(this.apiClient,e);return h=ee("{model}:predictLongRunning",p._url),g=p._query,delete p._url,delete p._query,c=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(a=e.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(_=>_.json()),c.then(_=>{const x=pw(_),S=new Oa;return Object.assign(S,x),S})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class jC extends Ln{constructor(e){super(),this.apiClient=e}async getVideosOperation(e){const i=e.operation,r=e.config;if(i.name===void 0||i.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){const a=i.name.split("/operations/")[0];let l;r&&"httpOptions"in r&&(l=r.httpOptions);const c=await this.fetchPredictVideosOperationInternal({operationName:i.name,resourceName:a,config:{httpOptions:l}});return i._fromAPIResponse({apiResponse:c,_isVertexAI:!0})}else{const a=await this.getVideosOperationInternal({operationName:i.name,config:r});return i._fromAPIResponse({apiResponse:a,_isVertexAI:!1})}}async get(e){const i=e.operation,r=e.config;if(i.name===void 0||i.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){const a=i.name.split("/operations/")[0];let l;r&&"httpOptions"in r&&(l=r.httpOptions);const c=await this.fetchPredictVideosOperationInternal({operationName:i.name,resourceName:a,config:{httpOptions:l}});return i._fromAPIResponse({apiResponse:c,_isVertexAI:!0})}else{const a=await this.getVideosOperationInternal({operationName:i.name,config:r});return i._fromAPIResponse({apiResponse:a,_isVertexAI:!1})}}async getVideosOperationInternal(e){var i,r,a,l;let c,h="",g={};if(this.apiClient.isVertexAI()){const p=Kb(e);return h=ee("{operationName}",p._url),g=p._query,delete p._url,delete p._query,c=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(_=>_.json()),c}else{const p=Jb(e);return h=ee("{operationName}",p._url),g=p._query,delete p._url,delete p._query,c=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(a=e.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(_=>_.json()),c}}async fetchPredictVideosOperationInternal(e){var i,r;let a,l="",c={};if(this.apiClient.isVertexAI()){const h=Gb(e);return l=ee("{resourceName}:fetchPredictOperation",h._url),c=h._query,delete h._url,delete h._query,a=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(g=>g.json()),a}else throw new Error("This method is only supported by the Vertex AI.")}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function zC(n){const e={},i=d(n,["data"]);if(i!=null&&f(e,["data"],i),d(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const r=d(n,["mimeType"]);return r!=null&&f(e,["mimeType"],r),e}function $C(n){const e={},i=d(n,["parts"]);if(i!=null){let a=i;Array.isArray(a)&&(a=a.map(l=>e1(l))),f(e,["parts"],a)}const r=d(n,["role"]);return r!=null&&f(e,["role"],r),e}function FC(n,e,i){const r={},a=d(e,["expireTime"]);i!==void 0&&a!=null&&f(i,["expireTime"],a);const l=d(e,["newSessionExpireTime"]);i!==void 0&&l!=null&&f(i,["newSessionExpireTime"],l);const c=d(e,["uses"]);i!==void 0&&c!=null&&f(i,["uses"],c);const h=d(e,["liveConnectConstraints"]);i!==void 0&&h!=null&&f(i,["bidiGenerateContentSetup"],WC(n,h));const g=d(e,["lockAdditionalFields"]);return i!==void 0&&g!=null&&f(i,["fieldMask"],g),r}function JC(n,e){const i={},r=d(e,["config"]);return r!=null&&f(i,["config"],FC(n,r,i)),i}function KC(n){const e={};if(d(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const i=d(n,["fileUri"]);i!=null&&f(e,["fileUri"],i);const r=d(n,["mimeType"]);return r!=null&&f(e,["mimeType"],r),e}function YC(n){const e={},i=d(n,["id"]);i!=null&&f(e,["id"],i);const r=d(n,["args"]);r!=null&&f(e,["args"],r);const a=d(n,["name"]);if(a!=null&&f(e,["name"],a),d(n,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(d(n,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function QC(n){const e={};if(d(n,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const i=d(n,["enableWidget"]);return i!=null&&f(e,["enableWidget"],i),e}function XC(n){const e={};if(d(n,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(d(n,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const i=d(n,["timeRangeFilter"]);return i!=null&&f(e,["timeRangeFilter"],i),e}function ZC(n,e){const i={},r=d(n,["generationConfig"]);e!==void 0&&r!=null&&f(e,["setup","generationConfig"],r);const a=d(n,["responseModalities"]);e!==void 0&&a!=null&&f(e,["setup","generationConfig","responseModalities"],a);const l=d(n,["temperature"]);e!==void 0&&l!=null&&f(e,["setup","generationConfig","temperature"],l);const c=d(n,["topP"]);e!==void 0&&c!=null&&f(e,["setup","generationConfig","topP"],c);const h=d(n,["topK"]);e!==void 0&&h!=null&&f(e,["setup","generationConfig","topK"],h);const g=d(n,["maxOutputTokens"]);e!==void 0&&g!=null&&f(e,["setup","generationConfig","maxOutputTokens"],g);const p=d(n,["mediaResolution"]);e!==void 0&&p!=null&&f(e,["setup","generationConfig","mediaResolution"],p);const _=d(n,["seed"]);e!==void 0&&_!=null&&f(e,["setup","generationConfig","seed"],_);const x=d(n,["speechConfig"]);e!==void 0&&x!=null&&f(e,["setup","generationConfig","speechConfig"],md(x));const S=d(n,["thinkingConfig"]);e!==void 0&&S!=null&&f(e,["setup","generationConfig","thinkingConfig"],S);const T=d(n,["enableAffectiveDialog"]);e!==void 0&&T!=null&&f(e,["setup","generationConfig","enableAffectiveDialog"],T);const w=d(n,["systemInstruction"]);e!==void 0&&w!=null&&f(e,["setup","systemInstruction"],$C(Tt(w)));const C=d(n,["tools"]);if(e!==void 0&&C!=null){let K=Fs(C);Array.isArray(K)&&(K=K.map(G=>n1($s(G)))),f(e,["setup","tools"],K)}const M=d(n,["sessionResumption"]);e!==void 0&&M!=null&&f(e,["setup","sessionResumption"],t1(M));const D=d(n,["inputAudioTranscription"]);e!==void 0&&D!=null&&f(e,["setup","inputAudioTranscription"],D);const B=d(n,["outputAudioTranscription"]);e!==void 0&&B!=null&&f(e,["setup","outputAudioTranscription"],B);const I=d(n,["realtimeInputConfig"]);e!==void 0&&I!=null&&f(e,["setup","realtimeInputConfig"],I);const z=d(n,["contextWindowCompression"]);e!==void 0&&z!=null&&f(e,["setup","contextWindowCompression"],z);const U=d(n,["proactivity"]);return e!==void 0&&U!=null&&f(e,["setup","proactivity"],U),i}function WC(n,e){const i={},r=d(e,["model"]);r!=null&&f(i,["setup","model"],Ie(n,r));const a=d(e,["config"]);return a!=null&&f(i,["config"],ZC(a,i)),i}function e1(n){const e={},i=d(n,["mediaResolution"]);i!=null&&f(e,["mediaResolution"],i);const r=d(n,["codeExecutionResult"]);r!=null&&f(e,["codeExecutionResult"],r);const a=d(n,["executableCode"]);a!=null&&f(e,["executableCode"],a);const l=d(n,["fileData"]);l!=null&&f(e,["fileData"],KC(l));const c=d(n,["functionCall"]);c!=null&&f(e,["functionCall"],YC(c));const h=d(n,["functionResponse"]);h!=null&&f(e,["functionResponse"],h);const g=d(n,["inlineData"]);g!=null&&f(e,["inlineData"],zC(g));const p=d(n,["text"]);p!=null&&f(e,["text"],p);const _=d(n,["thought"]);_!=null&&f(e,["thought"],_);const x=d(n,["thoughtSignature"]);x!=null&&f(e,["thoughtSignature"],x);const S=d(n,["videoMetadata"]);return S!=null&&f(e,["videoMetadata"],S),e}function t1(n){const e={},i=d(n,["handle"]);if(i!=null&&f(e,["handle"],i),d(n,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return e}function n1(n){const e={},i=d(n,["functionDeclarations"]);if(i!=null){let _=i;Array.isArray(_)&&(_=_.map(x=>x)),f(e,["functionDeclarations"],_)}if(d(n,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const r=d(n,["googleSearchRetrieval"]);r!=null&&f(e,["googleSearchRetrieval"],r);const a=d(n,["computerUse"]);a!=null&&f(e,["computerUse"],a);const l=d(n,["fileSearch"]);l!=null&&f(e,["fileSearch"],l);const c=d(n,["codeExecution"]);if(c!=null&&f(e,["codeExecution"],c),d(n,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const h=d(n,["googleMaps"]);h!=null&&f(e,["googleMaps"],QC(h));const g=d(n,["googleSearch"]);g!=null&&f(e,["googleSearch"],XC(g));const p=d(n,["urlContext"]);return p!=null&&f(e,["urlContext"],p),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function i1(n){const e=[];for(const i in n)if(Object.prototype.hasOwnProperty.call(n,i)){const r=n[i];if(typeof r=="object"&&r!=null&&Object.keys(r).length>0){const a=Object.keys(r).map(l=>`${i}.${l}`);e.push(...a)}else e.push(i)}return e.join(",")}function s1(n,e){let i=null;const r=n.bidiGenerateContentSetup;if(typeof r=="object"&&r!==null&&"setup"in r){const l=r.setup;typeof l=="object"&&l!==null?(n.bidiGenerateContentSetup=l,i=l):delete n.bidiGenerateContentSetup}else r!==void 0&&delete n.bidiGenerateContentSetup;const a=n.fieldMask;if(i){const l=i1(i);if(Array.isArray(e==null?void 0:e.lockAdditionalFields)&&(e==null?void 0:e.lockAdditionalFields.length)===0)l?n.fieldMask=l:delete n.fieldMask;else if(e!=null&&e.lockAdditionalFields&&e.lockAdditionalFields.length>0&&a!==null&&Array.isArray(a)&&a.length>0){const c=["temperature","topK","topP","maxOutputTokens","responseModalities","seed","speechConfig"];let h=[];a.length>0&&(h=a.map(p=>c.includes(p)?`generationConfig.${p}`:p));const g=[];l&&g.push(l),h.length>0&&g.push(...h),g.length>0?n.fieldMask=g.join(","):delete n.fieldMask}else delete n.fieldMask}else a!==null&&Array.isArray(a)&&a.length>0?n.fieldMask=a.join(","):delete n.fieldMask;return n}class r1 extends Ln{constructor(e){super(),this.apiClient=e}async create(e){var i,r;let a,l="",c={};if(this.apiClient.isVertexAI())throw new Error("The client.tokens.create method is only supported by the Gemini Developer API.");{const h=JC(this.apiClient,e);l=ee("auth_tokens",h._url),c=h._query,delete h.config,delete h._url,delete h._query;const g=s1(h,e.config);return a=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(g),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(p=>p.json()),a.then(p=>p)}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function o1(n,e){const i={},r=d(n,["displayName"]);return e!==void 0&&r!=null&&f(e,["displayName"],r),i}function a1(n){const e={},i=d(n,["config"]);return i!=null&&o1(i,e),e}function l1(n,e){const i={},r=d(n,["force"]);return e!==void 0&&r!=null&&f(e,["_query","force"],r),i}function u1(n){const e={},i=d(n,["name"]);i!=null&&f(e,["_url","name"],i);const r=d(n,["config"]);return r!=null&&l1(r,e),e}function c1(n){const e={},i=d(n,["name"]);return i!=null&&f(e,["_url","name"],i),e}function d1(n,e){const i={},r=d(n,["customMetadata"]);if(e!==void 0&&r!=null){let l=r;Array.isArray(l)&&(l=l.map(c=>c)),f(e,["customMetadata"],l)}const a=d(n,["chunkingConfig"]);return e!==void 0&&a!=null&&f(e,["chunkingConfig"],a),i}function f1(n){const e={},i=d(n,["name"]);i!=null&&f(e,["name"],i);const r=d(n,["metadata"]);r!=null&&f(e,["metadata"],r);const a=d(n,["done"]);a!=null&&f(e,["done"],a);const l=d(n,["error"]);l!=null&&f(e,["error"],l);const c=d(n,["response"]);return c!=null&&f(e,["response"],p1(c)),e}function h1(n){const e={},i=d(n,["fileSearchStoreName"]);i!=null&&f(e,["_url","file_search_store_name"],i);const r=d(n,["fileName"]);r!=null&&f(e,["fileName"],r);const a=d(n,["config"]);return a!=null&&d1(a,e),e}function p1(n){const e={},i=d(n,["sdkHttpResponse"]);i!=null&&f(e,["sdkHttpResponse"],i);const r=d(n,["parent"]);r!=null&&f(e,["parent"],r);const a=d(n,["documentName"]);return a!=null&&f(e,["documentName"],a),e}function m1(n,e){const i={},r=d(n,["pageSize"]);e!==void 0&&r!=null&&f(e,["_query","pageSize"],r);const a=d(n,["pageToken"]);return e!==void 0&&a!=null&&f(e,["_query","pageToken"],a),i}function g1(n){const e={},i=d(n,["config"]);return i!=null&&m1(i,e),e}function y1(n){const e={},i=d(n,["sdkHttpResponse"]);i!=null&&f(e,["sdkHttpResponse"],i);const r=d(n,["nextPageToken"]);r!=null&&f(e,["nextPageToken"],r);const a=d(n,["fileSearchStores"]);if(a!=null){let l=a;Array.isArray(l)&&(l=l.map(c=>c)),f(e,["fileSearchStores"],l)}return e}function v1(n,e){const i={},r=d(n,["mimeType"]);e!==void 0&&r!=null&&f(e,["mimeType"],r);const a=d(n,["displayName"]);e!==void 0&&a!=null&&f(e,["displayName"],a);const l=d(n,["customMetadata"]);if(e!==void 0&&l!=null){let h=l;Array.isArray(h)&&(h=h.map(g=>g)),f(e,["customMetadata"],h)}const c=d(n,["chunkingConfig"]);return e!==void 0&&c!=null&&f(e,["chunkingConfig"],c),i}function _1(n){const e={},i=d(n,["fileSearchStoreName"]);i!=null&&f(e,["_url","file_search_store_name"],i);const r=d(n,["config"]);return r!=null&&v1(r,e),e}function x1(n){const e={},i=d(n,["sdkHttpResponse"]);return i!=null&&f(e,["sdkHttpResponse"],i),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function b1(n,e){const i={},r=d(n,["force"]);return e!==void 0&&r!=null&&f(e,["_query","force"],r),i}function S1(n){const e={},i=d(n,["name"]);i!=null&&f(e,["_url","name"],i);const r=d(n,["config"]);return r!=null&&b1(r,e),e}function T1(n){const e={},i=d(n,["name"]);return i!=null&&f(e,["_url","name"],i),e}function E1(n,e){const i={},r=d(n,["pageSize"]);e!==void 0&&r!=null&&f(e,["_query","pageSize"],r);const a=d(n,["pageToken"]);return e!==void 0&&a!=null&&f(e,["_query","pageToken"],a),i}function w1(n){const e={},i=d(n,["parent"]);i!=null&&f(e,["_url","parent"],i);const r=d(n,["config"]);return r!=null&&E1(r,e),e}function C1(n){const e={},i=d(n,["sdkHttpResponse"]);i!=null&&f(e,["sdkHttpResponse"],i);const r=d(n,["nextPageToken"]);r!=null&&f(e,["nextPageToken"],r);const a=d(n,["documents"]);if(a!=null){let l=a;Array.isArray(l)&&(l=l.map(c=>c)),f(e,["documents"],l)}return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class A1 extends Ln{constructor(e){super(),this.apiClient=e,this.list=async i=>new ji(Pn.PAGED_ITEM_DOCUMENTS,r=>this.listInternal({parent:i.parent,config:r.config}),await this.listInternal(i),i)}async get(e){var i,r;let a,l="",c={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const h=T1(e);return l=ee("{name}",h._url),c=h._query,delete h._url,delete h._query,a=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(g=>g.json()),a.then(g=>g)}}async delete(e){var i,r;let a="",l={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const c=S1(e);a=ee("{name}",c._url),l=c._query,delete c._url,delete c._query,await this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"DELETE",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal})}}async listInternal(e){var i,r;let a,l="",c={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const h=w1(e);return l=ee("{parent}/documents",h._url),c=h._query,delete h._url,delete h._query,a=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(g=>g.json()),a.then(g=>{const p=C1(g),_=new rS;return Object.assign(_,p),_})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class N1 extends Ln{constructor(e,i=new A1(e)){super(),this.apiClient=e,this.documents=i,this.list=async(r={})=>new ji(Pn.PAGED_ITEM_FILE_SEARCH_STORES,a=>this.listInternal(a),await this.listInternal(r),r)}async uploadToFileSearchStore(e){if(this.apiClient.isVertexAI())throw new Error("Vertex AI does not support uploading files to a file search store.");return this.apiClient.uploadFileToFileSearchStore(e.fileSearchStoreName,e.file,e.config)}async create(e){var i,r;let a,l="",c={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const h=a1(e);return l=ee("fileSearchStores",h._url),c=h._query,delete h._url,delete h._query,a=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(g=>g.json()),a.then(g=>g)}}async get(e){var i,r;let a,l="",c={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const h=c1(e);return l=ee("{name}",h._url),c=h._query,delete h._url,delete h._query,a=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(g=>g.json()),a.then(g=>g)}}async delete(e){var i,r;let a="",l={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const c=u1(e);a=ee("{name}",c._url),l=c._query,delete c._url,delete c._query,await this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"DELETE",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal})}}async listInternal(e){var i,r;let a,l="",c={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const h=g1(e);return l=ee("fileSearchStores",h._url),c=h._query,delete h._url,delete h._query,a=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(g=>g.json()),a.then(g=>{const p=y1(g),_=new oS;return Object.assign(_,p),_})}}async uploadToFileSearchStoreInternal(e){var i,r;let a,l="",c={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const h=_1(e);return l=ee("upload/v1beta/{file_search_store_name}:uploadToFileSearchStore",h._url),c=h._query,delete h._url,delete h._query,a=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(g=>g.json()),a.then(g=>{const p=x1(g),_=new aS;return Object.assign(_,p),_})}}async importFile(e){var i,r;let a,l="",c={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const h=h1(e);return l=ee("{file_search_store_name}:importFile",h._url),c=h._query,delete h._url,delete h._query,a=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(g=>g.json()),a.then(g=>{const p=f1(g),_=new cd;return Object.assign(_,p),_})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function R1(n,e){const i={},r=d(n,["name"]);return r!=null&&f(i,["_url","name"],r),i}function M1(n,e){const i={},r=d(n,["name"]);return r!=null&&f(i,["_url","name"],r),i}function I1(n,e,i){const r={};if(d(n,["validationDataset"])!==void 0)throw new Error("validationDataset parameter is not supported in Gemini API.");const a=d(n,["tunedModelDisplayName"]);if(e!==void 0&&a!=null&&f(e,["displayName"],a),d(n,["description"])!==void 0)throw new Error("description parameter is not supported in Gemini API.");const l=d(n,["epochCount"]);e!==void 0&&l!=null&&f(e,["tuningTask","hyperparameters","epochCount"],l);const c=d(n,["learningRateMultiplier"]);if(c!=null&&f(r,["tuningTask","hyperparameters","learningRateMultiplier"],c),d(n,["exportLastCheckpointOnly"])!==void 0)throw new Error("exportLastCheckpointOnly parameter is not supported in Gemini API.");if(d(n,["preTunedModelCheckpointId"])!==void 0)throw new Error("preTunedModelCheckpointId parameter is not supported in Gemini API.");if(d(n,["adapterSize"])!==void 0)throw new Error("adapterSize parameter is not supported in Gemini API.");const h=d(n,["batchSize"]);e!==void 0&&h!=null&&f(e,["tuningTask","hyperparameters","batchSize"],h);const g=d(n,["learningRate"]);if(e!==void 0&&g!=null&&f(e,["tuningTask","hyperparameters","learningRate"],g),d(n,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");if(d(n,["beta"])!==void 0)throw new Error("beta parameter is not supported in Gemini API.");return r}function k1(n,e,i){const r={};let a=d(i,["config","method"]);if(a===void 0&&(a="SUPERVISED_FINE_TUNING"),a==="SUPERVISED_FINE_TUNING"){const T=d(n,["validationDataset"]);e!==void 0&&T!=null&&f(e,["supervisedTuningSpec"],dg(T))}else if(a==="PREFERENCE_TUNING"){const T=d(n,["validationDataset"]);e!==void 0&&T!=null&&f(e,["preferenceOptimizationSpec"],dg(T))}const l=d(n,["tunedModelDisplayName"]);e!==void 0&&l!=null&&f(e,["tunedModelDisplayName"],l);const c=d(n,["description"]);e!==void 0&&c!=null&&f(e,["description"],c);let h=d(i,["config","method"]);if(h===void 0&&(h="SUPERVISED_FINE_TUNING"),h==="SUPERVISED_FINE_TUNING"){const T=d(n,["epochCount"]);e!==void 0&&T!=null&&f(e,["supervisedTuningSpec","hyperParameters","epochCount"],T)}else if(h==="PREFERENCE_TUNING"){const T=d(n,["epochCount"]);e!==void 0&&T!=null&&f(e,["preferenceOptimizationSpec","hyperParameters","epochCount"],T)}let g=d(i,["config","method"]);if(g===void 0&&(g="SUPERVISED_FINE_TUNING"),g==="SUPERVISED_FINE_TUNING"){const T=d(n,["learningRateMultiplier"]);e!==void 0&&T!=null&&f(e,["supervisedTuningSpec","hyperParameters","learningRateMultiplier"],T)}else if(g==="PREFERENCE_TUNING"){const T=d(n,["learningRateMultiplier"]);e!==void 0&&T!=null&&f(e,["preferenceOptimizationSpec","hyperParameters","learningRateMultiplier"],T)}let p=d(i,["config","method"]);if(p===void 0&&(p="SUPERVISED_FINE_TUNING"),p==="SUPERVISED_FINE_TUNING"){const T=d(n,["exportLastCheckpointOnly"]);e!==void 0&&T!=null&&f(e,["supervisedTuningSpec","exportLastCheckpointOnly"],T)}else if(p==="PREFERENCE_TUNING"){const T=d(n,["exportLastCheckpointOnly"]);e!==void 0&&T!=null&&f(e,["preferenceOptimizationSpec","exportLastCheckpointOnly"],T)}let _=d(i,["config","method"]);if(_===void 0&&(_="SUPERVISED_FINE_TUNING"),_==="SUPERVISED_FINE_TUNING"){const T=d(n,["adapterSize"]);e!==void 0&&T!=null&&f(e,["supervisedTuningSpec","hyperParameters","adapterSize"],T)}else if(_==="PREFERENCE_TUNING"){const T=d(n,["adapterSize"]);e!==void 0&&T!=null&&f(e,["preferenceOptimizationSpec","hyperParameters","adapterSize"],T)}if(d(n,["batchSize"])!==void 0)throw new Error("batchSize parameter is not supported in Vertex AI.");if(d(n,["learningRate"])!==void 0)throw new Error("learningRate parameter is not supported in Vertex AI.");const x=d(n,["labels"]);e!==void 0&&x!=null&&f(e,["labels"],x);const S=d(n,["beta"]);return e!==void 0&&S!=null&&f(e,["preferenceOptimizationSpec","hyperParameters","beta"],S),r}function D1(n,e){const i={},r=d(n,["baseModel"]);r!=null&&f(i,["baseModel"],r);const a=d(n,["preTunedModel"]);a!=null&&f(i,["preTunedModel"],a);const l=d(n,["trainingDataset"]);l!=null&&z1(l);const c=d(n,["config"]);return c!=null&&I1(c,i),i}function U1(n,e){const i={},r=d(n,["baseModel"]);r!=null&&f(i,["baseModel"],r);const a=d(n,["preTunedModel"]);a!=null&&f(i,["preTunedModel"],a);const l=d(n,["trainingDataset"]);l!=null&&$1(l,i,e);const c=d(n,["config"]);return c!=null&&k1(c,i,e),i}function P1(n,e){const i={},r=d(n,["name"]);return r!=null&&f(i,["_url","name"],r),i}function O1(n,e){const i={},r=d(n,["name"]);return r!=null&&f(i,["_url","name"],r),i}function L1(n,e,i){const r={},a=d(n,["pageSize"]);e!==void 0&&a!=null&&f(e,["_query","pageSize"],a);const l=d(n,["pageToken"]);e!==void 0&&l!=null&&f(e,["_query","pageToken"],l);const c=d(n,["filter"]);return e!==void 0&&c!=null&&f(e,["_query","filter"],c),r}function q1(n,e,i){const r={},a=d(n,["pageSize"]);e!==void 0&&a!=null&&f(e,["_query","pageSize"],a);const l=d(n,["pageToken"]);e!==void 0&&l!=null&&f(e,["_query","pageToken"],l);const c=d(n,["filter"]);return e!==void 0&&c!=null&&f(e,["_query","filter"],c),r}function B1(n,e){const i={},r=d(n,["config"]);return r!=null&&L1(r,i),i}function G1(n,e){const i={},r=d(n,["config"]);return r!=null&&q1(r,i),i}function V1(n,e){const i={},r=d(n,["sdkHttpResponse"]);r!=null&&f(i,["sdkHttpResponse"],r);const a=d(n,["nextPageToken"]);a!=null&&f(i,["nextPageToken"],a);const l=d(n,["tunedModels"]);if(l!=null){let c=l;Array.isArray(c)&&(c=c.map(h=>Sy(h))),f(i,["tuningJobs"],c)}return i}function H1(n,e){const i={},r=d(n,["sdkHttpResponse"]);r!=null&&f(i,["sdkHttpResponse"],r);const a=d(n,["nextPageToken"]);a!=null&&f(i,["nextPageToken"],a);const l=d(n,["tuningJobs"]);if(l!=null){let c=l;Array.isArray(c)&&(c=c.map(h=>zc(h))),f(i,["tuningJobs"],c)}return i}function j1(n,e){const i={},r=d(n,["name"]);r!=null&&f(i,["model"],r);const a=d(n,["name"]);return a!=null&&f(i,["endpoint"],a),i}function z1(n,e){const i={};if(d(n,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");if(d(n,["vertexDatasetResource"])!==void 0)throw new Error("vertexDatasetResource parameter is not supported in Gemini API.");const r=d(n,["examples"]);if(r!=null){let a=r;Array.isArray(a)&&(a=a.map(l=>l)),f(i,["examples","examples"],a)}return i}function $1(n,e,i){const r={};let a=d(i,["config","method"]);if(a===void 0&&(a="SUPERVISED_FINE_TUNING"),a==="SUPERVISED_FINE_TUNING"){const c=d(n,["gcsUri"]);e!==void 0&&c!=null&&f(e,["supervisedTuningSpec","trainingDatasetUri"],c)}else if(a==="PREFERENCE_TUNING"){const c=d(n,["gcsUri"]);e!==void 0&&c!=null&&f(e,["preferenceOptimizationSpec","trainingDatasetUri"],c)}let l=d(i,["config","method"]);if(l===void 0&&(l="SUPERVISED_FINE_TUNING"),l==="SUPERVISED_FINE_TUNING"){const c=d(n,["vertexDatasetResource"]);e!==void 0&&c!=null&&f(e,["supervisedTuningSpec","trainingDatasetUri"],c)}else if(l==="PREFERENCE_TUNING"){const c=d(n,["vertexDatasetResource"]);e!==void 0&&c!=null&&f(e,["preferenceOptimizationSpec","trainingDatasetUri"],c)}if(d(n,["examples"])!==void 0)throw new Error("examples parameter is not supported in Vertex AI.");return r}function Sy(n,e){const i={},r=d(n,["sdkHttpResponse"]);r!=null&&f(i,["sdkHttpResponse"],r);const a=d(n,["name"]);a!=null&&f(i,["name"],a);const l=d(n,["state"]);l!=null&&f(i,["state"],iy(l));const c=d(n,["createTime"]);c!=null&&f(i,["createTime"],c);const h=d(n,["tuningTask","startTime"]);h!=null&&f(i,["startTime"],h);const g=d(n,["tuningTask","completeTime"]);g!=null&&f(i,["endTime"],g);const p=d(n,["updateTime"]);p!=null&&f(i,["updateTime"],p);const _=d(n,["description"]);_!=null&&f(i,["description"],_);const x=d(n,["baseModel"]);x!=null&&f(i,["baseModel"],x);const S=d(n,["_self"]);return S!=null&&f(i,["tunedModel"],j1(S)),i}function zc(n,e){const i={},r=d(n,["sdkHttpResponse"]);r!=null&&f(i,["sdkHttpResponse"],r);const a=d(n,["name"]);a!=null&&f(i,["name"],a);const l=d(n,["state"]);l!=null&&f(i,["state"],iy(l));const c=d(n,["createTime"]);c!=null&&f(i,["createTime"],c);const h=d(n,["startTime"]);h!=null&&f(i,["startTime"],h);const g=d(n,["endTime"]);g!=null&&f(i,["endTime"],g);const p=d(n,["updateTime"]);p!=null&&f(i,["updateTime"],p);const _=d(n,["error"]);_!=null&&f(i,["error"],_);const x=d(n,["description"]);x!=null&&f(i,["description"],x);const S=d(n,["baseModel"]);S!=null&&f(i,["baseModel"],S);const T=d(n,["tunedModel"]);T!=null&&f(i,["tunedModel"],T);const w=d(n,["preTunedModel"]);w!=null&&f(i,["preTunedModel"],w);const C=d(n,["supervisedTuningSpec"]);C!=null&&f(i,["supervisedTuningSpec"],C);const M=d(n,["preferenceOptimizationSpec"]);M!=null&&f(i,["preferenceOptimizationSpec"],M);const D=d(n,["tuningDataStats"]);D!=null&&f(i,["tuningDataStats"],D);const B=d(n,["encryptionSpec"]);B!=null&&f(i,["encryptionSpec"],B);const I=d(n,["partnerModelTuningSpec"]);I!=null&&f(i,["partnerModelTuningSpec"],I);const z=d(n,["customBaseModel"]);z!=null&&f(i,["customBaseModel"],z);const U=d(n,["experiment"]);U!=null&&f(i,["experiment"],U);const K=d(n,["labels"]);K!=null&&f(i,["labels"],K);const G=d(n,["outputUri"]);G!=null&&f(i,["outputUri"],G);const X=d(n,["pipelineJob"]);X!=null&&f(i,["pipelineJob"],X);const Y=d(n,["serviceAccount"]);Y!=null&&f(i,["serviceAccount"],Y);const ce=d(n,["tunedModelDisplayName"]);ce!=null&&f(i,["tunedModelDisplayName"],ce);const he=d(n,["veoTuningSpec"]);return he!=null&&f(i,["veoTuningSpec"],he),i}function F1(n,e){const i={},r=d(n,["sdkHttpResponse"]);r!=null&&f(i,["sdkHttpResponse"],r);const a=d(n,["name"]);a!=null&&f(i,["name"],a);const l=d(n,["metadata"]);l!=null&&f(i,["metadata"],l);const c=d(n,["done"]);c!=null&&f(i,["done"],c);const h=d(n,["error"]);return h!=null&&f(i,["error"],h),i}function dg(n,e){const i={},r=d(n,["gcsUri"]);r!=null&&f(i,["validationDatasetUri"],r);const a=d(n,["vertexDatasetResource"]);return a!=null&&f(i,["validationDatasetUri"],a),i}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class J1 extends Ln{constructor(e){super(),this.apiClient=e,this.get=async i=>await this.getInternal(i),this.list=async(i={})=>new ji(Pn.PAGED_ITEM_TUNING_JOBS,r=>this.listInternal(r),await this.listInternal(i),i),this.tune=async i=>{var r;if(this.apiClient.isVertexAI())if(i.baseModel.startsWith("projects/")){const a={tunedModelName:i.baseModel};!((r=i.config)===null||r===void 0)&&r.preTunedModelCheckpointId&&(a.checkpointId=i.config.preTunedModelCheckpointId);const l=Object.assign(Object.assign({},i),{preTunedModel:a});return l.baseModel=void 0,await this.tuneInternal(l)}else{const a=Object.assign({},i);return await this.tuneInternal(a)}else{const a=Object.assign({},i),l=await this.tuneMldevInternal(a);let c="";return l.metadata!==void 0&&l.metadata.tunedModel!==void 0?c=l.metadata.tunedModel:l.name!==void 0&&l.name.includes("/operations/")&&(c=l.name.split("/operations/")[0]),{name:c,state:Lc.JOB_STATE_QUEUED}}}}async getInternal(e){var i,r,a,l;let c,h="",g={};if(this.apiClient.isVertexAI()){const p=O1(e);return h=ee("{name}",p._url),g=p._query,delete p._url,delete p._query,c=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(_=>_.json().then(x=>{const S=x;return S.sdkHttpResponse={headers:_.headers},S})),c.then(_=>zc(_))}else{const p=P1(e);return h=ee("{name}",p._url),g=p._query,delete p._url,delete p._query,c=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(a=e.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(_=>_.json().then(x=>{const S=x;return S.sdkHttpResponse={headers:_.headers},S})),c.then(_=>Sy(_))}}async listInternal(e){var i,r,a,l;let c,h="",g={};if(this.apiClient.isVertexAI()){const p=G1(e);return h=ee("tuningJobs",p._url),g=p._query,delete p._url,delete p._query,c=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(_=>_.json().then(x=>{const S=x;return S.sdkHttpResponse={headers:_.headers},S})),c.then(_=>{const x=H1(_),S=new z0;return Object.assign(S,x),S})}else{const p=B1(e);return h=ee("tunedModels",p._url),g=p._query,delete p._url,delete p._query,c=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(a=e.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(_=>_.json().then(x=>{const S=x;return S.sdkHttpResponse={headers:_.headers},S})),c.then(_=>{const x=V1(_),S=new z0;return Object.assign(S,x),S})}}async cancel(e){var i,r,a,l;let c="",h={};if(this.apiClient.isVertexAI()){const g=M1(e);c=ee("{name}:cancel",g._url),h=g._query,delete g._url,delete g._query,await this.apiClient.request({path:c,queryParams:h,body:JSON.stringify(g),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal})}else{const g=R1(e);c=ee("{name}:cancel",g._url),h=g._query,delete g._url,delete g._query,await this.apiClient.request({path:c,queryParams:h,body:JSON.stringify(g),httpMethod:"POST",httpOptions:(a=e.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal})}}async tuneInternal(e){var i,r;let a,l="",c={};if(this.apiClient.isVertexAI()){const h=U1(e,e);return l=ee("tuningJobs",h._url),c=h._query,delete h._url,delete h._query,a=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(g=>g.json().then(p=>{const _=p;return _.sdkHttpResponse={headers:g.headers},_})),a.then(g=>zc(g))}else throw new Error("This method is only supported by the Vertex AI.")}async tuneMldevInternal(e){var i,r;let a,l="",c={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const h=D1(e);return l=ee("tunedModels",h._url),c=h._query,delete h._url,delete h._query,a=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(g=>g.json().then(p=>{const _=p;return _.sdkHttpResponse={headers:g.headers},_})),a.then(g=>F1(g))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class K1{async download(e,i){throw new Error("Download to file is not supported in the browser, please use a browser compliant download like an <a> tag.")}}const Y1=1024*1024*8,Q1=3,X1=1e3,Z1=2,qa="x-goog-upload-status";async function W1(n,e,i){var r;const a=await Ty(n,e,i),l=await(a==null?void 0:a.json());if(((r=a==null?void 0:a.headers)===null||r===void 0?void 0:r[qa])!=="final")throw new Error("Failed to upload file: Upload status is not finalized.");return l.file}async function eA(n,e,i){var r;const a=await Ty(n,e,i),l=await(a==null?void 0:a.json());if(((r=a==null?void 0:a.headers)===null||r===void 0?void 0:r[qa])!=="final")throw new Error("Failed to upload file: Upload status is not finalized.");const c=Xg(l),h=new dd;return Object.assign(h,c),h}async function Ty(n,e,i){var r,a;let l=0,c=0,h=new qc(new Response),g="upload";for(l=n.size;c<l;){const p=Math.min(Y1,l-c),_=n.slice(c,c+p);c+p>=l&&(g+=", finalize");let x=0,S=X1;for(;x<Q1&&(h=await i.request({path:"",body:_,httpMethod:"POST",httpOptions:{apiVersion:"",baseUrl:e,headers:{"X-Goog-Upload-Command":g,"X-Goog-Upload-Offset":String(c),"Content-Length":String(p)}}}),!(!((r=h==null?void 0:h.headers)===null||r===void 0)&&r[qa]));)x++,await nA(S),S=S*Z1;if(c+=p,((a=h==null?void 0:h.headers)===null||a===void 0?void 0:a[qa])!=="active")break;if(l<=c)throw new Error("All content has been uploaded, but the upload status is not finalized.")}return h}async function tA(n){return{size:n.size,type:n.type}}function nA(n){return new Promise(e=>setTimeout(e,n))}class iA{async upload(e,i,r){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await W1(e,i,r)}async uploadToFileSearchStore(e,i,r){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await eA(e,i,r)}async stat(e){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await tA(e)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class sA{create(e,i,r){return new rA(e,i,r)}}class rA{constructor(e,i,r){this.url=e,this.headers=i,this.callbacks=r}connect(){this.ws=new WebSocket(this.url),this.ws.onopen=this.callbacks.onopen,this.ws.onerror=this.callbacks.onerror,this.ws.onclose=this.callbacks.onclose,this.ws.onmessage=this.callbacks.onmessage}send(e){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.send(e)}close(){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.close()}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const fg="x-goog-api-key";class oA{constructor(e){this.apiKey=e}async addAuthHeaders(e,i){if(e.get(fg)===null){if(this.apiKey.startsWith("auth_tokens/"))throw new Error("Ephemeral tokens are only supported by the live API.");if(!this.apiKey)throw new Error("API key is missing. Please provide a valid API key.");e.append(fg,this.apiKey)}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const aA="gl-node/";class io{constructor(e){var i;if(e.apiKey==null)throw new Error("An API Key must be set when running in a browser");if(e.project||e.location)throw new Error("Vertex AI project based authentication is not supported on browser runtimes. Please do not provide a project or location.");this.vertexai=(i=e.vertexai)!==null&&i!==void 0?i:!1,this.apiKey=e.apiKey;const r=qb(e.httpOptions,e.vertexai,void 0,void 0);r&&(e.httpOptions?e.httpOptions.baseUrl=r:e.httpOptions={baseUrl:r}),this.apiVersion=e.apiVersion;const a=new oA(this.apiKey);this.apiClient=new TC({auth:a,apiVersion:this.apiVersion,apiKey:this.apiKey,vertexai:this.vertexai,httpOptions:e.httpOptions,userAgentExtra:aA+"web",uploader:new iA,downloader:new K1}),this.models=new HC(this.apiClient),this.live=new OC(this.apiClient,a,new sA),this.batches=new hT(this.apiClient),this.chats=new KT(this.models,this.apiClient),this.caches=new $T(this.apiClient),this.files=new sE(this.apiClient),this.operations=new jC(this.apiClient),this.authTokens=new r1(this.apiClient),this.tunings=new J1(this.apiClient),this.fileSearchStores=new N1(this.apiClient)}}var et=(n=>(n.DISCONNECTED="DISCONNECTED",n.CONNECTING="CONNECTING",n.CONNECTED="CONNECTED",n.ERROR="ERROR",n))(et||{});/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lA=n=>n.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),uA=n=>n.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,i,r)=>r?r.toUpperCase():i.toLowerCase()),hg=n=>{const e=uA(n);return e.charAt(0).toUpperCase()+e.slice(1)},Ey=(...n)=>n.filter((e,i,r)=>!!e&&e.trim()!==""&&r.indexOf(e)===i).join(" ").trim(),cA=n=>{for(const e in n)if(e.startsWith("aria-")||e==="role"||e==="title")return!0};/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var dA={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fA=$.forwardRef(({color:n="currentColor",size:e=24,strokeWidth:i=2,absoluteStrokeWidth:r,className:a="",children:l,iconNode:c,...h},g)=>$.createElement("svg",{ref:g,...dA,width:e,height:e,stroke:n,strokeWidth:r?Number(i)*24/Number(e):i,className:Ey("lucide",a),...!l&&!cA(h)&&{"aria-hidden":"true"},...h},[...c.map(([p,_])=>$.createElement(p,_)),...Array.isArray(l)?l:[l]]));/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const se=(n,e)=>{const i=$.forwardRef(({className:r,...a},l)=>$.createElement(fA,{ref:l,iconNode:e,className:Ey(`lucide-${lA(hg(n))}`,`lucide-${n}`,r),...a}));return i.displayName=hg(n),i};/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hA=[["path",{d:"M22 12h-2.48a2 2 0 0 0-1.93 1.46l-2.35 8.36a.25.25 0 0 1-.48 0L9.24 2.18a.25.25 0 0 0-.48 0l-2.35 8.36A2 2 0 0 1 4.49 12H2",key:"169zse"}]],yd=se("activity",hA);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pA=[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]],On=se("arrow-left",pA);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mA=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]],wy=se("arrow-right",mA);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gA=[["path",{d:"M10.268 21a2 2 0 0 0 3.464 0",key:"vwvbt9"}],["path",{d:"M3.262 15.326A1 1 0 0 0 4 17h16a1 1 0 0 0 .74-1.673C19.41 13.956 18 12.499 18 8A6 6 0 0 0 6 8c0 4.499-1.411 5.956-2.738 7.326",key:"11g9vi"}]],yA=se("bell",gA);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vA=[["path",{d:"M12 7v14",key:"1akyts"}],["path",{d:"M3 18a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1h5a4 4 0 0 1 4 4 4 4 0 0 1 4-4h5a1 1 0 0 1 1 1v13a1 1 0 0 1-1 1h-6a3 3 0 0 0-3 3 3 3 0 0 0-3-3z",key:"ruj8y"}]],Cy=se("book-open",vA);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _A=[["path",{d:"M21 8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16Z",key:"hh9hay"}],["path",{d:"m3.3 7 8.7 5 8.7-5",key:"g66t2b"}],["path",{d:"M12 22V12",key:"d0xqtd"}]],xA=se("box",_A);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bA=[["path",{d:"M12 5a3 3 0 1 0-5.997.125 4 4 0 0 0-2.526 5.77 4 4 0 0 0 .556 6.588A4 4 0 1 0 12 18Z",key:"l5xja"}],["path",{d:"M9 13a4.5 4.5 0 0 0 3-4",key:"10igwf"}],["path",{d:"M6.003 5.125A3 3 0 0 0 6.401 6.5",key:"105sqy"}],["path",{d:"M3.477 10.896a4 4 0 0 1 .585-.396",key:"ql3yin"}],["path",{d:"M6 18a4 4 0 0 1-1.967-.516",key:"2e4loj"}],["path",{d:"M12 13h4",key:"1ku699"}],["path",{d:"M12 18h6a2 2 0 0 1 2 2v1",key:"105ag5"}],["path",{d:"M12 8h8",key:"1lhi5i"}],["path",{d:"M16 8V5a2 2 0 0 1 2-2",key:"u6izg6"}],["circle",{cx:"16",cy:"13",r:".5",key:"ry7gng"}],["circle",{cx:"18",cy:"3",r:".5",key:"1aiba7"}],["circle",{cx:"20",cy:"21",r:".5",key:"yhc1fs"}],["circle",{cx:"20",cy:"8",r:".5",key:"1e43v0"}]],Ya=se("brain-circuit",bA);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const SA=[["path",{d:"M12 18V5",key:"adv99a"}],["path",{d:"M15 13a4.17 4.17 0 0 1-3-4 4.17 4.17 0 0 1-3 4",key:"1e3is1"}],["path",{d:"M17.598 6.5A3 3 0 1 0 12 5a3 3 0 1 0-5.598 1.5",key:"1gqd8o"}],["path",{d:"M17.997 5.125a4 4 0 0 1 2.526 5.77",key:"iwvgf7"}],["path",{d:"M18 18a4 4 0 0 0 2-7.464",key:"efp6ie"}],["path",{d:"M19.967 17.483A4 4 0 1 1 12 18a4 4 0 1 1-7.967-.517",key:"1gq6am"}],["path",{d:"M6 18a4 4 0 0 1-2-7.464",key:"k1g0md"}],["path",{d:"M6.003 5.125a4 4 0 0 0-2.526 5.77",key:"q97ue3"}]],pg=se("brain",SA);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const TA=[["path",{d:"M16 20V4a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v16",key:"jecpp"}],["rect",{width:"20",height:"14",x:"2",y:"6",rx:"2",key:"i6l2r4"}]],Ay=se("briefcase",TA);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const EA=[["path",{d:"M10 12h4",key:"a56b0p"}],["path",{d:"M10 8h4",key:"1sr2af"}],["path",{d:"M14 21v-3a2 2 0 0 0-4 0v3",key:"1rgiei"}],["path",{d:"M6 10H4a2 2 0 0 0-2 2v7a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-2",key:"secmi2"}],["path",{d:"M6 21V5a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v16",key:"16ra0t"}]],vd=se("building-2",EA);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wA=[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]],Ny=se("check",wA);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const CA=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]],Ry=se("circle-alert",CA);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const AA=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]],NA=se("circle-x",AA);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const RA=[["path",{d:"M12 6v6l4 2",key:"mmk7yg"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],My=se("clock",RA);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const MA=[["path",{d:"m16 18 6-6-6-6",key:"eg8j8"}],["path",{d:"m8 6-6 6 6 6",key:"ppft3o"}]],IA=se("code",MA);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kA=[["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M17 20v2",key:"1rnc9c"}],["path",{d:"M17 2v2",key:"11trls"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M2 17h2",key:"7oei6x"}],["path",{d:"M2 7h2",key:"asdhe0"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"M20 17h2",key:"1fpfkl"}],["path",{d:"M20 7h2",key:"1o8tra"}],["path",{d:"M7 20v2",key:"4gnj0m"}],["path",{d:"M7 2v2",key:"1i4yhu"}],["rect",{x:"4",y:"4",width:"16",height:"16",rx:"2",key:"1vbyd7"}],["rect",{x:"8",y:"8",width:"8",height:"8",rx:"1",key:"z9xiuo"}]],Iy=se("cpu",kA);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const DA=[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]],UA=se("external-link",DA);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const PA=[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]],ky=se("file-text",PA);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const OA=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]],Dy=se("globe",OA);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const LA=[["path",{d:"M19.414 14.414C21 12.828 22 11.5 22 9.5a5.5 5.5 0 0 0-9.591-3.676.6.6 0 0 1-.818.001A5.5 5.5 0 0 0 2 9.5c0 2.3 1.5 4 3 5.5l5.535 5.362a2 2 0 0 0 2.879.052 2.12 2.12 0 0 0-.004-3 2.124 2.124 0 1 0 3-3 2.124 2.124 0 0 0 3.004 0 2 2 0 0 0 0-2.828l-1.881-1.882a2.41 2.41 0 0 0-3.409 0l-1.71 1.71a2 2 0 0 1-2.828 0 2 2 0 0 1 0-2.828l2.823-2.762",key:"17lmqv"}]],qA=se("heart-handshake",LA);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const BA=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]],Bn=se("image",BA);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const GA=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]],Uy=se("info",GA);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const VA=[["path",{d:"m15.5 7.5 2.3 2.3a1 1 0 0 0 1.4 0l2.1-2.1a1 1 0 0 0 0-1.4L19 4",key:"g0fldk"}],["path",{d:"m21 2-9.6 9.6",key:"1j0ho8"}],["circle",{cx:"7.5",cy:"15.5",r:"5.5",key:"yqb3hr"}]],HA=se("key",VA);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jA=[["path",{d:"M12.83 2.18a2 2 0 0 0-1.66 0L2.6 6.08a1 1 0 0 0 0 1.83l8.58 3.91a2 2 0 0 0 1.66 0l8.58-3.9a1 1 0 0 0 0-1.83z",key:"zw3jo"}],["path",{d:"M2 12a1 1 0 0 0 .58.91l8.6 3.91a2 2 0 0 0 1.65 0l8.58-3.9A1 1 0 0 0 22 12",key:"1wduqc"}],["path",{d:"M2 17a1 1 0 0 0 .58.91l8.6 3.91a2 2 0 0 0 1.65 0l8.58-3.9A1 1 0 0 0 22 17",key:"kqbvx6"}]],Py=se("layers",jA);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zA=[["path",{d:"M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71",key:"1cjeqo"}],["path",{d:"M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71",key:"19qd67"}]],mg=se("link",zA);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $A=[["path",{d:"m22 7-8.991 5.727a2 2 0 0 1-2.009 0L2 7",key:"132q7q"}],["rect",{x:"2",y:"4",width:"20",height:"16",rx:"2",key:"izxlao"}]],_d=se("mail",$A);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const FA=[["path",{d:"M22 17a2 2 0 0 1-2 2H6.828a2 2 0 0 0-1.414.586l-2.202 2.202A.71.71 0 0 1 2 21.286V5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2z",key:"18887p"}],["path",{d:"M7 11h10",key:"1twpyw"}],["path",{d:"M7 15h6",key:"d9of3u"}],["path",{d:"M7 7h8",key:"af5zfr"}]],Oy=se("message-square-text",FA);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const JA=[["path",{d:"M22 17a2 2 0 0 1-2 2H6.828a2 2 0 0 0-1.414.586l-2.202 2.202A.71.71 0 0 1 2 21.286V5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2z",key:"18887p"}]],KA=se("message-square",JA);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const YA=[["path",{d:"m11 7.601-5.994 8.19a1 1 0 0 0 .1 1.298l.817.818a1 1 0 0 0 1.314.087L15.09 12",key:"80a601"}],["path",{d:"M16.5 21.174C15.5 20.5 14.372 20 13 20c-2.058 0-3.928 2.356-6 2-2.072-.356-2.775-3.369-1.5-4.5",key:"j0ngtp"}],["circle",{cx:"16",cy:"7",r:"5",key:"d08jfb"}]],QA=se("mic-vocal",YA);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const XA=[["path",{d:"M12 19v3",key:"npa21l"}],["path",{d:"M19 10v2a7 7 0 0 1-14 0v-2",key:"1vc78b"}],["rect",{x:"9",y:"2",width:"6",height:"13",rx:"3",key:"s6n7sd"}]],Qa=se("mic",XA);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ZA=[["path",{d:"M5 12h14",key:"1ays0h"}]],Ly=se("minus",ZA);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const WA=[["path",{d:"M15 18h-5",key:"95g1m2"}],["path",{d:"M18 14h-8",key:"sponae"}],["path",{d:"M4 22h16a2 2 0 0 0 2-2V4a2 2 0 0 0-2-2H8a2 2 0 0 0-2 2v16a2 2 0 0 1-4 0v-9a2 2 0 0 1 2-2h2",key:"39pd36"}],["rect",{width:"8",height:"4",x:"10",y:"6",rx:"1",key:"aywv1n"}]],eN=se("newspaper",WA);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tN=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 9h18",key:"1pudct"}],["path",{d:"M9 21V9",key:"1oto5p"}]],qy=se("panels-top-left",tN);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nN=[["path",{d:"M10.1 13.9a14 14 0 0 0 3.732 2.668 1 1 0 0 0 1.213-.303l.355-.465A2 2 0 0 1 17 15h3a2 2 0 0 1 2 2v3a2 2 0 0 1-2 2 18 18 0 0 1-12.728-5.272",key:"1wngk7"}],["path",{d:"M22 2 2 22",key:"y4kqgn"}],["path",{d:"M4.76 13.582A18 18 0 0 1 2 4a2 2 0 0 1 2-2h3a2 2 0 0 1 2 2v3a2 2 0 0 1-.8 1.6l-.468.351a1 1 0 0 0-.292 1.233 14 14 0 0 0 .244.473",key:"10hv5p"}]],iN=se("phone-off",nN);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sN=[["path",{d:"M5 5a2 2 0 0 1 3.008-1.728l11.997 6.998a2 2 0 0 1 .003 3.458l-12 7A2 2 0 0 1 5 19z",key:"10ikf1"}]],rN=se("play",sN);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oN=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],aN=se("plus",oN);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lN=[["path",{d:"M16 3a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2 1 1 0 0 1 1 1v1a2 2 0 0 1-2 2 1 1 0 0 0-1 1v2a1 1 0 0 0 1 1 6 6 0 0 0 6-6V5a2 2 0 0 0-2-2z",key:"rib7q0"}],["path",{d:"M5 3a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2 1 1 0 0 1 1 1v1a2 2 0 0 1-2 2 1 1 0 0 0-1 1v2a1 1 0 0 0 1 1 6 6 0 0 0 6-6V5a2 2 0 0 0-2-2z",key:"1ymkrd"}]],uN=se("quote",lN);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cN=[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]],gg=se("refresh-cw",cN);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dN=[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]],fN=se("save",dN);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hN=[["path",{d:"M12 3v18",key:"108xh3"}],["path",{d:"m19 8 3 8a5 5 0 0 1-6 0zV7",key:"zcdpyk"}],["path",{d:"M3 7h1a17 17 0 0 0 8-2 17 17 0 0 0 8 2h1",key:"1yorad"}],["path",{d:"m5 8 3 8a5 5 0 0 1-6 0zV7",key:"eua70x"}],["path",{d:"M7 21h10",key:"1b0cd5"}]],By=se("scale",hN);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pN=[["path",{d:"M3 7V5a2 2 0 0 1 2-2h2",key:"aa7l1z"}],["path",{d:"M17 3h2a2 2 0 0 1 2 2v2",key:"4qcy5o"}],["path",{d:"M21 17v2a2 2 0 0 1-2 2h-2",key:"6vwrx8"}],["path",{d:"M7 21H5a2 2 0 0 1-2-2v-2",key:"ioqczr"}],["path",{d:"M8 14s1.5 2 4 2 4-2 4-2",key:"1y1vjs"}],["path",{d:"M9 9h.01",key:"1q5me6"}],["path",{d:"M15 9h.01",key:"x1ddxp"}]],mN=se("scan-face",pN);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gN=[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]],Gy=se("search",gN);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yN=[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]],Ks=se("send",yN);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vN=[["rect",{width:"20",height:"8",x:"2",y:"2",rx:"2",ry:"2",key:"ngkwjq"}],["rect",{width:"20",height:"8",x:"2",y:"14",rx:"2",ry:"2",key:"iecqi9"}],["line",{x1:"6",x2:"6.01",y1:"6",y2:"6",key:"16zg32"}],["line",{x1:"6",x2:"6.01",y1:"18",y2:"18",key:"nzw8ys"}]],yg=se("server",vN);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _N=[["path",{d:"M9.671 4.136a2.34 2.34 0 0 1 4.659 0 2.34 2.34 0 0 0 3.319 1.915 2.34 2.34 0 0 1 2.33 4.033 2.34 2.34 0 0 0 0 3.831 2.34 2.34 0 0 1-2.33 4.033 2.34 2.34 0 0 0-3.319 1.915 2.34 2.34 0 0 1-4.659 0 2.34 2.34 0 0 0-3.32-1.915 2.34 2.34 0 0 1-2.33-4.033 2.34 2.34 0 0 0 0-3.831A2.34 2.34 0 0 1 6.35 6.051a2.34 2.34 0 0 0 3.319-1.915",key:"1i5ecw"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],$c=se("settings",_N);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xN=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"M12 8v4",key:"1got3b"}],["path",{d:"M12 16h.01",key:"1drbdi"}]],bN=se("shield-alert",xN);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const SN=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]],Vy=se("shield-check",SN);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const TN=[["path",{d:"M10 8h4",key:"1sr2af"}],["path",{d:"M12 21v-9",key:"17s77i"}],["path",{d:"M12 8V3",key:"13r4qs"}],["path",{d:"M17 16h4",key:"h1uq16"}],["path",{d:"M19 12V3",key:"o1uvq1"}],["path",{d:"M19 21v-5",key:"qua636"}],["path",{d:"M3 14h4",key:"bcjad9"}],["path",{d:"M5 10V3",key:"cb8scm"}],["path",{d:"M5 21v-7",key:"1w1uti"}]],zi=se("sliders-vertical",TN);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const EN=[["rect",{width:"14",height:"20",x:"5",y:"2",rx:"2",ry:"2",key:"1yt0o3"}],["path",{d:"M12 18h.01",key:"mhygvu"}]],wN=se("smartphone",EN);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const CN=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M8 14s1.5 2 4 2 4-2 4-2",key:"1y1vjs"}],["line",{x1:"9",x2:"9.01",y1:"9",y2:"9",key:"yxxnd0"}],["line",{x1:"15",x2:"15.01",y1:"9",y2:"9",key:"1p4y9e"}]],AN=se("smile",CN);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const NN=[["path",{d:"M12.586 2.586A2 2 0 0 0 11.172 2H4a2 2 0 0 0-2 2v7.172a2 2 0 0 0 .586 1.414l8.704 8.704a2.426 2.426 0 0 0 3.42 0l6.58-6.58a2.426 2.426 0 0 0 0-3.42z",key:"vktsd0"}],["circle",{cx:"7.5",cy:"7.5",r:".5",fill:"currentColor",key:"kqv944"}]],RN=se("tag",NN);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const MN=[["path",{d:"M14 4v10.54a4 4 0 1 1-4 0V4a2 2 0 0 1 4 0Z",key:"17jzev"}]],IN=se("thermometer",MN);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kN=[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]],DN=se("trash-2",kN);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const UN=[["path",{d:"M16 17h6v-6",key:"t6n2it"}],["path",{d:"m22 17-8.5-8.5-5 5L2 7",key:"x473p"}]],Hy=se("trending-down",UN);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const PN=[["path",{d:"M16 7h6v6",key:"box55l"}],["path",{d:"m22 7-8.5 8.5-5-5L2 17",key:"1t1m79"}]],Xa=se("trending-up",PN);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ON=[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]],Za=se("triangle-alert",ON);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const LN=[["path",{d:"m16 11 2 2 4-4",key:"9rsbq5"}],["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]],qN=se("user-check",LN);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const BN=[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]],Fc=se("user",BN);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const GN=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["path",{d:"M16 3.128a4 4 0 0 1 0 7.744",key:"16gr8j"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]],VN=se("users",GN);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const HN=[["path",{d:"m16 13 5.223 3.482a.5.5 0 0 0 .777-.416V7.87a.5.5 0 0 0-.752-.432L16 10.5",key:"ftymec"}],["rect",{x:"2",y:"6",width:"14",height:"12",rx:"2",key:"158x01"}]],jy=se("video",HN);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jN=[["path",{d:"M12 20h.01",key:"zekei9"}],["path",{d:"M2 8.82a15 15 0 0 1 20 0",key:"dnpr2z"}],["path",{d:"M5 12.859a10 10 0 0 1 14 0",key:"1x1e6c"}],["path",{d:"M8.5 16.429a5 5 0 0 1 7 0",key:"1bycff"}]],zN=se("wifi",jN);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $N=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],xd=se("x",$N);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const FN=[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]],js=se("zap",FN),Tc=[{id:"gemini-2.5-flash",name:"Gemini 2.5 Flash",type:"directional",capabilities:["Text","Image","Fast"],description:"Le modle le plus rapide et conomique. Idal pour les tches simples et le chat rapide."},{id:"gemini-2.0-pro-exp-02-05",name:"Gemini 2.0 Pro",type:"directional",capabilities:["Reasoning","Complex Context","Code"],description:"Modle de raisonnement avanc. Parfait pour l'analyse financire profonde et la rdaction."},{id:"gemini-2.5-flash-thinking",name:"Gemini 2.5 Thinking",type:"directional",capabilities:["Deep Reasoning","Chain of Thought"],description:'Modle exprimental qui "rflchit" avant de rpondre. Idal pour les cas complexes.'},{id:"gemini-2.5-flash-native-audio-preview-09-2025",name:"Gemini Live (Audio Native)",type:"bidirectional",capabilities:["Realtime Audio","Interruption","Low Latency"],description:"Le moteur exclusif pour les avatars vocaux. Latence ultra-faible."}],Vs="gemini-2.5-flash-native-audio-preview-09-2025",so="gemini-2.5-flash",zy="gemini-2.0-pro-exp-02-05",Yr={supabaseUrl:"",supabaseKey:"",twilioAccountSid:"",twilioAuthToken:"",twilioFromPhone:"",resendApiKey:"",userPhoneNumber:"",userEmail:""},Vi="Tu es Emma IA... (Voir fichiers prcdents)",JN="MODE: TABLE RONDE... (Voir fichiers prcdents)",$y="Tu es Emma IA  RDACTION...",Fy="Tu es Morgane...",Jc="Tu es le CEO...",Jy="Tu es L'AVOCAT DU DIABLE...",bd="Tu es Emma IA  GEEK...",Sd="Zephyr",KN=16e3,vg=24e3,Ba="Angela-inT-20220820",Ky="akool_avatar_v1",YN="r79e1c033f",QN="Emma IA  NATURELLE",Yy="Tu es Emma IA...",_g=["Puck","Charon","Kore","Fenrir","Zephyr"],Ge={natural:"https://images.unsplash.com/photo-1494790108377-be9c29b29330?q=80&w=600&auto=format&fit=crop",professional:"https://images.unsplash.com/photo-1544005313-94ddf0286df2?q=80&w=600&auto=format&fit=crop",geek:"https://images.unsplash.com/photo-1607746882042-944635dfe10e?q=80&w=600&auto=format&fit=crop"},XN=["1438761681033-066d0708b8c1","1488428401001-5c72da774914","1494790108377-be9c29b29330","1544005313-94ddf0286df2","1507003211169-0a1dd7228f2d","1607746882042-944635dfe10e","1517841905240-472988babdf9","1524504388940-b1c1722653e1","1531123897727-8f129e1688ce","1506794778202-cad84cf45f1d","1551836022-d5d88e9218df","1487412720507-e7ab37603c6f","1594744803329-e58b31de8bf5","1598550874175-4d7112ee7f43","1573496359142-b8d87734a5a2","1580489944761-15a19d654956","1567532939604-b6b5b0db2604","1520813792240-56fc4a3765a7","1573497019940-1c28c88b4f3e","1508214751196-bcfd4ca60f91","1509967419530-322706e580e9","1514626585111-9aa86183ac98","1552058544-f2b08422138a","1664575602276-acd073f104c1","1539571696357-5a69c17a67c6","1534528741775-53994a69daeb","1531746020798-e6953c6e8e04","1564564321837-a57b7070ac4f","1580894732444-8ecded7900cd","1535713875002-d1d0cf377fde"],Ec=["1573496359142-b8d87734a5a2","1580489944761-15a19d654956","1598550874175-4d7112ee7f43","1567532939604-b6b5b0db2604","1551836022-d5d88e9218df","1487412720507-e7ab37603c6f","1520813792240-56fc4a3765a7","1573497019940-1c28c88b4f3e","1573497491208-6b1acb260507","1573497491769-d40747c79366","1573496799652-408c2ac9fe98","1594744803329-e58b31de8bf5","1559526324-593bc81422b9","1590650516494-0c8e4a4dd67e","1542596594-649edbc13630","1508214751196-bcfd4ca60f91","1535713875002-d1d0cf377fde","1580894732444-8ecded7900cd","1564564321837-a57b7070ac4f","1664575602276-acd073f104c1","1517841905240-472988babdf9","1539571696357-5a69c17a67c6","1534528741775-53994a69daeb","1531746020798-e6953c6e8e04","1524504388940-b1c1722653e1","1506794778202-cad84cf45f1d","1531123897727-8f129e1688ce","1552058544-f2b08422138a","1509967419530-322706e580e9","1514626585111-9aa86183ac98"],xg=[...XN.map(n=>`https://images.unsplash.com/photo-${n}?q=80&w=600&auto=format&fit=crop`),Ge.natural,Ge.professional,Ge.geek,...Ec.map(n=>`https://images.unsplash.com/photo-${n}?q=80&w=600&auto=format&fit=crop`),...Array.from({length:70}).map((n,e)=>`https://images.unsplash.com/photo-${Ec[e%Ec.length]}?q=80&w=600&auto=format&fit=crop&sig=${e}`)],Ys={finance:["Tendance S&P 500 ?","Analyse risque Nvidia","Synthse marchs ce matin"],"ceo-mode":["Quelle est votre stratgie 2025 ?","Expliquez la baisse des marges","Vos priorits R&D ?"],"critic-mode":["Trouve la faille dans Tesla","Pourquoi Bitcoin va chuter ?","Critique mon portefeuille Tech"],researcher:["Dernires news Apple","Earnings report Amazon","Alerte politique USA"],writer:["Rdige une lettre aux actionnaires","Fais un mmo sur l'inflation","Prpare un discours CEO"],"technical-analyst":["RSI sur Ethereum","Moyenne mobile TSLA","Support cl SPY"]},pi=[{id:"finance",name:"Emma IA  BOURSE",role:"Analyste Boursier & Financier",image:Ge.professional,description:"Module spcialis dans l'analyse technique et les marchs boursiers.",avatarId:"Angela-inT-20220820",voiceName:"Zephyr",systemPrompt:Vi},{id:"economy",name:"Emma IA  MACRO",role:"Analyste conomique & Macro",image:Ge.professional,description:"Module spcialis dans les tendances globales et taux directeurs.",avatarId:"Tyler-incasualsuit-20220721",voiceName:"Fenrir",systemPrompt:Vi},{id:"politics",name:"Emma IA  POLITIQUE",role:"Analyste Politique",image:Ge.professional,description:"Module spcialis dans les risques gopolitiques.",avatarId:"Kristy-inpublic-20220810",voiceName:"Kore",systemPrompt:Vi},{id:"researcher",name:"Dr. Emma",role:"Emma IA  RECHERCHE",image:Ge.professional,description:"Module acadmique et scientifique.",avatarId:"Angela-inT-20220820",voiceName:"Puck",systemPrompt:Vi},{id:"geek",name:"Emma IA  GEEK",role:"Analyste Technique",image:Ge.geek,description:"Experte en graphiques et patterns.",avatarId:Ba,voiceName:"Zephyr",systemPrompt:bd}],ZN=[{id:"1",label:"Marchs",command:"Donne-moi un aperu rapide des marchs.",icon:"TrendingUp"},{id:"2",label:"Actualits",command:"Quelles sont les dernires nouvelles ?",icon:"Newspaper"},{id:"3",label:"Risques",command:"Analyse les risques de mon portefeuille.",icon:"ShieldAlert"},{id:"4",label:"Courriels",command:"OPEN_EMAIL_MODAL",icon:"Mail",isSystem:!0}],WN=[{id:"p1",label:"Sentiment",command:"Quel est le sentiment du march ?",icon:"Smile"},{id:"p2",label:"Synthse",command:"Fais-moi une synthse.",icon:"Briefcase"}],wc=[{id:"core",label:"Emma Brain",description:"Cerveau Central",type:"core",color:"bg-blue-600",connectedTo:["finance","ceo"],icon:Ya},{id:"finance",label:"Finance",description:"Analyste",type:"avatar",color:"bg-blue-500",connectedTo:[],icon:Xa},{id:"ceo",label:"CEO",description:"Simulation",type:"tool",color:"bg-cyan-500",connectedTo:[],icon:vd}];function e2(n){const e=atob(n),i=e.length,r=new Uint8Array(i);for(let a=0;a<i;a++)r[a]=e.charCodeAt(a);return r}function t2(n){let e="";const i=n.byteLength;for(let r=0;r<i;r++)e+=String.fromCharCode(n[r]);return btoa(e)}function n2(n){const e=n.length,i=new Int16Array(e);for(let r=0;r<e;r++){const a=Math.max(-1,Math.min(1,n[r]));i[r]=a<0?a*32768:a*32767}return{data:t2(new Uint8Array(i.buffer)),mimeType:"audio/pcm;rate=16000"}}async function i2(n,e,i=24e3,r=1){const a=new Int16Array(n.buffer),l=a.length/r,c=e.createBuffer(r,l,i);for(let h=0;h<r;h++){const g=c.getChannelData(h);for(let p=0;p<l;p++)g[p]=a[p*r+h]/32768}return c}const Qy=()=>{const[n,e]=$.useState(et.DISCONNECTED),[i,r]=$.useState([]),[a,l]=$.useState(0),[c,h]=$.useState(0),[g,p]=$.useState(null),[_,x]=$.useState(1),S=$.useRef(1);$.useEffect(()=>{S.current=_},[_]);const T=$.useRef(null),w=$.useRef(null),C=$.useRef(null),M=$.useRef(null),D=$.useRef(null),B=$.useRef(null),I=$.useRef(null),z=$.useRef(0),U=$.useRef(new Set),K=$.useRef(""),G=$.useRef(""),X=$.useCallback(()=>{var re,ve,Ve,He;U.current.forEach(q=>{try{q.stop()}catch{}}),U.current.clear(),((re=T.current)==null?void 0:re.state)!=="closed"&&((ve=T.current)==null||ve.close()),((Ve=w.current)==null?void 0:Ve.state)!=="closed"&&((He=w.current)==null||He.close()),T.current=null,w.current=null,C.current=null,M.current=null,D.current=null,B.current=null,I.current=null,z.current=0,K.current="",G.current="",l(0),h(0)},[]),Y=$.useCallback(()=>{X(),e(et.DISCONNECTED)},[X]),ce=$.useCallback(async re=>{I.current&&(await I.current).sendRealtimeInput({content:[{parts:[{text:re}]}]})},[]),he=$.useCallback(async re=>{n===et.CONNECTED&&Y();try{e(et.CONNECTING),p(null);const ve=void 0;if(!ve)throw new Error("API Key is missing in environment variables.");T.current=new(window.AudioContext||window.webkitAudioContext)({sampleRate:KN}),w.current=new(window.AudioContext||window.webkitAudioContext)({sampleRate:vg}),B.current=w.current.createAnalyser(),B.current.fftSize=256,D.current=w.current.createGain(),D.current.gain.value=S.current,D.current.connect(B.current),B.current.connect(w.current.destination);const Ve=await navigator.mediaDevices.getUserMedia({audio:!0});C.current=T.current.createMediaStreamSource(Ve),M.current=T.current.createScriptProcessor(4096,1,1),C.current.connect(M.current),M.current.connect(T.current.destination),M.current.onaudioprocess=Q=>{const ie=Q.inputBuffer.getChannelData(0),ge=n2(ie);let Ee=0;for(let H=0;H<ie.length;H++)Ee+=ie[H]*ie[H];const N=Math.sqrt(Ee/ie.length);l(Math.min(100,N*500)),I.current&&I.current.then(H=>{try{H.sendRealtimeInput({media:ge})}catch{}})};const He=new io({apiKey:ve}),q=async(Q,ie=!1)=>new Promise((ge,Ee)=>{let N=!1;const H=setTimeout(()=>{N||(console.warn(`Connection timed out for model: ${Q}`),Ee(new Error("Timeout waiting for model response (5s)")))},5e3),Z=He.live.connect({model:Q,callbacks:{onopen:()=>{N=!0,clearTimeout(H),e(et.CONNECTED);const W=ie?"System: Bascule sur Gemini Pro (Fallback activ).":"System: Connecte.";r(le=>[...le,{id:Date.now().toString(),role:"system",text:W,timestamp:new Date}]),ge()},onmessage:async W=>{var me,Ae,st,je,_e,Ke,Xe,De,tt;(me=W.serverContent)!=null&&me.outputTranscription&&(G.current+=W.serverContent.outputTranscription.text),(Ae=W.serverContent)!=null&&Ae.inputTranscription&&(K.current+=W.serverContent.inputTranscription.text),(st=W.serverContent)!=null&&st.turnComplete&&(K.current.trim()&&(r(rt=>[...rt,{id:Date.now().toString()+"_user",role:"user",text:K.current,timestamp:new Date}]),K.current=""),G.current.trim()&&(r(rt=>[...rt,{id:Date.now().toString()+"_ai",role:"assistant",text:G.current.replace(/###VISUAL_JSON_START###[\s\S]*?###VISUAL_JSON_END###/g,""),timestamp:new Date}]),G.current=""));const le=(De=(Xe=(Ke=(_e=(je=W.serverContent)==null?void 0:je.modelTurn)==null?void 0:_e.parts)==null?void 0:Ke[0])==null?void 0:Xe.inlineData)==null?void 0:De.data;if(le&&w.current){const rt=w.current;z.current=Math.max(z.current,rt.currentTime);const $t=await i2(e2(le),rt,vg),dn=rt.createBufferSource();dn.buffer=$t,D.current&&(D.current.gain.value=S.current,dn.connect(D.current)),dn.addEventListener("ended",()=>{U.current.delete(dn)}),dn.start(z.current),z.current+=$t.duration,U.current.add(dn)}(tt=W.serverContent)!=null&&tt.interrupted&&(U.current.forEach(rt=>rt.stop()),U.current.clear(),z.current=0,G.current="")},onclose:()=>{N&&(e(et.DISCONNECTED),X())},onerror:W=>{N?(console.error(W),p("Erreur de connexion"),e(et.ERROR),X()):(clearTimeout(H),Ee(W))}},config:{responseModalities:[Zr.AUDIO],speechConfig:{voiceConfig:{prebuiltVoiceConfig:{voiceName:re.geminiVoice||Sd}}},systemInstruction:re.systemInstruction,generationConfig:{temperature:re.llmTemperature},inputAudioTranscription:{},outputAudioTranscription:{}}});I.current=Z});try{await q(re.llmModel,!1)}catch(Q){if(console.warn("Primary connection failed:",Q),re.llmModel===Vs){r(ie=>[...ie,{id:Date.now().toString(),role:"system",text:"Tentative de bascule vers le modle Pro...",timestamp:new Date}]);try{await q(zy,!0)}catch{p("Service indisponible (Fallback chou)"),e(et.ERROR),X()}}else p("chec de connexion au modle slectionn."),e(et.ERROR),X()}}catch(ve){console.error(ve),p(ve.message||"chec de la connexion"),e(et.ERROR),X()}},[X,Y]);return $.useEffect(()=>{let re,ve=0;const Ve=He=>{if(B.current&&He-ve>50){const q=new Uint8Array(B.current.frequencyBinCount);B.current.getByteFrequencyData(q);let Q=0;for(let ge=0;ge<q.length;ge++)Q+=q[ge];const ie=Q/q.length;h(ie),ve=He}re=requestAnimationFrame(Ve)};return re=requestAnimationFrame(Ve),()=>cancelAnimationFrame(re)},[]),{connectionState:n,connect:he,disconnect:Y,messages:i,error:g,volume:a,userVolume:a,assistantVolume:c,setVolumeMultiplier:x,sendText:ce}};var Kc=function(n,e){return Kc=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,r){i.__proto__=r}||function(i,r){for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(i[a]=r[a])},Kc(n,e)};function Xy(n,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");Kc(n,e);function i(){this.constructor=n}n.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}var Ga=function(){return Ga=Object.assign||function(e){for(var i,r=1,a=arguments.length;r<a;r++){i=arguments[r];for(var l in i)Object.prototype.hasOwnProperty.call(i,l)&&(e[l]=i[l])}return e},Ga.apply(this,arguments)};function Qs(n,e){var i={};for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&e.indexOf(r)<0&&(i[r]=n[r]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,r=Object.getOwnPropertySymbols(n);a<r.length;a++)e.indexOf(r[a])<0&&Object.prototype.propertyIsEnumerable.call(n,r[a])&&(i[r[a]]=n[r[a]]);return i}function Zy(n,e,i,r){var a=arguments.length,l=a<3?e:r===null?r=Object.getOwnPropertyDescriptor(e,i):r,c;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")l=Reflect.decorate(n,e,i,r);else for(var h=n.length-1;h>=0;h--)(c=n[h])&&(l=(a<3?c(l):a>3?c(e,i,l):c(e,i))||l);return a>3&&l&&Object.defineProperty(e,i,l),l}function Wy(n,e){return function(i,r){e(i,r,n)}}function ev(n,e,i,r,a,l){function c(D){if(D!==void 0&&typeof D!="function")throw new TypeError("Function expected");return D}for(var h=r.kind,g=h==="getter"?"get":h==="setter"?"set":"value",p=!e&&n?r.static?n:n.prototype:null,_=e||(p?Object.getOwnPropertyDescriptor(p,r.name):{}),x,S=!1,T=i.length-1;T>=0;T--){var w={};for(var C in r)w[C]=C==="access"?{}:r[C];for(var C in r.access)w.access[C]=r.access[C];w.addInitializer=function(D){if(S)throw new TypeError("Cannot add initializers after decoration has completed");l.push(c(D||null))};var M=(0,i[T])(h==="accessor"?{get:_.get,set:_.set}:_[g],w);if(h==="accessor"){if(M===void 0)continue;if(M===null||typeof M!="object")throw new TypeError("Object expected");(x=c(M.get))&&(_.get=x),(x=c(M.set))&&(_.set=x),(x=c(M.init))&&a.unshift(x)}else(x=c(M))&&(h==="field"?a.unshift(x):_[g]=x)}p&&Object.defineProperty(p,r.name,_),S=!0}function tv(n,e,i){for(var r=arguments.length>2,a=0;a<e.length;a++)i=r?e[a].call(n,i):e[a].call(n);return r?i:void 0}function nv(n){return typeof n=="symbol"?n:"".concat(n)}function iv(n,e,i){return typeof e=="symbol"&&(e=e.description?"[".concat(e.description,"]"):""),Object.defineProperty(n,"name",{configurable:!0,value:i?"".concat(i," ",e):e})}function sv(n,e){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(n,e)}function ne(n,e,i,r){function a(l){return l instanceof i?l:new i(function(c){c(l)})}return new(i||(i=Promise))(function(l,c){function h(_){try{p(r.next(_))}catch(x){c(x)}}function g(_){try{p(r.throw(_))}catch(x){c(x)}}function p(_){_.done?l(_.value):a(_.value).then(h,g)}p((r=r.apply(n,e||[])).next())})}function rv(n,e){var i={label:0,sent:function(){if(l[0]&1)throw l[1];return l[1]},trys:[],ops:[]},r,a,l,c=Object.create((typeof Iterator=="function"?Iterator:Object).prototype);return c.next=h(0),c.throw=h(1),c.return=h(2),typeof Symbol=="function"&&(c[Symbol.iterator]=function(){return this}),c;function h(p){return function(_){return g([p,_])}}function g(p){if(r)throw new TypeError("Generator is already executing.");for(;c&&(c=0,p[0]&&(i=0)),i;)try{if(r=1,a&&(l=p[0]&2?a.return:p[0]?a.throw||((l=a.return)&&l.call(a),0):a.next)&&!(l=l.call(a,p[1])).done)return l;switch(a=0,l&&(p=[p[0]&2,l.value]),p[0]){case 0:case 1:l=p;break;case 4:return i.label++,{value:p[1],done:!1};case 5:i.label++,a=p[1],p=[0];continue;case 7:p=i.ops.pop(),i.trys.pop();continue;default:if(l=i.trys,!(l=l.length>0&&l[l.length-1])&&(p[0]===6||p[0]===2)){i=0;continue}if(p[0]===3&&(!l||p[1]>l[0]&&p[1]<l[3])){i.label=p[1];break}if(p[0]===6&&i.label<l[1]){i.label=l[1],l=p;break}if(l&&i.label<l[2]){i.label=l[2],i.ops.push(p);break}l[2]&&i.ops.pop(),i.trys.pop();continue}p=e.call(n,i)}catch(_){p=[6,_],a=0}finally{r=l=0}if(p[0]&5)throw p[1];return{value:p[0]?p[1]:void 0,done:!0}}}var Wa=Object.create?(function(n,e,i,r){r===void 0&&(r=i);var a=Object.getOwnPropertyDescriptor(e,i);(!a||("get"in a?!e.__esModule:a.writable||a.configurable))&&(a={enumerable:!0,get:function(){return e[i]}}),Object.defineProperty(n,r,a)}):(function(n,e,i,r){r===void 0&&(r=i),n[r]=e[i]});function ov(n,e){for(var i in n)i!=="default"&&!Object.prototype.hasOwnProperty.call(e,i)&&Wa(e,n,i)}function Va(n){var e=typeof Symbol=="function"&&Symbol.iterator,i=e&&n[e],r=0;if(i)return i.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function Td(n,e){var i=typeof Symbol=="function"&&n[Symbol.iterator];if(!i)return n;var r=i.call(n),a,l=[],c;try{for(;(e===void 0||e-- >0)&&!(a=r.next()).done;)l.push(a.value)}catch(h){c={error:h}}finally{try{a&&!a.done&&(i=r.return)&&i.call(r)}finally{if(c)throw c.error}}return l}function av(){for(var n=[],e=0;e<arguments.length;e++)n=n.concat(Td(arguments[e]));return n}function lv(){for(var n=0,e=0,i=arguments.length;e<i;e++)n+=arguments[e].length;for(var r=Array(n),a=0,e=0;e<i;e++)for(var l=arguments[e],c=0,h=l.length;c<h;c++,a++)r[a]=l[c];return r}function uv(n,e,i){if(i||arguments.length===2)for(var r=0,a=e.length,l;r<a;r++)(l||!(r in e))&&(l||(l=Array.prototype.slice.call(e,0,r)),l[r]=e[r]);return n.concat(l||Array.prototype.slice.call(e))}function zs(n){return this instanceof zs?(this.v=n,this):new zs(n)}function cv(n,e,i){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=i.apply(n,e||[]),a,l=[];return a=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),h("next"),h("throw"),h("return",c),a[Symbol.asyncIterator]=function(){return this},a;function c(T){return function(w){return Promise.resolve(w).then(T,x)}}function h(T,w){r[T]&&(a[T]=function(C){return new Promise(function(M,D){l.push([T,C,M,D])>1||g(T,C)})},w&&(a[T]=w(a[T])))}function g(T,w){try{p(r[T](w))}catch(C){S(l[0][3],C)}}function p(T){T.value instanceof zs?Promise.resolve(T.value.v).then(_,x):S(l[0][2],T)}function _(T){g("next",T)}function x(T){g("throw",T)}function S(T,w){T(w),l.shift(),l.length&&g(l[0][0],l[0][1])}}function dv(n){var e,i;return e={},r("next"),r("throw",function(a){throw a}),r("return"),e[Symbol.iterator]=function(){return this},e;function r(a,l){e[a]=n[a]?function(c){return(i=!i)?{value:zs(n[a](c)),done:!1}:l?l(c):c}:l}}function fv(n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=n[Symbol.asyncIterator],i;return e?e.call(n):(n=typeof Va=="function"?Va(n):n[Symbol.iterator](),i={},r("next"),r("throw"),r("return"),i[Symbol.asyncIterator]=function(){return this},i);function r(l){i[l]=n[l]&&function(c){return new Promise(function(h,g){c=n[l](c),a(h,g,c.done,c.value)})}}function a(l,c,h,g){Promise.resolve(g).then(function(p){l({value:p,done:h})},c)}}function hv(n,e){return Object.defineProperty?Object.defineProperty(n,"raw",{value:e}):n.raw=e,n}var s2=Object.create?(function(n,e){Object.defineProperty(n,"default",{enumerable:!0,value:e})}):function(n,e){n.default=e},Yc=function(n){return Yc=Object.getOwnPropertyNames||function(e){var i=[];for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(i[i.length]=r);return i},Yc(n)};function pv(n){if(n&&n.__esModule)return n;var e={};if(n!=null)for(var i=Yc(n),r=0;r<i.length;r++)i[r]!=="default"&&Wa(e,n,i[r]);return s2(e,n),e}function mv(n){return n&&n.__esModule?n:{default:n}}function gv(n,e,i,r){if(i==="a"&&!r)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?n!==e||!r:!e.has(n))throw new TypeError("Cannot read private member from an object whose class did not declare it");return i==="m"?r:i==="a"?r.call(n):r?r.value:e.get(n)}function yv(n,e,i,r,a){if(r==="m")throw new TypeError("Private method is not writable");if(r==="a"&&!a)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?n!==e||!a:!e.has(n))throw new TypeError("Cannot write private member to an object whose class did not declare it");return r==="a"?a.call(n,i):a?a.value=i:e.set(n,i),i}function vv(n,e){if(e===null||typeof e!="object"&&typeof e!="function")throw new TypeError("Cannot use 'in' operator on non-object");return typeof n=="function"?e===n:n.has(e)}function _v(n,e,i){if(e!=null){if(typeof e!="object"&&typeof e!="function")throw new TypeError("Object expected.");var r,a;if(i){if(!Symbol.asyncDispose)throw new TypeError("Symbol.asyncDispose is not defined.");r=e[Symbol.asyncDispose]}if(r===void 0){if(!Symbol.dispose)throw new TypeError("Symbol.dispose is not defined.");r=e[Symbol.dispose],i&&(a=r)}if(typeof r!="function")throw new TypeError("Object not disposable.");a&&(r=function(){try{a.call(this)}catch(l){return Promise.reject(l)}}),n.stack.push({value:e,dispose:r,async:i})}else i&&n.stack.push({async:!0});return e}var r2=typeof SuppressedError=="function"?SuppressedError:function(n,e,i){var r=new Error(i);return r.name="SuppressedError",r.error=n,r.suppressed=e,r};function xv(n){function e(l){n.error=n.hasError?new r2(l,n.error,"An error was suppressed during disposal."):l,n.hasError=!0}var i,r=0;function a(){for(;i=n.stack.pop();)try{if(!i.async&&r===1)return r=0,n.stack.push(i),Promise.resolve().then(a);if(i.dispose){var l=i.dispose.call(i.value);if(i.async)return r|=2,Promise.resolve(l).then(a,function(c){return e(c),a()})}else r|=1}catch(c){e(c)}if(r===1)return n.hasError?Promise.reject(n.error):Promise.resolve();if(n.hasError)throw n.error}return a()}function bv(n,e){return typeof n=="string"&&/^\.\.?\//.test(n)?n.replace(/\.(tsx)$|((?:\.d)?)((?:\.[^./]+?)?)\.([cm]?)ts$/i,function(i,r,a,l,c){return r?e?".jsx":".js":a&&(!l||!c)?i:a+l+"."+c.toLowerCase()+"js"}):n}const o2={__extends:Xy,__assign:Ga,__rest:Qs,__decorate:Zy,__param:Wy,__esDecorate:ev,__runInitializers:tv,__propKey:nv,__setFunctionName:iv,__metadata:sv,__awaiter:ne,__generator:rv,__createBinding:Wa,__exportStar:ov,__values:Va,__read:Td,__spread:av,__spreadArrays:lv,__spreadArray:uv,__await:zs,__asyncGenerator:cv,__asyncDelegator:dv,__asyncValues:fv,__makeTemplateObject:hv,__importStar:pv,__importDefault:mv,__classPrivateFieldGet:gv,__classPrivateFieldSet:yv,__classPrivateFieldIn:vv,__addDisposableResource:_v,__disposeResources:xv,__rewriteRelativeImportExtension:bv},a2=Object.freeze(Object.defineProperty({__proto__:null,__addDisposableResource:_v,get __assign(){return Ga},__asyncDelegator:dv,__asyncGenerator:cv,__asyncValues:fv,__await:zs,__awaiter:ne,__classPrivateFieldGet:gv,__classPrivateFieldIn:vv,__classPrivateFieldSet:yv,__createBinding:Wa,__decorate:Zy,__disposeResources:xv,__esDecorate:ev,__exportStar:ov,__extends:Xy,__generator:rv,__importDefault:mv,__importStar:pv,__makeTemplateObject:hv,__metadata:sv,__param:Wy,__propKey:nv,__read:Td,__rest:Qs,__rewriteRelativeImportExtension:bv,__runInitializers:tv,__setFunctionName:iv,__spread:av,__spreadArray:uv,__spreadArrays:lv,__values:Va,default:o2},Symbol.toStringTag,{value:"Module"})),l2=n=>n?(...e)=>n(...e):(...e)=>fetch(...e);class Ed extends Error{constructor(e,i="FunctionsError",r){super(e),this.name=i,this.context=r}}class u2 extends Ed{constructor(e){super("Failed to send a request to the Edge Function","FunctionsFetchError",e)}}class bg extends Ed{constructor(e){super("Relay Error invoking the Edge Function","FunctionsRelayError",e)}}class Sg extends Ed{constructor(e){super("Edge Function returned a non-2xx status code","FunctionsHttpError",e)}}var Qc;(function(n){n.Any="any",n.ApNortheast1="ap-northeast-1",n.ApNortheast2="ap-northeast-2",n.ApSouth1="ap-south-1",n.ApSoutheast1="ap-southeast-1",n.ApSoutheast2="ap-southeast-2",n.CaCentral1="ca-central-1",n.EuCentral1="eu-central-1",n.EuWest1="eu-west-1",n.EuWest2="eu-west-2",n.EuWest3="eu-west-3",n.SaEast1="sa-east-1",n.UsEast1="us-east-1",n.UsWest1="us-west-1",n.UsWest2="us-west-2"})(Qc||(Qc={}));class c2{constructor(e,{headers:i={},customFetch:r,region:a=Qc.Any}={}){this.url=e,this.headers=i,this.region=a,this.fetch=l2(r)}setAuth(e){this.headers.Authorization=`Bearer ${e}`}invoke(e){return ne(this,arguments,void 0,function*(i,r={}){var a;let l,c;try{const{headers:h,method:g,body:p,signal:_,timeout:x}=r;let S={},{region:T}=r;T||(T=this.region);const w=new URL(`${this.url}/${i}`);T&&T!=="any"&&(S["x-region"]=T,w.searchParams.set("forceFunctionRegion",T));let C;p&&(h&&!Object.prototype.hasOwnProperty.call(h,"Content-Type")||!h)?typeof Blob<"u"&&p instanceof Blob||p instanceof ArrayBuffer?(S["Content-Type"]="application/octet-stream",C=p):typeof p=="string"?(S["Content-Type"]="text/plain",C=p):typeof FormData<"u"&&p instanceof FormData?C=p:(S["Content-Type"]="application/json",C=JSON.stringify(p)):C=p;let M=_;x&&(c=new AbortController,l=setTimeout(()=>c.abort(),x),_?(M=c.signal,_.addEventListener("abort",()=>c.abort())):M=c.signal);const D=yield this.fetch(w.toString(),{method:g||"POST",headers:Object.assign(Object.assign(Object.assign({},S),this.headers),h),body:C,signal:M}).catch(U=>{throw new u2(U)}),B=D.headers.get("x-relay-error");if(B&&B==="true")throw new bg(D);if(!D.ok)throw new Sg(D);let I=((a=D.headers.get("Content-Type"))!==null&&a!==void 0?a:"text/plain").split(";")[0].trim(),z;return I==="application/json"?z=yield D.json():I==="application/octet-stream"||I==="application/pdf"?z=yield D.blob():I==="text/event-stream"?z=D:I==="multipart/form-data"?z=yield D.formData():z=yield D.text(),{data:z,error:null,response:D}}catch(h){return{data:null,error:h,response:h instanceof Sg||h instanceof bg?h.context:void 0}}finally{l&&clearTimeout(l)}})}}var St={};const Xs=Tb(a2);var Ea={},wa={},Ca={},Aa={},Na={},Ra={},Tg;function Sv(){if(Tg)return Ra;Tg=1,Object.defineProperty(Ra,"__esModule",{value:!0});class n extends Error{constructor(i){super(i.message),this.name="PostgrestError",this.details=i.details,this.hint=i.hint,this.code=i.code}}return Ra.default=n,Ra}var Eg;function Tv(){if(Eg)return Na;Eg=1,Object.defineProperty(Na,"__esModule",{value:!0});const e=Xs.__importDefault(Sv());class i{constructor(a){var l,c;this.shouldThrowOnError=!1,this.method=a.method,this.url=a.url,this.headers=new Headers(a.headers),this.schema=a.schema,this.body=a.body,this.shouldThrowOnError=(l=a.shouldThrowOnError)!==null&&l!==void 0?l:!1,this.signal=a.signal,this.isMaybeSingle=(c=a.isMaybeSingle)!==null&&c!==void 0?c:!1,a.fetch?this.fetch=a.fetch:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(a,l){return this.headers=new Headers(this.headers),this.headers.set(a,l),this}then(a,l){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers.set("Accept-Profile",this.schema):this.headers.set("Content-Profile",this.schema)),this.method!=="GET"&&this.method!=="HEAD"&&this.headers.set("Content-Type","application/json");const c=this.fetch;let h=c(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async g=>{var p,_,x,S;let T=null,w=null,C=null,M=g.status,D=g.statusText;if(g.ok){if(this.method!=="HEAD"){const U=await g.text();U===""||(this.headers.get("Accept")==="text/csv"||this.headers.get("Accept")&&(!((p=this.headers.get("Accept"))===null||p===void 0)&&p.includes("application/vnd.pgrst.plan+text"))?w=U:w=JSON.parse(U))}const I=(_=this.headers.get("Prefer"))===null||_===void 0?void 0:_.match(/count=(exact|planned|estimated)/),z=(x=g.headers.get("content-range"))===null||x===void 0?void 0:x.split("/");I&&z&&z.length>1&&(C=parseInt(z[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(w)&&(w.length>1?(T={code:"PGRST116",details:`Results contain ${w.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},w=null,C=null,M=406,D="Not Acceptable"):w.length===1?w=w[0]:w=null)}else{const I=await g.text();try{T=JSON.parse(I),Array.isArray(T)&&g.status===404&&(w=[],T=null,M=200,D="OK")}catch{g.status===404&&I===""?(M=204,D="No Content"):T={message:I}}if(T&&this.isMaybeSingle&&(!((S=T==null?void 0:T.details)===null||S===void 0)&&S.includes("0 rows"))&&(T=null,M=200,D="OK"),T&&this.shouldThrowOnError)throw new e.default(T)}return{error:T,data:w,count:C,status:M,statusText:D}});return this.shouldThrowOnError||(h=h.catch(g=>{var p,_,x,S,T,w;let C="";const M=g==null?void 0:g.cause;if(M){const D=(p=M==null?void 0:M.message)!==null&&p!==void 0?p:"",B=(_=M==null?void 0:M.code)!==null&&_!==void 0?_:"";C=`${(x=g==null?void 0:g.name)!==null&&x!==void 0?x:"FetchError"}: ${g==null?void 0:g.message}`,C+=`

Caused by: ${(S=M==null?void 0:M.name)!==null&&S!==void 0?S:"Error"}: ${D}`,B&&(C+=` (${B})`),M!=null&&M.stack&&(C+=`
${M.stack}`)}else C=(T=g==null?void 0:g.stack)!==null&&T!==void 0?T:"";return{error:{message:`${(w=g==null?void 0:g.name)!==null&&w!==void 0?w:"FetchError"}: ${g==null?void 0:g.message}`,details:C,hint:"",code:""},data:null,count:null,status:0,statusText:""}})),h.then(a,l)}returns(){return this}overrideTypes(){return this}}return Na.default=i,Na}var wg;function Ev(){if(wg)return Aa;wg=1,Object.defineProperty(Aa,"__esModule",{value:!0});const e=Xs.__importDefault(Tv());class i extends e.default{select(a){let l=!1;const c=(a??"*").split("").map(h=>/\s/.test(h)&&!l?"":(h==='"'&&(l=!l),h)).join("");return this.url.searchParams.set("select",c),this.headers.append("Prefer","return=representation"),this}order(a,{ascending:l=!0,nullsFirst:c,foreignTable:h,referencedTable:g=h}={}){const p=g?`${g}.order`:"order",_=this.url.searchParams.get(p);return this.url.searchParams.set(p,`${_?`${_},`:""}${a}.${l?"asc":"desc"}${c===void 0?"":c?".nullsfirst":".nullslast"}`),this}limit(a,{foreignTable:l,referencedTable:c=l}={}){const h=typeof c>"u"?"limit":`${c}.limit`;return this.url.searchParams.set(h,`${a}`),this}range(a,l,{foreignTable:c,referencedTable:h=c}={}){const g=typeof h>"u"?"offset":`${h}.offset`,p=typeof h>"u"?"limit":`${h}.limit`;return this.url.searchParams.set(g,`${a}`),this.url.searchParams.set(p,`${l-a+1}`),this}abortSignal(a){return this.signal=a,this}single(){return this.headers.set("Accept","application/vnd.pgrst.object+json"),this}maybeSingle(){return this.method==="GET"?this.headers.set("Accept","application/json"):this.headers.set("Accept","application/vnd.pgrst.object+json"),this.isMaybeSingle=!0,this}csv(){return this.headers.set("Accept","text/csv"),this}geojson(){return this.headers.set("Accept","application/geo+json"),this}explain({analyze:a=!1,verbose:l=!1,settings:c=!1,buffers:h=!1,wal:g=!1,format:p="text"}={}){var _;const x=[a?"analyze":null,l?"verbose":null,c?"settings":null,h?"buffers":null,g?"wal":null].filter(Boolean).join("|"),S=(_=this.headers.get("Accept"))!==null&&_!==void 0?_:"application/json";return this.headers.set("Accept",`application/vnd.pgrst.plan+${p}; for="${S}"; options=${x};`),p==="json"?this:this}rollback(){return this.headers.append("Prefer","tx=rollback"),this}returns(){return this}maxAffected(a){return this.headers.append("Prefer","handling=strict"),this.headers.append("Prefer",`max-affected=${a}`),this}}return Aa.default=i,Aa}var Cg;function wd(){if(Cg)return Ca;Cg=1,Object.defineProperty(Ca,"__esModule",{value:!0});const e=Xs.__importDefault(Ev()),i=new RegExp("[,()]");class r extends e.default{eq(l,c){return this.url.searchParams.append(l,`eq.${c}`),this}neq(l,c){return this.url.searchParams.append(l,`neq.${c}`),this}gt(l,c){return this.url.searchParams.append(l,`gt.${c}`),this}gte(l,c){return this.url.searchParams.append(l,`gte.${c}`),this}lt(l,c){return this.url.searchParams.append(l,`lt.${c}`),this}lte(l,c){return this.url.searchParams.append(l,`lte.${c}`),this}like(l,c){return this.url.searchParams.append(l,`like.${c}`),this}likeAllOf(l,c){return this.url.searchParams.append(l,`like(all).{${c.join(",")}}`),this}likeAnyOf(l,c){return this.url.searchParams.append(l,`like(any).{${c.join(",")}}`),this}ilike(l,c){return this.url.searchParams.append(l,`ilike.${c}`),this}ilikeAllOf(l,c){return this.url.searchParams.append(l,`ilike(all).{${c.join(",")}}`),this}ilikeAnyOf(l,c){return this.url.searchParams.append(l,`ilike(any).{${c.join(",")}}`),this}regexMatch(l,c){return this.url.searchParams.append(l,`match.${c}`),this}regexIMatch(l,c){return this.url.searchParams.append(l,`imatch.${c}`),this}is(l,c){return this.url.searchParams.append(l,`is.${c}`),this}isDistinct(l,c){return this.url.searchParams.append(l,`isdistinct.${c}`),this}in(l,c){const h=Array.from(new Set(c)).map(g=>typeof g=="string"&&i.test(g)?`"${g}"`:`${g}`).join(",");return this.url.searchParams.append(l,`in.(${h})`),this}contains(l,c){return typeof c=="string"?this.url.searchParams.append(l,`cs.${c}`):Array.isArray(c)?this.url.searchParams.append(l,`cs.{${c.join(",")}}`):this.url.searchParams.append(l,`cs.${JSON.stringify(c)}`),this}containedBy(l,c){return typeof c=="string"?this.url.searchParams.append(l,`cd.${c}`):Array.isArray(c)?this.url.searchParams.append(l,`cd.{${c.join(",")}}`):this.url.searchParams.append(l,`cd.${JSON.stringify(c)}`),this}rangeGt(l,c){return this.url.searchParams.append(l,`sr.${c}`),this}rangeGte(l,c){return this.url.searchParams.append(l,`nxl.${c}`),this}rangeLt(l,c){return this.url.searchParams.append(l,`sl.${c}`),this}rangeLte(l,c){return this.url.searchParams.append(l,`nxr.${c}`),this}rangeAdjacent(l,c){return this.url.searchParams.append(l,`adj.${c}`),this}overlaps(l,c){return typeof c=="string"?this.url.searchParams.append(l,`ov.${c}`):this.url.searchParams.append(l,`ov.{${c.join(",")}}`),this}textSearch(l,c,{config:h,type:g}={}){let p="";g==="plain"?p="pl":g==="phrase"?p="ph":g==="websearch"&&(p="w");const _=h===void 0?"":`(${h})`;return this.url.searchParams.append(l,`${p}fts${_}.${c}`),this}match(l){return Object.entries(l).forEach(([c,h])=>{this.url.searchParams.append(c,`eq.${h}`)}),this}not(l,c,h){return this.url.searchParams.append(l,`not.${c}.${h}`),this}or(l,{foreignTable:c,referencedTable:h=c}={}){const g=h?`${h}.or`:"or";return this.url.searchParams.append(g,`(${l})`),this}filter(l,c,h){return this.url.searchParams.append(l,`${c}.${h}`),this}}return Ca.default=r,Ca}var Ag;function wv(){if(Ag)return wa;Ag=1,Object.defineProperty(wa,"__esModule",{value:!0});const e=Xs.__importDefault(wd());class i{constructor(a,{headers:l={},schema:c,fetch:h}){this.url=a,this.headers=new Headers(l),this.schema=c,this.fetch=h}select(a,l){const{head:c=!1,count:h}=l??{},g=c?"HEAD":"GET";let p=!1;const _=(a??"*").split("").map(x=>/\s/.test(x)&&!p?"":(x==='"'&&(p=!p),x)).join("");return this.url.searchParams.set("select",_),h&&this.headers.append("Prefer",`count=${h}`),new e.default({method:g,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch})}insert(a,{count:l,defaultToNull:c=!0}={}){var h;const g="POST";if(l&&this.headers.append("Prefer",`count=${l}`),c||this.headers.append("Prefer","missing=default"),Array.isArray(a)){const p=a.reduce((_,x)=>_.concat(Object.keys(x)),[]);if(p.length>0){const _=[...new Set(p)].map(x=>`"${x}"`);this.url.searchParams.set("columns",_.join(","))}}return new e.default({method:g,url:this.url,headers:this.headers,schema:this.schema,body:a,fetch:(h=this.fetch)!==null&&h!==void 0?h:fetch})}upsert(a,{onConflict:l,ignoreDuplicates:c=!1,count:h,defaultToNull:g=!0}={}){var p;const _="POST";if(this.headers.append("Prefer",`resolution=${c?"ignore":"merge"}-duplicates`),l!==void 0&&this.url.searchParams.set("on_conflict",l),h&&this.headers.append("Prefer",`count=${h}`),g||this.headers.append("Prefer","missing=default"),Array.isArray(a)){const x=a.reduce((S,T)=>S.concat(Object.keys(T)),[]);if(x.length>0){const S=[...new Set(x)].map(T=>`"${T}"`);this.url.searchParams.set("columns",S.join(","))}}return new e.default({method:_,url:this.url,headers:this.headers,schema:this.schema,body:a,fetch:(p=this.fetch)!==null&&p!==void 0?p:fetch})}update(a,{count:l}={}){var c;const h="PATCH";return l&&this.headers.append("Prefer",`count=${l}`),new e.default({method:h,url:this.url,headers:this.headers,schema:this.schema,body:a,fetch:(c=this.fetch)!==null&&c!==void 0?c:fetch})}delete({count:a}={}){var l;const c="DELETE";return a&&this.headers.append("Prefer",`count=${a}`),new e.default({method:c,url:this.url,headers:this.headers,schema:this.schema,fetch:(l=this.fetch)!==null&&l!==void 0?l:fetch})}}return wa.default=i,wa}var Ng;function d2(){if(Ng)return Ea;Ng=1,Object.defineProperty(Ea,"__esModule",{value:!0});const n=Xs,e=n.__importDefault(wv()),i=n.__importDefault(wd());class r{constructor(l,{headers:c={},schema:h,fetch:g}={}){this.url=l,this.headers=new Headers(c),this.schemaName=h,this.fetch=g}from(l){if(!l||typeof l!="string"||l.trim()==="")throw new Error("Invalid relation name: relation must be a non-empty string.");const c=new URL(`${this.url}/${l}`);return new e.default(c,{headers:new Headers(this.headers),schema:this.schemaName,fetch:this.fetch})}schema(l){return new r(this.url,{headers:this.headers,schema:l,fetch:this.fetch})}rpc(l,c={},{head:h=!1,get:g=!1,count:p}={}){var _;let x;const S=new URL(`${this.url}/rpc/${l}`);let T;h||g?(x=h?"HEAD":"GET",Object.entries(c).filter(([C,M])=>M!==void 0).map(([C,M])=>[C,Array.isArray(M)?`{${M.join(",")}}`:`${M}`]).forEach(([C,M])=>{S.searchParams.append(C,M)})):(x="POST",T=c);const w=new Headers(this.headers);return p&&w.set("Prefer",`count=${p}`),new i.default({method:x,url:S,headers:w,schema:this.schemaName,body:T,fetch:(_=this.fetch)!==null&&_!==void 0?_:fetch})}}return Ea.default=r,Ea}var Rg;function f2(){if(Rg)return St;Rg=1,Object.defineProperty(St,"__esModule",{value:!0}),St.PostgrestError=St.PostgrestBuilder=St.PostgrestTransformBuilder=St.PostgrestFilterBuilder=St.PostgrestQueryBuilder=St.PostgrestClient=void 0;const n=Xs,e=n.__importDefault(d2());St.PostgrestClient=e.default;const i=n.__importDefault(wv());St.PostgrestQueryBuilder=i.default;const r=n.__importDefault(wd());St.PostgrestFilterBuilder=r.default;const a=n.__importDefault(Ev());St.PostgrestTransformBuilder=a.default;const l=n.__importDefault(Tv());St.PostgrestBuilder=l.default;const c=n.__importDefault(Sv());return St.PostgrestError=c.default,St.default={PostgrestClient:e.default,PostgrestQueryBuilder:i.default,PostgrestFilterBuilder:r.default,PostgrestTransformBuilder:a.default,PostgrestBuilder:l.default,PostgrestError:c.default},St}var Cv=f2();const Av=ad(Cv),h2=Sb({__proto__:null,default:Av},[Cv]),{PostgrestClient:p2,PostgrestQueryBuilder:nI,PostgrestFilterBuilder:iI,PostgrestTransformBuilder:sI,PostgrestBuilder:rI,PostgrestError:oI}=Av||h2;class m2{constructor(){}static detectEnvironment(){var e;if(typeof WebSocket<"u")return{type:"native",constructor:WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocket<"u")return{type:"native",constructor:globalThis.WebSocket};if(typeof global<"u"&&typeof global.WebSocket<"u")return{type:"native",constructor:global.WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocketPair<"u"&&typeof globalThis.WebSocket>"u")return{type:"cloudflare",error:"Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.",workaround:"Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime."};if(typeof globalThis<"u"&&globalThis.EdgeRuntime||typeof navigator<"u"&&(!((e=navigator.userAgent)===null||e===void 0)&&e.includes("Vercel-Edge")))return{type:"unsupported",error:"Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.",workaround:"Use serverless functions or a different deployment target for WebSocket functionality."};if(typeof process<"u"){const i=process.versions;if(i&&i.node){const r=i.node,a=parseInt(r.replace(/^v/,"").split(".")[0]);return a>=22?typeof globalThis.WebSocket<"u"?{type:"native",constructor:globalThis.WebSocket}:{type:"unsupported",error:`Node.js ${a} detected but native WebSocket not found.`,workaround:"Provide a WebSocket implementation via the transport option."}:{type:"unsupported",error:`Node.js ${a} detected without native WebSocket support.`,workaround:`For Node.js < 22, install "ws" package and provide it via the transport option:
import ws from "ws"
new RealtimeClient(url, { transport: ws })`}}}return{type:"unsupported",error:"Unknown JavaScript runtime without WebSocket support.",workaround:"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation."}}static getWebSocketConstructor(){const e=this.detectEnvironment();if(e.constructor)return e.constructor;let i=e.error||"WebSocket not supported in this environment.";throw e.workaround&&(i+=`

Suggested solution: ${e.workaround}`),new Error(i)}static createWebSocket(e,i){const r=this.getWebSocketConstructor();return new r(e,i)}static isWebSocketSupported(){try{const e=this.detectEnvironment();return e.type==="native"||e.type==="ws"}catch{return!1}}}const g2="2.86.0",y2=`realtime-js/${g2}`,Nv="1.0.0",v2="2.0.0",Mg=Nv,Xc=1e4,_2=1e3,x2=100;var qi;(function(n){n[n.connecting=0]="connecting",n[n.open=1]="open",n[n.closing=2]="closing",n[n.closed=3]="closed"})(qi||(qi={}));var ft;(function(n){n.closed="closed",n.errored="errored",n.joined="joined",n.joining="joining",n.leaving="leaving"})(ft||(ft={}));var un;(function(n){n.close="phx_close",n.error="phx_error",n.join="phx_join",n.reply="phx_reply",n.leave="phx_leave",n.access_token="access_token"})(un||(un={}));var Zc;(function(n){n.websocket="websocket"})(Zc||(Zc={}));var Bi;(function(n){n.Connecting="connecting",n.Open="open",n.Closing="closing",n.Closed="closed"})(Bi||(Bi={}));class b2{constructor(e){this.HEADER_LENGTH=1,this.USER_BROADCAST_PUSH_META_LENGTH=6,this.KINDS={userBroadcastPush:3,userBroadcast:4},this.BINARY_ENCODING=0,this.JSON_ENCODING=1,this.BROADCAST_EVENT="broadcast",this.allowedMetadataKeys=[],this.allowedMetadataKeys=e??[]}encode(e,i){if(e.event===this.BROADCAST_EVENT&&!(e.payload instanceof ArrayBuffer)&&typeof e.payload.event=="string")return i(this._binaryEncodeUserBroadcastPush(e));let r=[e.join_ref,e.ref,e.topic,e.event,e.payload];return i(JSON.stringify(r))}_binaryEncodeUserBroadcastPush(e){var i;return this._isArrayBuffer((i=e.payload)===null||i===void 0?void 0:i.payload)?this._encodeBinaryUserBroadcastPush(e):this._encodeJsonUserBroadcastPush(e)}_encodeBinaryUserBroadcastPush(e){var i,r;const a=(r=(i=e.payload)===null||i===void 0?void 0:i.payload)!==null&&r!==void 0?r:new ArrayBuffer(0);return this._encodeUserBroadcastPush(e,this.BINARY_ENCODING,a)}_encodeJsonUserBroadcastPush(e){var i,r;const a=(r=(i=e.payload)===null||i===void 0?void 0:i.payload)!==null&&r!==void 0?r:{},c=new TextEncoder().encode(JSON.stringify(a)).buffer;return this._encodeUserBroadcastPush(e,this.JSON_ENCODING,c)}_encodeUserBroadcastPush(e,i,r){var a,l;const c=e.topic,h=(a=e.ref)!==null&&a!==void 0?a:"",g=(l=e.join_ref)!==null&&l!==void 0?l:"",p=e.payload.event,_=this.allowedMetadataKeys?this._pick(e.payload,this.allowedMetadataKeys):{},x=Object.keys(_).length===0?"":JSON.stringify(_);if(g.length>255)throw new Error(`joinRef length ${g.length} exceeds maximum of 255`);if(h.length>255)throw new Error(`ref length ${h.length} exceeds maximum of 255`);if(c.length>255)throw new Error(`topic length ${c.length} exceeds maximum of 255`);if(p.length>255)throw new Error(`userEvent length ${p.length} exceeds maximum of 255`);if(x.length>255)throw new Error(`metadata length ${x.length} exceeds maximum of 255`);const S=this.USER_BROADCAST_PUSH_META_LENGTH+g.length+h.length+c.length+p.length+x.length,T=new ArrayBuffer(this.HEADER_LENGTH+S);let w=new DataView(T),C=0;w.setUint8(C++,this.KINDS.userBroadcastPush),w.setUint8(C++,g.length),w.setUint8(C++,h.length),w.setUint8(C++,c.length),w.setUint8(C++,p.length),w.setUint8(C++,x.length),w.setUint8(C++,i),Array.from(g,D=>w.setUint8(C++,D.charCodeAt(0))),Array.from(h,D=>w.setUint8(C++,D.charCodeAt(0))),Array.from(c,D=>w.setUint8(C++,D.charCodeAt(0))),Array.from(p,D=>w.setUint8(C++,D.charCodeAt(0))),Array.from(x,D=>w.setUint8(C++,D.charCodeAt(0)));var M=new Uint8Array(T.byteLength+r.byteLength);return M.set(new Uint8Array(T),0),M.set(new Uint8Array(r),T.byteLength),M.buffer}decode(e,i){if(this._isArrayBuffer(e)){let r=this._binaryDecode(e);return i(r)}if(typeof e=="string"){const r=JSON.parse(e),[a,l,c,h,g]=r;return i({join_ref:a,ref:l,topic:c,event:h,payload:g})}return i({})}_binaryDecode(e){const i=new DataView(e),r=i.getUint8(0),a=new TextDecoder;switch(r){case this.KINDS.userBroadcast:return this._decodeUserBroadcast(e,i,a)}}_decodeUserBroadcast(e,i,r){const a=i.getUint8(1),l=i.getUint8(2),c=i.getUint8(3),h=i.getUint8(4);let g=this.HEADER_LENGTH+4;const p=r.decode(e.slice(g,g+a));g=g+a;const _=r.decode(e.slice(g,g+l));g=g+l;const x=r.decode(e.slice(g,g+c));g=g+c;const S=e.slice(g,e.byteLength),T=h===this.JSON_ENCODING?JSON.parse(r.decode(S)):S,w={type:this.BROADCAST_EVENT,event:_,payload:T};return c>0&&(w.meta=JSON.parse(x)),{join_ref:null,ref:null,topic:p,event:this.BROADCAST_EVENT,payload:w}}_isArrayBuffer(e){var i;return e instanceof ArrayBuffer||((i=e==null?void 0:e.constructor)===null||i===void 0?void 0:i.name)==="ArrayBuffer"}_pick(e,i){return!e||typeof e!="object"?{}:Object.fromEntries(Object.entries(e).filter(([r])=>i.includes(r)))}}class Rv{constructor(e,i){this.callback=e,this.timerCalc=i,this.timer=void 0,this.tries=0,this.callback=e,this.timerCalc=i}reset(){this.tries=0,clearTimeout(this.timer),this.timer=void 0}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var ze;(function(n){n.abstime="abstime",n.bool="bool",n.date="date",n.daterange="daterange",n.float4="float4",n.float8="float8",n.int2="int2",n.int4="int4",n.int4range="int4range",n.int8="int8",n.int8range="int8range",n.json="json",n.jsonb="jsonb",n.money="money",n.numeric="numeric",n.oid="oid",n.reltime="reltime",n.text="text",n.time="time",n.timestamp="timestamp",n.timestamptz="timestamptz",n.timetz="timetz",n.tsrange="tsrange",n.tstzrange="tstzrange"})(ze||(ze={}));const Ig=(n,e,i={})=>{var r;const a=(r=i.skipTypes)!==null&&r!==void 0?r:[];return e?Object.keys(e).reduce((l,c)=>(l[c]=S2(c,n,e,a),l),{}):{}},S2=(n,e,i,r)=>{const a=e.find(h=>h.name===n),l=a==null?void 0:a.type,c=i[n];return l&&!r.includes(l)?Mv(l,c):Wc(c)},Mv=(n,e)=>{if(n.charAt(0)==="_"){const i=n.slice(1,n.length);return C2(e,i)}switch(n){case ze.bool:return T2(e);case ze.float4:case ze.float8:case ze.int2:case ze.int4:case ze.int8:case ze.numeric:case ze.oid:return E2(e);case ze.json:case ze.jsonb:return w2(e);case ze.timestamp:return A2(e);case ze.abstime:case ze.date:case ze.daterange:case ze.int4range:case ze.int8range:case ze.money:case ze.reltime:case ze.text:case ze.time:case ze.timestamptz:case ze.timetz:case ze.tsrange:case ze.tstzrange:return Wc(e);default:return Wc(e)}},Wc=n=>n,T2=n=>{switch(n){case"t":return!0;case"f":return!1;default:return n}},E2=n=>{if(typeof n=="string"){const e=parseFloat(n);if(!Number.isNaN(e))return e}return n},w2=n=>{if(typeof n=="string")try{return JSON.parse(n)}catch(e){return console.log(`JSON parse error: ${e}`),n}return n},C2=(n,e)=>{if(typeof n!="string")return n;const i=n.length-1,r=n[i];if(n[0]==="{"&&r==="}"){let l;const c=n.slice(1,i);try{l=JSON.parse("["+c+"]")}catch{l=c?c.split(","):[]}return l.map(h=>Mv(e,h))}return n},A2=n=>typeof n=="string"?n.replace(" ","T"):n,Iv=n=>{const e=new URL(n);return e.protocol=e.protocol.replace(/^ws/i,"http"),e.pathname=e.pathname.replace(/\/+$/,"").replace(/\/socket\/websocket$/i,"").replace(/\/socket$/i,"").replace(/\/websocket$/i,""),e.pathname===""||e.pathname==="/"?e.pathname="/api/broadcast":e.pathname=e.pathname+"/api/broadcast",e.href};class Cc{constructor(e,i,r={},a=Xc){this.channel=e,this.event=i,this.payload=r,this.timeout=a,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(e){this.timeout=e,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(e){this.payload=Object.assign(Object.assign({},this.payload),e)}receive(e,i){var r;return this._hasReceived(e)&&i((r=this.receivedResp)===null||r===void 0?void 0:r.response),this.recHooks.push({status:e,callback:i}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const e=i=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=i,this._matchReceive(i)};this.channel._on(this.refEvent,{},e),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(e,i){this.refEvent&&this.channel._trigger(this.refEvent,{status:e,response:i})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:e,response:i}){this.recHooks.filter(r=>r.status===e).forEach(r=>r.callback(i))}_hasReceived(e){return this.receivedResp&&this.receivedResp.status===e}}var kg;(function(n){n.SYNC="sync",n.JOIN="join",n.LEAVE="leave"})(kg||(kg={}));class Qr{constructor(e,i){this.channel=e,this.state={},this.pendingDiffs=[],this.joinRef=null,this.enabled=!1,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const r=(i==null?void 0:i.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(r.state,{},a=>{const{onJoin:l,onLeave:c,onSync:h}=this.caller;this.joinRef=this.channel._joinRef(),this.state=Qr.syncState(this.state,a,l,c),this.pendingDiffs.forEach(g=>{this.state=Qr.syncDiff(this.state,g,l,c)}),this.pendingDiffs=[],h()}),this.channel._on(r.diff,{},a=>{const{onJoin:l,onLeave:c,onSync:h}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(a):(this.state=Qr.syncDiff(this.state,a,l,c),h())}),this.onJoin((a,l,c)=>{this.channel._trigger("presence",{event:"join",key:a,currentPresences:l,newPresences:c})}),this.onLeave((a,l,c)=>{this.channel._trigger("presence",{event:"leave",key:a,currentPresences:l,leftPresences:c})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(e,i,r,a){const l=this.cloneDeep(e),c=this.transformState(i),h={},g={};return this.map(l,(p,_)=>{c[p]||(g[p]=_)}),this.map(c,(p,_)=>{const x=l[p];if(x){const S=_.map(M=>M.presence_ref),T=x.map(M=>M.presence_ref),w=_.filter(M=>T.indexOf(M.presence_ref)<0),C=x.filter(M=>S.indexOf(M.presence_ref)<0);w.length>0&&(h[p]=w),C.length>0&&(g[p]=C)}else h[p]=_}),this.syncDiff(l,{joins:h,leaves:g},r,a)}static syncDiff(e,i,r,a){const{joins:l,leaves:c}={joins:this.transformState(i.joins),leaves:this.transformState(i.leaves)};return r||(r=()=>{}),a||(a=()=>{}),this.map(l,(h,g)=>{var p;const _=(p=e[h])!==null&&p!==void 0?p:[];if(e[h]=this.cloneDeep(g),_.length>0){const x=e[h].map(T=>T.presence_ref),S=_.filter(T=>x.indexOf(T.presence_ref)<0);e[h].unshift(...S)}r(h,_,g)}),this.map(c,(h,g)=>{let p=e[h];if(!p)return;const _=g.map(x=>x.presence_ref);p=p.filter(x=>_.indexOf(x.presence_ref)<0),e[h]=p,a(h,p,g),p.length===0&&delete e[h]}),e}static map(e,i){return Object.getOwnPropertyNames(e).map(r=>i(r,e[r]))}static transformState(e){return e=this.cloneDeep(e),Object.getOwnPropertyNames(e).reduce((i,r)=>{const a=e[r];return"metas"in a?i[r]=a.metas.map(l=>(l.presence_ref=l.phx_ref,delete l.phx_ref,delete l.phx_ref_prev,l)):i[r]=a,i},{})}static cloneDeep(e){return JSON.parse(JSON.stringify(e))}onJoin(e){this.caller.onJoin=e}onLeave(e){this.caller.onLeave=e}onSync(e){this.caller.onSync=e}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var Dg;(function(n){n.ALL="*",n.INSERT="INSERT",n.UPDATE="UPDATE",n.DELETE="DELETE"})(Dg||(Dg={}));var Xr;(function(n){n.BROADCAST="broadcast",n.PRESENCE="presence",n.POSTGRES_CHANGES="postgres_changes",n.SYSTEM="system"})(Xr||(Xr={}));var Un;(function(n){n.SUBSCRIBED="SUBSCRIBED",n.TIMED_OUT="TIMED_OUT",n.CLOSED="CLOSED",n.CHANNEL_ERROR="CHANNEL_ERROR"})(Un||(Un={}));class Cd{constructor(e,i={config:{}},r){var a,l;if(this.topic=e,this.params=i,this.socket=r,this.bindings={},this.state=ft.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=e.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:"",enabled:!1},private:!1},i.config),this.timeout=this.socket.timeout,this.joinPush=new Cc(this,un.join,this.params,this.timeout),this.rejoinTimer=new Rv(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=ft.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(c=>c.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=ft.closed,this.socket._remove(this)}),this._onError(c=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,c),this.state=ft.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=ft.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("error",c=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,c),this.state=ft.errored,this.rejoinTimer.scheduleTimeout())}),this._on(un.reply,{},(c,h)=>{this._trigger(this._replyEventName(h),c)}),this.presence=new Qr(this),this.broadcastEndpointURL=Iv(this.socket.endPoint),this.private=this.params.config.private||!1,!this.private&&(!((l=(a=this.params.config)===null||a===void 0?void 0:a.broadcast)===null||l===void 0)&&l.replay))throw`tried to use replay on public channel '${this.topic}'. It must be a private channel.`}subscribe(e,i=this.timeout){var r,a,l;if(this.socket.isConnected()||this.socket.connect(),this.state==ft.closed){const{config:{broadcast:c,presence:h,private:g}}=this.params,p=(a=(r=this.bindings.postgres_changes)===null||r===void 0?void 0:r.map(T=>T.filter))!==null&&a!==void 0?a:[],_=!!this.bindings[Xr.PRESENCE]&&this.bindings[Xr.PRESENCE].length>0||((l=this.params.config.presence)===null||l===void 0?void 0:l.enabled)===!0,x={},S={broadcast:c,presence:Object.assign(Object.assign({},h),{enabled:_}),postgres_changes:p,private:g};this.socket.accessTokenValue&&(x.access_token=this.socket.accessTokenValue),this._onError(T=>e==null?void 0:e(Un.CHANNEL_ERROR,T)),this._onClose(()=>e==null?void 0:e(Un.CLOSED)),this.updateJoinPayload(Object.assign({config:S},x)),this.joinedOnce=!0,this._rejoin(i),this.joinPush.receive("ok",async({postgres_changes:T})=>{var w;if(this.socket.setAuth(),T===void 0){e==null||e(Un.SUBSCRIBED);return}else{const C=this.bindings.postgres_changes,M=(w=C==null?void 0:C.length)!==null&&w!==void 0?w:0,D=[];for(let B=0;B<M;B++){const I=C[B],{filter:{event:z,schema:U,table:K,filter:G}}=I,X=T&&T[B];if(X&&X.event===z&&X.schema===U&&X.table===K&&X.filter===G)D.push(Object.assign(Object.assign({},I),{id:X.id}));else{this.unsubscribe(),this.state=ft.errored,e==null||e(Un.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=D,e&&e(Un.SUBSCRIBED);return}}).receive("error",T=>{this.state=ft.errored,e==null||e(Un.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(T).join(", ")||"error")))}).receive("timeout",()=>{e==null||e(Un.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(e,i={}){return await this.send({type:"presence",event:"track",payload:e},i.timeout||this.timeout)}async untrack(e={}){return await this.send({type:"presence",event:"untrack"},e)}on(e,i,r){return this.state===ft.joined&&e===Xr.PRESENCE&&(this.socket.log("channel",`resubscribe to ${this.topic} due to change in presence callbacks on joined channel`),this.unsubscribe().then(()=>this.subscribe())),this._on(e,i,r)}async httpSend(e,i,r={}){var a;const l=this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"";if(i==null)return Promise.reject("Payload is required for httpSend()");const c={method:"POST",headers:{Authorization:l,apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:e,payload:i,private:this.private}]})},h=await this._fetchWithTimeout(this.broadcastEndpointURL,c,(a=r.timeout)!==null&&a!==void 0?a:this.timeout);if(h.status===202)return{success:!0};let g=h.statusText;try{const p=await h.json();g=p.error||p.message||g}catch{}return Promise.reject(new Error(g))}async send(e,i={}){var r,a;if(!this._canPush()&&e.type==="broadcast"){console.warn("Realtime send() is automatically falling back to REST API. This behavior will be deprecated in the future. Please use httpSend() explicitly for REST delivery.");const{event:l,payload:c}=e,g={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:l,payload:c,private:this.private}]})};try{const p=await this._fetchWithTimeout(this.broadcastEndpointURL,g,(r=i.timeout)!==null&&r!==void 0?r:this.timeout);return await((a=p.body)===null||a===void 0?void 0:a.cancel()),p.ok?"ok":"error"}catch(p){return p.name==="AbortError"?"timed out":"error"}}else return new Promise(l=>{var c,h,g;const p=this._push(e.type,e,i.timeout||this.timeout);e.type==="broadcast"&&!(!((g=(h=(c=this.params)===null||c===void 0?void 0:c.config)===null||h===void 0?void 0:h.broadcast)===null||g===void 0)&&g.ack)&&l("ok"),p.receive("ok",()=>l("ok")),p.receive("error",()=>l("error")),p.receive("timeout",()=>l("timed out"))})}updateJoinPayload(e){this.joinPush.updatePayload(e)}unsubscribe(e=this.timeout){this.state=ft.leaving;const i=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(un.close,"leave",this._joinRef())};this.joinPush.destroy();let r=null;return new Promise(a=>{r=new Cc(this,un.leave,{},e),r.receive("ok",()=>{i(),a("ok")}).receive("timeout",()=>{i(),a("timed out")}).receive("error",()=>{a("error")}),r.send(),this._canPush()||r.trigger("ok",{})}).finally(()=>{r==null||r.destroy()})}teardown(){this.pushBuffer.forEach(e=>e.destroy()),this.pushBuffer=[],this.rejoinTimer.reset(),this.joinPush.destroy(),this.state=ft.closed,this.bindings={}}async _fetchWithTimeout(e,i,r){const a=new AbortController,l=setTimeout(()=>a.abort(),r),c=await this.socket.fetch(e,Object.assign(Object.assign({},i),{signal:a.signal}));return clearTimeout(l),c}_push(e,i,r=this.timeout){if(!this.joinedOnce)throw`tried to push '${e}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let a=new Cc(this,e,i,r);return this._canPush()?a.send():this._addToPushBuffer(a),a}_addToPushBuffer(e){if(e.startTimeout(),this.pushBuffer.push(e),this.pushBuffer.length>x2){const i=this.pushBuffer.shift();i&&(i.destroy(),this.socket.log("channel",`discarded push due to buffer overflow: ${i.event}`,i.payload))}}_onMessage(e,i,r){return i}_isMember(e){return this.topic===e}_joinRef(){return this.joinPush.ref}_trigger(e,i,r){var a,l;const c=e.toLocaleLowerCase(),{close:h,error:g,leave:p,join:_}=un;if(r&&[h,g,p,_].indexOf(c)>=0&&r!==this._joinRef())return;let S=this._onMessage(c,i,r);if(i&&!S)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(c)?(a=this.bindings.postgres_changes)===null||a===void 0||a.filter(T=>{var w,C,M;return((w=T.filter)===null||w===void 0?void 0:w.event)==="*"||((M=(C=T.filter)===null||C===void 0?void 0:C.event)===null||M===void 0?void 0:M.toLocaleLowerCase())===c}).map(T=>T.callback(S,r)):(l=this.bindings[c])===null||l===void 0||l.filter(T=>{var w,C,M,D,B,I;if(["broadcast","presence","postgres_changes"].includes(c))if("id"in T){const z=T.id,U=(w=T.filter)===null||w===void 0?void 0:w.event;return z&&((C=i.ids)===null||C===void 0?void 0:C.includes(z))&&(U==="*"||(U==null?void 0:U.toLocaleLowerCase())===((M=i.data)===null||M===void 0?void 0:M.type.toLocaleLowerCase()))}else{const z=(B=(D=T==null?void 0:T.filter)===null||D===void 0?void 0:D.event)===null||B===void 0?void 0:B.toLocaleLowerCase();return z==="*"||z===((I=i==null?void 0:i.event)===null||I===void 0?void 0:I.toLocaleLowerCase())}else return T.type.toLocaleLowerCase()===c}).map(T=>{if(typeof S=="object"&&"ids"in S){const w=S.data,{schema:C,table:M,commit_timestamp:D,type:B,errors:I}=w;S=Object.assign(Object.assign({},{schema:C,table:M,commit_timestamp:D,eventType:B,new:{},old:{},errors:I}),this._getPayloadRecords(w))}T.callback(S,r)})}_isClosed(){return this.state===ft.closed}_isJoined(){return this.state===ft.joined}_isJoining(){return this.state===ft.joining}_isLeaving(){return this.state===ft.leaving}_replyEventName(e){return`chan_reply_${e}`}_on(e,i,r){const a=e.toLocaleLowerCase(),l={type:a,filter:i,callback:r};return this.bindings[a]?this.bindings[a].push(l):this.bindings[a]=[l],this}_off(e,i){const r=e.toLocaleLowerCase();return this.bindings[r]&&(this.bindings[r]=this.bindings[r].filter(a=>{var l;return!(((l=a.type)===null||l===void 0?void 0:l.toLocaleLowerCase())===r&&Cd.isEqual(a.filter,i))})),this}static isEqual(e,i){if(Object.keys(e).length!==Object.keys(i).length)return!1;for(const r in e)if(e[r]!==i[r])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(e){this._on(un.close,{},e)}_onError(e){this._on(un.error,{},i=>e(i))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(e=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=ft.joining,this.joinPush.resend(e))}_getPayloadRecords(e){const i={new:{},old:{}};return(e.type==="INSERT"||e.type==="UPDATE")&&(i.new=Ig(e.columns,e.record)),(e.type==="UPDATE"||e.type==="DELETE")&&(i.old=Ig(e.columns,e.old_record)),i}}const Ac=()=>{},Ma={HEARTBEAT_INTERVAL:25e3,RECONNECT_DELAY:10,HEARTBEAT_TIMEOUT_FALLBACK:100},N2=[1e3,2e3,5e3,1e4],R2=1e4,M2=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class I2{constructor(e,i){var r;if(this.accessTokenValue=null,this.apiKey=null,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=Xc,this.transport=null,this.heartbeatIntervalMs=Ma.HEARTBEAT_INTERVAL,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=Ac,this.ref=0,this.reconnectTimer=null,this.vsn=Mg,this.logger=Ac,this.conn=null,this.sendBuffer=[],this.serializer=new b2,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._connectionState="disconnected",this._wasManualDisconnect=!1,this._authPromise=null,this._resolveFetch=a=>a?(...l)=>a(...l):(...l)=>fetch(...l),!(!((r=i==null?void 0:i.params)===null||r===void 0)&&r.apikey))throw new Error("API key is required to connect to Realtime");this.apiKey=i.params.apikey,this.endPoint=`${e}/${Zc.websocket}`,this.httpEndpoint=Iv(e),this._initializeOptions(i),this._setupReconnectionTimer(),this.fetch=this._resolveFetch(i==null?void 0:i.fetch)}connect(){if(!(this.isConnecting()||this.isDisconnecting()||this.conn!==null&&this.isConnected())){if(this._setConnectionState("connecting"),this.accessToken&&!this._authPromise&&this._setAuthSafely("connect"),this.transport)this.conn=new this.transport(this.endpointURL());else try{this.conn=m2.createWebSocket(this.endpointURL())}catch(e){this._setConnectionState("disconnected");const i=e.message;throw i.includes("Node.js")?new Error(`${i}

To use Realtime in Node.js, you need to provide a WebSocket implementation:

Option 1: Use Node.js 22+ which has native WebSocket support
Option 2: Install and provide the "ws" package:

  npm install ws

  import ws from "ws"
  const client = new RealtimeClient(url, {
    ...options,
    transport: ws
  })`):new Error(`WebSocket not available: ${i}`)}this._setupConnectionHandlers()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:this.vsn}))}disconnect(e,i){if(!this.isDisconnecting())if(this._setConnectionState("disconnecting",!0),this.conn){const r=setTimeout(()=>{this._setConnectionState("disconnected")},100);this.conn.onclose=()=>{clearTimeout(r),this._setConnectionState("disconnected")},typeof this.conn.close=="function"&&(e?this.conn.close(e,i??""):this.conn.close()),this._teardownConnection()}else this._setConnectionState("disconnected")}getChannels(){return this.channels}async removeChannel(e){const i=await e.unsubscribe();return this.channels.length===0&&this.disconnect(),i}async removeAllChannels(){const e=await Promise.all(this.channels.map(i=>i.unsubscribe()));return this.channels=[],this.disconnect(),e}log(e,i,r){this.logger(e,i,r)}connectionState(){switch(this.conn&&this.conn.readyState){case qi.connecting:return Bi.Connecting;case qi.open:return Bi.Open;case qi.closing:return Bi.Closing;default:return Bi.Closed}}isConnected(){return this.connectionState()===Bi.Open}isConnecting(){return this._connectionState==="connecting"}isDisconnecting(){return this._connectionState==="disconnecting"}channel(e,i={config:{}}){const r=`realtime:${e}`,a=this.getChannels().find(l=>l.topic===r);if(a)return a;{const l=new Cd(`realtime:${e}`,i,this);return this.channels.push(l),l}}push(e){const{topic:i,event:r,payload:a,ref:l}=e,c=()=>{this.encode(e,h=>{var g;(g=this.conn)===null||g===void 0||g.send(h)})};this.log("push",`${i} ${r} (${l})`,a),this.isConnected()?c():this.sendBuffer.push(c)}async setAuth(e=null){this._authPromise=this._performAuth(e);try{await this._authPromise}finally{this._authPromise=null}}async sendHeartbeat(){var e;if(!this.isConnected()){try{this.heartbeatCallback("disconnected")}catch(i){this.log("error","error in heartbeat callback",i)}return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection");try{this.heartbeatCallback("timeout")}catch(i){this.log("error","error in heartbeat callback",i)}this._wasManualDisconnect=!1,(e=this.conn)===null||e===void 0||e.close(_2,"heartbeat timeout"),setTimeout(()=>{var i;this.isConnected()||(i=this.reconnectTimer)===null||i===void 0||i.scheduleTimeout()},Ma.HEARTBEAT_TIMEOUT_FALLBACK);return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef});try{this.heartbeatCallback("sent")}catch(i){this.log("error","error in heartbeat callback",i)}this._setAuthSafely("heartbeat")}onHeartbeat(e){this.heartbeatCallback=e}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(e=>e()),this.sendBuffer=[])}_makeRef(){let e=this.ref+1;return e===this.ref?this.ref=0:this.ref=e,this.ref.toString()}_leaveOpenTopic(e){let i=this.channels.find(r=>r.topic===e&&(r._isJoined()||r._isJoining()));i&&(this.log("transport",`leaving duplicate topic "${e}"`),i.unsubscribe())}_remove(e){this.channels=this.channels.filter(i=>i.topic!==e.topic)}_onConnMessage(e){this.decode(e.data,i=>{if(i.topic==="phoenix"&&i.event==="phx_reply")try{this.heartbeatCallback(i.payload.status==="ok"?"ok":"error")}catch(p){this.log("error","error in heartbeat callback",p)}i.ref&&i.ref===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null);const{topic:r,event:a,payload:l,ref:c}=i,h=c?`(${c})`:"",g=l.status||"";this.log("receive",`${g} ${r} ${a} ${h}`.trim(),l),this.channels.filter(p=>p._isMember(r)).forEach(p=>p._trigger(a,l,c)),this._triggerStateCallbacks("message",i)})}_clearTimer(e){var i;e==="heartbeat"&&this.heartbeatTimer?(clearInterval(this.heartbeatTimer),this.heartbeatTimer=void 0):e==="reconnect"&&((i=this.reconnectTimer)===null||i===void 0||i.reset())}_clearAllTimers(){this._clearTimer("heartbeat"),this._clearTimer("reconnect")}_setupConnectionHandlers(){this.conn&&("binaryType"in this.conn&&(this.conn.binaryType="arraybuffer"),this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=e=>this._onConnError(e),this.conn.onmessage=e=>this._onConnMessage(e),this.conn.onclose=e=>this._onConnClose(e))}_teardownConnection(){if(this.conn){if(this.conn.readyState===qi.open||this.conn.readyState===qi.connecting)try{this.conn.close()}catch(e){this.log("error","Error closing connection",e)}this.conn.onopen=null,this.conn.onerror=null,this.conn.onmessage=null,this.conn.onclose=null,this.conn=null}this._clearAllTimers(),this.channels.forEach(e=>e.teardown())}_onConnOpen(){this._setConnectionState("connected"),this.log("transport",`connected to ${this.endpointURL()}`),(this._authPromise||(this.accessToken&&!this.accessTokenValue?this.setAuth():Promise.resolve())).then(()=>{this.flushSendBuffer()}).catch(i=>{this.log("error","error waiting for auth on connect",i),this.flushSendBuffer()}),this._clearTimer("reconnect"),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this._triggerStateCallbacks("open")}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const e=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(e),this.workerRef.onerror=i=>{this.log("worker","worker error",i.message),this.workerRef.terminate()},this.workerRef.onmessage=i=>{i.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_onConnClose(e){var i;this._setConnectionState("disconnected"),this.log("transport","close",e),this._triggerChanError(),this._clearTimer("heartbeat"),this._wasManualDisconnect||(i=this.reconnectTimer)===null||i===void 0||i.scheduleTimeout(),this._triggerStateCallbacks("close",e)}_onConnError(e){this._setConnectionState("disconnected"),this.log("transport",`${e}`),this._triggerChanError(),this._triggerStateCallbacks("error",e)}_triggerChanError(){this.channels.forEach(e=>e._trigger(un.error))}_appendParams(e,i){if(Object.keys(i).length===0)return e;const r=e.match(/\?/)?"&":"?",a=new URLSearchParams(i);return`${e}${r}${a}`}_workerObjectUrl(e){let i;if(e)i=e;else{const r=new Blob([M2],{type:"application/javascript"});i=URL.createObjectURL(r)}return i}_setConnectionState(e,i=!1){this._connectionState=e,e==="connecting"?this._wasManualDisconnect=!1:e==="disconnecting"&&(this._wasManualDisconnect=i)}async _performAuth(e=null){let i;e?i=e:this.accessToken?i=await this.accessToken():i=this.accessTokenValue,this.accessTokenValue!=i&&(this.accessTokenValue=i,this.channels.forEach(r=>{const a={access_token:i,version:y2};i&&r.updateJoinPayload(a),r.joinedOnce&&r._isJoined()&&r._push(un.access_token,{access_token:i})}))}async _waitForAuthIfNeeded(){this._authPromise&&await this._authPromise}_setAuthSafely(e="general"){this.setAuth().catch(i=>{this.log("error",`error setting auth in ${e}`,i)})}_triggerStateCallbacks(e,i){try{this.stateChangeCallbacks[e].forEach(r=>{try{r(i)}catch(a){this.log("error",`error in ${e} callback`,a)}})}catch(r){this.log("error",`error triggering ${e} callbacks`,r)}}_setupReconnectionTimer(){this.reconnectTimer=new Rv(async()=>{setTimeout(async()=>{await this._waitForAuthIfNeeded(),this.isConnected()||this.connect()},Ma.RECONNECT_DELAY)},this.reconnectAfterMs)}_initializeOptions(e){var i,r,a,l,c,h,g,p,_,x,S,T;switch(this.transport=(i=e==null?void 0:e.transport)!==null&&i!==void 0?i:null,this.timeout=(r=e==null?void 0:e.timeout)!==null&&r!==void 0?r:Xc,this.heartbeatIntervalMs=(a=e==null?void 0:e.heartbeatIntervalMs)!==null&&a!==void 0?a:Ma.HEARTBEAT_INTERVAL,this.worker=(l=e==null?void 0:e.worker)!==null&&l!==void 0?l:!1,this.accessToken=(c=e==null?void 0:e.accessToken)!==null&&c!==void 0?c:null,this.heartbeatCallback=(h=e==null?void 0:e.heartbeatCallback)!==null&&h!==void 0?h:Ac,this.vsn=(g=e==null?void 0:e.vsn)!==null&&g!==void 0?g:Mg,e!=null&&e.params&&(this.params=e.params),e!=null&&e.logger&&(this.logger=e.logger),(e!=null&&e.logLevel||e!=null&&e.log_level)&&(this.logLevel=e.logLevel||e.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),this.reconnectAfterMs=(p=e==null?void 0:e.reconnectAfterMs)!==null&&p!==void 0?p:(w=>N2[w-1]||R2),this.vsn){case Nv:this.encode=(_=e==null?void 0:e.encode)!==null&&_!==void 0?_:((w,C)=>C(JSON.stringify(w))),this.decode=(x=e==null?void 0:e.decode)!==null&&x!==void 0?x:((w,C)=>C(JSON.parse(w)));break;case v2:this.encode=(S=e==null?void 0:e.encode)!==null&&S!==void 0?S:this.serializer.encode.bind(this.serializer),this.decode=(T=e==null?void 0:e.decode)!==null&&T!==void 0?T:this.serializer.decode.bind(this.serializer);break;default:throw new Error(`Unsupported serializer version: ${this.vsn}`)}if(this.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.workerUrl=e==null?void 0:e.workerUrl}}}class el extends Error{constructor(e){super(e),this.__isStorageError=!0,this.name="StorageError"}}function Qe(n){return typeof n=="object"&&n!==null&&"__isStorageError"in n}class k2 extends el{constructor(e,i,r){super(e),this.name="StorageApiError",this.status=i,this.statusCode=r}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}}class ed extends el{constructor(e,i){super(e),this.name="StorageUnknownError",this.originalError=i}}const Ad=n=>n?(...e)=>n(...e):(...e)=>fetch(...e),D2=()=>Response,td=n=>{if(Array.isArray(n))return n.map(i=>td(i));if(typeof n=="function"||n!==Object(n))return n;const e={};return Object.entries(n).forEach(([i,r])=>{const a=i.replace(/([-_][a-z])/gi,l=>l.toUpperCase().replace(/[-_]/g,""));e[a]=td(r)}),e},U2=n=>{if(typeof n!="object"||n===null)return!1;const e=Object.getPrototypeOf(n);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in n)&&!(Symbol.iterator in n)},P2=n=>!n||typeof n!="string"||n.length===0||n.length>100||n.trim()!==n||n.includes("/")||n.includes("\\")?!1:/^[\w!.\*'() &$@=;:+,?-]+$/.test(n),Nc=n=>{var e;return n.msg||n.message||n.error_description||(typeof n.error=="string"?n.error:(e=n.error)===null||e===void 0?void 0:e.message)||JSON.stringify(n)},O2=(n,e,i)=>ne(void 0,void 0,void 0,function*(){const r=yield D2();n instanceof r&&!(i!=null&&i.noResolveJson)?n.json().then(a=>{const l=n.status||500,c=(a==null?void 0:a.statusCode)||l+"";e(new k2(Nc(a),l,c))}).catch(a=>{e(new ed(Nc(a),a))}):e(new ed(Nc(n),n))}),L2=(n,e,i,r)=>{const a={method:n,headers:(e==null?void 0:e.headers)||{}};return n==="GET"||!r?a:(U2(r)?(a.headers=Object.assign({"Content-Type":"application/json"},e==null?void 0:e.headers),a.body=JSON.stringify(r)):a.body=r,e!=null&&e.duplex&&(a.duplex=e.duplex),Object.assign(Object.assign({},a),i))};function ro(n,e,i,r,a,l){return ne(this,void 0,void 0,function*(){return new Promise((c,h)=>{n(i,L2(e,r,a,l)).then(g=>{if(!g.ok)throw g;return r!=null&&r.noResolveJson?g:g.json()}).then(g=>c(g)).catch(g=>O2(g,h,r))})})}function Wr(n,e,i,r){return ne(this,void 0,void 0,function*(){return ro(n,"GET",e,i,r)})}function ln(n,e,i,r,a){return ne(this,void 0,void 0,function*(){return ro(n,"POST",e,r,a,i)})}function nd(n,e,i,r,a){return ne(this,void 0,void 0,function*(){return ro(n,"PUT",e,r,a,i)})}function q2(n,e,i,r){return ne(this,void 0,void 0,function*(){return ro(n,"HEAD",e,Object.assign(Object.assign({},i),{noResolveJson:!0}),r)})}function Nd(n,e,i,r,a){return ne(this,void 0,void 0,function*(){return ro(n,"DELETE",e,r,a,i)})}class B2{constructor(e,i){this.downloadFn=e,this.shouldThrowOnError=i}then(e,i){return this.execute().then(e,i)}execute(){return ne(this,void 0,void 0,function*(){try{return{data:(yield this.downloadFn()).body,error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(Qe(e))return{data:null,error:e};throw e}})}}var kv;class G2{constructor(e,i){this.downloadFn=e,this.shouldThrowOnError=i,this[kv]="BlobDownloadBuilder",this.promise=null}asStream(){return new B2(this.downloadFn,this.shouldThrowOnError)}then(e,i){return this.getPromise().then(e,i)}catch(e){return this.getPromise().catch(e)}finally(e){return this.getPromise().finally(e)}getPromise(){return this.promise||(this.promise=this.execute()),this.promise}execute(){return ne(this,void 0,void 0,function*(){try{return{data:yield(yield this.downloadFn()).blob(),error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(Qe(e))return{data:null,error:e};throw e}})}}kv=Symbol.toStringTag;const V2={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},Ug={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class H2{constructor(e,i={},r,a){this.shouldThrowOnError=!1,this.url=e,this.headers=i,this.bucketId=r,this.fetch=Ad(a)}throwOnError(){return this.shouldThrowOnError=!0,this}uploadOrUpdate(e,i,r,a){return ne(this,void 0,void 0,function*(){try{let l;const c=Object.assign(Object.assign({},Ug),a);let h=Object.assign(Object.assign({},this.headers),e==="POST"&&{"x-upsert":String(c.upsert)});const g=c.metadata;typeof Blob<"u"&&r instanceof Blob?(l=new FormData,l.append("cacheControl",c.cacheControl),g&&l.append("metadata",this.encodeMetadata(g)),l.append("",r)):typeof FormData<"u"&&r instanceof FormData?(l=r,l.has("cacheControl")||l.append("cacheControl",c.cacheControl),g&&!l.has("metadata")&&l.append("metadata",this.encodeMetadata(g))):(l=r,h["cache-control"]=`max-age=${c.cacheControl}`,h["content-type"]=c.contentType,g&&(h["x-metadata"]=this.toBase64(this.encodeMetadata(g))),(typeof ReadableStream<"u"&&l instanceof ReadableStream||l&&typeof l=="object"&&"pipe"in l&&typeof l.pipe=="function")&&!c.duplex&&(c.duplex="half")),a!=null&&a.headers&&(h=Object.assign(Object.assign({},h),a.headers));const p=this._removeEmptyFolders(i),_=this._getFinalPath(p),x=yield(e=="PUT"?nd:ln)(this.fetch,`${this.url}/object/${_}`,l,Object.assign({headers:h},c!=null&&c.duplex?{duplex:c.duplex}:{}));return{data:{path:p,id:x.Id,fullPath:x.Key},error:null}}catch(l){if(this.shouldThrowOnError)throw l;if(Qe(l))return{data:null,error:l};throw l}})}upload(e,i,r){return ne(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",e,i,r)})}uploadToSignedUrl(e,i,r,a){return ne(this,void 0,void 0,function*(){const l=this._removeEmptyFolders(e),c=this._getFinalPath(l),h=new URL(this.url+`/object/upload/sign/${c}`);h.searchParams.set("token",i);try{let g;const p=Object.assign({upsert:Ug.upsert},a),_=Object.assign(Object.assign({},this.headers),{"x-upsert":String(p.upsert)});typeof Blob<"u"&&r instanceof Blob?(g=new FormData,g.append("cacheControl",p.cacheControl),g.append("",r)):typeof FormData<"u"&&r instanceof FormData?(g=r,g.append("cacheControl",p.cacheControl)):(g=r,_["cache-control"]=`max-age=${p.cacheControl}`,_["content-type"]=p.contentType);const x=yield nd(this.fetch,h.toString(),g,{headers:_});return{data:{path:l,fullPath:x.Key},error:null}}catch(g){if(this.shouldThrowOnError)throw g;if(Qe(g))return{data:null,error:g};throw g}})}createSignedUploadUrl(e,i){return ne(this,void 0,void 0,function*(){try{let r=this._getFinalPath(e);const a=Object.assign({},this.headers);i!=null&&i.upsert&&(a["x-upsert"]="true");const l=yield ln(this.fetch,`${this.url}/object/upload/sign/${r}`,{},{headers:a}),c=new URL(this.url+l.url),h=c.searchParams.get("token");if(!h)throw new el("No token returned by API");return{data:{signedUrl:c.toString(),path:e,token:h},error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Qe(r))return{data:null,error:r};throw r}})}update(e,i,r){return ne(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",e,i,r)})}move(e,i,r){return ne(this,void 0,void 0,function*(){try{return{data:yield ln(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:e,destinationKey:i,destinationBucket:r==null?void 0:r.destinationBucket},{headers:this.headers}),error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(Qe(a))return{data:null,error:a};throw a}})}copy(e,i,r){return ne(this,void 0,void 0,function*(){try{return{data:{path:(yield ln(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:e,destinationKey:i,destinationBucket:r==null?void 0:r.destinationBucket},{headers:this.headers})).Key},error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(Qe(a))return{data:null,error:a};throw a}})}createSignedUrl(e,i,r){return ne(this,void 0,void 0,function*(){try{let a=this._getFinalPath(e),l=yield ln(this.fetch,`${this.url}/object/sign/${a}`,Object.assign({expiresIn:i},r!=null&&r.transform?{transform:r.transform}:{}),{headers:this.headers});const c=r!=null&&r.download?`&download=${r.download===!0?"":r.download}`:"";return l={signedUrl:encodeURI(`${this.url}${l.signedURL}${c}`)},{data:l,error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(Qe(a))return{data:null,error:a};throw a}})}createSignedUrls(e,i,r){return ne(this,void 0,void 0,function*(){try{const a=yield ln(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:i,paths:e},{headers:this.headers}),l=r!=null&&r.download?`&download=${r.download===!0?"":r.download}`:"";return{data:a.map(c=>Object.assign(Object.assign({},c),{signedUrl:c.signedURL?encodeURI(`${this.url}${c.signedURL}${l}`):null})),error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(Qe(a))return{data:null,error:a};throw a}})}download(e,i){const a=typeof(i==null?void 0:i.transform)<"u"?"render/image/authenticated":"object",l=this.transformOptsToQueryString((i==null?void 0:i.transform)||{}),c=l?`?${l}`:"",h=this._getFinalPath(e),g=()=>Wr(this.fetch,`${this.url}/${a}/${h}${c}`,{headers:this.headers,noResolveJson:!0});return new G2(g,this.shouldThrowOnError)}info(e){return ne(this,void 0,void 0,function*(){const i=this._getFinalPath(e);try{const r=yield Wr(this.fetch,`${this.url}/object/info/${i}`,{headers:this.headers});return{data:td(r),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Qe(r))return{data:null,error:r};throw r}})}exists(e){return ne(this,void 0,void 0,function*(){const i=this._getFinalPath(e);try{return yield q2(this.fetch,`${this.url}/object/${i}`,{headers:this.headers}),{data:!0,error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Qe(r)&&r instanceof ed){const a=r.originalError;if([400,404].includes(a==null?void 0:a.status))return{data:!1,error:r}}throw r}})}getPublicUrl(e,i){const r=this._getFinalPath(e),a=[],l=i!=null&&i.download?`download=${i.download===!0?"":i.download}`:"";l!==""&&a.push(l);const h=typeof(i==null?void 0:i.transform)<"u"?"render/image":"object",g=this.transformOptsToQueryString((i==null?void 0:i.transform)||{});g!==""&&a.push(g);let p=a.join("&");return p!==""&&(p=`?${p}`),{data:{publicUrl:encodeURI(`${this.url}/${h}/public/${r}${p}`)}}}remove(e){return ne(this,void 0,void 0,function*(){try{return{data:yield Nd(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:e},{headers:this.headers}),error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(Qe(i))return{data:null,error:i};throw i}})}list(e,i,r){return ne(this,void 0,void 0,function*(){try{const a=Object.assign(Object.assign(Object.assign({},V2),i),{prefix:e||""});return{data:yield ln(this.fetch,`${this.url}/object/list/${this.bucketId}`,a,{headers:this.headers},r),error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(Qe(a))return{data:null,error:a};throw a}})}listV2(e,i){return ne(this,void 0,void 0,function*(){try{const r=Object.assign({},e);return{data:yield ln(this.fetch,`${this.url}/object/list-v2/${this.bucketId}`,r,{headers:this.headers},i),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Qe(r))return{data:null,error:r};throw r}})}encodeMetadata(e){return JSON.stringify(e)}toBase64(e){return typeof Buffer<"u"?Buffer.from(e).toString("base64"):btoa(e)}_getFinalPath(e){return`${this.bucketId}/${e.replace(/^\/+/,"")}`}_removeEmptyFolders(e){return e.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(e){const i=[];return e.width&&i.push(`width=${e.width}`),e.height&&i.push(`height=${e.height}`),e.resize&&i.push(`resize=${e.resize}`),e.format&&i.push(`format=${e.format}`),e.quality&&i.push(`quality=${e.quality}`),i.join("&")}}const Dv="2.86.0",Uv={"X-Client-Info":`storage-js/${Dv}`};class j2{constructor(e,i={},r,a){this.shouldThrowOnError=!1;const l=new URL(e);a!=null&&a.useNewHostname&&/supabase\.(co|in|red)$/.test(l.hostname)&&!l.hostname.includes("storage.supabase.")&&(l.hostname=l.hostname.replace("supabase.","storage.supabase.")),this.url=l.href.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},Uv),i),this.fetch=Ad(r)}throwOnError(){return this.shouldThrowOnError=!0,this}listBuckets(e){return ne(this,void 0,void 0,function*(){try{const i=this.listBucketOptionsToQueryString(e);return{data:yield Wr(this.fetch,`${this.url}/bucket${i}`,{headers:this.headers}),error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(Qe(i))return{data:null,error:i};throw i}})}getBucket(e){return ne(this,void 0,void 0,function*(){try{return{data:yield Wr(this.fetch,`${this.url}/bucket/${e}`,{headers:this.headers}),error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(Qe(i))return{data:null,error:i};throw i}})}createBucket(e){return ne(this,arguments,void 0,function*(i,r={public:!1}){try{return{data:yield ln(this.fetch,`${this.url}/bucket`,{id:i,name:i,type:r.type,public:r.public,file_size_limit:r.fileSizeLimit,allowed_mime_types:r.allowedMimeTypes},{headers:this.headers}),error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(Qe(a))return{data:null,error:a};throw a}})}updateBucket(e,i){return ne(this,void 0,void 0,function*(){try{return{data:yield nd(this.fetch,`${this.url}/bucket/${e}`,{id:e,name:e,public:i.public,file_size_limit:i.fileSizeLimit,allowed_mime_types:i.allowedMimeTypes},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Qe(r))return{data:null,error:r};throw r}})}emptyBucket(e){return ne(this,void 0,void 0,function*(){try{return{data:yield ln(this.fetch,`${this.url}/bucket/${e}/empty`,{},{headers:this.headers}),error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(Qe(i))return{data:null,error:i};throw i}})}deleteBucket(e){return ne(this,void 0,void 0,function*(){try{return{data:yield Nd(this.fetch,`${this.url}/bucket/${e}`,{},{headers:this.headers}),error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(Qe(i))return{data:null,error:i};throw i}})}listBucketOptionsToQueryString(e){const i={};return e&&("limit"in e&&(i.limit=String(e.limit)),"offset"in e&&(i.offset=String(e.offset)),e.search&&(i.search=e.search),e.sortColumn&&(i.sortColumn=e.sortColumn),e.sortOrder&&(i.sortOrder=e.sortOrder)),Object.keys(i).length>0?"?"+new URLSearchParams(i).toString():""}}var eo=class extends Error{constructor(n,e){var i;super(n),this.name="IcebergError",this.status=e.status,this.icebergType=e.icebergType,this.icebergCode=e.icebergCode,this.details=e.details,this.isCommitStateUnknown=e.icebergType==="CommitStateUnknownException"||[500,502,504].includes(e.status)&&((i=e.icebergType)==null?void 0:i.includes("CommitState"))===!0}isNotFound(){return this.status===404}isConflict(){return this.status===409}isAuthenticationTimeout(){return this.status===419}};function z2(n,e,i){const r=new URL(e,n);if(i)for(const[a,l]of Object.entries(i))l!==void 0&&r.searchParams.set(a,l);return r.toString()}async function $2(n){return!n||n.type==="none"?{}:n.type==="bearer"?{Authorization:`Bearer ${n.token}`}:n.type==="header"?{[n.name]:n.value}:n.type==="custom"?await n.getHeaders():{}}function F2(n){const e=n.fetchImpl??globalThis.fetch;return{async request({method:i,path:r,query:a,body:l,headers:c}){const h=z2(n.baseUrl,r,a),g=await $2(n.auth),p=await e(h,{method:i,headers:{...l?{"Content-Type":"application/json"}:{},...g,...c},body:l?JSON.stringify(l):void 0}),_=await p.text(),x=(p.headers.get("content-type")||"").includes("application/json"),S=x&&_?JSON.parse(_):_;if(!p.ok){const T=x?S:void 0,w=T==null?void 0:T.error;throw new eo((w==null?void 0:w.message)??`Request failed with status ${p.status}`,{status:p.status,icebergType:w==null?void 0:w.type,icebergCode:w==null?void 0:w.code,details:T})}return{status:p.status,headers:p.headers,data:S}}}}function Ia(n){return n.join("")}var J2=class{constructor(n,e=""){this.client=n,this.prefix=e}async listNamespaces(n){const e=n?{parent:Ia(n.namespace)}:void 0;return(await this.client.request({method:"GET",path:`${this.prefix}/namespaces`,query:e})).data.namespaces.map(r=>({namespace:r}))}async createNamespace(n,e){const i={namespace:n.namespace,properties:e==null?void 0:e.properties};return(await this.client.request({method:"POST",path:`${this.prefix}/namespaces`,body:i})).data}async dropNamespace(n){await this.client.request({method:"DELETE",path:`${this.prefix}/namespaces/${Ia(n.namespace)}`})}async loadNamespaceMetadata(n){return{properties:(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${Ia(n.namespace)}`})).data.properties}}async namespaceExists(n){try{return await this.client.request({method:"HEAD",path:`${this.prefix}/namespaces/${Ia(n.namespace)}`}),!0}catch(e){if(e instanceof eo&&e.status===404)return!1;throw e}}async createNamespaceIfNotExists(n,e){try{return await this.createNamespace(n,e)}catch(i){if(i instanceof eo&&i.status===409)return;throw i}}};function Rs(n){return n.join("")}var K2=class{constructor(n,e="",i){this.client=n,this.prefix=e,this.accessDelegation=i}async listTables(n){return(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${Rs(n.namespace)}/tables`})).data.identifiers}async createTable(n,e){const i={};return this.accessDelegation&&(i["X-Iceberg-Access-Delegation"]=this.accessDelegation),(await this.client.request({method:"POST",path:`${this.prefix}/namespaces/${Rs(n.namespace)}/tables`,body:e,headers:i})).data.metadata}async updateTable(n,e){const i=await this.client.request({method:"POST",path:`${this.prefix}/namespaces/${Rs(n.namespace)}/tables/${n.name}`,body:e});return{"metadata-location":i.data["metadata-location"],metadata:i.data.metadata}}async dropTable(n,e){await this.client.request({method:"DELETE",path:`${this.prefix}/namespaces/${Rs(n.namespace)}/tables/${n.name}`,query:{purgeRequested:String((e==null?void 0:e.purge)??!1)}})}async loadTable(n){const e={};return this.accessDelegation&&(e["X-Iceberg-Access-Delegation"]=this.accessDelegation),(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${Rs(n.namespace)}/tables/${n.name}`,headers:e})).data.metadata}async tableExists(n){const e={};this.accessDelegation&&(e["X-Iceberg-Access-Delegation"]=this.accessDelegation);try{return await this.client.request({method:"HEAD",path:`${this.prefix}/namespaces/${Rs(n.namespace)}/tables/${n.name}`,headers:e}),!0}catch(i){if(i instanceof eo&&i.status===404)return!1;throw i}}async createTableIfNotExists(n,e){try{return await this.createTable(n,e)}catch(i){if(i instanceof eo&&i.status===409)return await this.loadTable({namespace:n.namespace,name:e.name});throw i}}},Y2=class{constructor(n){var r;let e="v1";n.catalogName&&(e+=`/${n.catalogName}`);const i=n.baseUrl.endsWith("/")?n.baseUrl:`${n.baseUrl}/`;this.client=F2({baseUrl:i,auth:n.auth,fetchImpl:n.fetch}),this.accessDelegation=(r=n.accessDelegation)==null?void 0:r.join(","),this.namespaceOps=new J2(this.client,e),this.tableOps=new K2(this.client,e,this.accessDelegation)}async listNamespaces(n){return this.namespaceOps.listNamespaces(n)}async createNamespace(n,e){return this.namespaceOps.createNamespace(n,e)}async dropNamespace(n){await this.namespaceOps.dropNamespace(n)}async loadNamespaceMetadata(n){return this.namespaceOps.loadNamespaceMetadata(n)}async listTables(n){return this.tableOps.listTables(n)}async createTable(n,e){return this.tableOps.createTable(n,e)}async updateTable(n,e){return this.tableOps.updateTable(n,e)}async dropTable(n,e){await this.tableOps.dropTable(n,e)}async loadTable(n){return this.tableOps.loadTable(n)}async namespaceExists(n){return this.namespaceOps.namespaceExists(n)}async tableExists(n){return this.tableOps.tableExists(n)}async createNamespaceIfNotExists(n,e){return this.namespaceOps.createNamespaceIfNotExists(n,e)}async createTableIfNotExists(n,e){return this.tableOps.createTableIfNotExists(n,e)}};class Q2{constructor(e,i={},r){this.shouldThrowOnError=!1,this.url=e.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},Uv),i),this.fetch=Ad(r)}throwOnError(){return this.shouldThrowOnError=!0,this}createBucket(e){return ne(this,void 0,void 0,function*(){try{return{data:yield ln(this.fetch,`${this.url}/bucket`,{name:e},{headers:this.headers}),error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(Qe(i))return{data:null,error:i};throw i}})}listBuckets(e){return ne(this,void 0,void 0,function*(){try{const i=new URLSearchParams;(e==null?void 0:e.limit)!==void 0&&i.set("limit",e.limit.toString()),(e==null?void 0:e.offset)!==void 0&&i.set("offset",e.offset.toString()),e!=null&&e.sortColumn&&i.set("sortColumn",e.sortColumn),e!=null&&e.sortOrder&&i.set("sortOrder",e.sortOrder),e!=null&&e.search&&i.set("search",e.search);const r=i.toString(),a=r?`${this.url}/bucket?${r}`:`${this.url}/bucket`;return{data:yield Wr(this.fetch,a,{headers:this.headers}),error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(Qe(i))return{data:null,error:i};throw i}})}deleteBucket(e){return ne(this,void 0,void 0,function*(){try{return{data:yield Nd(this.fetch,`${this.url}/bucket/${e}`,{},{headers:this.headers}),error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(Qe(i))return{data:null,error:i};throw i}})}from(e){if(!P2(e))throw new el("Invalid bucket name: File, folder, and bucket names must follow AWS object key naming guidelines and should avoid the use of any other characters.");return new Y2({baseUrl:this.url,catalogName:e,auth:{type:"custom",getHeaders:()=>ne(this,void 0,void 0,function*(){return this.headers})},fetch:this.fetch})}}const Rd={"X-Client-Info":`storage-js/${Dv}`,"Content-Type":"application/json"};class Pv extends Error{constructor(e){super(e),this.__isStorageVectorsError=!0,this.name="StorageVectorsError"}}function jt(n){return typeof n=="object"&&n!==null&&"__isStorageVectorsError"in n}class Rc extends Pv{constructor(e,i,r){super(e),this.name="StorageVectorsApiError",this.status=i,this.statusCode=r}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}}class X2 extends Pv{constructor(e,i){super(e),this.name="StorageVectorsUnknownError",this.originalError=i}}var Pg;(function(n){n.InternalError="InternalError",n.S3VectorConflictException="S3VectorConflictException",n.S3VectorNotFoundException="S3VectorNotFoundException",n.S3VectorBucketNotEmpty="S3VectorBucketNotEmpty",n.S3VectorMaxBucketsExceeded="S3VectorMaxBucketsExceeded",n.S3VectorMaxIndexesExceeded="S3VectorMaxIndexesExceeded"})(Pg||(Pg={}));const Md=n=>n?(...e)=>n(...e):(...e)=>fetch(...e),Z2=n=>{if(typeof n!="object"||n===null)return!1;const e=Object.getPrototypeOf(n);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in n)&&!(Symbol.iterator in n)},Og=n=>n.msg||n.message||n.error_description||n.error||JSON.stringify(n),W2=(n,e,i)=>ne(void 0,void 0,void 0,function*(){if(n&&typeof n=="object"&&"status"in n&&"ok"in n&&typeof n.status=="number"&&!(i!=null&&i.noResolveJson)){const a=n.status||500,l=n;if(typeof l.json=="function")l.json().then(c=>{const h=(c==null?void 0:c.statusCode)||(c==null?void 0:c.code)||a+"";e(new Rc(Og(c),a,h))}).catch(()=>{const c=a+"",h=l.statusText||`HTTP ${a} error`;e(new Rc(h,a,c))});else{const c=a+"",h=l.statusText||`HTTP ${a} error`;e(new Rc(h,a,c))}}else e(new X2(Og(n),n))}),eR=(n,e,i,r)=>{const a={method:n,headers:(e==null?void 0:e.headers)||{}};return r?(Z2(r)?(a.headers=Object.assign({"Content-Type":"application/json"},e==null?void 0:e.headers),a.body=JSON.stringify(r)):a.body=r,Object.assign(Object.assign({},a),i)):a};function tR(n,e,i,r,a,l){return ne(this,void 0,void 0,function*(){return new Promise((c,h)=>{n(i,eR(e,r,a,l)).then(g=>{if(!g.ok)throw g;if(r!=null&&r.noResolveJson)return g;const p=g.headers.get("content-type");return!p||!p.includes("application/json")?{}:g.json()}).then(g=>c(g)).catch(g=>W2(g,h,r))})})}function zt(n,e,i,r,a){return ne(this,void 0,void 0,function*(){return tR(n,"POST",e,r,a,i)})}class nR{constructor(e,i={},r){this.shouldThrowOnError=!1,this.url=e.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},Rd),i),this.fetch=Md(r)}throwOnError(){return this.shouldThrowOnError=!0,this}createIndex(e){return ne(this,void 0,void 0,function*(){try{return{data:(yield zt(this.fetch,`${this.url}/CreateIndex`,e,{headers:this.headers}))||{},error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(jt(i))return{data:null,error:i};throw i}})}getIndex(e,i){return ne(this,void 0,void 0,function*(){try{return{data:yield zt(this.fetch,`${this.url}/GetIndex`,{vectorBucketName:e,indexName:i},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(jt(r))return{data:null,error:r};throw r}})}listIndexes(e){return ne(this,void 0,void 0,function*(){try{return{data:yield zt(this.fetch,`${this.url}/ListIndexes`,e,{headers:this.headers}),error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(jt(i))return{data:null,error:i};throw i}})}deleteIndex(e,i){return ne(this,void 0,void 0,function*(){try{return{data:(yield zt(this.fetch,`${this.url}/DeleteIndex`,{vectorBucketName:e,indexName:i},{headers:this.headers}))||{},error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(jt(r))return{data:null,error:r};throw r}})}}class iR{constructor(e,i={},r){this.shouldThrowOnError=!1,this.url=e.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},Rd),i),this.fetch=Md(r)}throwOnError(){return this.shouldThrowOnError=!0,this}putVectors(e){return ne(this,void 0,void 0,function*(){try{if(e.vectors.length<1||e.vectors.length>500)throw new Error("Vector batch size must be between 1 and 500 items");return{data:(yield zt(this.fetch,`${this.url}/PutVectors`,e,{headers:this.headers}))||{},error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(jt(i))return{data:null,error:i};throw i}})}getVectors(e){return ne(this,void 0,void 0,function*(){try{return{data:yield zt(this.fetch,`${this.url}/GetVectors`,e,{headers:this.headers}),error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(jt(i))return{data:null,error:i};throw i}})}listVectors(e){return ne(this,void 0,void 0,function*(){try{if(e.segmentCount!==void 0){if(e.segmentCount<1||e.segmentCount>16)throw new Error("segmentCount must be between 1 and 16");if(e.segmentIndex!==void 0&&(e.segmentIndex<0||e.segmentIndex>=e.segmentCount))throw new Error(`segmentIndex must be between 0 and ${e.segmentCount-1}`)}return{data:yield zt(this.fetch,`${this.url}/ListVectors`,e,{headers:this.headers}),error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(jt(i))return{data:null,error:i};throw i}})}queryVectors(e){return ne(this,void 0,void 0,function*(){try{return{data:yield zt(this.fetch,`${this.url}/QueryVectors`,e,{headers:this.headers}),error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(jt(i))return{data:null,error:i};throw i}})}deleteVectors(e){return ne(this,void 0,void 0,function*(){try{if(e.keys.length<1||e.keys.length>500)throw new Error("Keys batch size must be between 1 and 500 items");return{data:(yield zt(this.fetch,`${this.url}/DeleteVectors`,e,{headers:this.headers}))||{},error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(jt(i))return{data:null,error:i};throw i}})}}class sR{constructor(e,i={},r){this.shouldThrowOnError=!1,this.url=e.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},Rd),i),this.fetch=Md(r)}throwOnError(){return this.shouldThrowOnError=!0,this}createBucket(e){return ne(this,void 0,void 0,function*(){try{return{data:(yield zt(this.fetch,`${this.url}/CreateVectorBucket`,{vectorBucketName:e},{headers:this.headers}))||{},error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(jt(i))return{data:null,error:i};throw i}})}getBucket(e){return ne(this,void 0,void 0,function*(){try{return{data:yield zt(this.fetch,`${this.url}/GetVectorBucket`,{vectorBucketName:e},{headers:this.headers}),error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(jt(i))return{data:null,error:i};throw i}})}listBuckets(){return ne(this,arguments,void 0,function*(e={}){try{return{data:yield zt(this.fetch,`${this.url}/ListVectorBuckets`,e,{headers:this.headers}),error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(jt(i))return{data:null,error:i};throw i}})}deleteBucket(e){return ne(this,void 0,void 0,function*(){try{return{data:(yield zt(this.fetch,`${this.url}/DeleteVectorBucket`,{vectorBucketName:e},{headers:this.headers}))||{},error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(jt(i))return{data:null,error:i};throw i}})}}class rR extends sR{constructor(e,i={}){super(e,i.headers||{},i.fetch)}from(e){return new oR(this.url,this.headers,e,this.fetch)}createBucket(e){const i=Object.create(null,{createBucket:{get:()=>super.createBucket}});return ne(this,void 0,void 0,function*(){return i.createBucket.call(this,e)})}getBucket(e){const i=Object.create(null,{getBucket:{get:()=>super.getBucket}});return ne(this,void 0,void 0,function*(){return i.getBucket.call(this,e)})}listBuckets(){const e=Object.create(null,{listBuckets:{get:()=>super.listBuckets}});return ne(this,arguments,void 0,function*(i={}){return e.listBuckets.call(this,i)})}deleteBucket(e){const i=Object.create(null,{deleteBucket:{get:()=>super.deleteBucket}});return ne(this,void 0,void 0,function*(){return i.deleteBucket.call(this,e)})}}class oR extends nR{constructor(e,i,r,a){super(e,i,a),this.vectorBucketName=r}createIndex(e){const i=Object.create(null,{createIndex:{get:()=>super.createIndex}});return ne(this,void 0,void 0,function*(){return i.createIndex.call(this,Object.assign(Object.assign({},e),{vectorBucketName:this.vectorBucketName}))})}listIndexes(){const e=Object.create(null,{listIndexes:{get:()=>super.listIndexes}});return ne(this,arguments,void 0,function*(i={}){return e.listIndexes.call(this,Object.assign(Object.assign({},i),{vectorBucketName:this.vectorBucketName}))})}getIndex(e){const i=Object.create(null,{getIndex:{get:()=>super.getIndex}});return ne(this,void 0,void 0,function*(){return i.getIndex.call(this,this.vectorBucketName,e)})}deleteIndex(e){const i=Object.create(null,{deleteIndex:{get:()=>super.deleteIndex}});return ne(this,void 0,void 0,function*(){return i.deleteIndex.call(this,this.vectorBucketName,e)})}index(e){return new aR(this.url,this.headers,this.vectorBucketName,e,this.fetch)}}class aR extends iR{constructor(e,i,r,a,l){super(e,i,l),this.vectorBucketName=r,this.indexName=a}putVectors(e){const i=Object.create(null,{putVectors:{get:()=>super.putVectors}});return ne(this,void 0,void 0,function*(){return i.putVectors.call(this,Object.assign(Object.assign({},e),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}getVectors(e){const i=Object.create(null,{getVectors:{get:()=>super.getVectors}});return ne(this,void 0,void 0,function*(){return i.getVectors.call(this,Object.assign(Object.assign({},e),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}listVectors(){const e=Object.create(null,{listVectors:{get:()=>super.listVectors}});return ne(this,arguments,void 0,function*(i={}){return e.listVectors.call(this,Object.assign(Object.assign({},i),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}queryVectors(e){const i=Object.create(null,{queryVectors:{get:()=>super.queryVectors}});return ne(this,void 0,void 0,function*(){return i.queryVectors.call(this,Object.assign(Object.assign({},e),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}deleteVectors(e){const i=Object.create(null,{deleteVectors:{get:()=>super.deleteVectors}});return ne(this,void 0,void 0,function*(){return i.deleteVectors.call(this,Object.assign(Object.assign({},e),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}}class lR extends j2{constructor(e,i={},r,a){super(e,i,r,a)}from(e){return new H2(this.url,this.headers,e,this.fetch)}get vectors(){return new rR(this.url+"/vector",{headers:this.headers,fetch:this.fetch})}get analytics(){return new Q2(this.url+"/iceberg",this.headers,this.fetch)}}const uR="2.86.0";let Jr="";typeof Deno<"u"?Jr="deno":typeof document<"u"?Jr="web":typeof navigator<"u"&&navigator.product==="ReactNative"?Jr="react-native":Jr="node";const cR={"X-Client-Info":`supabase-js-${Jr}/${uR}`},dR={headers:cR},fR={schema:"public"},hR={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},pR={},mR=n=>n?(...e)=>n(...e):(...e)=>fetch(...e),gR=()=>Headers,yR=(n,e,i)=>{const r=mR(i),a=gR();return async(l,c)=>{var h;const g=(h=await e())!==null&&h!==void 0?h:n;let p=new a(c==null?void 0:c.headers);return p.has("apikey")||p.set("apikey",n),p.has("Authorization")||p.set("Authorization",`Bearer ${g}`),r(l,Object.assign(Object.assign({},c),{headers:p}))}};function vR(n){return n.endsWith("/")?n:n+"/"}function _R(n,e){var i,r;const{db:a,auth:l,realtime:c,global:h}=n,{db:g,auth:p,realtime:_,global:x}=e,S={db:Object.assign(Object.assign({},g),a),auth:Object.assign(Object.assign({},p),l),realtime:Object.assign(Object.assign({},_),c),storage:{},global:Object.assign(Object.assign(Object.assign({},x),h),{headers:Object.assign(Object.assign({},(i=x==null?void 0:x.headers)!==null&&i!==void 0?i:{}),(r=h==null?void 0:h.headers)!==null&&r!==void 0?r:{})}),accessToken:async()=>""};return n.accessToken?S.accessToken=n.accessToken:delete S.accessToken,S}function xR(n){const e=n==null?void 0:n.trim();if(!e)throw new Error("supabaseUrl is required.");if(!e.match(/^https?:\/\//i))throw new Error("Invalid supabaseUrl: Must be a valid HTTP or HTTPS URL.");try{return new URL(vR(e))}catch{throw Error("Invalid supabaseUrl: Provided URL is malformed.")}}const Ov="2.86.0",Ps=30*1e3,id=3,Mc=id*Ps,bR="http://localhost:9999",SR="supabase.auth.token",TR={"X-Client-Info":`gotrue-js/${Ov}`},sd="X-Supabase-Api-Version",Lv={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},ER=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,wR=600*1e3;class to extends Error{constructor(e,i,r){super(e),this.__isAuthError=!0,this.name="AuthError",this.status=i,this.code=r}}function ae(n){return typeof n=="object"&&n!==null&&"__isAuthError"in n}class CR extends to{constructor(e,i,r){super(e,i,r),this.name="AuthApiError",this.status=i,this.code=r}}function AR(n){return ae(n)&&n.name==="AuthApiError"}class Gi extends to{constructor(e,i){super(e),this.name="AuthUnknownError",this.originalError=i}}class gi extends to{constructor(e,i,r,a){super(e,r,a),this.name=i,this.status=r}}class Ht extends gi{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function NR(n){return ae(n)&&n.name==="AuthSessionMissingError"}class Ms extends gi{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class ka extends gi{constructor(e){super(e,"AuthInvalidCredentialsError",400,void 0)}}class Da extends gi{constructor(e,i=null){super(e,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=i}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function RR(n){return ae(n)&&n.name==="AuthImplicitGrantRedirectError"}class Lg extends gi{constructor(e,i=null){super(e,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=i}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class rd extends gi{constructor(e,i){super(e,"AuthRetryableFetchError",i,void 0)}}function Ic(n){return ae(n)&&n.name==="AuthRetryableFetchError"}class qg extends gi{constructor(e,i,r){super(e,"AuthWeakPasswordError",i,"weak_password"),this.reasons=r}}class od extends gi{constructor(e){super(e,"AuthInvalidJwtError",400,"invalid_jwt")}}const Ha="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),Bg=` 	
\r=`.split(""),MR=(()=>{const n=new Array(128);for(let e=0;e<n.length;e+=1)n[e]=-1;for(let e=0;e<Bg.length;e+=1)n[Bg[e].charCodeAt(0)]=-2;for(let e=0;e<Ha.length;e+=1)n[Ha[e].charCodeAt(0)]=e;return n})();function Gg(n,e,i){if(n!==null)for(e.queue=e.queue<<8|n,e.queuedBits+=8;e.queuedBits>=6;){const r=e.queue>>e.queuedBits-6&63;i(Ha[r]),e.queuedBits-=6}else if(e.queuedBits>0)for(e.queue=e.queue<<6-e.queuedBits,e.queuedBits=6;e.queuedBits>=6;){const r=e.queue>>e.queuedBits-6&63;i(Ha[r]),e.queuedBits-=6}}function qv(n,e,i){const r=MR[n];if(r>-1)for(e.queue=e.queue<<6|r,e.queuedBits+=6;e.queuedBits>=8;)i(e.queue>>e.queuedBits-8&255),e.queuedBits-=8;else{if(r===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(n)}"`)}}function Vg(n){const e=[],i=c=>{e.push(String.fromCodePoint(c))},r={utf8seq:0,codepoint:0},a={queue:0,queuedBits:0},l=c=>{DR(c,r,i)};for(let c=0;c<n.length;c+=1)qv(n.charCodeAt(c),a,l);return e.join("")}function IR(n,e){if(n<=127){e(n);return}else if(n<=2047){e(192|n>>6),e(128|n&63);return}else if(n<=65535){e(224|n>>12),e(128|n>>6&63),e(128|n&63);return}else if(n<=1114111){e(240|n>>18),e(128|n>>12&63),e(128|n>>6&63),e(128|n&63);return}throw new Error(`Unrecognized Unicode codepoint: ${n.toString(16)}`)}function kR(n,e){for(let i=0;i<n.length;i+=1){let r=n.charCodeAt(i);if(r>55295&&r<=56319){const a=(r-55296)*1024&65535;r=(n.charCodeAt(i+1)-56320&65535|a)+65536,i+=1}IR(r,e)}}function DR(n,e,i){if(e.utf8seq===0){if(n<=127){i(n);return}for(let r=1;r<6;r+=1)if((n>>7-r&1)===0){e.utf8seq=r;break}if(e.utf8seq===2)e.codepoint=n&31;else if(e.utf8seq===3)e.codepoint=n&15;else if(e.utf8seq===4)e.codepoint=n&7;else throw new Error("Invalid UTF-8 sequence");e.utf8seq-=1}else if(e.utf8seq>0){if(n<=127)throw new Error("Invalid UTF-8 sequence");e.codepoint=e.codepoint<<6|n&63,e.utf8seq-=1,e.utf8seq===0&&i(e.codepoint)}}function Hs(n){const e=[],i={queue:0,queuedBits:0},r=a=>{e.push(a)};for(let a=0;a<n.length;a+=1)qv(n.charCodeAt(a),i,r);return new Uint8Array(e)}function UR(n){const e=[];return kR(n,i=>e.push(i)),new Uint8Array(e)}function Hi(n){const e=[],i={queue:0,queuedBits:0},r=a=>{e.push(a)};return n.forEach(a=>Gg(a,i,r)),Gg(null,i,r),e.join("")}function PR(n){return Math.round(Date.now()/1e3)+n}function OR(){return Symbol("auth-callback")}const xt=()=>typeof window<"u"&&typeof document<"u",Pi={tested:!1,writable:!1},Bv=()=>{if(!xt())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(Pi.tested)return Pi.writable;const n=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(n,n),globalThis.localStorage.removeItem(n),Pi.tested=!0,Pi.writable=!0}catch{Pi.tested=!0,Pi.writable=!1}return Pi.writable};function LR(n){const e={},i=new URL(n);if(i.hash&&i.hash[0]==="#")try{new URLSearchParams(i.hash.substring(1)).forEach((a,l)=>{e[l]=a})}catch{}return i.searchParams.forEach((r,a)=>{e[a]=r}),e}const Gv=n=>n?(...e)=>n(...e):(...e)=>fetch(...e),qR=n=>typeof n=="object"&&n!==null&&"status"in n&&"ok"in n&&"json"in n&&typeof n.json=="function",Os=async(n,e,i)=>{await n.setItem(e,JSON.stringify(i))},Oi=async(n,e)=>{const i=await n.getItem(e);if(!i)return null;try{return JSON.parse(i)}catch{return i}},di=async(n,e)=>{await n.removeItem(e)};class tl{constructor(){this.promise=new tl.promiseConstructor((e,i)=>{this.resolve=e,this.reject=i})}}tl.promiseConstructor=Promise;function kc(n){const e=n.split(".");if(e.length!==3)throw new od("Invalid JWT structure");for(let r=0;r<e.length;r++)if(!ER.test(e[r]))throw new od("JWT not in base64url format");return{header:JSON.parse(Vg(e[0])),payload:JSON.parse(Vg(e[1])),signature:Hs(e[2]),raw:{header:e[0],payload:e[1]}}}async function BR(n){return await new Promise(e=>{setTimeout(()=>e(null),n)})}function GR(n,e){return new Promise((r,a)=>{(async()=>{for(let l=0;l<1/0;l++)try{const c=await n(l);if(!e(l,null,c)){r(c);return}}catch(c){if(!e(l,c)){a(c);return}}})()})}function VR(n){return("0"+n.toString(16)).substr(-2)}function HR(){const e=new Uint32Array(56);if(typeof crypto>"u"){const i="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",r=i.length;let a="";for(let l=0;l<56;l++)a+=i.charAt(Math.floor(Math.random()*r));return a}return crypto.getRandomValues(e),Array.from(e,VR).join("")}async function jR(n){const i=new TextEncoder().encode(n),r=await crypto.subtle.digest("SHA-256",i),a=new Uint8Array(r);return Array.from(a).map(l=>String.fromCharCode(l)).join("")}async function zR(n){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),n;const i=await jR(n);return btoa(i).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function Is(n,e,i=!1){const r=HR();let a=r;i&&(a+="/PASSWORD_RECOVERY"),await Os(n,`${e}-code-verifier`,a);const l=await zR(r);return[l,r===l?"plain":"s256"]}const $R=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function FR(n){const e=n.headers.get(sd);if(!e||!e.match($R))return null;try{return new Date(`${e}T00:00:00.0Z`)}catch{return null}}function JR(n){if(!n)throw new Error("Missing exp claim");const e=Math.floor(Date.now()/1e3);if(n<=e)throw new Error("JWT has expired")}function KR(n){switch(n){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const YR=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function ks(n){if(!YR.test(n))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function Dc(){const n={};return new Proxy(n,{get:(e,i)=>{if(i==="__isUserNotAvailableProxy")return!0;if(typeof i=="symbol"){const r=i.toString();if(r==="Symbol(Symbol.toPrimitive)"||r==="Symbol(Symbol.toStringTag)"||r==="Symbol(util.inspect.custom)")return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${i}" property of the session object is not supported. Please use getUser() instead.`)},set:(e,i)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${i}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(e,i)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${i}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function QR(n,e){return new Proxy(n,{get:(i,r,a)=>{if(r==="__isInsecureUserWarningProxy")return!0;if(typeof r=="symbol"){const l=r.toString();if(l==="Symbol(Symbol.toPrimitive)"||l==="Symbol(Symbol.toStringTag)"||l==="Symbol(util.inspect.custom)"||l==="Symbol(nodejs.util.inspect.custom)")return Reflect.get(i,r,a)}return!e.value&&typeof r=="string"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),e.value=!0),Reflect.get(i,r,a)}})}function Hg(n){return JSON.parse(JSON.stringify(n))}const Li=n=>n.msg||n.message||n.error_description||n.error||JSON.stringify(n),XR=[502,503,504];async function jg(n){var e;if(!qR(n))throw new rd(Li(n),0);if(XR.includes(n.status))throw new rd(Li(n),n.status);let i;try{i=await n.json()}catch(l){throw new Gi(Li(l),l)}let r;const a=FR(n);if(a&&a.getTime()>=Lv["2024-01-01"].timestamp&&typeof i=="object"&&i&&typeof i.code=="string"?r=i.code:typeof i=="object"&&i&&typeof i.error_code=="string"&&(r=i.error_code),r){if(r==="weak_password")throw new qg(Li(i),n.status,((e=i.weak_password)===null||e===void 0?void 0:e.reasons)||[]);if(r==="session_not_found")throw new Ht}else if(typeof i=="object"&&i&&typeof i.weak_password=="object"&&i.weak_password&&Array.isArray(i.weak_password.reasons)&&i.weak_password.reasons.length&&i.weak_password.reasons.reduce((l,c)=>l&&typeof c=="string",!0))throw new qg(Li(i),n.status,i.weak_password.reasons);throw new CR(Li(i),n.status||500,r)}const ZR=(n,e,i,r)=>{const a={method:n,headers:(e==null?void 0:e.headers)||{}};return n==="GET"?a:(a.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},e==null?void 0:e.headers),a.body=JSON.stringify(r),Object.assign(Object.assign({},a),i))};async function fe(n,e,i,r){var a;const l=Object.assign({},r==null?void 0:r.headers);l[sd]||(l[sd]=Lv["2024-01-01"].name),r!=null&&r.jwt&&(l.Authorization=`Bearer ${r.jwt}`);const c=(a=r==null?void 0:r.query)!==null&&a!==void 0?a:{};r!=null&&r.redirectTo&&(c.redirect_to=r.redirectTo);const h=Object.keys(c).length?"?"+new URLSearchParams(c).toString():"",g=await WR(n,e,i+h,{headers:l,noResolveJson:r==null?void 0:r.noResolveJson},{},r==null?void 0:r.body);return r!=null&&r.xform?r==null?void 0:r.xform(g):{data:Object.assign({},g),error:null}}async function WR(n,e,i,r,a,l){const c=ZR(e,r,a,l);let h;try{h=await n(i,Object.assign({},c))}catch(g){throw console.error(g),new rd(Li(g),0)}if(h.ok||await jg(h),r!=null&&r.noResolveJson)return h;try{return await h.json()}catch(g){await jg(g)}}function an(n){var e;let i=null;nM(n)&&(i=Object.assign({},n),n.expires_at||(i.expires_at=PR(n.expires_in)));const r=(e=n.user)!==null&&e!==void 0?e:n;return{data:{session:i,user:r},error:null}}function zg(n){const e=an(n);return!e.error&&n.weak_password&&typeof n.weak_password=="object"&&Array.isArray(n.weak_password.reasons)&&n.weak_password.reasons.length&&n.weak_password.message&&typeof n.weak_password.message=="string"&&n.weak_password.reasons.reduce((i,r)=>i&&typeof r=="string",!0)&&(e.data.weak_password=n.weak_password),e}function fi(n){var e;return{data:{user:(e=n.user)!==null&&e!==void 0?e:n},error:null}}function eM(n){return{data:n,error:null}}function tM(n){const{action_link:e,email_otp:i,hashed_token:r,redirect_to:a,verification_type:l}=n,c=Qs(n,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),h={action_link:e,email_otp:i,hashed_token:r,redirect_to:a,verification_type:l},g=Object.assign({},c);return{data:{properties:h,user:g},error:null}}function $g(n){return n}function nM(n){return n.access_token&&n.refresh_token&&n.expires_in}const Uc=["global","local","others"];class iM{constructor({url:e="",headers:i={},fetch:r}){this.url=e,this.headers=i,this.fetch=Gv(r),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)},this.oauth={listClients:this._listOAuthClients.bind(this),createClient:this._createOAuthClient.bind(this),getClient:this._getOAuthClient.bind(this),updateClient:this._updateOAuthClient.bind(this),deleteClient:this._deleteOAuthClient.bind(this),regenerateClientSecret:this._regenerateOAuthClientSecret.bind(this)}}async signOut(e,i=Uc[0]){if(Uc.indexOf(i)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${Uc.join(", ")}`);try{return await fe(this.fetch,"POST",`${this.url}/logout?scope=${i}`,{headers:this.headers,jwt:e,noResolveJson:!0}),{data:null,error:null}}catch(r){if(ae(r))return{data:null,error:r};throw r}}async inviteUserByEmail(e,i={}){try{return await fe(this.fetch,"POST",`${this.url}/invite`,{body:{email:e,data:i.data},headers:this.headers,redirectTo:i.redirectTo,xform:fi})}catch(r){if(ae(r))return{data:{user:null},error:r};throw r}}async generateLink(e){try{const{options:i}=e,r=Qs(e,["options"]),a=Object.assign(Object.assign({},r),i);return"newEmail"in r&&(a.new_email=r==null?void 0:r.newEmail,delete a.newEmail),await fe(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:a,headers:this.headers,xform:tM,redirectTo:i==null?void 0:i.redirectTo})}catch(i){if(ae(i))return{data:{properties:null,user:null},error:i};throw i}}async createUser(e){try{return await fe(this.fetch,"POST",`${this.url}/admin/users`,{body:e,headers:this.headers,xform:fi})}catch(i){if(ae(i))return{data:{user:null},error:i};throw i}}async listUsers(e){var i,r,a,l,c,h,g;try{const p={nextPage:null,lastPage:0,total:0},_=await fe(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(r=(i=e==null?void 0:e.page)===null||i===void 0?void 0:i.toString())!==null&&r!==void 0?r:"",per_page:(l=(a=e==null?void 0:e.perPage)===null||a===void 0?void 0:a.toString())!==null&&l!==void 0?l:""},xform:$g});if(_.error)throw _.error;const x=await _.json(),S=(c=_.headers.get("x-total-count"))!==null&&c!==void 0?c:0,T=(g=(h=_.headers.get("link"))===null||h===void 0?void 0:h.split(","))!==null&&g!==void 0?g:[];return T.length>0&&(T.forEach(w=>{const C=parseInt(w.split(";")[0].split("=")[1].substring(0,1)),M=JSON.parse(w.split(";")[1].split("=")[1]);p[`${M}Page`]=C}),p.total=parseInt(S)),{data:Object.assign(Object.assign({},x),p),error:null}}catch(p){if(ae(p))return{data:{users:[]},error:p};throw p}}async getUserById(e){ks(e);try{return await fe(this.fetch,"GET",`${this.url}/admin/users/${e}`,{headers:this.headers,xform:fi})}catch(i){if(ae(i))return{data:{user:null},error:i};throw i}}async updateUserById(e,i){ks(e);try{return await fe(this.fetch,"PUT",`${this.url}/admin/users/${e}`,{body:i,headers:this.headers,xform:fi})}catch(r){if(ae(r))return{data:{user:null},error:r};throw r}}async deleteUser(e,i=!1){ks(e);try{return await fe(this.fetch,"DELETE",`${this.url}/admin/users/${e}`,{headers:this.headers,body:{should_soft_delete:i},xform:fi})}catch(r){if(ae(r))return{data:{user:null},error:r};throw r}}async _listFactors(e){ks(e.userId);try{const{data:i,error:r}=await fe(this.fetch,"GET",`${this.url}/admin/users/${e.userId}/factors`,{headers:this.headers,xform:a=>({data:{factors:a},error:null})});return{data:i,error:r}}catch(i){if(ae(i))return{data:null,error:i};throw i}}async _deleteFactor(e){ks(e.userId),ks(e.id);try{return{data:await fe(this.fetch,"DELETE",`${this.url}/admin/users/${e.userId}/factors/${e.id}`,{headers:this.headers}),error:null}}catch(i){if(ae(i))return{data:null,error:i};throw i}}async _listOAuthClients(e){var i,r,a,l,c,h,g;try{const p={nextPage:null,lastPage:0,total:0},_=await fe(this.fetch,"GET",`${this.url}/admin/oauth/clients`,{headers:this.headers,noResolveJson:!0,query:{page:(r=(i=e==null?void 0:e.page)===null||i===void 0?void 0:i.toString())!==null&&r!==void 0?r:"",per_page:(l=(a=e==null?void 0:e.perPage)===null||a===void 0?void 0:a.toString())!==null&&l!==void 0?l:""},xform:$g});if(_.error)throw _.error;const x=await _.json(),S=(c=_.headers.get("x-total-count"))!==null&&c!==void 0?c:0,T=(g=(h=_.headers.get("link"))===null||h===void 0?void 0:h.split(","))!==null&&g!==void 0?g:[];return T.length>0&&(T.forEach(w=>{const C=parseInt(w.split(";")[0].split("=")[1].substring(0,1)),M=JSON.parse(w.split(";")[1].split("=")[1]);p[`${M}Page`]=C}),p.total=parseInt(S)),{data:Object.assign(Object.assign({},x),p),error:null}}catch(p){if(ae(p))return{data:{clients:[]},error:p};throw p}}async _createOAuthClient(e){try{return await fe(this.fetch,"POST",`${this.url}/admin/oauth/clients`,{body:e,headers:this.headers,xform:i=>({data:i,error:null})})}catch(i){if(ae(i))return{data:null,error:i};throw i}}async _getOAuthClient(e){try{return await fe(this.fetch,"GET",`${this.url}/admin/oauth/clients/${e}`,{headers:this.headers,xform:i=>({data:i,error:null})})}catch(i){if(ae(i))return{data:null,error:i};throw i}}async _updateOAuthClient(e,i){try{return await fe(this.fetch,"PUT",`${this.url}/admin/oauth/clients/${e}`,{body:i,headers:this.headers,xform:r=>({data:r,error:null})})}catch(r){if(ae(r))return{data:null,error:r};throw r}}async _deleteOAuthClient(e){try{return await fe(this.fetch,"DELETE",`${this.url}/admin/oauth/clients/${e}`,{headers:this.headers,noResolveJson:!0}),{data:null,error:null}}catch(i){if(ae(i))return{data:null,error:i};throw i}}async _regenerateOAuthClientSecret(e){try{return await fe(this.fetch,"POST",`${this.url}/admin/oauth/clients/${e}/regenerate_secret`,{headers:this.headers,xform:i=>({data:i,error:null})})}catch(i){if(ae(i))return{data:null,error:i};throw i}}}function Fg(n={}){return{getItem:e=>n[e]||null,setItem:(e,i)=>{n[e]=i},removeItem:e=>{delete n[e]}}}const Ds={debug:!!(globalThis&&Bv()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class Vv extends Error{constructor(e){super(e),this.isAcquireTimeout=!0}}class sM extends Vv{}async function rM(n,e,i){Ds.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",n,e);const r=new globalThis.AbortController;return e>0&&setTimeout(()=>{r.abort(),Ds.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",n)},e),await Promise.resolve().then(()=>globalThis.navigator.locks.request(n,e===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:r.signal},async a=>{if(a){Ds.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",n,a.name);try{return await i()}finally{Ds.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",n,a.name)}}else{if(e===0)throw Ds.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",n),new sM(`Acquiring an exclusive Navigator LockManager lock "${n}" immediately failed`);if(Ds.debug)try{const l=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(l,null,"  "))}catch(l){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",l)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await i()}}))}function oM(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}function Hv(n){if(!/^0x[a-fA-F0-9]{40}$/.test(n))throw new Error(`@supabase/auth-js: Address "${n}" is invalid.`);return n.toLowerCase()}function aM(n){return parseInt(n,16)}function lM(n){const e=new TextEncoder().encode(n);return"0x"+Array.from(e,r=>r.toString(16).padStart(2,"0")).join("")}function uM(n){var e;const{chainId:i,domain:r,expirationTime:a,issuedAt:l=new Date,nonce:c,notBefore:h,requestId:g,resources:p,scheme:_,uri:x,version:S}=n;{if(!Number.isInteger(i))throw new Error(`@supabase/auth-js: Invalid SIWE message field "chainId". Chain ID must be a EIP-155 chain ID. Provided value: ${i}`);if(!r)throw new Error('@supabase/auth-js: Invalid SIWE message field "domain". Domain must be provided.');if(c&&c.length<8)throw new Error(`@supabase/auth-js: Invalid SIWE message field "nonce". Nonce must be at least 8 characters. Provided value: ${c}`);if(!x)throw new Error('@supabase/auth-js: Invalid SIWE message field "uri". URI must be provided.');if(S!=="1")throw new Error(`@supabase/auth-js: Invalid SIWE message field "version". Version must be '1'. Provided value: ${S}`);if(!((e=n.statement)===null||e===void 0)&&e.includes(`
`))throw new Error(`@supabase/auth-js: Invalid SIWE message field "statement". Statement must not include '\\n'. Provided value: ${n.statement}`)}const T=Hv(n.address),w=_?`${_}://${r}`:r,C=n.statement?`${n.statement}
`:"",M=`${w} wants you to sign in with your Ethereum account:
${T}

${C}`;let D=`URI: ${x}
Version: ${S}
Chain ID: ${i}${c?`
Nonce: ${c}`:""}
Issued At: ${l.toISOString()}`;if(a&&(D+=`
Expiration Time: ${a.toISOString()}`),h&&(D+=`
Not Before: ${h.toISOString()}`),g&&(D+=`
Request ID: ${g}`),p){let B=`
Resources:`;for(const I of p){if(!I||typeof I!="string")throw new Error(`@supabase/auth-js: Invalid SIWE message field "resources". Every resource must be a valid string. Provided value: ${I}`);B+=`
- ${I}`}D+=B}return`${M}
${D}`}class ct extends Error{constructor({message:e,code:i,cause:r,name:a}){var l;super(e,{cause:r}),this.__isWebAuthnError=!0,this.name=(l=a??(r instanceof Error?r.name:void 0))!==null&&l!==void 0?l:"Unknown Error",this.code=i}}class ja extends ct{constructor(e,i){super({code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:i,message:e}),this.name="WebAuthnUnknownError",this.originalError=i}}function cM({error:n,options:e}){var i,r,a;const{publicKey:l}=e;if(!l)throw Error("options was missing required publicKey property");if(n.name==="AbortError"){if(e.signal instanceof AbortSignal)return new ct({message:"Registration ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:n})}else if(n.name==="ConstraintError"){if(((i=l.authenticatorSelection)===null||i===void 0?void 0:i.requireResidentKey)===!0)return new ct({message:"Discoverable credentials were required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_DISCOVERABLE_CREDENTIAL_SUPPORT",cause:n});if(e.mediation==="conditional"&&((r=l.authenticatorSelection)===null||r===void 0?void 0:r.userVerification)==="required")return new ct({message:"User verification was required during automatic registration but it could not be performed",code:"ERROR_AUTO_REGISTER_USER_VERIFICATION_FAILURE",cause:n});if(((a=l.authenticatorSelection)===null||a===void 0?void 0:a.userVerification)==="required")return new ct({message:"User verification was required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_USER_VERIFICATION_SUPPORT",cause:n})}else{if(n.name==="InvalidStateError")return new ct({message:"The authenticator was previously registered",code:"ERROR_AUTHENTICATOR_PREVIOUSLY_REGISTERED",cause:n});if(n.name==="NotAllowedError")return new ct({message:n.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:n});if(n.name==="NotSupportedError")return l.pubKeyCredParams.filter(h=>h.type==="public-key").length===0?new ct({message:'No entry in pubKeyCredParams was of type "public-key"',code:"ERROR_MALFORMED_PUBKEYCREDPARAMS",cause:n}):new ct({message:"No available authenticator supported any of the specified pubKeyCredParams algorithms",code:"ERROR_AUTHENTICATOR_NO_SUPPORTED_PUBKEYCREDPARAMS_ALG",cause:n});if(n.name==="SecurityError"){const c=window.location.hostname;if(jv(c)){if(l.rp.id!==c)return new ct({message:`The RP ID "${l.rp.id}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:n})}else return new ct({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:n})}else if(n.name==="TypeError"){if(l.user.id.byteLength<1||l.user.id.byteLength>64)return new ct({message:"User ID was not between 1 and 64 characters",code:"ERROR_INVALID_USER_ID_LENGTH",cause:n})}else if(n.name==="UnknownError")return new ct({message:"The authenticator was unable to process the specified options, or could not create a new credential",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:n})}return new ct({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:n})}function dM({error:n,options:e}){const{publicKey:i}=e;if(!i)throw Error("options was missing required publicKey property");if(n.name==="AbortError"){if(e.signal instanceof AbortSignal)return new ct({message:"Authentication ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:n})}else{if(n.name==="NotAllowedError")return new ct({message:n.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:n});if(n.name==="SecurityError"){const r=window.location.hostname;if(jv(r)){if(i.rpId!==r)return new ct({message:`The RP ID "${i.rpId}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:n})}else return new ct({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:n})}else if(n.name==="UnknownError")return new ct({message:"The authenticator was unable to process the specified options, or could not create a new assertion signature",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:n})}return new ct({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:n})}class fM{createNewAbortSignal(){if(this.controller){const i=new Error("Cancelling existing WebAuthn API call for new one");i.name="AbortError",this.controller.abort(i)}const e=new AbortController;return this.controller=e,e.signal}cancelCeremony(){if(this.controller){const e=new Error("Manually cancelling existing WebAuthn API call");e.name="AbortError",this.controller.abort(e),this.controller=void 0}}}const hM=new fM;function pM(n){if(!n)throw new Error("Credential creation options are required");if(typeof PublicKeyCredential<"u"&&"parseCreationOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseCreationOptionsFromJSON=="function")return PublicKeyCredential.parseCreationOptionsFromJSON(n);const{challenge:e,user:i,excludeCredentials:r}=n,a=Qs(n,["challenge","user","excludeCredentials"]),l=Hs(e).buffer,c=Object.assign(Object.assign({},i),{id:Hs(i.id).buffer}),h=Object.assign(Object.assign({},a),{challenge:l,user:c});if(r&&r.length>0){h.excludeCredentials=new Array(r.length);for(let g=0;g<r.length;g++){const p=r[g];h.excludeCredentials[g]=Object.assign(Object.assign({},p),{id:Hs(p.id).buffer,type:p.type||"public-key",transports:p.transports})}}return h}function mM(n){if(!n)throw new Error("Credential request options are required");if(typeof PublicKeyCredential<"u"&&"parseRequestOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseRequestOptionsFromJSON=="function")return PublicKeyCredential.parseRequestOptionsFromJSON(n);const{challenge:e,allowCredentials:i}=n,r=Qs(n,["challenge","allowCredentials"]),a=Hs(e).buffer,l=Object.assign(Object.assign({},r),{challenge:a});if(i&&i.length>0){l.allowCredentials=new Array(i.length);for(let c=0;c<i.length;c++){const h=i[c];l.allowCredentials[c]=Object.assign(Object.assign({},h),{id:Hs(h.id).buffer,type:h.type||"public-key",transports:h.transports})}}return l}function gM(n){var e;if("toJSON"in n&&typeof n.toJSON=="function")return n.toJSON();const i=n;return{id:n.id,rawId:n.id,response:{attestationObject:Hi(new Uint8Array(n.response.attestationObject)),clientDataJSON:Hi(new Uint8Array(n.response.clientDataJSON))},type:"public-key",clientExtensionResults:n.getClientExtensionResults(),authenticatorAttachment:(e=i.authenticatorAttachment)!==null&&e!==void 0?e:void 0}}function yM(n){var e;if("toJSON"in n&&typeof n.toJSON=="function")return n.toJSON();const i=n,r=n.getClientExtensionResults(),a=n.response;return{id:n.id,rawId:n.id,response:{authenticatorData:Hi(new Uint8Array(a.authenticatorData)),clientDataJSON:Hi(new Uint8Array(a.clientDataJSON)),signature:Hi(new Uint8Array(a.signature)),userHandle:a.userHandle?Hi(new Uint8Array(a.userHandle)):void 0},type:"public-key",clientExtensionResults:r,authenticatorAttachment:(e=i.authenticatorAttachment)!==null&&e!==void 0?e:void 0}}function jv(n){return n==="localhost"||/^([a-z0-9]+(-[a-z0-9]+)*\.)+[a-z]{2,}$/i.test(n)}function Jg(){var n,e;return!!(xt()&&"PublicKeyCredential"in window&&window.PublicKeyCredential&&"credentials"in navigator&&typeof((n=navigator==null?void 0:navigator.credentials)===null||n===void 0?void 0:n.create)=="function"&&typeof((e=navigator==null?void 0:navigator.credentials)===null||e===void 0?void 0:e.get)=="function")}async function vM(n){try{const e=await navigator.credentials.create(n);return e?e instanceof PublicKeyCredential?{data:e,error:null}:{data:null,error:new ja("Browser returned unexpected credential type",e)}:{data:null,error:new ja("Empty credential response",e)}}catch(e){return{data:null,error:cM({error:e,options:n})}}}async function _M(n){try{const e=await navigator.credentials.get(n);return e?e instanceof PublicKeyCredential?{data:e,error:null}:{data:null,error:new ja("Browser returned unexpected credential type",e)}:{data:null,error:new ja("Empty credential response",e)}}catch(e){return{data:null,error:dM({error:e,options:n})}}}const xM={hints:["security-key"],authenticatorSelection:{authenticatorAttachment:"cross-platform",requireResidentKey:!1,userVerification:"preferred",residentKey:"discouraged"},attestation:"direct"},bM={userVerification:"preferred",hints:["security-key"],attestation:"direct"};function za(...n){const e=a=>a!==null&&typeof a=="object"&&!Array.isArray(a),i=a=>a instanceof ArrayBuffer||ArrayBuffer.isView(a),r={};for(const a of n)if(a)for(const l in a){const c=a[l];if(c!==void 0)if(Array.isArray(c))r[l]=c;else if(i(c))r[l]=c;else if(e(c)){const h=r[l];e(h)?r[l]=za(h,c):r[l]=za(c)}else r[l]=c}return r}function SM(n,e){return za(xM,n,e||{})}function TM(n,e){return za(bM,n,e||{})}class EM{constructor(e){this.client=e,this.enroll=this._enroll.bind(this),this.challenge=this._challenge.bind(this),this.verify=this._verify.bind(this),this.authenticate=this._authenticate.bind(this),this.register=this._register.bind(this)}async _enroll(e){return this.client.mfa.enroll(Object.assign(Object.assign({},e),{factorType:"webauthn"}))}async _challenge({factorId:e,webauthn:i,friendlyName:r,signal:a},l){try{const{data:c,error:h}=await this.client.mfa.challenge({factorId:e,webauthn:i});if(!c)return{data:null,error:h};const g=a??hM.createNewAbortSignal();if(c.webauthn.type==="create"){const{user:p}=c.webauthn.credential_options.publicKey;p.name||(p.name=`${p.id}:${r}`),p.displayName||(p.displayName=p.name)}switch(c.webauthn.type){case"create":{const p=SM(c.webauthn.credential_options.publicKey,l==null?void 0:l.create),{data:_,error:x}=await vM({publicKey:p,signal:g});return _?{data:{factorId:e,challengeId:c.id,webauthn:{type:c.webauthn.type,credential_response:_}},error:null}:{data:null,error:x}}case"request":{const p=TM(c.webauthn.credential_options.publicKey,l==null?void 0:l.request),{data:_,error:x}=await _M(Object.assign(Object.assign({},c.webauthn.credential_options),{publicKey:p,signal:g}));return _?{data:{factorId:e,challengeId:c.id,webauthn:{type:c.webauthn.type,credential_response:_}},error:null}:{data:null,error:x}}}}catch(c){return ae(c)?{data:null,error:c}:{data:null,error:new Gi("Unexpected error in challenge",c)}}}async _verify({challengeId:e,factorId:i,webauthn:r}){return this.client.mfa.verify({factorId:i,challengeId:e,webauthn:r})}async _authenticate({factorId:e,webauthn:{rpId:i=typeof window<"u"?window.location.hostname:void 0,rpOrigins:r=typeof window<"u"?[window.location.origin]:void 0,signal:a}={}},l){if(!i)return{data:null,error:new to("rpId is required for WebAuthn authentication")};try{if(!Jg())return{data:null,error:new Gi("Browser does not support WebAuthn",null)};const{data:c,error:h}=await this.challenge({factorId:e,webauthn:{rpId:i,rpOrigins:r},signal:a},{request:l});if(!c)return{data:null,error:h};const{webauthn:g}=c;return this._verify({factorId:e,challengeId:c.challengeId,webauthn:{type:g.type,rpId:i,rpOrigins:r,credential_response:g.credential_response}})}catch(c){return ae(c)?{data:null,error:c}:{data:null,error:new Gi("Unexpected error in authenticate",c)}}}async _register({friendlyName:e,webauthn:{rpId:i=typeof window<"u"?window.location.hostname:void 0,rpOrigins:r=typeof window<"u"?[window.location.origin]:void 0,signal:a}={}},l){if(!i)return{data:null,error:new to("rpId is required for WebAuthn registration")};try{if(!Jg())return{data:null,error:new Gi("Browser does not support WebAuthn",null)};const{data:c,error:h}=await this._enroll({friendlyName:e});if(!c)return await this.client.mfa.listFactors().then(_=>{var x;return(x=_.data)===null||x===void 0?void 0:x.all.find(S=>S.factor_type==="webauthn"&&S.friendly_name===e&&S.status!=="unverified")}).then(_=>_?this.client.mfa.unenroll({factorId:_==null?void 0:_.id}):void 0),{data:null,error:h};const{data:g,error:p}=await this._challenge({factorId:c.id,friendlyName:c.friendly_name,webauthn:{rpId:i,rpOrigins:r},signal:a},{create:l});return g?this._verify({factorId:c.id,challengeId:g.challengeId,webauthn:{rpId:i,rpOrigins:r,type:g.webauthn.type,credential_response:g.webauthn.credential_response}}):{data:null,error:p}}catch(c){return ae(c)?{data:null,error:c}:{data:null,error:new Gi("Unexpected error in register",c)}}}}oM();const wM={url:bR,storageKey:SR,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:TR,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1,throwOnError:!1};async function Kg(n,e,i){return await i()}const Us={};class no{get jwks(){var e,i;return(i=(e=Us[this.storageKey])===null||e===void 0?void 0:e.jwks)!==null&&i!==void 0?i:{keys:[]}}set jwks(e){Us[this.storageKey]=Object.assign(Object.assign({},Us[this.storageKey]),{jwks:e})}get jwks_cached_at(){var e,i;return(i=(e=Us[this.storageKey])===null||e===void 0?void 0:e.cachedAt)!==null&&i!==void 0?i:Number.MIN_SAFE_INTEGER}set jwks_cached_at(e){Us[this.storageKey]=Object.assign(Object.assign({},Us[this.storageKey]),{cachedAt:e})}constructor(e){var i,r,a;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log;const l=Object.assign(Object.assign({},wM),e);if(this.storageKey=l.storageKey,this.instanceID=(i=no.nextInstanceID[this.storageKey])!==null&&i!==void 0?i:0,no.nextInstanceID[this.storageKey]=this.instanceID+1,this.logDebugMessages=!!l.debug,typeof l.debug=="function"&&(this.logger=l.debug),this.instanceID>0&&xt()){const c=`${this._logPrefix()} Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.`;console.warn(c),this.logDebugMessages&&console.trace(c)}if(this.persistSession=l.persistSession,this.autoRefreshToken=l.autoRefreshToken,this.admin=new iM({url:l.url,headers:l.headers,fetch:l.fetch}),this.url=l.url,this.headers=l.headers,this.fetch=Gv(l.fetch),this.lock=l.lock||Kg,this.detectSessionInUrl=l.detectSessionInUrl,this.flowType=l.flowType,this.hasCustomAuthorizationHeader=l.hasCustomAuthorizationHeader,this.throwOnError=l.throwOnError,l.lock?this.lock=l.lock:xt()&&(!((r=globalThis==null?void 0:globalThis.navigator)===null||r===void 0)&&r.locks)?this.lock=rM:this.lock=Kg,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this),webauthn:new EM(this)},this.oauth={getAuthorizationDetails:this._getAuthorizationDetails.bind(this),approveAuthorization:this._approveAuthorization.bind(this),denyAuthorization:this._denyAuthorization.bind(this),listGrants:this._listOAuthGrants.bind(this),revokeGrant:this._revokeOAuthGrant.bind(this)},this.persistSession?(l.storage?this.storage=l.storage:Bv()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=Fg(this.memoryStorage)),l.userStorage&&(this.userStorage=l.userStorage)):(this.memoryStorage={},this.storage=Fg(this.memoryStorage)),xt()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(c){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",c)}(a=this.broadcastChannel)===null||a===void 0||a.addEventListener("message",async c=>{this._debug("received broadcast notification from other tab or client",c),await this._notifyAllSubscribers(c.data.event,c.data.session,!1)})}this.initialize()}isThrowOnErrorEnabled(){return this.throwOnError}_returnResult(e){if(this.throwOnError&&e&&e.error)throw e.error;return e}_logPrefix(){return`GoTrueClient@${this.storageKey}:${this.instanceID} (${Ov}) ${new Date().toISOString()}`}_debug(...e){return this.logDebugMessages&&this.logger(this._logPrefix(),...e),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var e;try{let i={},r="none";if(xt()&&(i=LR(window.location.href),this._isImplicitGrantCallback(i)?r="implicit":await this._isPKCECallback(i)&&(r="pkce")),xt()&&this.detectSessionInUrl&&r!=="none"){const{data:a,error:l}=await this._getSessionFromURL(i,r);if(l){if(this._debug("#_initialize()","error detecting session from URL",l),RR(l)){const g=(e=l.details)===null||e===void 0?void 0:e.code;if(g==="identity_already_exists"||g==="identity_not_found"||g==="single_identity_not_deletable")return{error:l}}return await this._removeSession(),{error:l}}const{session:c,redirectType:h}=a;return this._debug("#_initialize()","detected session in URL",c,"redirect type",h),await this._saveSession(c),setTimeout(async()=>{h==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",c):await this._notifyAllSubscribers("SIGNED_IN",c)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(i){return ae(i)?this._returnResult({error:i}):this._returnResult({error:new Gi("Unexpected error during initialization",i)})}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(e){var i,r,a;try{const l=await fe(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(r=(i=e==null?void 0:e.options)===null||i===void 0?void 0:i.data)!==null&&r!==void 0?r:{},gotrue_meta_security:{captcha_token:(a=e==null?void 0:e.options)===null||a===void 0?void 0:a.captchaToken}},xform:an}),{data:c,error:h}=l;if(h||!c)return this._returnResult({data:{user:null,session:null},error:h});const g=c.session,p=c.user;return c.session&&(await this._saveSession(c.session),await this._notifyAllSubscribers("SIGNED_IN",g)),this._returnResult({data:{user:p,session:g},error:null})}catch(l){if(ae(l))return this._returnResult({data:{user:null,session:null},error:l});throw l}}async signUp(e){var i,r,a;try{let l;if("email"in e){const{email:_,password:x,options:S}=e;let T=null,w=null;this.flowType==="pkce"&&([T,w]=await Is(this.storage,this.storageKey)),l=await fe(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:S==null?void 0:S.emailRedirectTo,body:{email:_,password:x,data:(i=S==null?void 0:S.data)!==null&&i!==void 0?i:{},gotrue_meta_security:{captcha_token:S==null?void 0:S.captchaToken},code_challenge:T,code_challenge_method:w},xform:an})}else if("phone"in e){const{phone:_,password:x,options:S}=e;l=await fe(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:_,password:x,data:(r=S==null?void 0:S.data)!==null&&r!==void 0?r:{},channel:(a=S==null?void 0:S.channel)!==null&&a!==void 0?a:"sms",gotrue_meta_security:{captcha_token:S==null?void 0:S.captchaToken}},xform:an})}else throw new ka("You must provide either an email or phone number and a password");const{data:c,error:h}=l;if(h||!c)return this._returnResult({data:{user:null,session:null},error:h});const g=c.session,p=c.user;return c.session&&(await this._saveSession(c.session),await this._notifyAllSubscribers("SIGNED_IN",g)),this._returnResult({data:{user:p,session:g},error:null})}catch(l){if(ae(l))return this._returnResult({data:{user:null,session:null},error:l});throw l}}async signInWithPassword(e){try{let i;if("email"in e){const{email:l,password:c,options:h}=e;i=await fe(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:l,password:c,gotrue_meta_security:{captcha_token:h==null?void 0:h.captchaToken}},xform:zg})}else if("phone"in e){const{phone:l,password:c,options:h}=e;i=await fe(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:l,password:c,gotrue_meta_security:{captcha_token:h==null?void 0:h.captchaToken}},xform:zg})}else throw new ka("You must provide either an email or phone number and a password");const{data:r,error:a}=i;if(a)return this._returnResult({data:{user:null,session:null},error:a});if(!r||!r.session||!r.user){const l=new Ms;return this._returnResult({data:{user:null,session:null},error:l})}return r.session&&(await this._saveSession(r.session),await this._notifyAllSubscribers("SIGNED_IN",r.session)),this._returnResult({data:Object.assign({user:r.user,session:r.session},r.weak_password?{weakPassword:r.weak_password}:null),error:a})}catch(i){if(ae(i))return this._returnResult({data:{user:null,session:null},error:i});throw i}}async signInWithOAuth(e){var i,r,a,l;return await this._handleProviderSignIn(e.provider,{redirectTo:(i=e.options)===null||i===void 0?void 0:i.redirectTo,scopes:(r=e.options)===null||r===void 0?void 0:r.scopes,queryParams:(a=e.options)===null||a===void 0?void 0:a.queryParams,skipBrowserRedirect:(l=e.options)===null||l===void 0?void 0:l.skipBrowserRedirect})}async exchangeCodeForSession(e){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(e))}async signInWithWeb3(e){const{chain:i}=e;switch(i){case"ethereum":return await this.signInWithEthereum(e);case"solana":return await this.signInWithSolana(e);default:throw new Error(`@supabase/auth-js: Unsupported chain "${i}"`)}}async signInWithEthereum(e){var i,r,a,l,c,h,g,p,_,x,S;let T,w;if("message"in e)T=e.message,w=e.signature;else{const{chain:C,wallet:M,statement:D,options:B}=e;let I;if(xt())if(typeof M=="object")I=M;else{const Y=window;if("ethereum"in Y&&typeof Y.ethereum=="object"&&"request"in Y.ethereum&&typeof Y.ethereum.request=="function")I=Y.ethereum;else throw new Error("@supabase/auth-js: No compatible Ethereum wallet interface on the window object (window.ethereum) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'ethereum', wallet: resolvedUserWallet }) instead.")}else{if(typeof M!="object"||!(B!=null&&B.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");I=M}const z=new URL((i=B==null?void 0:B.url)!==null&&i!==void 0?i:window.location.href),U=await I.request({method:"eth_requestAccounts"}).then(Y=>Y).catch(()=>{throw new Error("@supabase/auth-js: Wallet method eth_requestAccounts is missing or invalid")});if(!U||U.length===0)throw new Error("@supabase/auth-js: No accounts available. Please ensure the wallet is connected.");const K=Hv(U[0]);let G=(r=B==null?void 0:B.signInWithEthereum)===null||r===void 0?void 0:r.chainId;if(!G){const Y=await I.request({method:"eth_chainId"});G=aM(Y)}const X={domain:z.host,address:K,statement:D,uri:z.href,version:"1",chainId:G,nonce:(a=B==null?void 0:B.signInWithEthereum)===null||a===void 0?void 0:a.nonce,issuedAt:(c=(l=B==null?void 0:B.signInWithEthereum)===null||l===void 0?void 0:l.issuedAt)!==null&&c!==void 0?c:new Date,expirationTime:(h=B==null?void 0:B.signInWithEthereum)===null||h===void 0?void 0:h.expirationTime,notBefore:(g=B==null?void 0:B.signInWithEthereum)===null||g===void 0?void 0:g.notBefore,requestId:(p=B==null?void 0:B.signInWithEthereum)===null||p===void 0?void 0:p.requestId,resources:(_=B==null?void 0:B.signInWithEthereum)===null||_===void 0?void 0:_.resources};T=uM(X),w=await I.request({method:"personal_sign",params:[lM(T),K]})}try{const{data:C,error:M}=await fe(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"ethereum",message:T,signature:w},!((x=e.options)===null||x===void 0)&&x.captchaToken?{gotrue_meta_security:{captcha_token:(S=e.options)===null||S===void 0?void 0:S.captchaToken}}:null),xform:an});if(M)throw M;if(!C||!C.session||!C.user){const D=new Ms;return this._returnResult({data:{user:null,session:null},error:D})}return C.session&&(await this._saveSession(C.session),await this._notifyAllSubscribers("SIGNED_IN",C.session)),this._returnResult({data:Object.assign({},C),error:M})}catch(C){if(ae(C))return this._returnResult({data:{user:null,session:null},error:C});throw C}}async signInWithSolana(e){var i,r,a,l,c,h,g,p,_,x,S,T;let w,C;if("message"in e)w=e.message,C=e.signature;else{const{chain:M,wallet:D,statement:B,options:I}=e;let z;if(xt())if(typeof D=="object")z=D;else{const K=window;if("solana"in K&&typeof K.solana=="object"&&("signIn"in K.solana&&typeof K.solana.signIn=="function"||"signMessage"in K.solana&&typeof K.solana.signMessage=="function"))z=K.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof D!="object"||!(I!=null&&I.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");z=D}const U=new URL((i=I==null?void 0:I.url)!==null&&i!==void 0?i:window.location.href);if("signIn"in z&&z.signIn){const K=await z.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},I==null?void 0:I.signInWithSolana),{version:"1",domain:U.host,uri:U.href}),B?{statement:B}:null));let G;if(Array.isArray(K)&&K[0]&&typeof K[0]=="object")G=K[0];else if(K&&typeof K=="object"&&"signedMessage"in K&&"signature"in K)G=K;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in G&&"signature"in G&&(typeof G.signedMessage=="string"||G.signedMessage instanceof Uint8Array)&&G.signature instanceof Uint8Array)w=typeof G.signedMessage=="string"?G.signedMessage:new TextDecoder().decode(G.signedMessage),C=G.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in z)||typeof z.signMessage!="function"||!("publicKey"in z)||typeof z!="object"||!z.publicKey||!("toBase58"in z.publicKey)||typeof z.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");w=[`${U.host} wants you to sign in with your Solana account:`,z.publicKey.toBase58(),...B?["",B,""]:[""],"Version: 1",`URI: ${U.href}`,`Issued At: ${(a=(r=I==null?void 0:I.signInWithSolana)===null||r===void 0?void 0:r.issuedAt)!==null&&a!==void 0?a:new Date().toISOString()}`,...!((l=I==null?void 0:I.signInWithSolana)===null||l===void 0)&&l.notBefore?[`Not Before: ${I.signInWithSolana.notBefore}`]:[],...!((c=I==null?void 0:I.signInWithSolana)===null||c===void 0)&&c.expirationTime?[`Expiration Time: ${I.signInWithSolana.expirationTime}`]:[],...!((h=I==null?void 0:I.signInWithSolana)===null||h===void 0)&&h.chainId?[`Chain ID: ${I.signInWithSolana.chainId}`]:[],...!((g=I==null?void 0:I.signInWithSolana)===null||g===void 0)&&g.nonce?[`Nonce: ${I.signInWithSolana.nonce}`]:[],...!((p=I==null?void 0:I.signInWithSolana)===null||p===void 0)&&p.requestId?[`Request ID: ${I.signInWithSolana.requestId}`]:[],...!((x=(_=I==null?void 0:I.signInWithSolana)===null||_===void 0?void 0:_.resources)===null||x===void 0)&&x.length?["Resources",...I.signInWithSolana.resources.map(G=>`- ${G}`)]:[]].join(`
`);const K=await z.signMessage(new TextEncoder().encode(w),"utf8");if(!K||!(K instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");C=K}}try{const{data:M,error:D}=await fe(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:w,signature:Hi(C)},!((S=e.options)===null||S===void 0)&&S.captchaToken?{gotrue_meta_security:{captcha_token:(T=e.options)===null||T===void 0?void 0:T.captchaToken}}:null),xform:an});if(D)throw D;if(!M||!M.session||!M.user){const B=new Ms;return this._returnResult({data:{user:null,session:null},error:B})}return M.session&&(await this._saveSession(M.session),await this._notifyAllSubscribers("SIGNED_IN",M.session)),this._returnResult({data:Object.assign({},M),error:D})}catch(M){if(ae(M))return this._returnResult({data:{user:null,session:null},error:M});throw M}}async _exchangeCodeForSession(e){const i=await Oi(this.storage,`${this.storageKey}-code-verifier`),[r,a]=(i??"").split("/");try{const{data:l,error:c}=await fe(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:e,code_verifier:r},xform:an});if(await di(this.storage,`${this.storageKey}-code-verifier`),c)throw c;if(!l||!l.session||!l.user){const h=new Ms;return this._returnResult({data:{user:null,session:null,redirectType:null},error:h})}return l.session&&(await this._saveSession(l.session),await this._notifyAllSubscribers("SIGNED_IN",l.session)),this._returnResult({data:Object.assign(Object.assign({},l),{redirectType:a??null}),error:c})}catch(l){if(ae(l))return this._returnResult({data:{user:null,session:null,redirectType:null},error:l});throw l}}async signInWithIdToken(e){try{const{options:i,provider:r,token:a,access_token:l,nonce:c}=e,h=await fe(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:r,id_token:a,access_token:l,nonce:c,gotrue_meta_security:{captcha_token:i==null?void 0:i.captchaToken}},xform:an}),{data:g,error:p}=h;if(p)return this._returnResult({data:{user:null,session:null},error:p});if(!g||!g.session||!g.user){const _=new Ms;return this._returnResult({data:{user:null,session:null},error:_})}return g.session&&(await this._saveSession(g.session),await this._notifyAllSubscribers("SIGNED_IN",g.session)),this._returnResult({data:g,error:p})}catch(i){if(ae(i))return this._returnResult({data:{user:null,session:null},error:i});throw i}}async signInWithOtp(e){var i,r,a,l,c;try{if("email"in e){const{email:h,options:g}=e;let p=null,_=null;this.flowType==="pkce"&&([p,_]=await Is(this.storage,this.storageKey));const{error:x}=await fe(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:h,data:(i=g==null?void 0:g.data)!==null&&i!==void 0?i:{},create_user:(r=g==null?void 0:g.shouldCreateUser)!==null&&r!==void 0?r:!0,gotrue_meta_security:{captcha_token:g==null?void 0:g.captchaToken},code_challenge:p,code_challenge_method:_},redirectTo:g==null?void 0:g.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:x})}if("phone"in e){const{phone:h,options:g}=e,{data:p,error:_}=await fe(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:h,data:(a=g==null?void 0:g.data)!==null&&a!==void 0?a:{},create_user:(l=g==null?void 0:g.shouldCreateUser)!==null&&l!==void 0?l:!0,gotrue_meta_security:{captcha_token:g==null?void 0:g.captchaToken},channel:(c=g==null?void 0:g.channel)!==null&&c!==void 0?c:"sms"}});return this._returnResult({data:{user:null,session:null,messageId:p==null?void 0:p.message_id},error:_})}throw new ka("You must provide either an email or phone number.")}catch(h){if(ae(h))return this._returnResult({data:{user:null,session:null},error:h});throw h}}async verifyOtp(e){var i,r;try{let a,l;"options"in e&&(a=(i=e.options)===null||i===void 0?void 0:i.redirectTo,l=(r=e.options)===null||r===void 0?void 0:r.captchaToken);const{data:c,error:h}=await fe(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},e),{gotrue_meta_security:{captcha_token:l}}),redirectTo:a,xform:an});if(h)throw h;if(!c)throw new Error("An error occurred on token verification.");const g=c.session,p=c.user;return g!=null&&g.access_token&&(await this._saveSession(g),await this._notifyAllSubscribers(e.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",g)),this._returnResult({data:{user:p,session:g},error:null})}catch(a){if(ae(a))return this._returnResult({data:{user:null,session:null},error:a});throw a}}async signInWithSSO(e){var i,r,a,l,c;try{let h=null,g=null;this.flowType==="pkce"&&([h,g]=await Is(this.storage,this.storageKey));const p=await fe(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in e?{provider_id:e.providerId}:null),"domain"in e?{domain:e.domain}:null),{redirect_to:(r=(i=e.options)===null||i===void 0?void 0:i.redirectTo)!==null&&r!==void 0?r:void 0}),!((a=e==null?void 0:e.options)===null||a===void 0)&&a.captchaToken?{gotrue_meta_security:{captcha_token:e.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:h,code_challenge_method:g}),headers:this.headers,xform:eM});return!((l=p.data)===null||l===void 0)&&l.url&&xt()&&!(!((c=e.options)===null||c===void 0)&&c.skipBrowserRedirect)&&window.location.assign(p.data.url),this._returnResult(p)}catch(h){if(ae(h))return this._returnResult({data:null,error:h});throw h}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async e=>{const{data:{session:i},error:r}=e;if(r)throw r;if(!i)throw new Ht;const{error:a}=await fe(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:i.access_token});return this._returnResult({data:{user:null,session:null},error:a})})}catch(e){if(ae(e))return this._returnResult({data:{user:null,session:null},error:e});throw e}}async resend(e){try{const i=`${this.url}/resend`;if("email"in e){const{email:r,type:a,options:l}=e,{error:c}=await fe(this.fetch,"POST",i,{headers:this.headers,body:{email:r,type:a,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken}},redirectTo:l==null?void 0:l.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:c})}else if("phone"in e){const{phone:r,type:a,options:l}=e,{data:c,error:h}=await fe(this.fetch,"POST",i,{headers:this.headers,body:{phone:r,type:a,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken}}});return this._returnResult({data:{user:null,session:null,messageId:c==null?void 0:c.message_id},error:h})}throw new ka("You must provide either an email or phone number and a type")}catch(i){if(ae(i))return this._returnResult({data:{user:null,session:null},error:i});throw i}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async i=>i))}async _acquireLock(e,i){this._debug("#_acquireLock","begin",e);try{if(this.lockAcquired){const r=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),a=(async()=>(await r,await i()))();return this.pendingInLock.push((async()=>{try{await a}catch{}})()),a}return await this.lock(`lock:${this.storageKey}`,e,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const r=i();for(this.pendingInLock.push((async()=>{try{await r}catch{}})()),await r;this.pendingInLock.length;){const a=[...this.pendingInLock];await Promise.all(a),this.pendingInLock.splice(0,a.length)}return await r}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(e){this._debug("#_useSession","begin");try{const i=await this.__loadSession();return await e(i)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let e=null;const i=await Oi(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",i),i!==null&&(this._isValidSession(i)?e=i:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!e)return{data:{session:null},error:null};const r=e.expires_at?e.expires_at*1e3-Date.now()<Mc:!1;if(this._debug("#__loadSession()",`session has${r?"":" not"} expired`,"expires_at",e.expires_at),!r){if(this.userStorage){const c=await Oi(this.userStorage,this.storageKey+"-user");c!=null&&c.user?e.user=c.user:e.user=Dc()}if(this.storage.isServer&&e.user&&!e.user.__isUserNotAvailableProxy){const c={value:this.suppressGetSessionWarning};e.user=QR(e.user,c),c.value&&(this.suppressGetSessionWarning=!0)}return{data:{session:e},error:null}}const{data:a,error:l}=await this._callRefreshToken(e.refresh_token);return l?this._returnResult({data:{session:null},error:l}):this._returnResult({data:{session:a},error:null})}finally{this._debug("#__loadSession()","end")}}async getUser(e){return e?await this._getUser(e):(await this.initializePromise,await this._acquireLock(-1,async()=>await this._getUser()))}async _getUser(e){try{return e?await fe(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:e,xform:fi}):await this._useSession(async i=>{var r,a,l;const{data:c,error:h}=i;if(h)throw h;return!(!((r=c.session)===null||r===void 0)&&r.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new Ht}:await fe(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(l=(a=c.session)===null||a===void 0?void 0:a.access_token)!==null&&l!==void 0?l:void 0,xform:fi})})}catch(i){if(ae(i))return NR(i)&&(await this._removeSession(),await di(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({data:{user:null},error:i});throw i}}async updateUser(e,i={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(e,i))}async _updateUser(e,i={}){try{return await this._useSession(async r=>{const{data:a,error:l}=r;if(l)throw l;if(!a.session)throw new Ht;const c=a.session;let h=null,g=null;this.flowType==="pkce"&&e.email!=null&&([h,g]=await Is(this.storage,this.storageKey));const{data:p,error:_}=await fe(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:i==null?void 0:i.emailRedirectTo,body:Object.assign(Object.assign({},e),{code_challenge:h,code_challenge_method:g}),jwt:c.access_token,xform:fi});if(_)throw _;return c.user=p.user,await this._saveSession(c),await this._notifyAllSubscribers("USER_UPDATED",c),this._returnResult({data:{user:c.user},error:null})})}catch(r){if(ae(r))return this._returnResult({data:{user:null},error:r});throw r}}async setSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(e))}async _setSession(e){try{if(!e.access_token||!e.refresh_token)throw new Ht;const i=Date.now()/1e3;let r=i,a=!0,l=null;const{payload:c}=kc(e.access_token);if(c.exp&&(r=c.exp,a=r<=i),a){const{data:h,error:g}=await this._callRefreshToken(e.refresh_token);if(g)return this._returnResult({data:{user:null,session:null},error:g});if(!h)return{data:{user:null,session:null},error:null};l=h}else{const{data:h,error:g}=await this._getUser(e.access_token);if(g)throw g;l={access_token:e.access_token,refresh_token:e.refresh_token,user:h.user,token_type:"bearer",expires_in:r-i,expires_at:r},await this._saveSession(l),await this._notifyAllSubscribers("SIGNED_IN",l)}return this._returnResult({data:{user:l.user,session:l},error:null})}catch(i){if(ae(i))return this._returnResult({data:{session:null,user:null},error:i});throw i}}async refreshSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(e))}async _refreshSession(e){try{return await this._useSession(async i=>{var r;if(!e){const{data:c,error:h}=i;if(h)throw h;e=(r=c.session)!==null&&r!==void 0?r:void 0}if(!(e!=null&&e.refresh_token))throw new Ht;const{data:a,error:l}=await this._callRefreshToken(e.refresh_token);return l?this._returnResult({data:{user:null,session:null},error:l}):a?this._returnResult({data:{user:a.user,session:a},error:null}):this._returnResult({data:{user:null,session:null},error:null})})}catch(i){if(ae(i))return this._returnResult({data:{user:null,session:null},error:i});throw i}}async _getSessionFromURL(e,i){try{if(!xt())throw new Da("No browser detected.");if(e.error||e.error_description||e.error_code)throw new Da(e.error_description||"Error in URL with unspecified error_description",{error:e.error||"unspecified_error",code:e.error_code||"unspecified_code"});switch(i){case"implicit":if(this.flowType==="pkce")throw new Lg("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new Da("Not a valid implicit grant flow url.");break;default:}if(i==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!e.code)throw new Lg("No code detected.");const{data:B,error:I}=await this._exchangeCodeForSession(e.code);if(I)throw I;const z=new URL(window.location.href);return z.searchParams.delete("code"),window.history.replaceState(window.history.state,"",z.toString()),{data:{session:B.session,redirectType:null},error:null}}const{provider_token:r,provider_refresh_token:a,access_token:l,refresh_token:c,expires_in:h,expires_at:g,token_type:p}=e;if(!l||!h||!c||!p)throw new Da("No session defined in URL");const _=Math.round(Date.now()/1e3),x=parseInt(h);let S=_+x;g&&(S=parseInt(g));const T=S-_;T*1e3<=Ps&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${T}s, should have been closer to ${x}s`);const w=S-x;_-w>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",w,S,_):_-w<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",w,S,_);const{data:C,error:M}=await this._getUser(l);if(M)throw M;const D={provider_token:r,provider_refresh_token:a,access_token:l,expires_in:x,expires_at:S,refresh_token:c,token_type:p,user:C.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),this._returnResult({data:{session:D,redirectType:e.type},error:null})}catch(r){if(ae(r))return this._returnResult({data:{session:null,redirectType:null},error:r});throw r}}_isImplicitGrantCallback(e){return!!(e.access_token||e.error_description)}async _isPKCECallback(e){const i=await Oi(this.storage,`${this.storageKey}-code-verifier`);return!!(e.code&&i)}async signOut(e={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(e))}async _signOut({scope:e}={scope:"global"}){return await this._useSession(async i=>{var r;const{data:a,error:l}=i;if(l)return this._returnResult({error:l});const c=(r=a.session)===null||r===void 0?void 0:r.access_token;if(c){const{error:h}=await this.admin.signOut(c,e);if(h&&!(AR(h)&&(h.status===404||h.status===401||h.status===403)))return this._returnResult({error:h})}return e!=="others"&&(await this._removeSession(),await di(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({error:null})})}onAuthStateChange(e){const i=OR(),r={id:i,callback:e,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",i),this.stateChangeEmitters.delete(i)}};return this._debug("#onAuthStateChange()","registered callback with id",i),this.stateChangeEmitters.set(i,r),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(i)})))(),{data:{subscription:r}}}async _emitInitialSession(e){return await this._useSession(async i=>{var r,a;try{const{data:{session:l},error:c}=i;if(c)throw c;await((r=this.stateChangeEmitters.get(e))===null||r===void 0?void 0:r.callback("INITIAL_SESSION",l)),this._debug("INITIAL_SESSION","callback id",e,"session",l)}catch(l){await((a=this.stateChangeEmitters.get(e))===null||a===void 0?void 0:a.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",e,"error",l),console.error(l)}})}async resetPasswordForEmail(e,i={}){let r=null,a=null;this.flowType==="pkce"&&([r,a]=await Is(this.storage,this.storageKey,!0));try{return await fe(this.fetch,"POST",`${this.url}/recover`,{body:{email:e,code_challenge:r,code_challenge_method:a,gotrue_meta_security:{captcha_token:i.captchaToken}},headers:this.headers,redirectTo:i.redirectTo})}catch(l){if(ae(l))return this._returnResult({data:null,error:l});throw l}}async getUserIdentities(){var e;try{const{data:i,error:r}=await this.getUser();if(r)throw r;return this._returnResult({data:{identities:(e=i.user.identities)!==null&&e!==void 0?e:[]},error:null})}catch(i){if(ae(i))return this._returnResult({data:null,error:i});throw i}}async linkIdentity(e){return"token"in e?this.linkIdentityIdToken(e):this.linkIdentityOAuth(e)}async linkIdentityOAuth(e){var i;try{const{data:r,error:a}=await this._useSession(async l=>{var c,h,g,p,_;const{data:x,error:S}=l;if(S)throw S;const T=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,e.provider,{redirectTo:(c=e.options)===null||c===void 0?void 0:c.redirectTo,scopes:(h=e.options)===null||h===void 0?void 0:h.scopes,queryParams:(g=e.options)===null||g===void 0?void 0:g.queryParams,skipBrowserRedirect:!0});return await fe(this.fetch,"GET",T,{headers:this.headers,jwt:(_=(p=x.session)===null||p===void 0?void 0:p.access_token)!==null&&_!==void 0?_:void 0})});if(a)throw a;return xt()&&!(!((i=e.options)===null||i===void 0)&&i.skipBrowserRedirect)&&window.location.assign(r==null?void 0:r.url),this._returnResult({data:{provider:e.provider,url:r==null?void 0:r.url},error:null})}catch(r){if(ae(r))return this._returnResult({data:{provider:e.provider,url:null},error:r});throw r}}async linkIdentityIdToken(e){return await this._useSession(async i=>{var r;try{const{error:a,data:{session:l}}=i;if(a)throw a;const{options:c,provider:h,token:g,access_token:p,nonce:_}=e,x=await fe(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,jwt:(r=l==null?void 0:l.access_token)!==null&&r!==void 0?r:void 0,body:{provider:h,id_token:g,access_token:p,nonce:_,link_identity:!0,gotrue_meta_security:{captcha_token:c==null?void 0:c.captchaToken}},xform:an}),{data:S,error:T}=x;return T?this._returnResult({data:{user:null,session:null},error:T}):!S||!S.session||!S.user?this._returnResult({data:{user:null,session:null},error:new Ms}):(S.session&&(await this._saveSession(S.session),await this._notifyAllSubscribers("USER_UPDATED",S.session)),this._returnResult({data:S,error:T}))}catch(a){if(ae(a))return this._returnResult({data:{user:null,session:null},error:a});throw a}})}async unlinkIdentity(e){try{return await this._useSession(async i=>{var r,a;const{data:l,error:c}=i;if(c)throw c;return await fe(this.fetch,"DELETE",`${this.url}/user/identities/${e.identity_id}`,{headers:this.headers,jwt:(a=(r=l.session)===null||r===void 0?void 0:r.access_token)!==null&&a!==void 0?a:void 0})})}catch(i){if(ae(i))return this._returnResult({data:null,error:i});throw i}}async _refreshAccessToken(e){const i=`#_refreshAccessToken(${e.substring(0,5)}...)`;this._debug(i,"begin");try{const r=Date.now();return await GR(async a=>(a>0&&await BR(200*Math.pow(2,a-1)),this._debug(i,"refreshing attempt",a),await fe(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:e},headers:this.headers,xform:an})),(a,l)=>{const c=200*Math.pow(2,a);return l&&Ic(l)&&Date.now()+c-r<Ps})}catch(r){if(this._debug(i,"error",r),ae(r))return this._returnResult({data:{session:null,user:null},error:r});throw r}finally{this._debug(i,"end")}}_isValidSession(e){return typeof e=="object"&&e!==null&&"access_token"in e&&"refresh_token"in e&&"expires_at"in e}async _handleProviderSignIn(e,i){const r=await this._getUrlForProvider(`${this.url}/authorize`,e,{redirectTo:i.redirectTo,scopes:i.scopes,queryParams:i.queryParams});return this._debug("#_handleProviderSignIn()","provider",e,"options",i,"url",r),xt()&&!i.skipBrowserRedirect&&window.location.assign(r),{data:{provider:e,url:r},error:null}}async _recoverAndRefresh(){var e,i;const r="#_recoverAndRefresh()";this._debug(r,"begin");try{const a=await Oi(this.storage,this.storageKey);if(a&&this.userStorage){let c=await Oi(this.userStorage,this.storageKey+"-user");!this.storage.isServer&&Object.is(this.storage,this.userStorage)&&!c&&(c={user:a.user},await Os(this.userStorage,this.storageKey+"-user",c)),a.user=(e=c==null?void 0:c.user)!==null&&e!==void 0?e:Dc()}else if(a&&!a.user&&!a.user){const c=await Oi(this.storage,this.storageKey+"-user");c&&(c!=null&&c.user)?(a.user=c.user,await di(this.storage,this.storageKey+"-user"),await Os(this.storage,this.storageKey,a)):a.user=Dc()}if(this._debug(r,"session from storage",a),!this._isValidSession(a)){this._debug(r,"session is not valid"),a!==null&&await this._removeSession();return}const l=((i=a.expires_at)!==null&&i!==void 0?i:1/0)*1e3-Date.now()<Mc;if(this._debug(r,`session has${l?"":" not"} expired with margin of ${Mc}s`),l){if(this.autoRefreshToken&&a.refresh_token){const{error:c}=await this._callRefreshToken(a.refresh_token);c&&(console.error(c),Ic(c)||(this._debug(r,"refresh failed with a non-retryable error, removing the session",c),await this._removeSession()))}}else if(a.user&&a.user.__isUserNotAvailableProxy===!0)try{const{data:c,error:h}=await this._getUser(a.access_token);!h&&(c!=null&&c.user)?(a.user=c.user,await this._saveSession(a),await this._notifyAllSubscribers("SIGNED_IN",a)):this._debug(r,"could not get user data, skipping SIGNED_IN notification")}catch(c){console.error("Error getting user data:",c),this._debug(r,"error getting user data, skipping SIGNED_IN notification",c)}else await this._notifyAllSubscribers("SIGNED_IN",a)}catch(a){this._debug(r,"error",a),console.error(a);return}finally{this._debug(r,"end")}}async _callRefreshToken(e){var i,r;if(!e)throw new Ht;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const a=`#_callRefreshToken(${e.substring(0,5)}...)`;this._debug(a,"begin");try{this.refreshingDeferred=new tl;const{data:l,error:c}=await this._refreshAccessToken(e);if(c)throw c;if(!l.session)throw new Ht;await this._saveSession(l.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",l.session);const h={data:l.session,error:null};return this.refreshingDeferred.resolve(h),h}catch(l){if(this._debug(a,"error",l),ae(l)){const c={data:null,error:l};return Ic(l)||await this._removeSession(),(i=this.refreshingDeferred)===null||i===void 0||i.resolve(c),c}throw(r=this.refreshingDeferred)===null||r===void 0||r.reject(l),l}finally{this.refreshingDeferred=null,this._debug(a,"end")}}async _notifyAllSubscribers(e,i,r=!0){const a=`#_notifyAllSubscribers(${e})`;this._debug(a,"begin",i,`broadcast = ${r}`);try{this.broadcastChannel&&r&&this.broadcastChannel.postMessage({event:e,session:i});const l=[],c=Array.from(this.stateChangeEmitters.values()).map(async h=>{try{await h.callback(e,i)}catch(g){l.push(g)}});if(await Promise.all(c),l.length>0){for(let h=0;h<l.length;h+=1)console.error(l[h]);throw l[0]}}finally{this._debug(a,"end")}}async _saveSession(e){this._debug("#_saveSession()",e),this.suppressGetSessionWarning=!0;const i=Object.assign({},e),r=i.user&&i.user.__isUserNotAvailableProxy===!0;if(this.userStorage){!r&&i.user&&await Os(this.userStorage,this.storageKey+"-user",{user:i.user});const a=Object.assign({},i);delete a.user;const l=Hg(a);await Os(this.storage,this.storageKey,l)}else{const a=Hg(i);await Os(this.storage,this.storageKey,a)}}async _removeSession(){this._debug("#_removeSession()"),await di(this.storage,this.storageKey),await di(this.storage,this.storageKey+"-code-verifier"),await di(this.storage,this.storageKey+"-user"),this.userStorage&&await di(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const e=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{e&&xt()&&(window!=null&&window.removeEventListener)&&window.removeEventListener("visibilitychange",e)}catch(i){console.error("removing visibilitychange callback failed",i)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const e=setInterval(()=>this._autoRefreshTokenTick(),Ps);this.autoRefreshTicker=e,e&&typeof e=="object"&&typeof e.unref=="function"?e.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(e),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const e=this.autoRefreshTicker;this.autoRefreshTicker=null,e&&clearInterval(e)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const e=Date.now();try{return await this._useSession(async i=>{const{data:{session:r}}=i;if(!r||!r.refresh_token||!r.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const a=Math.floor((r.expires_at*1e3-e)/Ps);this._debug("#_autoRefreshTokenTick()",`access token expires in ${a} ticks, a tick lasts ${Ps}ms, refresh threshold is ${id} ticks`),a<=id&&await this._callRefreshToken(r.refresh_token)})}catch(i){console.error("Auto refresh tick failed with error. This is likely a transient error.",i)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(e){if(e.isAcquireTimeout||e instanceof Vv)this._debug("auto refresh token tick lock not available");else throw e}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!xt()||!(window!=null&&window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window==null||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(e){console.error("_handleVisibilityChange",e)}}async _onVisibilityChanged(e){const i=`#_onVisibilityChanged(${e})`;this._debug(i,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),e||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(i,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(e,i,r){const a=[`provider=${encodeURIComponent(i)}`];if(r!=null&&r.redirectTo&&a.push(`redirect_to=${encodeURIComponent(r.redirectTo)}`),r!=null&&r.scopes&&a.push(`scopes=${encodeURIComponent(r.scopes)}`),this.flowType==="pkce"){const[l,c]=await Is(this.storage,this.storageKey),h=new URLSearchParams({code_challenge:`${encodeURIComponent(l)}`,code_challenge_method:`${encodeURIComponent(c)}`});a.push(h.toString())}if(r!=null&&r.queryParams){const l=new URLSearchParams(r.queryParams);a.push(l.toString())}return r!=null&&r.skipBrowserRedirect&&a.push(`skip_http_redirect=${r.skipBrowserRedirect}`),`${e}?${a.join("&")}`}async _unenroll(e){try{return await this._useSession(async i=>{var r;const{data:a,error:l}=i;return l?this._returnResult({data:null,error:l}):await fe(this.fetch,"DELETE",`${this.url}/factors/${e.factorId}`,{headers:this.headers,jwt:(r=a==null?void 0:a.session)===null||r===void 0?void 0:r.access_token})})}catch(i){if(ae(i))return this._returnResult({data:null,error:i});throw i}}async _enroll(e){try{return await this._useSession(async i=>{var r,a;const{data:l,error:c}=i;if(c)return this._returnResult({data:null,error:c});const h=Object.assign({friendly_name:e.friendlyName,factor_type:e.factorType},e.factorType==="phone"?{phone:e.phone}:e.factorType==="totp"?{issuer:e.issuer}:{}),{data:g,error:p}=await fe(this.fetch,"POST",`${this.url}/factors`,{body:h,headers:this.headers,jwt:(r=l==null?void 0:l.session)===null||r===void 0?void 0:r.access_token});return p?this._returnResult({data:null,error:p}):(e.factorType==="totp"&&g.type==="totp"&&(!((a=g==null?void 0:g.totp)===null||a===void 0)&&a.qr_code)&&(g.totp.qr_code=`data:image/svg+xml;utf-8,${g.totp.qr_code}`),this._returnResult({data:g,error:null}))})}catch(i){if(ae(i))return this._returnResult({data:null,error:i});throw i}}async _verify(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async i=>{var r;const{data:a,error:l}=i;if(l)return this._returnResult({data:null,error:l});const c=Object.assign({challenge_id:e.challengeId},"webauthn"in e?{webauthn:Object.assign(Object.assign({},e.webauthn),{credential_response:e.webauthn.type==="create"?gM(e.webauthn.credential_response):yM(e.webauthn.credential_response)})}:{code:e.code}),{data:h,error:g}=await fe(this.fetch,"POST",`${this.url}/factors/${e.factorId}/verify`,{body:c,headers:this.headers,jwt:(r=a==null?void 0:a.session)===null||r===void 0?void 0:r.access_token});return g?this._returnResult({data:null,error:g}):(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+h.expires_in},h)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",h),this._returnResult({data:h,error:g}))})}catch(i){if(ae(i))return this._returnResult({data:null,error:i});throw i}})}async _challenge(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async i=>{var r;const{data:a,error:l}=i;if(l)return this._returnResult({data:null,error:l});const c=await fe(this.fetch,"POST",`${this.url}/factors/${e.factorId}/challenge`,{body:e,headers:this.headers,jwt:(r=a==null?void 0:a.session)===null||r===void 0?void 0:r.access_token});if(c.error)return c;const{data:h}=c;if(h.type!=="webauthn")return{data:h,error:null};switch(h.webauthn.type){case"create":return{data:Object.assign(Object.assign({},h),{webauthn:Object.assign(Object.assign({},h.webauthn),{credential_options:Object.assign(Object.assign({},h.webauthn.credential_options),{publicKey:pM(h.webauthn.credential_options.publicKey)})})}),error:null};case"request":return{data:Object.assign(Object.assign({},h),{webauthn:Object.assign(Object.assign({},h.webauthn),{credential_options:Object.assign(Object.assign({},h.webauthn.credential_options),{publicKey:mM(h.webauthn.credential_options.publicKey)})})}),error:null}}})}catch(i){if(ae(i))return this._returnResult({data:null,error:i});throw i}})}async _challengeAndVerify(e){const{data:i,error:r}=await this._challenge({factorId:e.factorId});return r?this._returnResult({data:null,error:r}):await this._verify({factorId:e.factorId,challengeId:i.id,code:e.code})}async _listFactors(){var e;const{data:{user:i},error:r}=await this.getUser();if(r)return{data:null,error:r};const a={all:[],phone:[],totp:[],webauthn:[]};for(const l of(e=i==null?void 0:i.factors)!==null&&e!==void 0?e:[])a.all.push(l),l.status==="verified"&&a[l.factor_type].push(l);return{data:a,error:null}}async _getAuthenticatorAssuranceLevel(){var e,i;const{data:{session:r},error:a}=await this.getSession();if(a)return this._returnResult({data:null,error:a});if(!r)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:l}=kc(r.access_token);let c=null;l.aal&&(c=l.aal);let h=c;((i=(e=r.user.factors)===null||e===void 0?void 0:e.filter(_=>_.status==="verified"))!==null&&i!==void 0?i:[]).length>0&&(h="aal2");const p=l.amr||[];return{data:{currentLevel:c,nextLevel:h,currentAuthenticationMethods:p},error:null}}async _getAuthorizationDetails(e){try{return await this._useSession(async i=>{const{data:{session:r},error:a}=i;return a?this._returnResult({data:null,error:a}):r?await fe(this.fetch,"GET",`${this.url}/oauth/authorizations/${e}`,{headers:this.headers,jwt:r.access_token,xform:l=>({data:l,error:null})}):this._returnResult({data:null,error:new Ht})})}catch(i){if(ae(i))return this._returnResult({data:null,error:i});throw i}}async _approveAuthorization(e,i){try{return await this._useSession(async r=>{const{data:{session:a},error:l}=r;if(l)return this._returnResult({data:null,error:l});if(!a)return this._returnResult({data:null,error:new Ht});const c=await fe(this.fetch,"POST",`${this.url}/oauth/authorizations/${e}/consent`,{headers:this.headers,jwt:a.access_token,body:{action:"approve"},xform:h=>({data:h,error:null})});return c.data&&c.data.redirect_url&&xt()&&!(i!=null&&i.skipBrowserRedirect)&&window.location.assign(c.data.redirect_url),c})}catch(r){if(ae(r))return this._returnResult({data:null,error:r});throw r}}async _denyAuthorization(e,i){try{return await this._useSession(async r=>{const{data:{session:a},error:l}=r;if(l)return this._returnResult({data:null,error:l});if(!a)return this._returnResult({data:null,error:new Ht});const c=await fe(this.fetch,"POST",`${this.url}/oauth/authorizations/${e}/consent`,{headers:this.headers,jwt:a.access_token,body:{action:"deny"},xform:h=>({data:h,error:null})});return c.data&&c.data.redirect_url&&xt()&&!(i!=null&&i.skipBrowserRedirect)&&window.location.assign(c.data.redirect_url),c})}catch(r){if(ae(r))return this._returnResult({data:null,error:r});throw r}}async _listOAuthGrants(){try{return await this._useSession(async e=>{const{data:{session:i},error:r}=e;return r?this._returnResult({data:null,error:r}):i?await fe(this.fetch,"GET",`${this.url}/user/oauth/grants`,{headers:this.headers,jwt:i.access_token,xform:a=>({data:a,error:null})}):this._returnResult({data:null,error:new Ht})})}catch(e){if(ae(e))return this._returnResult({data:null,error:e});throw e}}async _revokeOAuthGrant(e){try{return await this._useSession(async i=>{const{data:{session:r},error:a}=i;return a?this._returnResult({data:null,error:a}):r?(await fe(this.fetch,"DELETE",`${this.url}/user/oauth/grants`,{headers:this.headers,jwt:r.access_token,query:{client_id:e.clientId},noResolveJson:!0}),{data:{},error:null}):this._returnResult({data:null,error:new Ht})})}catch(i){if(ae(i))return this._returnResult({data:null,error:i});throw i}}async fetchJwk(e,i={keys:[]}){let r=i.keys.find(h=>h.kid===e);if(r)return r;const a=Date.now();if(r=this.jwks.keys.find(h=>h.kid===e),r&&this.jwks_cached_at+wR>a)return r;const{data:l,error:c}=await fe(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(c)throw c;return!l.keys||l.keys.length===0||(this.jwks=l,this.jwks_cached_at=a,r=l.keys.find(h=>h.kid===e),!r)?null:r}async getClaims(e,i={}){try{let r=e;if(!r){const{data:T,error:w}=await this.getSession();if(w||!T.session)return this._returnResult({data:null,error:w});r=T.session.access_token}const{header:a,payload:l,signature:c,raw:{header:h,payload:g}}=kc(r);i!=null&&i.allowExpired||JR(l.exp);const p=!a.alg||a.alg.startsWith("HS")||!a.kid||!("crypto"in globalThis&&"subtle"in globalThis.crypto)?null:await this.fetchJwk(a.kid,i!=null&&i.keys?{keys:i.keys}:i==null?void 0:i.jwks);if(!p){const{error:T}=await this.getUser(r);if(T)throw T;return{data:{claims:l,header:a,signature:c},error:null}}const _=KR(a.alg),x=await crypto.subtle.importKey("jwk",p,_,!0,["verify"]);if(!await crypto.subtle.verify(_,x,c,UR(`${h}.${g}`)))throw new od("Invalid JWT signature");return{data:{claims:l,header:a,signature:c},error:null}}catch(r){if(ae(r))return this._returnResult({data:null,error:r});throw r}}}no.nextInstanceID={};const CM=no;class AM extends CM{constructor(e){super(e)}}class NM{constructor(e,i,r){var a,l,c;this.supabaseUrl=e,this.supabaseKey=i;const h=xR(e);if(!i)throw new Error("supabaseKey is required.");this.realtimeUrl=new URL("realtime/v1",h),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",h),this.storageUrl=new URL("storage/v1",h),this.functionsUrl=new URL("functions/v1",h);const g=`sb-${h.hostname.split(".")[0]}-auth-token`,p={db:fR,realtime:pR,auth:Object.assign(Object.assign({},hR),{storageKey:g}),global:dR},_=_R(r??{},p);this.storageKey=(a=_.auth.storageKey)!==null&&a!==void 0?a:"",this.headers=(l=_.global.headers)!==null&&l!==void 0?l:{},_.accessToken?(this.accessToken=_.accessToken,this.auth=new Proxy({},{get:(x,S)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(S)} is not possible`)}})):this.auth=this._initSupabaseAuthClient((c=_.auth)!==null&&c!==void 0?c:{},this.headers,_.global.fetch),this.fetch=yR(i,this._getAccessToken.bind(this),_.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},_.realtime)),this.accessToken&&this.accessToken().then(x=>this.realtime.setAuth(x)).catch(x=>console.warn("Failed to set initial Realtime auth token:",x)),this.rest=new p2(new URL("rest/v1",h).href,{headers:this.headers,schema:_.db.schema,fetch:this.fetch}),this.storage=new lR(this.storageUrl.href,this.headers,this.fetch,r==null?void 0:r.storage),_.accessToken||this._listenForAuthEvents()}get functions(){return new c2(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(e){return this.rest.from(e)}schema(e){return this.rest.schema(e)}rpc(e,i={},r={head:!1,get:!1,count:void 0}){return this.rest.rpc(e,i,r)}channel(e,i={config:{}}){return this.realtime.channel(e,i)}getChannels(){return this.realtime.getChannels()}removeChannel(e){return this.realtime.removeChannel(e)}removeAllChannels(){return this.realtime.removeAllChannels()}async _getAccessToken(){var e,i;if(this.accessToken)return await this.accessToken();const{data:r}=await this.auth.getSession();return(i=(e=r.session)===null||e===void 0?void 0:e.access_token)!==null&&i!==void 0?i:this.supabaseKey}_initSupabaseAuthClient({autoRefreshToken:e,persistSession:i,detectSessionInUrl:r,storage:a,userStorage:l,storageKey:c,flowType:h,lock:g,debug:p,throwOnError:_},x,S){const T={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new AM({url:this.authUrl.href,headers:Object.assign(Object.assign({},T),x),storageKey:c,autoRefreshToken:e,persistSession:i,detectSessionInUrl:r,storage:a,userStorage:l,flowType:h,lock:g,debug:p,throwOnError:_,fetch:S,hasCustomAuthorizationHeader:Object.keys(this.headers).some(w=>w.toLowerCase()==="authorization")})}_initRealtimeClient(e){return new I2(this.realtimeUrl.href,Object.assign(Object.assign({},e),{params:Object.assign({apikey:this.supabaseKey},e==null?void 0:e.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((i,r)=>{this._handleTokenChanged(i,"CLIENT",r==null?void 0:r.access_token)})}_handleTokenChanged(e,i,r){(e==="TOKEN_REFRESHED"||e==="SIGNED_IN")&&this.changedAccessToken!==r?(this.changedAccessToken=r,this.realtime.setAuth(r)):e==="SIGNED_OUT"&&(this.realtime.setAuth(),i=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}}const zv=(n,e,i)=>new NM(n,e,i);function RM(){if(typeof window<"u"||typeof process>"u")return!1;const n=process.version;if(n==null)return!1;const e=n.match(/^v(\d+)\./);return e?parseInt(e[1],10)<=18:!1}RM()&&console.warn("  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217");const Pc={finance:{id:"finance",name:"Emma IA  BOURSE",systemPrompt:Vi,avatarId:Ba,voiceName:Sd,temperature:.6},ceo:{id:"ceo",name:"CEO Simulator",systemPrompt:Jc,avatarId:"Tyler-incasualsuit-20220721",voiceName:"Charon",temperature:.7},critic:{id:"critic",name:"Avocat du Diable",systemPrompt:Jy,avatarId:"Kristy-inpublic-20220810",voiceName:"Kore",temperature:.8},geek:{id:"geek",name:"Emma  GEEK",systemPrompt:bd,avatarId:Ba,voiceName:"Zephyr",temperature:.5},researcher:{id:"researcher",name:"Morgane Recherchiste",systemPrompt:Fy,avatarId:"Angela-inT-20220820",voiceName:"Puck",temperature:.4},writer:{id:"writer",name:"Emma  RDACTION",systemPrompt:$y,avatarId:"Angela-inT-20220820",voiceName:"Fenrir",temperature:.7},tavus:{id:"tavus",name:"Emma  NATURELLE",systemPrompt:Yy,avatarId:"tavus-replica-id-default",voiceName:"natural",temperature:.7}};class $v{constructor(e){this.supabase=null,this.memoryCache={...Pc},e.supabaseUrl&&e.supabaseKey&&(this.supabase=zv(e.supabaseUrl,e.supabaseKey))}async loadAllConfigs(){if(!this.supabase)return console.log("ConfigService: No DB, using defaults."),this.memoryCache;try{const{data:e,error:i}=await this.supabase.from("section_configs").select("*");if(i)throw i;e&&e.forEach(r=>{this.memoryCache[r.id]={id:r.id,name:r.name,systemPrompt:r.system_prompt,avatarId:r.avatar_id,voiceName:r.voice_name,temperature:r.temperature,customField1:r.custom_field_1,customField2:r.custom_field_2}})}catch(e){console.error("Failed to load configs from Supabase:",e)}return this.memoryCache}async saveConfig(e){if(this.memoryCache[e.id]=e,!this.supabase)return console.warn("ConfigService: Saving to memory only (No DB)."),!0;try{const{error:i}=await this.supabase.from("section_configs").upsert({id:e.id,name:e.name,system_prompt:e.systemPrompt,avatar_id:e.avatarId,voice_name:e.voiceName,temperature:e.temperature,custom_field_1:e.customField1,custom_field_2:e.customField2,updated_at:new Date().toISOString()});if(i)throw i;return!0}catch(i){return console.error("Failed to save config to Supabase:",i),!1}}getConfig(e){return this.memoryCache[e]||Pc[e]||Pc.finance}}function Fv(n){var e,i,r="";if(typeof n=="string"||typeof n=="number")r+=n;else if(typeof n=="object")if(Array.isArray(n)){var a=n.length;for(e=0;e<a;e++)n[e]&&(i=Fv(n[e]))&&(r&&(r+=" "),r+=i)}else for(i in n)n[i]&&(r&&(r+=" "),r+=i);return r}function be(){for(var n,e,i=0,r="",a=arguments.length;i<a;i++)(n=arguments[i])&&(e=Fv(n))&&(r&&(r+=" "),r+=e);return r}class MM{constructor(e,i,r="medium",a="Friendly",l=!1){this.peerConnection=null,this.sessionId=null,this.token=e,this.avatarId=i,this.quality=r,this.emotion=a,this.removeBackground=l}async createSession(){console.log(`Creating HeyGen session for avatar: ${this.avatarId} (${this.quality}, ${this.emotion})`);const e=await fetch("https://api.heygen.com/v1/streaming.new",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${this.token}`},body:JSON.stringify({quality:this.quality,avatar_name:this.avatarId,voice:{rate:1,emotion:this.emotion},version:"v2",video_encoding:"H264",disable_idle_timeout:!0,background:this.removeBackground?{color:"#00FF00"}:void 0})});if(!e.ok){const r=await e.json();throw new Error(`HeyGen Session Error: ${e.statusText} - ${JSON.stringify(r)}`)}return(await e.json()).data}async startSession(e){try{const i=await this.createSession();this.sessionId=i.sessionId,this.peerConnection=new RTCPeerConnection({iceServers:i.ice_servers||[]}),this.peerConnection.ontrack=a=>{a.streams&&a.streams[0]&&(e.srcObject=a.streams[0])},this.peerConnection.onicecandidate=({candidate:a})=>{a&&this.sendIceCandidate(a)},await this.peerConnection.setRemoteDescription(new RTCSessionDescription(i.sdp));const r=await this.peerConnection.createAnswer();await this.peerConnection.setLocalDescription(r),await fetch("https://api.heygen.com/v1/streaming.start",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${this.token}`},body:JSON.stringify({session_id:this.sessionId,sdp:r})}),console.log("HeyGen Session Started")}catch(i){throw console.error("HeyGen connection failed",i),i}}async sendIceCandidate(e){this.sessionId&&await fetch("https://api.heygen.com/v1/streaming.ice",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${this.token}`},body:JSON.stringify({session_id:this.sessionId,candidate:e})})}async speak(e){if(this.sessionId)try{await fetch("https://api.heygen.com/v1/streaming.task",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${this.token}`},body:JSON.stringify({session_id:this.sessionId,text:e})})}catch(i){console.error("Failed to send speak task",i)}}async close(){var e;if(this.sessionId)try{await fetch("https://api.heygen.com/v1/streaming.stop",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${this.token}`},body:JSON.stringify({session_id:this.sessionId})})}catch(i){console.warn(i)}(e=this.peerConnection)==null||e.close(),this.peerConnection=null,this.sessionId=null}}class IM{constructor(e){this.stream=null,this.token=e}async startSession(e){console.log("Initializing Akool Session..."),await new Promise(i=>setTimeout(i,1500)),console.log("Akool Session Ready (Mock)")}async speak(e){console.log(`Akool speaking: ${e}`)}async close(){console.log("Akool Session Closed")}}const Jv=({state:n,volume:e,config:i,lastMessage:r})=>{const a=n===et.CONNECTED,l=$.useRef(null),c=$.useRef(null),h=$.useRef(null),g=$.useRef(null),[p,_]=$.useState("idle"),[x,S]=$.useState(null),[T,w]=$.useState("idle"),[C,M]=$.useState(null),D=e>10;$.useEffect(()=>{!r||!a||(p==="active"&&h.current&&h.current.speak(r).catch(Y=>console.error("HeyGen Speak Error:",Y)),T==="active"&&g.current&&g.current.speak(r).catch(Y=>console.error("Akool Speak Error:",Y)))},[r,a,p,T]),$.useEffect(()=>()=>{var Y,ce;(Y=h.current)==null||Y.close(),(ce=g.current)==null||ce.close()},[]);const B=async()=>{if(!i.heygenToken){_("error"),S("Token HeyGen manquant dans la configuration.");return}try{_("loading"),S(null),h.current=new MM(i.heygenToken,i.heygenAvatarId,i.heygenQuality,i.heygenEmotion,i.heygenRemoveBackground),l.current&&(await h.current.startSession(l.current),_("active"),l.current.play().catch(Y=>{console.error("Video Play Error:",Y),_("error"),S("Lecture vido bloque (Autoplay policy ?)")}))}catch(Y){console.error(Y),_("error"),S(Y.message||"Erreur d'initialisation HeyGen")}},I=async()=>{if(!i.akoolToken){w("error"),M("Token Akool manquant dans la configuration.");return}try{w("loading"),M(null),g.current=new IM(i.akoolToken),c.current&&(await g.current.startSession(c.current),w("active"))}catch(Y){console.error(Y),w("error"),M(Y.message||"Erreur d'initialisation Akool")}},z=Y=>{const ce=`Erreur de flux vido ${Y} (Codec/Rseau)`;console.error(ce),Y==="HeyGen"?(_("error"),S(ce)):(w("error"),M(ce))},U=i.activeProvider==="both"||i.activeProvider==="heygen",K=i.activeProvider==="both"||i.activeProvider==="akool",G=i.activeProvider==="both",X=({type:Y,videoRef:ce,status:he,errorMsg:re,onStart:ve,hasToken:Ve,avatarId:He,details:q,isActiveSpeaker:Q})=>y.jsxs("div",{className:be("relative flex flex-col items-center justify-center rounded-2xl overflow-hidden bg-slate-900/60 backdrop-blur-sm transition-all duration-500 shadow-2xl group",G?"w-full h-full":"w-full max-w-3xl aspect-video",Q?"border-2 border-blue-500 shadow-[0_0_50px_rgba(59,130,246,0.3)] ring-1 ring-blue-400/50 scale-[1.01]":"border border-slate-700/50 opacity-90 scale-100"),children:[y.jsx("video",{ref:ce,className:be("absolute inset-0 w-full h-full object-cover transition-opacity duration-500",he==="active"?"opacity-100":"opacity-0 pointer-events-none"),autoPlay:!0,playsInline:!0,onError:()=>z(Y)}),he==="active"&&y.jsxs("div",{className:"absolute top-4 left-4 z-10 flex flex-col gap-1",children:[y.jsxs("div",{className:be("px-2 py-1 rounded text-[10px] font-bold text-white shadow-sm flex items-center gap-1 w-fit transition-all duration-300",Q?"bg-green-600 scale-105":Y==="HeyGen"?"bg-blue-600/80":"bg-purple-600/80"),children:[Q?y.jsx(Qa,{className:"w-3 h-3 animate-pulse"}):y.jsx(js,{className:"w-3 h-3 text-slate-300"}),Y," ",Q?"PARLE":"LIVE"]}),q&&y.jsx("div",{className:"px-2 py-0.5 rounded text-[9px] font-mono text-slate-300 bg-black/50 backdrop-blur w-fit border border-white/10",children:q})]}),y.jsxs("div",{className:be("relative z-10 flex flex-col items-center justify-center text-center p-6 transition-all duration-500",he==="active"?"opacity-0 hover:opacity-100 bg-black/60 w-full h-full backdrop-blur-sm":"opacity-100"),children:[he!=="active"&&y.jsx("div",{className:"w-24 h-24 md:w-32 md:h-32 rounded-full mb-6 border-4 border-slate-700/50 shadow-2xl overflow-hidden relative",style:{transform:`scale(${1+e/500})`},children:y.jsx("img",{src:Ge.professional,alt:Y,className:"w-full h-full object-cover grayscale opacity-60 group-hover:grayscale-0 group-hover:opacity-100 transition-all duration-700"})}),y.jsxs("h3",{className:"text-2xl font-light text-slate-200 mb-1 tracking-tight",children:[Y," AI Avatar"]}),y.jsxs("p",{className:"text-xs text-slate-500 font-mono mb-6 flex items-center gap-1",children:[y.jsx(Vy,{className:"w-3 h-3"})," ",He]}),y.jsxs("div",{className:"space-y-4 max-w-md mx-auto",children:[he==="loading"&&y.jsxs("div",{className:"flex flex-col items-center gap-2",children:[y.jsx(gg,{className:"w-6 h-6 text-blue-400 animate-spin"}),y.jsx("span",{className:"text-xs text-blue-300 font-medium",children:"Initialisation Secure Stream..."})]}),he==="error"&&y.jsxs("div",{className:"flex flex-col items-center bg-red-950/40 p-4 rounded-xl border border-red-500/30 animate-in fade-in zoom-in-95",children:[y.jsxs("div",{className:"flex items-center gap-2 mb-2 text-red-400",children:[y.jsx(Za,{className:"w-5 h-5"}),y.jsx("span",{className:"text-sm font-bold",children:"chec de connexion"})]}),y.jsx("p",{className:"text-xs text-red-300/80 mb-3 text-center leading-relaxed",children:re||"Une erreur inconnue est survenue lors de l'tablissement du flux."}),y.jsxs("button",{onClick:ve,className:"px-4 py-1.5 bg-red-900/50 hover:bg-red-800/50 border border-red-700 text-red-200 text-xs rounded-lg transition-colors flex items-center gap-2",children:[y.jsx(gg,{className:"w-3 h-3"})," Ressayer"]})]}),he==="idle"&&(Ve?y.jsxs("button",{onClick:ve,className:be("flex items-center gap-2 px-8 py-3 rounded-xl text-sm font-bold transition-all transform hover:scale-105 shadow-xl hover:shadow-2xl border border-white/10",Y==="HeyGen"?"bg-gradient-to-r from-blue-700 to-blue-600 hover:from-blue-600 hover:to-blue-500":"bg-gradient-to-r from-purple-700 to-purple-600 hover:from-purple-600 hover:to-purple-500"),children:[y.jsx(rN,{className:"w-4 h-4 fill-current"})," Activer Stream"]}):y.jsx("div",{className:"flex flex-col items-center gap-2",children:y.jsxs("div",{className:"flex items-center gap-2 text-xs text-slate-400 bg-slate-900/80 px-4 py-2 rounded-full border border-slate-700",children:[y.jsx(Ry,{className:"w-3 h-3 text-orange-400"})," Token Requis (Voir Admin)"]})}))]})]})]});return y.jsxs("div",{className:"w-full h-full flex flex-col items-center justify-center p-4 md:p-8 relative",children:[G&&y.jsxs("div",{className:"absolute top-4 left-1/2 -translate-x-1/2 z-30 bg-black/40 backdrop-blur-md border border-white/10 px-6 py-2 rounded-full flex items-center gap-3 shadow-2xl animate-in fade-in slide-in-from-top-4",children:[y.jsx(Uy,{className:"w-4 h-4 text-blue-400"}),y.jsxs("span",{className:"text-xs text-slate-200 font-medium tracking-wide",children:[y.jsx("span",{className:"text-blue-400",children:"MODE DUO ACTIF :"})," Les deux avatars analysent et rpondent simultanment."]})]}),y.jsxs("div",{className:be("w-full max-w-7xl transition-all duration-500",G?"grid grid-cols-1 md:grid-cols-2 gap-6 h-[75vh]":"flex justify-center h-auto"),children:[U&&y.jsx(X,{type:"HeyGen",videoRef:l,status:p,errorMsg:x,onStart:B,hasToken:!!i.heygenToken,avatarId:i.heygenAvatarId,details:`${i.heygenQuality.toUpperCase()}  ${i.heygenEmotion}`,isActiveSpeaker:D&&p==="active"}),K&&y.jsx(X,{type:"Akool",videoRef:c,status:T,errorMsg:C,onStart:I,hasToken:!!i.akoolToken,avatarId:i.akoolAvatarId,details:`REGION: ${i.akoolRegion.toUpperCase()}`,isActiveSpeaker:D&&T==="active"})]}),G&&a&&y.jsxs("div",{className:"mt-4 flex items-center gap-4 text-[10px] text-slate-500 font-mono animate-pulse",children:[y.jsxs("span",{className:"flex items-center gap-1",children:[y.jsx("div",{className:"w-2 h-2 bg-blue-500 rounded-full"})," Assistant Principal (HeyGen)"]}),y.jsxs("span",{className:"flex items-center gap-1",children:[y.jsx("div",{className:"w-2 h-2 bg-purple-500 rounded-full"})," Backup (Akool)"]})]})]})},Kv=({state:n,onConnect:e,onDisconnect:i,onEmail:r,onOpenAdmin:a,onToggleInsights:l,showInsights:c})=>{const h=n===et.CONNECTED,g=n===et.CONNECTING;return y.jsxs("div",{className:"flex items-center justify-center gap-6 p-6 bg-slate-900/50 backdrop-blur-md border-t border-slate-800/50 w-full max-w-3xl mx-auto rounded-full mb-8 shadow-2xl relative z-40",children:[!h&&!g&&y.jsx("button",{onClick:e,className:"group flex items-center justify-center w-16 h-16 rounded-full bg-blue-600 hover:bg-blue-500 transition-all duration-300 shadow-[0_0_20px_rgba(37,99,235,0.3)] hover:shadow-[0_0_30px_rgba(37,99,235,0.5)] active:scale-95","aria-label":"Start Conversation",children:y.jsx(Qa,{className:"w-8 h-8 text-white group-hover:scale-110 transition-transform"})}),g&&y.jsx("div",{className:"flex flex-col items-center justify-center",children:y.jsx("div",{className:"w-12 h-12 border-4 border-blue-500/30 border-t-blue-500 rounded-full animate-spin"})}),h&&y.jsxs(y.Fragment,{children:[y.jsx("button",{onClick:l,className:`p-4 rounded-full border transition-all active:scale-95 group relative ${c?"bg-purple-600/20 text-purple-400 border-purple-500/50":"bg-slate-800/50 text-slate-300 hover:text-white border-slate-700 hover:border-purple-500/50"}`,title:"Activer la perception IA",children:y.jsx(mN,{className:"w-6 h-6"})}),y.jsx("button",{onClick:r,className:"p-4 rounded-full bg-slate-800/50 text-slate-300 hover:text-white hover:bg-slate-700 border border-slate-700 hover:border-blue-500/50 transition-all active:scale-95 group relative",title:"Envoyer le rsum par courriel",children:y.jsx(_d,{className:"w-6 h-6 group-hover:text-blue-400 transition-colors"})}),y.jsx("button",{onClick:i,className:"flex items-center justify-center w-16 h-16 rounded-full bg-red-500/10 hover:bg-red-500/20 border border-red-500/30 transition-all active:scale-95 shadow-[0_0_15px_rgba(239,68,68,0.2)]","aria-label":"End Conversation",children:y.jsx(iN,{className:"w-8 h-8 text-red-400"})}),y.jsx("button",{onClick:a,className:"p-4 rounded-full bg-slate-800/50 text-slate-300 hover:text-white hover:bg-slate-700 border border-slate-700 hover:border-blue-500/50 transition-all active:scale-95",children:y.jsx($c,{className:"w-6 h-6"})})]})]})},kM=n=>{const e=n.toLowerCase(),i=["hausse","gain","profit","positif","excellent","croissance","opportunit","rentable","super","bon","stable","prometteur","gnial","parfait","d'accord","succs","performant"],r=["baisse","perte","chute","ngatif","risque","crise","attention","mauvais","incertain","erreur","problme","difficile","complexe","dangereux","effondrement"];let a=0;return i.forEach(l=>{e.includes(l)&&a++}),r.forEach(l=>{e.includes(l)&&a--}),a>0?"positive":a<0?"negative":"neutral"},Yv=({messages:n})=>{const e=$.useRef(null);return $.useEffect(()=>{e.current&&(e.current.scrollTop=e.current.scrollHeight)},[n]),n.length===0?y.jsxs("div",{className:"flex flex-col items-center justify-center h-full text-slate-500 opacity-50",children:[y.jsx(KA,{className:"w-12 h-12 mb-2"}),y.jsx("p",{children:"L'historique apparatra ici..."})]}):y.jsxs("div",{className:"flex flex-col h-full bg-slate-800/30 rounded-2xl border border-slate-700/50 backdrop-blur-sm overflow-hidden",children:[y.jsxs("div",{className:"p-4 border-b border-slate-700/50 bg-slate-800/50 flex justify-between items-center",children:[y.jsx("h3",{className:"font-medium text-slate-200",children:"Transcription"}),y.jsx("span",{className:"text-[10px] text-slate-500 font-mono uppercase",children:"Live Feed"})]}),y.jsx("div",{className:"flex-1 overflow-y-auto p-4 space-y-4 custom-scrollbar",ref:e,children:n.map(i=>{if(i.role==="assistant"&&i.text.match(/\[Emma IA  (?:BOURSE|MACRO|POLITIQUE|RECHERCHE)\]:/)){const l=i.text.split(/(\[Emma IA  (?:BOURSE|MACRO|POLITIQUE|RECHERCHE)\]:)/g).filter(Boolean);let c="Emma IA";return y.jsx("div",{className:"flex flex-col gap-3 items-start max-w-[95%]",children:l.map((h,g)=>{if(h.match(/^\[.*\]:$/))return c=h.replace(/[\[\]:]/g,""),null;if(!h.trim())return null;let p="text-blue-300 border-blue-500/30 bg-blue-900/20",_="bg-blue-600 text-white";return c.includes("MACRO")&&(p="text-green-300 border-green-500/30 bg-green-900/20",_="bg-green-600 text-white"),c.includes("POLITIQUE")&&(p="text-orange-300 border-orange-500/30 bg-orange-900/20",_="bg-orange-600 text-white"),c.includes("RECHERCHE")&&(p="text-purple-300 border-purple-500/30 bg-purple-900/20",_="bg-purple-600 text-white"),y.jsxs("div",{className:`flex flex-col rounded-xl border ${p} w-full shadow-md`,children:[y.jsxs("div",{className:`px-3 py-1 text-[10px] font-bold uppercase tracking-widest ${_} rounded-t-xl w-full flex items-center gap-2`,children:[y.jsx(Fc,{className:"w-3 h-3"}),c]}),y.jsx("div",{className:"px-4 py-3 text-sm text-slate-200 leading-relaxed",children:h.trim()})]},g)})},i.id)}const a=i.role==="assistant"?kM(i.text):void 0;return y.jsxs("div",{className:be("flex flex-col max-w-[85%]",i.role==="user"?"self-end items-end":"self-start items-start"),children:[y.jsxs("div",{className:be("px-4 py-2 rounded-2xl text-sm leading-relaxed relative group transition-all duration-300",i.role==="user"?"bg-blue-600 text-white rounded-br-none shadow-lg shadow-blue-900/20":i.role==="assistant"?"bg-slate-700 text-slate-100 rounded-bl-none shadow-md":"bg-transparent text-slate-500 italic w-full text-center text-xs"),children:[i.text,i.role==="assistant"&&a&&y.jsxs("div",{className:be("absolute -right-2 -top-2 p-1 rounded-full border shadow-sm scale-0 group-hover:scale-100 transition-transform duration-200",a==="positive"?"bg-green-500/20 border-green-500/50 text-green-400":a==="negative"?"bg-red-500/20 border-red-500/50 text-red-400":"bg-slate-500/20 border-slate-500/50 text-slate-400"),children:[a==="positive"&&y.jsx(Xa,{className:"w-3 h-3"}),a==="negative"&&y.jsx(Hy,{className:"w-3 h-3"}),a==="neutral"&&y.jsx(Ly,{className:"w-3 h-3"})]})]}),i.role!=="system"&&y.jsxs("div",{className:"flex items-center gap-2 mt-1 px-1",children:[y.jsx("span",{className:"text-[10px] text-slate-500",children:i.role==="user"?"Vous":"Emma IA"}),i.role==="assistant"&&y.jsx("span",{className:be("text-[9px] font-medium opacity-60",a==="positive"?"text-green-400":a==="negative"?"text-red-400":"text-slate-500"),children:a==="positive"?"Positif":a==="negative"?"Ngatif":""})]})]},i.id)})})]})};class DM{constructor(e){this.supabase=null,this.config=e,e.supabaseUrl&&e.supabaseKey&&(this.supabase=zv(e.supabaseUrl,e.supabaseKey))}async logSession(e,i){if(!this.supabase){console.warn("Supabase not configured. Skipping log.");return}const r=e.filter(h=>h.role==="user");e.filter(h=>h.role==="assistant");const a=r.length>5?"Positive":"Neutral",l=`Session de ${Math.floor(i/60)} min avec ${e.length} changes.`,{error:c}=await this.supabase.from("chat_logs").insert({date:new Date().toISOString(),duration:`${i}s`,summary:l,sentiment:a,message_count:e.length,transcript:JSON.stringify(e)});c&&console.error("Error logging to Supabase:",c)}async getHistory(){if(!this.supabase)return[{id:"1",date:new Date(Date.now()-864e5).toISOString(),duration:"12m",summary:"Discussion sur le NASDAQ",sentiment:"Positive",messageCount:24},{id:"2",date:new Date(Date.now()-1728e5).toISOString(),duration:"5m",summary:"Question rapide sur l'inflation",sentiment:"Neutral",messageCount:8},{id:"3",date:new Date(Date.now()-2592e5).toISOString(),duration:"22m",summary:"Plainte client service",sentiment:"Critical",messageCount:45}];const{data:e,error:i}=await this.supabase.from("chat_logs").select("*").order("date",{ascending:!1}).limit(10);return i?(console.error("Error fetching history:",i),[]):e}async sendSMS(e){return!this.config.twilioAccountSid||!this.config.twilioAuthToken?(console.log("Mock SMS Sent:",e),!0):(console.log(`Calling Backend to Send SMS to ${this.config.userPhoneNumber}: ${e}`),!0)}async sendEmail(e,i){return this.config.resendApiKey?(console.log(`Calling Backend to Send Email to ${this.config.userEmail}: ${e}`),!0):(console.log("Mock Email Sent:",e),!0)}}const UM=({config:n,onSave:e,onClose:i})=>{const[r,a]=$.useState(n),[l,c]=$.useState("persona"),[h,g]=$.useState([]),[p,_]=$.useState(!1),[x,S]=$.useState("ceo"),[T,w]=$.useState(null),C=new DM(n.integrationConfig),M=new $v(n.integrationConfig);$.useEffect(()=>{l==="history"&&(_(!0),C.getHistory().then(U=>{g(U),_(!1)}))},[l]),$.useEffect(()=>{if(l==="sections"){const U=M.getConfig(x);w(U)}},[l,x]);const D=async()=>{e(r),T&&await M.saveConfig(T),i()},B=U=>{const K=pi.find(G=>G.id===U);K&&a(G=>({...G,systemInstruction:K.systemPrompt,heygenAvatarId:K.avatarId,geminiVoice:K.voiceName}))},I=U=>{switch(U){case"finance":return Ge.professional;case"economy":return Ge.professional;case"politics":return Ge.professional;case"researcher":return Ge.professional;default:return Ge.professional}},z=({id:U,label:K,icon:G})=>y.jsxs("button",{onClick:()=>c(U),className:`flex items-center gap-2 px-4 py-3 text-sm font-medium transition-all whitespace-nowrap border-b-2 ${l===U?"border-blue-500 text-blue-400 bg-slate-800/80":"border-transparent text-slate-400 hover:text-slate-200 hover:bg-slate-800/30"}`,children:[y.jsx(G,{className:"w-4 h-4"}),K]});return y.jsx("div",{className:"fixed inset-0 z-50 bg-slate-950/95 backdrop-blur-md flex items-center justify-center p-4",children:y.jsxs("div",{className:"bg-slate-900 border border-slate-700 w-full max-w-6xl h-[90vh] rounded-2xl shadow-2xl flex flex-col overflow-hidden ring-1 ring-slate-800",children:[y.jsxs("div",{className:"p-6 border-b border-slate-800 flex justify-between items-center bg-slate-900",children:[y.jsxs("div",{children:[y.jsxs("h2",{className:"text-xl font-bold text-white flex items-center gap-2 tracking-tight",children:[y.jsx(yg,{className:"w-5 h-5 text-blue-500"}),"Console Administration"]}),y.jsx("p",{className:"text-slate-500 text-xs mt-1 font-mono uppercase tracking-wider",children:"Financial Grade  V2.2 Enterprise"})]}),y.jsxs("div",{className:"flex gap-3",children:[y.jsx("button",{onClick:i,className:"px-4 py-2 text-slate-400 hover:text-white transition-colors text-sm",children:"Annuler"}),y.jsxs("button",{onClick:D,className:"flex items-center gap-2 px-6 py-2 bg-blue-600 hover:bg-blue-500 text-white rounded-lg font-medium transition-colors shadow-lg shadow-blue-900/20 text-sm",children:[y.jsx(fN,{className:"w-4 h-4"})," Appliquer"]})]})]}),y.jsxs("div",{className:"flex border-b border-slate-800 overflow-x-auto bg-slate-900/50 custom-scrollbar",children:[y.jsx(z,{id:"persona",label:"Persona Hub",icon:Fc}),y.jsx(z,{id:"brain",label:"Cerveau (LLM)",icon:pg}),y.jsx(z,{id:"sections",label:"Configuration par Section",icon:Py}),y.jsx(z,{id:"history",label:"Historique",icon:My}),y.jsx(z,{id:"integration",label:"Intgrations",icon:mg})]}),y.jsxs("div",{className:"flex-1 overflow-y-auto p-6 md:p-8 space-y-8 bg-slate-900 custom-scrollbar",children:[l==="sections"&&T&&y.jsxs("div",{className:"space-y-6 animate-in fade-in",children:[y.jsx("div",{className:"flex gap-4 mb-6 overflow-x-auto pb-2",children:["ceo","critic","finance","researcher","writer","tavus"].map(U=>y.jsx("button",{onClick:()=>S(U),className:`px-4 py-2 rounded-lg text-sm font-bold uppercase tracking-wider border transition-all ${x===U?"bg-blue-600 border-blue-500 text-white":"bg-slate-800 border-slate-700 text-slate-400 hover:bg-slate-700"}`,children:U},U))}),y.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[y.jsxs("div",{className:"space-y-4",children:[y.jsxs("h3",{className:"text-white font-bold flex items-center gap-2",children:[y.jsx(zi,{className:"w-4 h-4 text-purple-400"})," Paramtres Section: ",x.toUpperCase()]}),y.jsxs("div",{children:[y.jsx("label",{className:"text-xs text-slate-400 block mb-1",children:"Nom Affich"}),y.jsx("input",{value:T.name,onChange:U=>w({...T,name:U.target.value}),className:"w-full bg-slate-950 border border-slate-700 rounded p-2 text-white text-sm"})]}),y.jsxs("div",{children:[y.jsx("label",{className:"text-xs text-slate-400 block mb-1",children:"Avatar ID (HeyGen/Tavus)"}),y.jsx("input",{value:T.avatarId,onChange:U=>w({...T,avatarId:U.target.value}),className:"w-full bg-slate-950 border border-slate-700 rounded p-2 text-white text-sm font-mono"})]}),y.jsxs("div",{children:[y.jsx("label",{className:"text-xs text-slate-400 block mb-1",children:"Voix (Gemini/Tavus)"}),y.jsxs("select",{value:T.voiceName,onChange:U=>w({...T,voiceName:U.target.value}),className:"w-full bg-slate-950 border border-slate-700 rounded p-2 text-white text-sm",children:[_g.map(U=>y.jsx("option",{value:U,children:U},U)),y.jsx("option",{value:"natural",children:"Natural (Tavus)"})]})]}),y.jsxs("div",{children:[y.jsxs("label",{className:"text-xs text-slate-400 block mb-1",children:["Temprature (",T.temperature,")"]}),y.jsx("input",{type:"range",min:"0",max:"2",step:"0.1",value:T.temperature,onChange:U=>w({...T,temperature:parseFloat(U.target.value)}),className:"w-full h-2 bg-slate-700 rounded-lg appearance-none cursor-pointer accent-blue-500"})]})]}),y.jsxs("div",{className:"lg:col-span-2",children:[y.jsx("label",{className:"text-xs text-slate-400 block mb-2",children:"System Prompt (Spcifique  cette section)"}),y.jsx("textarea",{value:T.systemPrompt,onChange:U=>w({...T,systemPrompt:U.target.value}),className:"w-full h-96 bg-slate-950 border border-slate-700 rounded-xl p-4 text-sm font-mono text-slate-300 leading-relaxed custom-scrollbar focus:border-blue-500 outline-none",spellCheck:!1})]})]}),y.jsxs("div",{className:"bg-blue-900/20 p-4 rounded-lg border border-blue-500/30 text-xs text-blue-200 flex items-center gap-2",children:[y.jsx(yg,{className:"w-4 h-4"}),"Les modifications sauvegardes ici seront persistes dans la base de donnes Supabase (Table: section_configs)."]})]}),l==="persona"&&y.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 animate-in fade-in",children:pi.map(U=>y.jsxs("div",{onClick:()=>B(U.id),className:`p-6 rounded-xl border-2 cursor-pointer transition-all hover:scale-[1.02] group relative overflow-hidden flex flex-col ${r.geminiVoice===U.voiceName?"border-blue-500 bg-blue-900/10":"border-slate-700 bg-slate-800/40 hover:border-slate-600"}`,children:[r.geminiVoice===U.voiceName&&y.jsx("div",{className:"absolute top-0 right-0 p-2 bg-blue-600 rounded-bl-xl shadow-lg",children:y.jsx(Ny,{className:"w-4 h-4 text-white"})}),y.jsxs("div",{className:"flex flex-col items-center gap-4 mb-4 text-center",children:[y.jsx("div",{className:"w-20 h-20 rounded-full border-2 border-slate-600 overflow-hidden shadow-lg group-hover:border-blue-400 transition-colors",children:y.jsx("img",{src:I(U.id),alt:U.name,className:"w-full h-full object-cover"})}),y.jsxs("div",{children:[y.jsx("h3",{className:"font-bold text-white group-hover:text-blue-400 transition-colors text-lg leading-tight",children:U.name}),y.jsx("p",{className:"text-xs text-slate-400 mt-1",children:U.role})]})]}),y.jsx("div",{className:"bg-slate-950/50 p-3 rounded-lg border border-slate-800 mb-4 flex-1",children:y.jsx("p",{className:"text-xs text-slate-300 leading-relaxed",children:U.description})}),y.jsxs("div",{className:"flex items-center justify-between mt-auto pt-2 border-t border-slate-800/50 w-full",children:[y.jsxs("div",{className:"text-[10px] text-slate-500 font-mono flex items-center gap-1",children:[y.jsx(Fc,{className:"w-3 h-3"})," ",U.avatarId.split("-")[0]]}),y.jsxs("div",{className:"text-[10px] text-slate-500 font-mono flex items-center gap-1",children:[y.jsx(wN,{className:"w-3 h-3"})," ",U.voiceName]})]})]},U.id))}),l==="history"&&y.jsxs("div",{className:"animate-in fade-in space-y-4",children:[y.jsxs("div",{className:"flex justify-between items-center mb-4",children:[y.jsx("h3",{className:"text-lg font-medium text-white",children:"Historique des Sessions"}),p&&y.jsx("div",{className:"text-xs text-blue-400 animate-pulse",children:"Chargement..."})]}),y.jsx("div",{className:"bg-slate-800/40 rounded-xl border border-slate-700 overflow-hidden",children:y.jsxs("table",{className:"w-full text-left text-sm text-slate-300",children:[y.jsx("thead",{className:"bg-slate-900/50 text-slate-400 font-medium uppercase text-xs",children:y.jsxs("tr",{children:[y.jsx("th",{className:"px-6 py-3",children:"Date"}),y.jsx("th",{className:"px-6 py-3",children:"Dure"}),y.jsx("th",{className:"px-6 py-3",children:"Rsum"}),y.jsx("th",{className:"px-6 py-3",children:"Sentiment"}),y.jsx("th",{className:"px-6 py-3",children:"Messages"})]})}),y.jsx("tbody",{className:"divide-y divide-slate-700/50",children:h.map(U=>y.jsxs("tr",{className:"hover:bg-slate-700/20 transition-colors",children:[y.jsx("td",{className:"px-6 py-4 font-mono text-xs text-slate-500",children:new Date(U.date).toLocaleDateString()}),y.jsx("td",{className:"px-6 py-4",children:U.duration}),y.jsx("td",{className:"px-6 py-4 max-w-xs truncate",children:U.summary}),y.jsx("td",{className:"px-6 py-4",children:y.jsx("span",{className:`px-2 py-1 rounded-full text-[10px] font-bold ${U.sentiment==="Positive"?"bg-green-500/20 text-green-400":U.sentiment==="Critical"?"bg-red-500/20 text-red-400":"bg-slate-500/20 text-slate-400"}`,children:U.sentiment})}),y.jsx("td",{className:"px-6 py-4",children:U.messageCount})]},U.id))})]})})]}),l==="integration"&&y.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8 animate-in fade-in",children:y.jsxs("div",{className:"space-y-4",children:[y.jsxs("h3",{className:"text-white font-medium flex items-center gap-2",children:[y.jsx(mg,{className:"w-4 h-4 text-green-500"})," Supabase (Database)"]}),y.jsxs("div",{className:"space-y-3",children:[y.jsx("input",{type:"text",placeholder:"Supabase URL",value:r.integrationConfig.supabaseUrl,onChange:U=>a({...r,integrationConfig:{...r.integrationConfig,supabaseUrl:U.target.value}}),className:"w-full bg-slate-950 border border-slate-700 rounded-lg px-4 py-2 text-sm focus:border-green-500 outline-none"}),y.jsx("input",{type:"password",placeholder:"Supabase Anon Key",value:r.integrationConfig.supabaseKey,onChange:U=>a({...r,integrationConfig:{...r.integrationConfig,supabaseKey:U.target.value}}),className:"w-full bg-slate-950 border border-slate-700 rounded-lg px-4 py-2 text-sm focus:border-green-500 outline-none"})]})]})}),l==="brain"&&y.jsx("div",{className:"space-y-6 animate-in fade-in",children:y.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[y.jsx("div",{className:"space-y-6",children:y.jsxs("div",{className:"bg-slate-800/40 p-5 rounded-xl border border-slate-700",children:[y.jsxs("h3",{className:"text-sm font-semibold text-slate-300 uppercase tracking-wider mb-4 flex items-center gap-2",children:[y.jsx(Iy,{className:"w-4 h-4"})," Modle & Crativit"]}),y.jsxs("div",{className:"space-y-4",children:[y.jsxs("div",{children:[y.jsx("label",{className:"block text-xs font-medium text-slate-400 mb-2",children:"Modle Actif"}),y.jsxs("select",{value:r.llmModel,onChange:U=>a({...r,llmModel:U.target.value}),className:"w-full bg-slate-950 border border-slate-700 rounded-lg px-3 py-2 text-sm focus:border-blue-500 outline-none text-white",children:[y.jsx("option",{value:Vs,children:"Gemini 2.5 Flash"}),y.jsx("option",{value:zy,children:"Gemini 2.0 Pro"})]})]}),y.jsxs("div",{children:[y.jsx("label",{className:"block text-xs font-medium text-slate-400 mb-2",children:"Voix Gemini"}),y.jsx("select",{value:r.geminiVoice,onChange:U=>a({...r,geminiVoice:U.target.value}),className:"w-full bg-slate-950 border border-slate-700 rounded-lg px-3 py-2 text-sm focus:border-blue-500 outline-none text-white",children:_g.map(U=>y.jsx("option",{value:U,children:U},U))})]}),y.jsxs("div",{children:[y.jsxs("label",{className:"block text-xs font-medium text-slate-400 mb-2 flex justify-between",children:[y.jsx("span",{children:"Temprature"}),y.jsx("span",{className:"text-blue-400 font-mono",children:r.llmTemperature})]}),y.jsx("input",{type:"range",min:"0",max:"2",step:"0.1",value:r.llmTemperature,onChange:U=>a({...r,llmTemperature:parseFloat(U.target.value)}),className:"w-full h-2 bg-slate-700 rounded-lg appearance-none cursor-pointer accent-blue-500"})]})]})]})}),y.jsxs("div",{className:"lg:col-span-2 bg-slate-800/40 p-5 rounded-xl border border-slate-700 flex flex-col h-full",children:[y.jsxs("h3",{className:"text-sm font-semibold text-slate-300 uppercase tracking-wider mb-4 flex items-center gap-2",children:[y.jsx(pg,{className:"w-4 h-4"})," System Instructions (Dfaut)"]}),y.jsx("textarea",{value:r.systemInstruction,onChange:U=>a({...r,systemInstruction:U.target.value}),className:"flex-1 w-full bg-slate-950/50 border border-slate-700 rounded-lg p-4 text-sm font-mono text-slate-300 focus:border-blue-500 outline-none resize-none leading-relaxed",spellCheck:!1})]})]})})]})]})})},Qv=({personalityData:n,contextItems:e,isLoading:i})=>{const[r,a]=$.useState("context"),l=$.useRef(null);$.useEffect(()=>{r==="context"&&l.current&&(l.current.scrollTop=0)},[e,r]);const c=p=>p<30?"text-green-400 bg-green-500/20 border-green-500/30":p<60?"text-blue-400 bg-blue-500/20 border-blue-500/30":p<80?"text-orange-400 bg-orange-500/20 border-orange-500/30":"text-red-400 bg-red-500/20 border-red-500/30",h=p=>{if(!p)return"bg-slate-700 text-slate-300";const _=p.toLowerCase();return _.includes("tech")||_.includes("ai")?"bg-blue-600/20 text-blue-300 border-blue-500/30":_.includes("ner")||_.includes("oil")?"bg-yellow-600/20 text-yellow-300 border-yellow-500/30":_.includes("bourse")||_.includes("fi")?"bg-green-600/20 text-green-300 border-green-500/30":_.includes("pol")||_.includes("go")?"bg-red-600/20 text-red-300 border-red-500/30":_.includes("cryp")?"bg-purple-600/20 text-purple-300 border-purple-500/30":"bg-slate-700 text-slate-300"},g=({status:p})=>{if(!p)return null;const _=p.toLowerCase().includes("vrifi")||p.toLowerCase().includes("interne");return y.jsxs("div",{className:be("flex items-center gap-1 text-[9px] font-bold px-1.5 py-0.5 rounded border uppercase tracking-wider",_?"bg-green-500/10 text-green-400 border-green-500/30":"bg-yellow-500/10 text-yellow-400 border-yellow-500/30"),children:[_?y.jsx(Vy,{className:"w-3 h-3"}):y.jsx(Za,{className:"w-3 h-3"}),p]})};return y.jsxs("div",{className:"w-full h-full flex flex-col shadow-2xl animate-in slide-in-from-right duration-500 z-40 bg-transparent",children:[y.jsxs("div",{className:"flex border-b border-slate-800 bg-slate-950/80",children:[y.jsxs("button",{onClick:()=>a("context"),className:be("flex-1 py-4 text-xs font-bold uppercase tracking-wider flex items-center justify-center gap-2 transition-all",r==="context"?"text-blue-400 border-b-2 border-blue-500 bg-blue-500/10":"text-slate-500 hover:text-slate-300"),children:[y.jsx(qy,{className:"w-4 h-4"})," Flux Live"]}),y.jsxs("button",{onClick:()=>a("psych"),className:be("flex-1 py-4 text-xs font-bold uppercase tracking-wider flex items-center justify-center gap-2 transition-all",r==="psych"?"text-purple-400 border-b-2 border-purple-500 bg-purple-500/10":"text-slate-500 hover:text-slate-300"),children:[y.jsx(Ya,{className:"w-4 h-4"})," Perception"]})]}),y.jsxs("div",{className:"flex-1 overflow-y-auto p-4 space-y-6 custom-scrollbar",ref:l,children:[r==="context"&&y.jsxs("div",{className:"space-y-4",children:[e.length===0&&y.jsxs("div",{className:"flex flex-col items-center justify-center h-64 text-slate-600 opacity-60",children:[y.jsx(yd,{className:"w-12 h-12 mb-3 animate-pulse"}),y.jsx("p",{className:"text-xs font-mono uppercase",children:"En attente de donnes..."}),y.jsx("p",{className:"text-[10px] mt-1",children:"L'IA scanne le contexte en temps rel"})]}),e.map((p,_)=>{var S;let x=((S=p.metadata)==null?void 0:S.verificationStatus)||"Estimation";return y.jsxs("div",{className:be("bg-slate-800/40 rounded-xl border overflow-hidden animate-in fade-in slide-in-from-right duration-500 transition-all hover:border-slate-500/50 group",_===0?"border-blue-500/50 shadow-lg shadow-blue-900/10 ring-1 ring-blue-500/20":"border-slate-700/50 opacity-80"),children:[y.jsxs("div",{className:"px-3 py-2 bg-slate-900/40 border-b border-slate-700/50 flex items-center justify-between",children:[y.jsxs("div",{className:"flex items-center gap-2",children:[y.jsx("span",{className:be("w-1.5 h-1.5 rounded-full",_===0?"bg-blue-400 animate-pulse":"bg-slate-600")}),y.jsx("span",{className:be("text-[10px] font-bold px-2 py-0.5 rounded uppercase",p.type==="news"?"text-red-300":p.type==="chart"?"text-green-300":"text-blue-300"),children:p.type})]}),y.jsx("span",{className:"text-[9px] text-slate-500 font-mono",children:p.timestamp.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit",second:"2-digit"})})]}),y.jsxs("div",{className:"p-3",children:[y.jsx("h4",{className:"text-sm font-medium text-slate-100 mb-2 leading-tight",children:p.title}),y.jsxs("div",{className:"flex items-center gap-2 mb-3 flex-wrap",children:[p.topic&&y.jsxs("div",{className:be("text-[9px] font-bold px-1.5 py-0.5 rounded border uppercase tracking-wider flex items-center gap-1",h(p.topic)),children:[y.jsx(RN,{className:"w-2.5 h-2.5"})," ",p.topic]}),y.jsx(g,{status:x})]}),p.type==="chart"&&y.jsxs("div",{className:"relative",children:[y.jsx("div",{className:"h-24 w-full flex items-end justify-between gap-1 px-1 border-b border-l border-slate-700/50",children:[35,50,45,70,60,85,80,95].map((T,w)=>y.jsxs("div",{className:"flex-1 bg-green-500/20 group-hover:bg-green-500/40 transition-all rounded-t-sm relative group/bar",children:[y.jsx("div",{className:"absolute bottom-0 w-full bg-green-500/50 h-0 transition-all duration-1000 group-hover/bar:h-full",style:{height:`${T}%`}}),y.jsx("div",{className:"w-full h-full bg-green-500/20",style:{height:`${T}%`}})]},w))}),y.jsxs("div",{className:"text-[9px] text-slate-500 mt-1 flex justify-between",children:[y.jsx("span",{children:"OPEN"}),y.jsx("span",{children:"CLOSE"})]})]}),p.type==="news"&&y.jsxs("div",{className:"flex flex-col gap-2",children:[y.jsx("p",{className:"text-xs text-slate-300 leading-relaxed line-clamp-4",children:p.content}),p.url&&y.jsxs("a",{href:p.url,target:"_blank",rel:"noopener noreferrer",className:"flex items-center gap-3 mt-2 pt-2 border-t border-slate-700/50 text-blue-400 hover:text-blue-300 transition-all group/link bg-slate-800/30 hover:bg-slate-800/60 p-2 rounded-lg",children:[y.jsx("div",{className:"bg-blue-500/10 p-1.5 rounded-md group-hover/link:bg-blue-500/20 transition-colors",children:y.jsx(UA,{className:"w-3.5 h-3.5"})}),y.jsxs("div",{className:"flex flex-col overflow-hidden",children:[y.jsx("span",{className:"text-[9px] font-bold uppercase tracking-wider text-slate-500 group-hover/link:text-blue-400 transition-colors",children:"Source Externe"}),y.jsx("span",{className:"text-[10px] truncate w-full opacity-70 group-hover/link:opacity-100 font-mono",children:p.url})]})]})]}),p.type==="citation"&&y.jsxs("div",{className:"flex gap-3 bg-slate-900/30 p-2 rounded border border-slate-700/30",children:[y.jsx(uN,{className:"w-4 h-4 text-slate-600 shrink-0"}),y.jsxs("p",{className:"text-xs text-slate-300 italic font-serif",children:['"',p.content,'"']})]})]})]},p.id)})]}),r==="psych"&&n&&y.jsxs("div",{className:"space-y-6 animate-in fade-in",children:[y.jsxs("div",{className:"bg-slate-800/40 rounded-xl p-4 border border-slate-700/50",children:[y.jsx("div",{className:"text-[10px] text-slate-500 uppercase mb-2 font-bold tracking-wider",children:"Analyse Psychomtrique"}),y.jsxs("p",{className:"text-sm text-slate-300 italic",children:['"',n.summary,'"']})]}),y.jsxs("div",{children:[y.jsxs("div",{className:"flex justify-between text-xs text-slate-400 mb-1",children:[y.jsx("span",{children:"Aversion au risque"}),y.jsxs("span",{className:c(n.riskScore).split(" ")[0],children:[n.riskScore,"/100"]})]}),y.jsx("div",{className:"h-1.5 bg-slate-800 rounded-full overflow-hidden",children:y.jsx("div",{className:"h-full bg-gradient-to-r from-green-500 to-red-500",style:{width:`${n.riskScore}%`}})})]}),y.jsx("div",{className:"grid grid-cols-1 gap-2",children:n.keyTraits.map(p=>y.jsxs("div",{className:"flex items-center gap-2 text-xs text-slate-300 bg-slate-800/30 px-3 py-2 rounded border border-slate-700/30",children:[y.jsx(qN,{className:"w-3 h-3 text-purple-400"})," ",p]},p))})]})]})]})},PM=({state:n,temperature:e,latencyMs:i,isSpeaking:r})=>{const a=n===et.CONNECTED;return y.jsxs("div",{className:"flex items-center gap-3 bg-slate-900/80 backdrop-blur border border-slate-700/50 rounded-full px-4 py-1.5 shadow-lg",children:[y.jsxs("div",{className:"flex items-center gap-2 pr-3 border-r border-slate-700/50",children:[y.jsx("div",{className:be("w-2 h-2 rounded-full",a?r?"bg-green-500 animate-pulse":"bg-blue-500":"bg-slate-500")}),y.jsx("span",{className:"text-[10px] font-bold text-slate-300 uppercase tracking-wide",children:a?r?"SPEAKING":"LISTENING":"OFFLINE"})]}),y.jsxs("div",{className:"flex items-center gap-1.5 text-[10px] text-slate-400 font-mono",children:[y.jsx(zN,{className:"w-3 h-3"}),a?`${i}ms`:"--"]}),y.jsxs("div",{className:"flex items-center gap-1.5 text-[10px] text-slate-400 font-mono pl-2",children:[y.jsx(IN,{className:"w-3 h-3 text-orange-400"}),e.toFixed(1)]})]})},Yg={TrendingUp:Xa,Newspaper:eN,ShieldAlert:bN,Mail:_d,Zap:js,Briefcase:Ay,Search:Gy,Smile:AN},OM=({actions:n,onAction:e,onUpdateActions:i})=>{const[r,a]=$.useState("main"),[l,c]=$.useState(!1),h=_=>{i(n.filter(x=>x.id!==_))},g=_=>{const x={..._,id:Date.now().toString()};i([...n,x]),c(!1)},p=()=>{const _=prompt("Entrez la commande  envoyer  l'IA :");if(!_)return;const x=prompt("Nom du bouton (Court) :")||"Custom",S={id:Date.now().toString(),label:x,command:_,icon:"Zap"};i([...n,S]),c(!1)};return r==="email"?y.jsxs("div",{className:"flex gap-2 w-full max-w-2xl px-4 mb-2 animate-in slide-in-from-bottom-2 fade-in duration-300",children:[y.jsx("button",{onClick:()=>a("main"),className:"p-3 rounded-xl bg-slate-800/80 border border-slate-700 hover:bg-slate-700 text-slate-300 transition-colors",title:"Retour",children:y.jsx(On,{className:"w-4 h-4"})}),y.jsxs("button",{onClick:()=>{e("OPEN_EMAIL_MODAL"),a("main")},className:"flex-1 flex items-center justify-center gap-2 px-4 py-3 bg-blue-600/20 hover:bg-blue-600/30 border border-blue-500/50 text-blue-300 rounded-xl transition-all text-sm font-medium shadow-lg hover:shadow-blue-900/20",children:[y.jsx(_d,{className:"w-4 h-4"})," Rsum de Courriel"]}),y.jsxs("button",{onClick:()=>{e("Je voudrais que tu m'aides  rdiger une rponse  un courriel professionnel. Pose-moi des questions sur le contexte et le destinataire."),a("main")},className:"flex-1 flex items-center justify-center gap-2 px-4 py-3 bg-purple-600/20 hover:bg-purple-600/30 border border-purple-500/50 text-purple-300 rounded-xl transition-all text-sm font-medium shadow-lg hover:shadow-purple-900/20",children:[y.jsx(Ay,{className:"w-4 h-4"})," Rdiger Rponse"]})]}):r==="config"?y.jsx("div",{className:"w-full max-w-2xl px-4 animate-in fade-in zoom-in-95 duration-300",children:y.jsxs("div",{className:"bg-slate-900/90 border border-slate-700 rounded-2xl p-4 shadow-2xl backdrop-blur-md",children:[y.jsxs("div",{className:"flex justify-between items-center mb-4 pb-2 border-b border-slate-700",children:[y.jsxs("h3",{className:"text-sm font-bold text-white flex items-center gap-2",children:[y.jsx($c,{className:"w-4 h-4 text-blue-400"})," Personnaliser les Actions"]}),y.jsx("button",{onClick:()=>a("main"),className:"text-xs bg-slate-800 px-3 py-1 rounded-full text-slate-300 hover:bg-slate-700",children:"Terminer"})]}),y.jsxs("div",{className:"grid grid-cols-2 gap-3 mb-4",children:[n.map(_=>{const x=Yg[_.icon]||js;return y.jsxs("div",{className:"flex items-center justify-between p-2 bg-slate-800 rounded-lg border border-slate-700 group",children:[y.jsxs("div",{className:"flex items-center gap-2",children:[y.jsx(x,{className:"w-4 h-4 text-slate-400"}),y.jsx("span",{className:"text-xs text-slate-200",children:_.label})]}),y.jsx("button",{onClick:()=>h(_.id),className:"p-1 hover:bg-red-500/20 rounded text-slate-500 hover:text-red-400 transition-colors",children:y.jsx(DN,{className:"w-3.5 h-3.5"})})]},_.id)}),n.length<4&&y.jsxs("button",{onClick:()=>c(!0),className:"flex items-center justify-center gap-2 p-2 border border-dashed border-slate-600 rounded-lg text-xs text-slate-400 hover:text-blue-400 hover:border-blue-500/50 transition-colors",children:[y.jsx(aN,{className:"w-4 h-4"})," Ajouter"]})]}),l&&y.jsxs("div",{className:"bg-slate-950 p-3 rounded-xl border border-slate-800 animate-in slide-in-from-top-2",children:[y.jsx("div",{className:"text-[10px] text-slate-500 uppercase font-bold mb-2",children:"Choisir un Preset"}),y.jsx("div",{className:"grid grid-cols-2 gap-2 mb-3",children:WN.map(_=>y.jsx("button",{onClick:()=>g(_),className:"text-left text-xs p-2 bg-slate-900 hover:bg-slate-800 rounded border border-slate-800 text-slate-300",children:_.label},_.id))}),y.jsx("button",{onClick:p,className:"w-full py-2 bg-blue-600/20 text-blue-300 border border-blue-500/30 rounded text-xs font-medium hover:bg-blue-600/30",children:"+ Crer commande personnalise"})]})]})}):y.jsxs("div",{className:"flex gap-3 w-full max-w-2xl px-4 animate-in slide-in-from-bottom-4 fade-in duration-500",children:[y.jsx("div",{className:"grid grid-cols-4 gap-3 flex-1",children:n.map(_=>{const x=Yg[_.icon]||js;return y.jsxs("button",{onClick:()=>{_.command==="OPEN_EMAIL_MODAL"?a("email"):e(_.command)},className:be("flex items-center justify-center gap-2 px-2 py-3 border rounded-xl transition-all text-xs font-medium backdrop-blur-sm shadow-sm hover:shadow-md",_.isSystem?"bg-gradient-to-r from-slate-800 to-slate-700 hover:from-slate-700 hover:to-slate-600 border-slate-600 text-white":"bg-slate-800/60 hover:bg-slate-700 border-slate-700 text-slate-300"),children:[y.jsx(x,{className:be("w-3.5 h-3.5",_.label==="Marchs"?"text-green-400":_.label==="Actualits"?"text-blue-400":_.label==="Risques"?"text-orange-400":"text-slate-200")}),y.jsx("span",{className:"truncate",children:_.label})]},_.id)})}),y.jsx("button",{onClick:()=>a("config"),className:"p-3 bg-slate-900/50 hover:bg-slate-800 border border-slate-800 hover:border-slate-600 rounded-xl text-slate-500 hover:text-white transition-colors",title:"Configurer les boutons",children:y.jsx($c,{className:"w-4 h-4"})})]})},LM=({onClose:n,onProcess:e})=>{const[i,r]=$.useState(""),a=l=>{l.preventDefault(),i.trim()&&e(i)};return y.jsx("div",{className:"fixed inset-0 z-[60] flex items-center justify-center p-4 bg-black/60 backdrop-blur-sm animate-in fade-in duration-200",children:y.jsxs("div",{className:"w-full max-w-2xl bg-slate-900 border border-slate-700 rounded-2xl shadow-2xl overflow-hidden ring-1 ring-slate-800 animate-in zoom-in-95 duration-200",children:[y.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-slate-800 bg-slate-900/50",children:[y.jsxs("h3",{className:"text-lg font-semibold text-white flex items-center gap-2",children:[y.jsx(ky,{className:"w-5 h-5 text-blue-500"}),"Analyse de Courriel / Document"]}),y.jsx("button",{onClick:n,className:"p-2 text-slate-400 hover:text-white rounded-full hover:bg-slate-800 transition-colors",children:y.jsx(xd,{className:"w-5 h-5"})})]}),y.jsxs("form",{onSubmit:a,className:"p-6 space-y-4",children:[y.jsx("p",{className:"text-sm text-slate-400",children:"Collez le contenu du courriel ou du document ci-dessous. Chlo l'analysera, en fera un rsum et proposera des actions."}),y.jsx("textarea",{value:i,onChange:l=>r(l.target.value),placeholder:"Collez le texte ici...",className:"w-full h-64 bg-slate-950 border border-slate-700 rounded-xl p-4 text-sm text-slate-300 focus:border-blue-500 focus:ring-1 focus:ring-blue-500 outline-none resize-none font-mono leading-relaxed custom-scrollbar",autoFocus:!0}),y.jsxs("div",{className:"flex justify-end gap-3 pt-2",children:[y.jsx("button",{type:"button",onClick:n,className:"px-4 py-2 text-sm font-medium text-slate-400 hover:text-white transition-colors",children:"Annuler"}),y.jsxs("button",{type:"submit",disabled:!i.trim(),className:"flex items-center gap-2 px-6 py-2 bg-blue-600 hover:bg-blue-500 disabled:opacity-50 disabled:cursor-not-allowed text-white rounded-lg font-medium transition-colors shadow-lg shadow-blue-900/20",children:[y.jsx(Ks,{className:"w-4 h-4"})," Analyser"]})]})]})]})})},qM=({startTime:n,stats:e})=>{const[i,r]=$.useState("00:00");return $.useEffect(()=>{if(!n)return;const a=setInterval(()=>{const c=Math.floor((new Date().getTime()-n.getTime())/1e3),h=Math.floor(c/60).toString().padStart(2,"0"),g=(c%60).toString().padStart(2,"0");r(`${h}:${g}`)},1e3);return()=>clearInterval(a)},[n]),n?y.jsxs("div",{className:"flex items-center gap-4 bg-slate-900/80 backdrop-blur border border-slate-700/50 rounded-full px-4 py-1.5 shadow-lg",children:[y.jsxs("div",{className:"flex items-center gap-2 border-r border-slate-700/50 pr-4",children:[y.jsx(My,{className:"w-3 h-3 text-slate-400"}),y.jsx("span",{className:"text-xs font-mono text-slate-200",children:i})]}),y.jsxs("div",{className:"flex items-center gap-3 text-[10px] font-mono",children:[y.jsxs("div",{className:"flex items-center gap-1 text-blue-300",children:[y.jsx(VN,{className:"w-3 h-3"}),y.jsxs("span",{children:["MOI: ",e.userTime,"s"]})]}),y.jsxs("div",{className:"flex items-center gap-1 text-purple-300",children:[y.jsx(Qa,{className:"w-3 h-3"}),y.jsxs("span",{children:["IA: ",Object.values(e.aiTime).reduce((a,l)=>a+l,0),"s"]})]})]})]}):null},BM=({suggestions:n,onSelect:e})=>n.length===0?null:y.jsx("div",{className:"w-full max-w-2xl px-4 flex gap-3 overflow-x-auto pb-2 animate-in slide-in-from-bottom-4 fade-in duration-700 custom-scrollbar",children:n.map(i=>y.jsxs("button",{onClick:()=>e(i),className:"flex-shrink-0 bg-slate-800/80 hover:bg-slate-700 border border-slate-600/50 hover:border-blue-500/50 rounded-xl p-3 flex flex-col gap-2 w-64 text-left transition-all group backdrop-blur-sm shadow-lg",children:[y.jsxs("div",{className:"flex items-center justify-between w-full",children:[y.jsx("span",{className:`text-[10px] font-bold px-1.5 py-0.5 rounded uppercase tracking-wider ${i.type==="news"?"bg-red-500/20 text-red-300":"bg-yellow-500/20 text-yellow-300"}`,children:i.category}),y.jsx(wy,{className:"w-3 h-3 text-slate-500 group-hover:text-blue-400 -translate-x-2 group-hover:translate-x-0 transition-transform opacity-0 group-hover:opacity-100"})]}),y.jsx("p",{className:"text-xs text-slate-200 font-medium leading-relaxed line-clamp-2",children:i.text})]},i.id))}),Xv=({onClose:n})=>{wc.find(r=>r.type==="core");const e=wc.filter(r=>r.type==="avatar"),i=wc.filter(r=>r.type==="tool");return y.jsxs("div",{className:"fixed inset-0 z-[60] bg-slate-950/95 backdrop-blur-xl flex items-center justify-center p-4 overflow-hidden",children:[y.jsx("button",{onClick:n,className:"absolute top-6 right-6 text-slate-400 hover:text-white transition-colors",children:"Fermer"}),y.jsxs("div",{className:"w-full max-w-7xl h-full flex flex-col items-center justify-center relative",children:[y.jsxs("h2",{className:"text-3xl font-black text-white mb-10 tracking-tighter uppercase flex items-center gap-3",children:[y.jsx(Ya,{className:"w-8 h-8 text-blue-500"})," Architecture Neurale Chlo.AI"]}),y.jsxs("div",{className:"relative w-full h-[600px] flex items-center justify-center",children:[y.jsxs("div",{className:"absolute z-20 w-48 h-48 bg-blue-600 rounded-full flex flex-col items-center justify-center shadow-[0_0_60px_rgba(37,99,235,0.4)] animate-pulse-slow border-4 border-blue-400/30",children:[y.jsx("span",{className:"text-4xl mb-2",children:""}),y.jsx("span",{className:"font-bold text-white text-lg",children:"GEMINI 2.5"}),y.jsx("span",{className:"text-xs text-blue-200 uppercase tracking-widest mt-1",children:"Cerveau Central"})]}),e.map((r,a)=>{const l=a/e.length*Math.PI*2,c=280,h=Math.cos(l)*c,g=Math.sin(l)*c;return y.jsxs("div",{className:"absolute flex flex-col items-center group cursor-pointer hover:scale-110 transition-transform duration-300 z-10",style:{transform:`translate(${h}px, ${g}px)`},children:[y.jsx("div",{className:`w-20 h-20 rounded-2xl ${r.color} flex items-center justify-center shadow-lg mb-2 text-2xl`,children:""}),y.jsx("div",{className:"bg-slate-900/80 px-3 py-1 rounded text-xs font-bold text-white border border-slate-700 whitespace-nowrap",children:r.label}),y.jsx("div",{className:"absolute w-1 h-[200px] bg-gradient-to-t from-transparent to-blue-500/20 -z-10 bottom-10 origin-bottom",style:{transform:`rotate(${l+Math.PI/2}rad)`}})]},r.id)}),y.jsx("div",{className:"absolute bottom-0 flex gap-6",children:i.map(r=>y.jsxs("div",{className:"flex flex-col items-center opacity-80 hover:opacity-100 transition-opacity",children:[y.jsx("div",{className:`w-12 h-12 rounded-lg ${r.color} flex items-center justify-center mb-2 shadow-md`,children:""}),y.jsx("span",{className:"text-[10px] uppercase font-bold text-slate-400",children:r.label})]},r.id))})]}),y.jsxs("div",{className:"absolute bottom-10 flex items-center gap-2 text-xs text-slate-500",children:[y.jsx(Uy,{className:"w-4 h-4"}),y.jsx("span",{children:"Tous les modules sont connects au Core via l'API Live bidirectionnelle."})]})]})]})},GM=({onSelect:n,onOpenDevGuide:e,onOpenGallery:i,customImages:r})=>{const[a,l]=Qg.useState(!1),c=({mode:h,title:g,desc:p,icon:_,image:x,delay:S,filterClass:T})=>y.jsxs("button",{onClick:()=>n(h),className:be("group relative h-80 rounded-3xl overflow-hidden transition-all duration-500 hover:scale-[1.02] shadow-2xl border border-white/10 hover:border-white/30",S),children:[y.jsxs("div",{className:"absolute inset-0",children:[y.jsx("img",{src:x,alt:g,className:be("w-full h-full object-cover transition-transform duration-700 group-hover:scale-110",T)}),y.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-slate-950 via-slate-950/60 to-transparent opacity-90 group-hover:opacity-80 transition-opacity"})]}),y.jsxs("div",{className:"absolute inset-0 p-6 flex flex-col justify-end items-start text-left z-10",children:[y.jsx("div",{className:"w-12 h-12 rounded-2xl bg-white/10 backdrop-blur-md flex items-center justify-center mb-4 border border-white/10 group-hover:bg-blue-600 group-hover:border-blue-500 transition-colors",children:y.jsx(_,{className:"w-6 h-6 text-white"})}),y.jsx("h3",{className:"text-2xl font-bold text-white mb-2 leading-tight group-hover:text-blue-200 transition-colors",children:g}),y.jsx("p",{className:"text-sm text-slate-300 line-clamp-2 opacity-80 group-hover:opacity-100 mb-4 font-light",children:p}),y.jsxs("div",{className:"flex items-center gap-2 text-xs font-bold uppercase tracking-widest text-blue-400 opacity-0 group-hover:opacity-100 transform translate-y-4 group-hover:translate-y-0 transition-all duration-300",children:["Commencer ",y.jsx(wy,{className:"w-3 h-3"})]})]})]});return y.jsxs("div",{className:"min-h-screen relative flex flex-col p-4 md:p-8 overflow-y-auto custom-scrollbar",children:[a&&y.jsx(Xv,{onClose:()=>l(!1)}),y.jsxs("div",{className:"relative z-10 flex flex-col md:flex-row justify-between items-center mb-12 animate-in fade-in slide-in-from-top-10 duration-1000 mt-8 max-w-7xl mx-auto w-full",children:[y.jsxs("div",{className:"text-center md:text-left mb-6 md:mb-0",children:[y.jsx("h1",{className:"text-5xl md:text-7xl font-black text-transparent bg-clip-text bg-gradient-to-r from-white via-blue-200 to-slate-400 mb-2 tracking-tighter",children:"Emma IA"}),y.jsx("p",{className:"text-lg text-blue-200/60 font-light max-w-xl",children:"Plateforme d'Intelligence Financire Multimodale"})]}),y.jsxs("div",{className:"flex gap-4",children:[y.jsxs("button",{onClick:i,className:"flex items-center gap-2 px-5 py-3 rounded-full bg-white/5 hover:bg-white/10 border border-white/10 backdrop-blur-md transition-all hover:scale-105 group",children:[y.jsx(Bn,{className:"w-5 h-5 text-blue-400 group-hover:scale-110 transition-transform"}),y.jsx("span",{className:"text-sm font-medium text-slate-200",children:"Galerie"})]}),y.jsxs("button",{onClick:e,className:"flex items-center gap-2 px-5 py-3 rounded-full bg-white/5 hover:bg-white/10 border border-white/10 backdrop-blur-md transition-all hover:scale-105 group",children:[y.jsx(Cy,{className:"w-5 h-5 text-purple-400 group-hover:scale-110 transition-transform"}),y.jsx("span",{className:"text-sm font-medium text-slate-200",children:"Guide"})]}),y.jsxs("button",{onClick:()=>l(!0),className:"flex items-center gap-2 px-5 py-3 rounded-full bg-white/5 hover:bg-white/10 border border-white/10 backdrop-blur-md transition-all hover:scale-105 group",children:[y.jsx(Ya,{className:"w-5 h-5 text-blue-400 group-hover:rotate-180 transition-transform duration-700"}),y.jsx("span",{className:"text-sm font-medium text-slate-200",children:"Architecture"})]})]})]}),y.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4 w-full max-w-7xl mx-auto pb-12",children:[y.jsx(c,{mode:"text-chat",title:"Chat Expert",desc:"Analyse textuelle profonde avec Gemini 2.0 Pro.",icon:Oy,image:r.finance||Ge.professional,delay:"animate-in fade-in slide-in-from-bottom-4 duration-700",filterClass:"grayscale group-hover:grayscale-0"}),y.jsx(c,{mode:"avatar-hybrid",title:"Live Vocal",desc:"Communication vocale avec HeyGen & Akool.",icon:QA,image:r.finance||Ge.natural,delay:"animate-in fade-in slide-in-from-bottom-4 duration-700 delay-100",filterClass:"grayscale-0"}),y.jsx(c,{mode:"tavus-video",title:"Emma Naturelle",desc:"Vido native bidirectionnelle. Empathie maximale.",icon:jy,image:r.tavus||Ge.natural,delay:"animate-in fade-in slide-in-from-bottom-4 duration-700 delay-200",filterClass:"grayscale-0 contrast-110"}),y.jsx(c,{mode:"ceo-mode",title:"CEO Simulator",desc:"Simulez une rencontre avec un dirigeant d'entreprise.",icon:vd,image:r.ceo||Ge.professional,delay:"animate-in fade-in slide-in-from-bottom-4 duration-700 delay-300",filterClass:"grayscale group-hover:grayscale-0"}),y.jsx(c,{mode:"researcher",title:"Recherchiste",desc:"Veille stratgique 24/7 et alertes marchs.",icon:Dy,image:r.researcher||Ge.professional,delay:"animate-in fade-in slide-in-from-bottom-4 duration-700 delay-400",filterClass:"sepia-[.3] group-hover:sepia-0"}),y.jsx(c,{mode:"letter-writer",title:"Rdactrice",desc:"Cration collaborative de documents financiers.",icon:ky,image:r.writer||Ge.professional,delay:"animate-in fade-in slide-in-from-bottom-4 duration-700 delay-500",filterClass:"grayscale contrast-125"}),y.jsx(c,{mode:"critic-mode",title:"L'Avocat du Diable",desc:"Challengez vos ides avec une critique impitoyable.",icon:By,image:r.critic||Ge.professional,delay:"animate-in fade-in slide-in-from-bottom-4 duration-700 delay-600",filterClass:"grayscale contrast-150 brightness-75"}),y.jsx(c,{mode:"technical-analyst",title:"Emma Geek",desc:"Analyse technique pure. RSI, MACD, Patterns.",icon:yd,image:r.geek||Ge.geek,delay:"animate-in fade-in slide-in-from-bottom-4 duration-700 delay-700",filterClass:"grayscale-0"})]}),y.jsx("div",{className:"mt-auto text-center pb-6 opacity-40",children:y.jsx("p",{className:"text-[10px] uppercase tracking-widest font-mono",children:"Propuls par JSLAI partout"})})]})},Zv=({activeId:n,onSelect:e,className:i})=>y.jsx("div",{className:be("flex gap-4 overflow-x-auto pb-2 custom-scrollbar",i),children:pi.map(r=>{const a=n===r.id;return y.jsxs("button",{onClick:()=>e(r.id),className:be("group flex flex-col items-center gap-2 min-w-[80px] transition-all",a?"scale-105 opacity-100":"opacity-60 hover:opacity-90 hover:scale-105"),children:[y.jsxs("div",{className:be("w-12 h-12 rounded-full p-0.5 transition-all shadow-lg overflow-hidden relative",a?"bg-gradient-to-tr from-blue-500 to-purple-500 ring-2 ring-blue-400 ring-offset-2 ring-offset-slate-900":"bg-slate-700 border border-slate-600"),children:[y.jsx("img",{src:r.image,alt:r.name,className:be("w-full h-full object-cover rounded-full",!a&&"grayscale")}),a&&y.jsx("div",{className:"absolute inset-0 bg-blue-500/10 animate-pulse rounded-full"})]}),y.jsx("div",{className:"flex flex-col items-center",children:y.jsx("span",{className:be("text-[10px] font-bold uppercase tracking-wider text-center leading-tight max-w-[90px]",a?"text-blue-300":"text-slate-500 group-hover:text-slate-300"),children:r.name.replace("Emma IA  ","")})})]},r.id)})}),VM=({onBack:n,avatarImage:e,onOpenGallery:i})=>{const[r,a]=$.useState([]),[l,c]=$.useState(""),[h,g]=$.useState(!1),[p,_]=$.useState(so),[x,S]=$.useState([]),[T,w]=$.useState(!1),[C,M]=$.useState("finance"),D=$.useRef(null);$.useEffect(()=>{},[]);const B=G=>{M(G),a(X=>{var Y;return[...X,{id:Date.now().toString(),role:"system",text:`Changement de profil : ${(Y=pi.find(ce=>ce.id===G))==null?void 0:Y.name}`,timestamp:new Date}]})},I=async(G=l)=>{if(!G.trim()||!D.current)return;c(""),g(!0);const X={id:Date.now().toString(),role:"user",text:G,timestamp:new Date};a(he=>[...he,X]);const Y=pi.find(he=>he.id===C),ce=Y?Y.systemPrompt:Vi;try{const{response:he,contextItems:re}=await D.current.sendMessage(G,p,ce);a(ve=>[...ve,{id:Date.now().toString(),role:"assistant",text:he,timestamp:new Date}]),re.length>0&&S(ve=>[...re,...ve])}catch(he){console.error(he),a(re=>[...re,{id:Date.now().toString(),role:"system",text:"Erreur de communication avec le modle.",timestamp:new Date}])}finally{g(!1)}},z=Tc.find(G=>G.id===p)||Tc[0],U=pi.find(G=>G.id===C)||pi[0],K=Ys.finance;return y.jsxs("div",{className:"flex h-screen bg-slate-950 text-white overflow-hidden",children:[y.jsxs("div",{className:"w-full lg:w-1/2 flex flex-col border-r border-slate-800 bg-slate-900/80 backdrop-blur-xl",children:[y.jsxs("div",{className:"p-4 border-b border-slate-800 bg-slate-900 relative z-50 flex flex-col gap-4 shadow-xl",children:[y.jsxs("div",{className:"flex justify-between items-center",children:[y.jsxs("div",{className:"flex items-center gap-3",children:[y.jsx("button",{onClick:n,className:"p-2 hover:bg-slate-800 rounded-full transition-colors",children:y.jsx(On,{className:"w-5 h-5 text-slate-400"})}),y.jsxs("div",{children:[y.jsxs("h2",{className:"text-lg font-bold flex items-center gap-2",children:[y.jsx(Oy,{className:"w-5 h-5 text-blue-500"}),"Chat Expert"]}),y.jsx("p",{className:"text-[10px] text-slate-500 uppercase",children:"Mode Textuel"})]})]}),y.jsxs("div",{className:"flex items-center gap-2",children:[y.jsx("button",{className:"p-2 bg-slate-800 hover:bg-slate-700 rounded-lg border border-slate-700 transition-colors",title:"Paramtres",children:y.jsx(zi,{className:"w-4 h-4 text-slate-400"})}),i&&y.jsx("button",{onClick:i,className:"p-2 bg-slate-800 hover:bg-slate-700 rounded-lg border border-slate-700 transition-colors",children:y.jsx(Bn,{className:"w-4 h-4 text-slate-400"})}),y.jsxs("div",{className:"relative",children:[y.jsxs("button",{onClick:()=>w(!T),className:"flex items-center gap-2 bg-slate-800 hover:bg-slate-700 px-3 py-2 rounded-lg border border-slate-700 transition-colors",children:[y.jsx(Iy,{className:"w-4 h-4 text-purple-400"}),y.jsx("span",{className:"text-xs font-bold text-slate-200",children:z.name})]}),T&&y.jsx("div",{className:"absolute top-full right-0 mt-2 w-72 bg-slate-900 border border-slate-700 rounded-xl shadow-2xl overflow-hidden z-[60]",children:Tc.filter(G=>G.type==="directional").map(G=>y.jsxs("button",{onClick:()=>{_(G.id),w(!1)},className:"w-full text-left p-3 hover:bg-slate-800 border-b border-slate-800/50 flex items-start gap-3",children:[y.jsx("div",{className:be("mt-1 w-3 h-3 rounded-full border",p===G.id?"bg-blue-500 border-blue-400":"border-slate-600")}),y.jsx("span",{className:"text-sm font-bold text-slate-200",children:G.name})]},G.id))})]})]})]}),y.jsx("div",{className:"w-full pt-2 border-t border-slate-800/50",children:y.jsx(Zv,{activeId:C,onSelect:B})})]}),y.jsxs("div",{className:"flex-1 overflow-hidden relative flex flex-col",children:[y.jsx(Yv,{messages:r}),h&&y.jsx("div",{className:"absolute bottom-4 left-6 text-xs text-blue-400 animate-pulse bg-slate-900/80 px-3 py-1 rounded-full border border-blue-900/50",children:"Analyse en cours..."})]}),y.jsxs("div",{className:"p-4 bg-slate-900 border-t border-slate-800",children:[y.jsx("div",{className:"flex gap-2 overflow-x-auto pb-3 custom-scrollbar",children:K==null?void 0:K.map((G,X)=>y.jsx("button",{onClick:()=>I(G),className:"whitespace-nowrap px-3 py-1.5 rounded-full bg-slate-800 border border-slate-700 text-[10px] text-slate-300 hover:text-white hover:border-blue-500 hover:bg-slate-700 transition-all",children:G},X))}),y.jsxs("div",{className:"relative max-w-4xl mx-auto",children:[y.jsx("input",{type:"text",value:l,onChange:G=>c(G.target.value),onKeyDown:G=>G.key==="Enter"&&I(),placeholder:`Posez votre question  ${U.name}...`,className:"w-full bg-slate-950 border border-slate-700 rounded-xl pl-4 pr-12 py-4 focus:border-blue-500 outline-none text-sm shadow-lg",disabled:h}),y.jsx("button",{onClick:()=>I(),disabled:h||!l.trim(),className:"absolute right-2 top-2 bottom-2 aspect-square bg-blue-600 hover:bg-blue-500 text-white rounded-lg flex items-center justify-center transition-colors",children:y.jsx(Ks,{className:"w-5 h-5"})})]})]})]}),y.jsx("div",{className:"w-1/2 hidden lg:block border-l border-slate-800/50 bg-slate-950/40",children:y.jsx(Qv,{personalityData:null,contextItems:x,isLoading:h})})]})};class HM{constructor(e,i,r){this.conversation=null,this.replicaId=e,this.personaName=i,this.context=r}async startConversation(){console.log("Starting Tavus Conversation..."),console.log(`Replica: ${this.replicaId}, Name: ${this.personaName}`),window.DailyIframe?(console.log("Daily.co SDK found. Ready to connect."),alert("Tavus integration requires a valid conversation URL generated from the backend.")):console.warn("Daily.co SDK not found.")}async endConversation(){console.log("Ending Tavus Conversation"),this.conversation&&(this.conversation.destroy(),this.conversation=null)}}const jM=({onBack:n,config:e,avatarImage:i,onOpenGallery:r})=>{const[a,l]=$.useState(!1),c=(e==null?void 0:e.avatarId)||YN,h=(e==null?void 0:e.name)||QN,g=(e==null?void 0:e.systemPrompt)||Yy,p=new HM(c,h,g),_=async()=>{l(!0),await p.startConversation()},x=()=>{p.endConversation(),l(!1),n()};return y.jsxs("div",{className:"h-screen w-full relative bg-[#F5F5F0] overflow-hidden flex flex-col items-center justify-center",children:[y.jsxs("div",{className:"absolute inset-0 z-0",children:[y.jsx("img",{src:"https://images.unsplash.com/photo-1598520106830-8c45c2035460?q=80&w=2000&auto=format&fit=crop",className:"w-full h-full object-cover opacity-20 filter blur-sm scale-105",alt:"Cozy Room"}),y.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-[#F5F5F0] via-transparent to-[#F5F5F0] opacity-80"})]}),y.jsxs("div",{className:"absolute top-0 left-0 right-0 p-8 flex justify-between items-center z-20",children:[y.jsx("div",{className:"flex gap-4",children:y.jsxs("button",{onClick:x,className:"flex items-center gap-2 px-4 py-2 bg-white/80 hover:bg-white text-slate-600 rounded-full shadow-sm backdrop-blur transition-all hover:scale-105",children:[y.jsx(On,{className:"w-4 h-4"})," ",y.jsx("span",{className:"text-sm font-medium",children:"Retour"})]})}),y.jsxs("div",{className:"flex items-center gap-4",children:[r&&y.jsx("button",{onClick:r,className:"p-2 bg-white/50 hover:bg-white rounded-full transition-colors shadow-sm",title:"Changer Avatar",children:y.jsx(Bn,{className:"w-5 h-5 text-slate-600"})}),y.jsxs("div",{className:"flex flex-col items-end",children:[y.jsxs("h2",{className:"text-xl font-serif text-slate-800 tracking-tight flex items-center gap-2",children:[y.jsx(qA,{className:"w-5 h-5 text-rose-400"}),h]}),y.jsx("p",{className:"text-xs text-slate-500 font-medium uppercase tracking-widest",children:"Vido Native  Haute Empathie"})]})]})]}),y.jsx("div",{className:"relative z-10 w-full max-w-5xl aspect-video bg-white rounded-3xl shadow-2xl overflow-hidden ring-8 ring-white/50",children:y.jsx("div",{id:"tavus-container",className:"w-full h-full bg-slate-100 flex items-center justify-center relative",children:a?y.jsxs("div",{className:"absolute inset-0 flex flex-col items-center justify-center bg-black/5",children:[y.jsx("div",{className:"w-16 h-16 border-4 border-rose-400 border-t-transparent rounded-full animate-spin mb-4"}),y.jsx("p",{className:"text-slate-500 font-medium animate-pulse",children:"Connexion  Phoenix Engine..."})]}):y.jsxs("div",{className:"text-center p-10 animate-in fade-in zoom-in duration-700",children:[y.jsx("div",{className:"w-32 h-32 rounded-full overflow-hidden mx-auto mb-6 shadow-xl border-4 border-white",children:y.jsx("img",{src:i||Ge.natural,className:"w-full h-full object-cover"})}),y.jsx("h1",{className:"text-4xl font-serif text-slate-800 mb-4",children:"Bonjour."}),y.jsx("p",{className:"text-slate-500 max-w-md mx-auto mb-8 text-lg font-light leading-relaxed",children:"Je suis Emma. Je suis ici pour discuter avec vous, comprendre vos besoins et rflchir ensemble, en toute simplicit."}),y.jsxs("button",{onClick:_,className:"px-8 py-4 bg-rose-500 hover:bg-rose-400 text-white rounded-full font-bold shadow-lg shadow-rose-200 transition-all hover:scale-105 flex items-center gap-3 mx-auto",children:[y.jsx(jy,{className:"w-5 h-5"})," Dmarrer la conversation"]})]})})}),y.jsx("div",{className:"absolute bottom-8 text-center z-10 opacity-40",children:y.jsxs("p",{className:"text-xs text-slate-500 font-mono flex items-center justify-center gap-2",children:[y.jsx(Qa,{className:"w-3 h-3"})," Propuls par JSLAI partout"]})})]})},zM=({document:n})=>n?y.jsxs("div",{className:"h-full overflow-y-auto p-8 bg-white text-slate-900 shadow-2xl font-serif max-w-[210mm] mx-auto min-h-[297mm]",children:[y.jsxs("div",{className:"border-b-2 border-slate-900 pb-4 mb-8 flex justify-between items-end",children:[y.jsxs("div",{children:[y.jsx("h1",{className:"text-3xl font-bold tracking-tight",children:n.title}),y.jsx("p",{className:"text-sm text-slate-600 mt-1",children:n.date})]}),y.jsxs("div",{className:"text-right",children:[y.jsx("div",{className:"text-xs font-bold uppercase tracking-widest text-slate-500",children:"Emma IA Enterprise"}),y.jsx("div",{className:"text-[10px] text-slate-400",children:"Financial Advisory"})]})]}),y.jsx("div",{className:"space-y-6",children:n.sections.map((e,i)=>y.jsxs("div",{children:[y.jsx("h2",{className:"text-lg font-bold text-slate-800 mb-2 border-b border-slate-200 pb-1",children:e.heading}),y.jsx("div",{className:"text-sm leading-relaxed text-slate-700 whitespace-pre-wrap text-justify",children:e.content})]},i))}),y.jsxs("div",{className:"mt-12 pt-8 border-t border-slate-200 text-center",children:[y.jsx("p",{className:"text-xs text-slate-400 italic",children:n.footer}),y.jsx("p",{className:"text-[10px] text-slate-300 mt-1 uppercase",children:"Propuls par JSLAI"})]})]}):y.jsx("div",{className:"flex items-center justify-center h-full text-slate-500 bg-white/5 border border-dashed border-slate-700 rounded-xl m-4",children:y.jsx("p",{className:"text-sm",children:"Le document apparatra ici..."})}),$M=({onBack:n,avatarImage:e,onOpenGallery:i})=>{const[r,a]=$.useState([]),[l,c]=$.useState(""),[h,g]=$.useState(!1),[p,_]=$.useState(null),x=$.useRef(null);$.useEffect(()=>{x.current&&(x.current.scrollTop=x.current.scrollHeight)},[r]);const S=async(w=l)=>{if(!w.trim())return;const C={id:Date.now().toString(),role:"user",text:w,timestamp:new Date};a(M=>[...M,C]),c(""),g(!0);try{throw new Error("API Key missing")}catch(M){console.error(M)}finally{g(!1)}},T=Ys.writer;return y.jsxs("div",{className:"flex h-screen text-white overflow-hidden glass-panel rounded-none",children:[y.jsxs("div",{className:"w-full lg:w-1/2 flex flex-col border-r border-emerald-900/30 bg-slate-950/60 backdrop-blur-xl",children:[y.jsxs("div",{className:"p-6 border-b border-emerald-900/30 flex items-center justify-between",children:[y.jsxs("div",{className:"flex items-center gap-4",children:[y.jsx("button",{onClick:n,className:"p-2 hover:bg-white/10 rounded-full transition-colors",children:y.jsx(On,{className:"w-5 h-5 text-emerald-400"})}),y.jsx("div",{className:"w-12 h-12 rounded-full border-2 border-emerald-500/50 overflow-hidden shadow-[0_0_15px_rgba(16,185,129,0.3)]",children:y.jsx("img",{src:e||Ge.professional,className:"w-full h-full object-cover"})}),y.jsxs("div",{children:[y.jsx("h2",{className:"font-bold flex items-center gap-2 text-emerald-500",children:"Emma  RDACTION"}),y.jsx("p",{className:"text-[10px] text-emerald-300 uppercase tracking-widest font-mono",children:"Secrtaire Financire"})]})]}),y.jsxs("div",{className:"flex gap-2",children:[y.jsx("button",{className:"p-2 bg-emerald-950/30 hover:bg-emerald-900/50 rounded-lg border border-emerald-900/30 transition-colors",children:y.jsx(zi,{className:"w-4 h-4 text-emerald-400"})}),i&&y.jsx("button",{onClick:i,className:"p-2 bg-emerald-950/30 hover:bg-emerald-900/50 rounded-lg border border-emerald-900/30 transition-colors",children:y.jsx(Bn,{className:"w-4 h-4 text-emerald-400"})})]})]}),y.jsxs("div",{className:"flex-1 overflow-y-auto p-6 space-y-4",ref:x,children:[r.map(w=>y.jsx("div",{className:be("p-3 rounded-xl text-sm max-w-[90%]",w.role==="user"?"bg-slate-700 text-white self-end ml-auto":"bg-emerald-950/30 text-emerald-100 border border-emerald-900/30"),children:w.text},w.id)),h&&y.jsx("div",{className:"text-xs text-emerald-500 animate-pulse px-4",children:"Rdaction en cours..."})]}),y.jsxs("div",{className:"p-6 border-t border-emerald-900/30 bg-slate-900/30",children:[y.jsx("div",{className:"flex gap-2 overflow-x-auto pb-3 custom-scrollbar",children:T==null?void 0:T.map((w,C)=>y.jsx("button",{onClick:()=>S(w),className:"whitespace-nowrap px-3 py-1.5 rounded-full bg-emerald-950/40 border border-emerald-900/50 text-[10px] text-emerald-200 hover:text-white hover:bg-emerald-900/60 transition-all",children:w},C))}),y.jsxs("div",{className:"relative",children:[y.jsx("input",{type:"text",value:l,onChange:w=>c(w.target.value),onKeyDown:w=>w.key==="Enter"&&S(),className:"w-full bg-slate-950 border border-emerald-900/30 rounded-xl py-3 pl-4 pr-10 text-sm focus:border-emerald-500 outline-none shadow-inner",placeholder:"Instructions..."}),y.jsx("button",{onClick:()=>S(),className:"absolute right-2 top-2 p-1.5 text-emerald-500 hover:bg-emerald-500/20 rounded-lg transition-colors",children:y.jsx(Ks,{className:"w-4 h-4"})})]})]})]}),y.jsx("div",{className:"hidden lg:flex w-1/2 bg-slate-900/90 overflow-y-auto p-12 justify-center backdrop-blur-sm",children:y.jsx(zM,{document:p})})]})},FM=({data:n})=>n?y.jsxs("div",{className:"p-8 max-w-4xl mx-auto space-y-8 animate-in fade-in duration-700",children:[y.jsxs("div",{className:"flex items-center justify-between border-b border-slate-800 pb-6",children:[y.jsxs("div",{children:[y.jsx("h1",{className:"text-3xl font-black text-white tracking-tighter uppercase",children:"Daily Briefing"}),y.jsxs("p",{className:"text-slate-500 font-mono text-xs mt-1",children:[new Date().toLocaleDateString(),"  LIVE UPDATE"]})]}),y.jsxs("div",{className:be("px-4 py-2 rounded-lg border flex items-center gap-2",n.marketSentiment==="Bullish"?"bg-green-900/20 border-green-500/50 text-green-400":n.marketSentiment==="Bearish"?"bg-red-900/20 border-red-500/50 text-red-400":"bg-slate-800 border-slate-700 text-slate-400"),children:[n.marketSentiment==="Bullish"?y.jsx(Xa,{className:"w-5 h-5"}):n.marketSentiment==="Bearish"?y.jsx(Hy,{className:"w-5 h-5"}):y.jsx(Ly,{className:"w-5 h-5"}),y.jsx("span",{className:"font-bold uppercase tracking-wider",children:n.marketSentiment})]})]}),y.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:n.topMovers.map((e,i)=>y.jsxs("div",{className:"bg-slate-900 border border-slate-800 p-4 rounded-xl flex flex-col",children:[y.jsx("span",{className:"text-xs text-slate-500 font-bold",children:e.ticker}),y.jsxs("div",{className:"flex justify-between items-end mt-2",children:[y.jsx("span",{className:"text-lg font-mono text-white",children:e.price}),y.jsx("span",{className:be("text-sm font-bold",e.change.startsWith("+")?"text-green-400":"text-red-400"),children:e.change})]})]},i))}),y.jsxs("div",{className:"space-y-4",children:[y.jsxs("h3",{className:"text-sm font-bold text-slate-400 uppercase tracking-wider flex items-center gap-2",children:[y.jsx(js,{className:"w-4 h-4 text-yellow-500"})," Breaking News"]}),y.jsx("div",{className:"grid grid-cols-1 gap-3",children:n.breakingNews.map((e,i)=>y.jsxs("div",{className:"bg-slate-900/50 border border-slate-800 p-4 rounded-xl flex gap-4 items-start hover:bg-slate-800 transition-colors",children:[y.jsx("span",{className:"text-xs font-mono text-slate-500 pt-1",children:e.time}),y.jsxs("div",{children:[y.jsx("p",{className:"text-sm text-slate-200 font-medium leading-relaxed",children:e.headline}),y.jsxs("span",{className:be("text-[10px] uppercase font-bold mt-1 inline-block",e.impact==="High"?"text-red-400":"text-slate-500"),children:[e.impact," Impact"]})]})]},i))})]}),n.portfolioAlerts.length>0&&y.jsxs("div",{className:"bg-blue-900/10 border border-blue-900/30 p-4 rounded-xl",children:[y.jsx("h3",{className:"text-sm font-bold text-blue-400 uppercase tracking-wider mb-3",children:"Portfolio Alerts"}),y.jsx("ul",{className:"space-y-2",children:n.portfolioAlerts.map((e,i)=>y.jsxs("li",{className:"text-sm text-blue-200 flex items-center gap-2",children:[y.jsx("div",{className:"w-1.5 h-1.5 bg-blue-500 rounded-full"})," ",e]},i))})]})]}):y.jsxs("div",{className:"flex flex-col items-center justify-center h-full text-slate-600",children:[y.jsx(Dy,{className:"w-16 h-16 mb-4 opacity-20"}),y.jsx("h3",{className:"text-xl font-bold uppercase tracking-widest",children:"Global Briefing"}),y.jsx("p",{className:"text-sm mt-2",children:"En attente des donnes de march..."})]}),JM=({onBack:n,avatarImage:e,onOpenGallery:i})=>{const[r,a]=$.useState([]),[l,c]=$.useState(""),[h,g]=$.useState(null),p=async(x=l)=>{if(!x.trim())return;const S={id:Date.now().toString(),role:"user",text:x,timestamp:new Date};a(T=>[...T,S]),c("");try{return}catch(T){console.error(T)}},_=Ys.researcher;return y.jsxs("div",{className:"flex h-screen text-white overflow-hidden glass-panel rounded-none",children:[y.jsxs("div",{className:"w-full lg:w-1/2 border-r border-orange-900/20 flex flex-col bg-slate-950/60 backdrop-blur-xl",children:[y.jsxs("div",{className:"p-6 border-b border-orange-900/20 flex items-center justify-between",children:[y.jsxs("div",{className:"flex items-center gap-4",children:[y.jsx("button",{onClick:n,className:"p-2 hover:bg-white/10 rounded-full transition-colors",children:y.jsx(On,{className:"w-5 h-5 text-orange-400"})}),y.jsx("div",{className:"w-12 h-12 rounded-full border-2 border-orange-500/50 overflow-hidden shadow-[0_0_15px_rgba(249,115,22,0.3)]",children:y.jsx("img",{src:e||Ge.professional,className:"w-full h-full object-cover"})}),y.jsxs("div",{children:[y.jsx("h2",{className:"text-lg font-bold flex items-center gap-2 text-orange-500",children:"Morgane"}),y.jsx("p",{className:"text-[10px] text-orange-300 uppercase tracking-widest font-mono",children:"Recherchiste 24/7"})]})]}),y.jsxs("div",{className:"flex gap-2",children:[y.jsx("button",{className:"p-2 bg-orange-950/30 hover:bg-orange-900/50 rounded-lg border border-orange-900/30 transition-colors",children:y.jsx(zi,{className:"w-4 h-4 text-orange-400"})}),i&&y.jsx("button",{onClick:i,className:"p-2 bg-orange-950/30 hover:bg-orange-900/50 rounded-lg border border-orange-900/30 transition-colors",children:y.jsx(Bn,{className:"w-4 h-4 text-orange-400"})})]})]}),y.jsx("div",{className:"flex-1 overflow-y-auto p-4 space-y-4 custom-scrollbar",children:r.map(x=>y.jsx("div",{className:`p-3 rounded-xl text-xs leading-relaxed ${x.role==="user"?"bg-slate-700 text-white self-end ml-auto max-w-[90%]":"bg-orange-950/40 text-orange-100 border border-orange-900/30"}`,children:x.text},x.id))}),y.jsxs("div",{className:"p-4 border-t border-orange-900/20 bg-slate-900/30",children:[y.jsx("div",{className:"flex gap-2 overflow-x-auto pb-3 custom-scrollbar",children:_==null?void 0:_.map((x,S)=>y.jsx("button",{onClick:()=>p(x),className:"whitespace-nowrap px-3 py-1.5 rounded-full bg-orange-950/40 border border-orange-900/50 text-[10px] text-orange-200 hover:text-white hover:bg-orange-900/60 transition-all",children:x},S))}),y.jsxs("div",{className:"relative",children:[y.jsx("input",{type:"text",value:l,onChange:x=>c(x.target.value),onKeyDown:x=>x.key==="Enter"&&p(),className:"w-full bg-slate-950 border border-orange-900/30 rounded-xl py-3 pl-4 pr-10 text-xs focus:border-orange-500 outline-none shadow-inner",placeholder:"Commande de recherche..."}),y.jsx("button",{onClick:()=>p(),className:"absolute right-2 top-2 p-1.5 bg-orange-600/20 text-orange-500 rounded-lg hover:bg-orange-600 hover:text-white transition-all",children:y.jsx(Ks,{className:"w-4 h-4"})})]})]})]}),y.jsx("div",{className:"hidden lg:block w-1/2 overflow-y-auto bg-slate-950/80 backdrop-blur-sm",children:y.jsx(FM,{data:h})})]})},KM=()=>{const[n,e]=$.useState(2);return y.jsx("div",{className:"fixed top-6 right-20 z-50",children:y.jsxs("button",{className:"relative p-2 bg-slate-800/80 hover:bg-slate-700 border border-slate-600 rounded-full transition-all group",children:[y.jsx(yA,{className:"w-5 h-5 text-slate-300 group-hover:text-white"}),n>0&&y.jsx("span",{className:"absolute top-0 right-0 w-3 h-3 bg-red-500 rounded-full animate-pulse border-2 border-slate-900"})]})})},YM=({onBack:n,onInjectPrompt:e,avatarImage:i,onOpenGallery:r})=>{var T;const[a,l]=$.useState("config"),[c,h]=$.useState({name:"",ticker:"",industry:""}),g=Qy(),p=c.name?`https://logo.clearbit.com/${c.name.replace(/\s+/g,"").toLowerCase()}.com`:"",_=()=>{const w=Jc.replace("{{COMPANY_NAME}}",c.name).replace("{{TICKER}}",c.ticker);e(w);const C={systemInstruction:w,llmModel:Vs,llmTemperature:.7,geminiVoice:"Charon",activeProvider:"heygen",heygenAvatarId:"Tyler-incasualsuit-20220721",akoolAvatarId:Ky,heygenQuality:"high",heygenEmotion:"Serious",heygenRemoveBackground:!1,heygenToken:"",akoolToken:"",akoolRegion:"us-west",akoolFaceEnhance:!0,muteGeminiAudio:!1,integrationConfig:Yr,chatMode:"solo"};g.connect(C),l("live")},x=()=>{g.disconnect(),l("config")},S=Ys["ceo-mode"];return a==="config"?y.jsxs("div",{className:"min-h-screen bg-slate-950 flex items-center justify-center p-4 relative overflow-hidden",children:[y.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-cyan-900/20 via-slate-950 to-blue-900/20 animate-gradient-x"}),y.jsx("button",{onClick:n,className:"absolute top-6 left-6 bg-white/5 hover:bg-white/10 p-3 rounded-full text-white border border-white/10 backdrop-blur transition-all z-10",title:"Retour au menu",children:y.jsx(On,{className:"w-5 h-5"})}),y.jsxs("div",{className:"w-full max-w-lg bg-slate-900/60 border border-white/10 rounded-3xl p-10 shadow-2xl relative backdrop-blur-xl",children:[y.jsxs("div",{className:"text-center mb-10",children:[y.jsx("div",{className:"w-24 h-24 bg-white/5 rounded-full flex items-center justify-center mx-auto mb-6 border border-white/10 shadow-inner overflow-hidden backdrop-blur-md",children:c.name?y.jsx("img",{src:p,className:"w-full h-full object-contain p-3",onError:w=>w.currentTarget.src=""}):y.jsx(vd,{className:"w-10 h-10 text-cyan-400 opacity-50"})}),y.jsx("h1",{className:"text-3xl font-bold text-white tracking-tight",children:"CEO Simulator"}),y.jsx("p",{className:"text-sm text-cyan-200/60 mt-2",children:"Simulation de haute fidlit. Entrez les paramtres."})]}),y.jsxs("div",{className:"space-y-6",children:[y.jsxs("div",{children:[y.jsx("label",{className:"text-xs font-bold text-slate-400 uppercase tracking-widest ml-1",children:"Entreprise"}),y.jsx("input",{type:"text",value:c.name,onChange:w=>h({...c,name:w.target.value}),className:"w-full bg-black/40 border border-white/10 rounded-xl p-4 text-white mt-2 focus:border-cyan-500 outline-none transition-all focus:bg-black/60",placeholder:"Ex: Tesla Inc."})]}),y.jsxs("div",{children:[y.jsx("label",{className:"text-xs font-bold text-slate-400 uppercase tracking-widest ml-1",children:"Ticker"}),y.jsx("input",{type:"text",value:c.ticker,onChange:w=>h({...c,ticker:w.target.value}),className:"w-full bg-black/40 border border-white/10 rounded-xl p-4 text-white mt-2 focus:border-cyan-500 outline-none font-mono transition-all focus:bg-black/60",placeholder:"Ex: TSLA"})]}),y.jsx("button",{onClick:_,disabled:!c.name||!c.ticker,className:"w-full py-4 bg-gradient-to-r from-cyan-600 to-blue-600 hover:scale-[1.02] text-white rounded-xl font-bold transition-all disabled:opacity-50 mt-6 shadow-xl shadow-cyan-900/20",children:"Entrer dans la Board Room"})]})]})]}):y.jsxs("div",{className:"flex flex-col h-screen bg-slate-950 relative overflow-hidden",children:[y.jsx("div",{className:"absolute inset-0 z-0 opacity-40 bg-[url('https://images.unsplash.com/photo-1497366216548-37526070297c?q=80&w=1600&auto=format&fit=crop')] bg-cover bg-center filter blur-sm scale-110 animate-pulse-slow"}),y.jsx("div",{className:"absolute inset-0 z-0 bg-gradient-to-b from-slate-950/60 via-slate-950/80 to-slate-950"}),y.jsxs("div",{className:"relative z-20 p-6 flex justify-between items-center bg-gradient-to-b from-black/60 to-transparent",children:[y.jsxs("div",{className:"flex items-center gap-6",children:[y.jsx("button",{onClick:x,className:"bg-white/5 hover:bg-white/10 p-3 rounded-full text-white border border-white/10 backdrop-blur transition-all",children:y.jsx(On,{className:"w-5 h-5"})}),y.jsxs("div",{className:"flex items-center gap-4 bg-white/5 px-6 py-2 rounded-2xl border border-white/10 backdrop-blur-md",children:[y.jsx("img",{src:p,className:"w-8 h-8 rounded bg-white p-1 object-contain",onError:w=>w.currentTarget.style.display="none"}),y.jsxs("div",{children:[y.jsx("h1",{className:"text-xl font-bold text-white leading-none",children:c.name}),y.jsxs("div",{className:"flex items-center gap-2 text-[10px] font-mono text-cyan-300 mt-1 uppercase tracking-widest",children:[y.jsx("span",{children:c.ticker}),"  ",y.jsx("span",{className:"text-green-400 animate-pulse",children:"LIVE CONNECTED"})]})]})]})]}),y.jsxs("div",{className:"flex gap-2",children:[y.jsx("button",{className:"p-3 bg-white/10 hover:bg-white/20 rounded-lg border border-white/10 transition-colors backdrop-blur-md",children:y.jsx(zi,{className:"w-5 h-5 text-white"})}),r&&y.jsx("button",{onClick:r,className:"p-3 bg-white/10 hover:bg-white/20 rounded-lg border border-white/10 transition-colors backdrop-blur-md",children:y.jsx(Bn,{className:"w-5 h-5 text-white"})})]})]}),y.jsx("div",{className:"flex-1 relative z-10 flex items-center justify-center",children:y.jsx(Jv,{state:g.connectionState,volume:g.assistantVolume,config:{systemInstruction:"",llmModel:Vs,llmTemperature:.7,geminiVoice:"Charon",heygenAvatarId:"Tyler-incasualsuit-20220721",heygenQuality:"high",heygenEmotion:"Serious",activeProvider:"heygen",heygenRemoveBackground:!1,heygenToken:"",akoolToken:"",akoolAvatarId:"",akoolRegion:"us-west",akoolFaceEnhance:!1,muteGeminiAudio:!1,integrationConfig:Yr,chatMode:"solo"},lastMessage:((T=g.messages.slice().reverse().find(w=>w.role==="assistant"))==null?void 0:T.text)||""})}),y.jsxs("div",{className:"relative z-20 pb-10 flex flex-col items-center",children:[y.jsx("div",{className:"flex gap-2 overflow-x-auto pb-3 custom-scrollbar mb-4",children:S==null?void 0:S.map((w,C)=>y.jsx("button",{onClick:()=>g.sendText(w),className:"whitespace-nowrap px-4 py-2 rounded-full bg-black/40 border border-white/10 text-xs text-white hover:bg-white/10 transition-all backdrop-blur-md",children:w},C))}),y.jsx(Kv,{state:g.connectionState,onConnect:()=>g.connect({systemInstruction:Jc.replace("{{COMPANY_NAME}}",c.name).replace("{{TICKER}}",c.ticker),llmModel:Vs,llmTemperature:.7,geminiVoice:"Charon",activeProvider:"heygen",heygenToken:"",heygenAvatarId:"Tyler-incasualsuit-20220721",heygenQuality:"high",heygenEmotion:"Serious",heygenRemoveBackground:!1,akoolToken:"",akoolAvatarId:"",akoolRegion:"us-west",akoolFaceEnhance:!1,muteGeminiAudio:!1,integrationConfig:Yr,chatMode:"solo"}),onDisconnect:x,onEmail:()=>{},onOpenAdmin:()=>{},onToggleInsights:()=>{},showInsights:!1}),y.jsx("div",{className:"mt-4 text-[10px] text-white/30 uppercase tracking-widest",children:"Propuls par JSLAI partout"})]})]})},QM=({onBack:n,avatarImage:e,onOpenGallery:i})=>{const[r,a]=$.useState([]),[l,c]=$.useState(""),[h,g]=$.useState(!1),[p,_]=$.useState(null),x=$.useRef(null);$.useEffect(()=>{x.current&&(x.current.scrollTop=x.current.scrollHeight)},[r]);const S=async(w=l)=>{if(!w.trim())return;c(""),g(!0);const C={id:Date.now().toString(),role:"user",text:w,timestamp:new Date};a(M=>[...M,C]);try{throw new Error("API Key Missing")}catch(M){console.error(M)}finally{g(!1)}},T=Ys["critic-mode"];return y.jsxs("div",{className:"flex h-screen text-white overflow-hidden glass-panel rounded-none",children:[y.jsxs("div",{className:"w-full lg:w-1/2 flex flex-col border-r border-red-900/30 bg-slate-950/50 backdrop-blur-xl relative",children:[y.jsxs("div",{className:"p-6 border-b border-red-900/30 flex items-center justify-between bg-gradient-to-r from-red-950/40 to-transparent",children:[y.jsxs("div",{className:"flex items-center gap-4",children:[y.jsx("button",{onClick:n,className:"p-2 hover:bg-white/10 rounded-full transition-colors",children:y.jsx(On,{className:"w-5 h-5 text-red-400"})}),y.jsx("div",{className:"w-12 h-12 rounded-full border-2 border-red-500/50 overflow-hidden shadow-[0_0_15px_rgba(239,68,68,0.4)]",children:y.jsx("img",{src:e||Ge.professional,className:"w-full h-full object-cover grayscale contrast-125"})}),y.jsxs("div",{children:[y.jsx("h2",{className:"text-lg font-bold flex items-center gap-2 text-red-500 tracking-tight",children:"Emma  CRITIQUE"}),y.jsx("p",{className:"text-[10px] text-red-300 uppercase font-mono tracking-widest",children:"Avocat du Diable"})]})]}),y.jsxs("div",{className:"flex gap-2",children:[y.jsx("button",{className:"p-2 bg-red-950/30 hover:bg-red-900/50 rounded-lg border border-red-900/30 transition-colors",children:y.jsx(zi,{className:"w-4 h-4 text-red-400"})}),i&&y.jsx("button",{onClick:i,className:"p-2 bg-red-950/30 hover:bg-red-900/50 rounded-lg border border-red-900/30 transition-colors",children:y.jsx(Bn,{className:"w-4 h-4 text-red-400"})})]})]}),y.jsxs("div",{className:"flex-1 overflow-y-auto p-6 space-y-6 custom-scrollbar",ref:x,children:[r.map(w=>y.jsx("div",{className:be("p-4 rounded-2xl text-sm leading-relaxed shadow-lg max-w-[90%]",w.role==="user"?"bg-slate-700 text-white self-end ml-auto":"bg-red-950/60 border border-red-900/40 text-red-50"),children:w.text},w.id)),h&&y.jsxs("div",{className:"text-xs text-red-500 animate-pulse flex items-center gap-2 ml-4",children:[y.jsx(Gy,{className:"w-3 h-3"})," Analyse des risques..."]})]}),y.jsxs("div",{className:"p-6 border-t border-red-900/30 bg-slate-900/40 backdrop-blur-md",children:[y.jsx("div",{className:"flex gap-2 overflow-x-auto pb-3 custom-scrollbar",children:T==null?void 0:T.map((w,C)=>y.jsx("button",{onClick:()=>S(w),className:"whitespace-nowrap px-3 py-1.5 rounded-full bg-red-950/40 border border-red-900/50 text-[10px] text-red-200 hover:text-white hover:bg-red-900/60 transition-all",children:w},C))}),y.jsxs("div",{className:"relative",children:[y.jsx("input",{type:"text",value:l,onChange:w=>c(w.target.value),onKeyDown:w=>w.key==="Enter"&&S(),className:"w-full bg-slate-950/80 border border-red-900/30 rounded-xl py-4 pl-6 pr-12 text-sm focus:border-red-500 outline-none shadow-inner",placeholder:"Dfiez-moi avec une action..."}),y.jsx("button",{onClick:()=>S(),className:"absolute right-3 top-3 p-2 bg-red-600/20 text-red-400 hover:bg-red-600 hover:text-white rounded-lg transition-all",children:y.jsx(Ks,{className:"w-4 h-4"})})]})]})]}),y.jsx("div",{className:"hidden lg:flex w-1/2 bg-slate-950/80 p-10 flex-col relative overflow-hidden backdrop-blur-sm",children:p?y.jsxs("div",{className:"z-10 space-y-8 animate-in fade-in slide-in-from-bottom-8 duration-700 max-w-5xl mx-auto w-full",children:[y.jsxs("div",{className:"bg-red-950/30 border border-red-500/30 p-8 rounded-3xl flex justify-between items-start backdrop-blur-md shadow-2xl relative overflow-hidden",children:[y.jsxs("div",{className:"relative z-10",children:[y.jsx("h2",{className:"text-4xl font-black text-white tracking-tighter uppercase mb-2",children:p.targetEntity}),y.jsxs("div",{className:"text-red-400 font-bold text-xl flex items-center gap-2 bg-red-950/50 px-4 py-2 rounded-lg w-fit border border-red-900/50",children:[y.jsx(Za,{className:"w-6 h-6"})," ",p.verdict]})]}),y.jsxs("div",{className:"text-right relative z-10",children:[y.jsx("div",{className:"text-xs text-red-400 font-mono uppercase tracking-widest mb-1",children:"Risk Score"}),y.jsxs("div",{className:"text-7xl font-black text-white tracking-tighter",children:[p.overallRiskScore,y.jsx("span",{className:"text-3xl text-red-500/50",children:"/100"})]})]})]}),y.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:p.risks.map((w,C)=>y.jsxs("div",{className:be("p-6 rounded-2xl border flex flex-col gap-3 transition-all hover:scale-[1.02] shadow-lg backdrop-blur-sm",w.severity==="Extrme"?"bg-red-950/40 border-red-500/60":w.severity==="lev"?"bg-orange-950/30 border-orange-500/40":"bg-slate-800/40 border-slate-700"),children:[y.jsxs("div",{className:"flex justify-between items-center",children:[y.jsx("span",{className:"text-[10px] font-bold px-3 py-1 rounded-full uppercase border",children:w.category}),w.redFlag&&y.jsx(NA,{className:"w-5 h-5 text-red-500"})]}),y.jsx("p",{className:"text-sm text-slate-200 leading-relaxed font-light",children:w.description})]},C))})]}):y.jsxs("div",{className:"flex flex-col items-center justify-center h-full text-slate-700 z-10",children:[y.jsx(By,{className:"w-32 h-32 mb-8 opacity-10"}),y.jsx("h3",{className:"text-3xl font-black uppercase",children:"Matrice de Menaces"})]})})]})},XM=({onBack:n,avatarImage:e,onOpenGallery:i})=>{const[r,a]=$.useState([]),[l,c]=$.useState(""),[h,g]=$.useState(!1),[p,_]=$.useState(null),x=$.useRef(null);$.useEffect(()=>{x.current&&(x.current.scrollTop=x.current.scrollHeight)},[r]);const S=async(C=l)=>{if(!C.trim())return;const M={id:Date.now().toString(),role:"user",text:C,timestamp:new Date};a(D=>[...D,M]),c(""),g(!0);try{throw new Error("API Key missing")}catch(D){console.error(D)}finally{g(!1)}},T=C=>{switch(C){case"STRONG_BUY":return"text-green-400 border-green-500 bg-green-500/20";case"BUY":return"text-green-300 border-green-500/50 bg-green-500/10";case"SELL":return"text-red-300 border-red-500/50 bg-red-500/10";case"STRONG_SELL":return"text-red-400 border-red-500 bg-red-500/20";default:return"text-slate-300 border-slate-500 bg-slate-500/10"}},w=Ys["technical-analyst"];return y.jsxs("div",{className:"flex h-screen bg-slate-950 text-white font-mono overflow-hidden glass-panel rounded-none",children:[y.jsxs("div",{className:"w-full lg:w-1/2 flex flex-col border-r border-emerald-900/30 bg-slate-950/60 backdrop-blur-xl",children:[y.jsxs("div",{className:"p-6 border-b border-emerald-900/30 flex items-center justify-between",children:[y.jsxs("div",{className:"flex items-center gap-4",children:[y.jsx("button",{onClick:n,className:"p-2 hover:bg-white/10 rounded-full transition-colors",children:y.jsx(On,{className:"w-5 h-5 text-emerald-400"})}),y.jsx("div",{className:"w-12 h-12 rounded-full border-2 border-emerald-500/50 overflow-hidden shadow-[0_0_15px_rgba(16,185,129,0.3)]",children:y.jsx("img",{src:e||Ge.geek,className:"w-full h-full object-cover"})}),y.jsxs("div",{children:[y.jsx("h2",{className:"text-lg font-bold text-emerald-400 flex items-center gap-2 tracking-tight",children:"Emma  GEEK"}),y.jsx("p",{className:"text-[10px] text-emerald-600 uppercase tracking-widest",children:"Analyste Technique"})]})]}),y.jsxs("div",{className:"flex gap-2",children:[y.jsx("button",{className:"p-2 bg-emerald-950/30 hover:bg-emerald-900/50 rounded-lg border border-emerald-900/30 transition-colors",children:y.jsx(zi,{className:"w-4 h-4 text-emerald-400"})}),i&&y.jsx("button",{onClick:i,className:"p-2 bg-emerald-950/30 hover:bg-emerald-900/50 rounded-lg border border-emerald-900/30 transition-colors",children:y.jsx(Bn,{className:"w-4 h-4 text-emerald-400"})})]})]}),y.jsxs("div",{className:"flex-1 overflow-y-auto p-6 space-y-4 custom-scrollbar",ref:x,children:[r.map(C=>y.jsx("div",{className:be("flex flex-col max-w-[90%]",C.role==="user"?"self-end items-end":"self-start items-start"),children:y.jsx("div",{className:be("px-4 py-3 rounded-xl text-xs leading-relaxed border",C.role==="user"?"bg-emerald-900/20 border-emerald-800 text-emerald-100":"bg-slate-800 border-slate-700 text-slate-300"),children:C.text})},C.id)),h&&y.jsxs("div",{className:"text-xs text-emerald-500 animate-pulse flex items-center gap-2 px-4",children:[y.jsx(yd,{className:"w-3 h-3"})," Calcul..."]})]}),y.jsxs("div",{className:"p-6 border-t border-emerald-900/30 bg-slate-900/30",children:[y.jsx("div",{className:"flex gap-2 overflow-x-auto pb-3 custom-scrollbar",children:w==null?void 0:w.map((C,M)=>y.jsx("button",{onClick:()=>S(C),className:"whitespace-nowrap px-3 py-1.5 rounded-full bg-emerald-950/40 border border-emerald-900/50 text-[10px] text-emerald-200 hover:text-white hover:bg-emerald-900/60 transition-all",children:C},M))}),y.jsxs("div",{className:"relative",children:[y.jsx("input",{type:"text",value:l,onChange:C=>c(C.target.value),onKeyDown:C=>C.key==="Enter"&&S(),placeholder:"Ex: Analyse TSLA RSI...",className:"w-full bg-slate-950 border border-emerald-900/40 rounded-xl py-3 pl-4 pr-12 text-xs focus:border-emerald-500 outline-none font-mono"}),y.jsx("button",{onClick:()=>S(),className:"absolute right-2 top-2 p-1.5 bg-emerald-600/20 text-emerald-500 rounded-lg hover:bg-emerald-600 hover:text-white transition-all",children:y.jsx(Ks,{className:"w-4 h-4"})})]})]})]}),y.jsxs("div",{className:"hidden lg:flex w-1/2 bg-black/80 p-8 flex-col overflow-y-auto custom-scrollbar relative",children:[y.jsx("div",{className:"absolute inset-0 bg-[linear-gradient(rgba(16,185,129,0.05)_1px,transparent_1px),linear-gradient(90deg,rgba(16,185,129,0.05)_1px,transparent_1px)] bg-[size:20px_20px] pointer-events-none"}),p?y.jsxs("div",{className:"z-10 space-y-6 animate-in fade-in slide-in-from-bottom-8 duration-700",children:[y.jsxs("div",{className:"flex items-center justify-between border-b border-white/10 pb-6",children:[y.jsx("div",{children:y.jsxs("h1",{className:"text-5xl font-black text-white tracking-tighter flex items-center gap-4",children:[p.ticker,y.jsx("span",{className:be("text-sm px-3 py-1 rounded border tracking-widest",T(p.signal)),children:p.signal})]})}),y.jsxs("div",{className:"text-right",children:[y.jsxs("div",{className:"text-4xl font-bold text-emerald-400 font-mono",children:["$",p.price]}),y.jsx("div",{className:"text-xl font-mono flex items-center justify-end gap-1 text-green-500",children:p.change})]})]}),y.jsxs("div",{className:"grid grid-cols-2 gap-6",children:[y.jsxs("div",{className:"bg-slate-900/60 border border-white/10 p-6 rounded-2xl backdrop-blur-md",children:[y.jsx("h4",{className:"text-xs text-slate-400 uppercase font-bold mb-4",children:"RSI Momentum"}),y.jsx("div",{className:"text-3xl font-mono text-white",children:p.rsi})]}),y.jsxs("div",{className:"bg-slate-900/60 border border-white/10 p-6 rounded-2xl backdrop-blur-md",children:[y.jsx("h4",{className:"text-xs text-slate-400 uppercase font-bold mb-4",children:"MACD Signal"}),y.jsx("div",{className:"text-3xl font-mono text-white",children:p.macd.value})]})]})]}):y.jsxs("div",{className:"flex flex-col items-center justify-center h-full text-slate-700",children:[y.jsx(js,{className:"w-20 h-20 mb-6 opacity-20 animate-pulse"}),y.jsx("h3",{className:"text-xl font-bold uppercase tracking-widest text-slate-600",children:"Terminal Chartiste"})]})]})]})},ZM=({onClose:n})=>{const[e,i]=$.useState("overview"),r=({id:a,label:l,icon:c})=>y.jsxs("button",{onClick:()=>i(a),className:`w-full text-left px-4 py-3 rounded-lg flex items-center gap-3 text-sm font-medium transition-all ${e===a?"bg-blue-600 text-white shadow-lg":"text-slate-400 hover:bg-slate-800 hover:text-white"}`,children:[y.jsx(c,{className:"w-4 h-4"})," ",l]});return y.jsx("div",{className:"fixed inset-0 z-[100] bg-slate-950/90 backdrop-blur-md flex items-center justify-center p-4 md:p-10",children:y.jsxs("div",{className:"w-full max-w-6xl h-full bg-slate-900 border border-slate-700 rounded-2xl shadow-2xl flex flex-col md:flex-row overflow-hidden ring-1 ring-white/10",children:[y.jsxs("div",{className:"w-full md:w-64 bg-slate-950 border-r border-slate-800 p-4 flex flex-col",children:[y.jsxs("div",{className:"mb-6 px-2",children:[y.jsxs("h2",{className:"text-lg font-bold text-white flex items-center gap-2",children:[y.jsx(Cy,{className:"w-5 h-5 text-blue-500"})," Guide Dev"]}),y.jsx("p",{className:"text-[10px] text-slate-500 mt-1 uppercase tracking-wider",children:"Emma IA Enterprise v2.5"})]}),y.jsxs("nav",{className:"space-y-1 flex-1",children:[y.jsx(r,{id:"overview",label:"Vue d'ensemble",icon:Py}),y.jsx(r,{id:"setup",label:"Configuration & Cls",icon:HA}),y.jsx(r,{id:"integration",label:"Intgration Web (iFrame)",icon:qy}),y.jsx(r,{id:"structure",label:"Architecture Code",icon:IA}),y.jsx(r,{id:"models",label:"Modles LLM 2025",icon:xA})]}),y.jsx("div",{className:"pt-4 border-t border-slate-800 text-[10px] text-slate-600 px-2",children:"Documentation gnre automatiquement."})]}),y.jsxs("div",{className:"flex-1 flex flex-col relative bg-slate-900",children:[y.jsx("button",{onClick:n,className:"absolute top-4 right-4 p-2 bg-slate-800 rounded-full hover:bg-slate-700 text-slate-400 hover:text-white z-10",children:y.jsx(xd,{className:"w-5 h-5"})}),y.jsxs("div",{className:"flex-1 overflow-y-auto p-8 custom-scrollbar",children:[e==="overview"&&y.jsxs("div",{className:"space-y-6 animate-in fade-in slide-in-from-bottom-4",children:[y.jsx("h1",{className:"text-3xl font-bold text-white mb-2",children:"Emma IA Enterprise Platform"}),y.jsx("p",{className:"text-lg text-slate-400 leading-relaxed",children:"Une suite d'assistants virtuels financiers de nouvelle gnration utilisant les technologies multimodales de Google Gemini 2.5."}),y.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 mt-8",children:[y.jsxs("div",{className:"bg-slate-800/50 p-6 rounded-xl border border-slate-700",children:[y.jsx("h3",{className:"text-blue-400 font-bold mb-2",children:"Cerveau Central"}),y.jsxs("p",{className:"text-sm text-slate-300",children:["Propuls par ",y.jsx("strong",{children:"Gemini 2.5 Flash Live"})," (Bidirectionnel) pour la voix et ",y.jsx("strong",{children:"Gemini 2.0 Pro"})," pour le raisonnement textuel complexe."]})]}),y.jsxs("div",{className:"bg-slate-800/50 p-6 rounded-xl border border-slate-700",children:[y.jsx("h3",{className:"text-purple-400 font-bold mb-2",children:"Moteurs d'Avatar"}),y.jsxs("p",{className:"text-sm text-slate-300",children:["Support hybride pour ",y.jsx("strong",{children:"HeyGen Streaming API v2"})," (WebRTC Interactive) et ",y.jsx("strong",{children:"Akool"}),", ainsi qu'une intgration vido native via ",y.jsx("strong",{children:"Tavus Phoenix"}),"."]})]})]})]}),e==="setup"&&y.jsxs("div",{className:"space-y-6 animate-in fade-in slide-in-from-bottom-4",children:[y.jsx("h2",{className:"text-2xl font-bold text-white",children:"Requis de Configuration"}),y.jsxs("div",{className:"bg-slate-950 p-4 rounded-lg border border-slate-800 font-mono text-xs text-green-400 overflow-x-auto",children:["# .env ( la racine) ",y.jsx("br",{}),y.jsx("br",{}),"API_KEY=AIzaSy... (Google Gemini API Key)",y.jsx("br",{}),y.jsx("br",{}),"# Optionnels (Configurables aussi via UI Admin)",y.jsx("br",{}),"HEYGEN_API_TOKEN=...",y.jsx("br",{}),"AKOOL_API_TOKEN=...",y.jsx("br",{}),"TAVUS_API_KEY=..."]}),y.jsxs("div",{className:"space-y-4 text-sm text-slate-300",children:[y.jsx("h3",{className:"text-white font-bold text-lg",children:"Liste de contrle de dploiement"}),y.jsxs("ul",{className:"list-disc pl-5 space-y-2",children:[y.jsx("li",{children:"Vrifier que le domaine est autoris dans la Google Cloud Console (CORS)."}),y.jsxs("li",{children:["Activer l'API ",y.jsx("strong",{children:"Vertex AI"})," ou ",y.jsx("strong",{children:"Google AI Studio"}),"."]}),y.jsx("li",{children:`Pour HeyGen: S'assurer d'avoir un plan "Enterprise" pour l'accs Streaming API.`}),y.jsx("li",{children:`Pour Tavus: Vrifier la cration d'un "Replica" valide via leur dashboard.`})]})]})]}),e==="integration"&&y.jsxs("div",{className:"space-y-6 animate-in fade-in slide-in-from-bottom-4",children:[y.jsx("h2",{className:"text-2xl font-bold text-white",children:"Guide d'Intgration Web"}),y.jsx("p",{className:"text-slate-400",children:`L'application est conue pour tre "Responsive-First" et fonctionne parfaitement dans un conteneur iFrame ou en tant que SPA autonome.`}),y.jsxs("div",{className:"bg-slate-800/50 p-6 rounded-xl border border-blue-500/30",children:[y.jsx("h3",{className:"text-white font-bold mb-4",children:"Code d'intgration (iFrame)"}),y.jsxs("div",{className:"bg-black p-4 rounded text-xs font-mono text-slate-300",children:["<iframe ",y.jsx("br",{}),'src="https://emma-ia-enterprise.vercel.app" ',y.jsx("br",{}),'width="100%" ',y.jsx("br",{}),'height="800px" ',y.jsx("br",{}),'allow="microphone; camera; autoplay; clipboard-write" ',y.jsx("br",{}),'style="border:none; border-radius: 12px; box-shadow: 0 20px 50px rgba(0,0,0,0.5);"',y.jsx("br",{}),"></iframe>"]}),y.jsxs("p",{className:"mt-4 text-xs text-yellow-500 flex items-center gap-2",children:[y.jsx(Za,{className:"w-4 h-4"}),"Important: L'attribut ",y.jsx("code",{children:'allow="microphone"'})," est critique pour le fonctionnement vocal."]})]})]}),e==="models"&&y.jsxs("div",{className:"space-y-6 animate-in fade-in slide-in-from-bottom-4",children:[y.jsx("h2",{className:"text-2xl font-bold text-white",children:"Matrice des Modles (Standards 2025)"}),y.jsx("div",{className:"overflow-x-auto",children:y.jsxs("table",{className:"w-full text-left text-sm text-slate-400",children:[y.jsx("thead",{className:"bg-slate-800 text-slate-200 uppercase text-xs font-bold",children:y.jsxs("tr",{children:[y.jsx("th",{className:"p-4",children:"ID Modle"}),y.jsx("th",{className:"p-4",children:"Type"}),y.jsx("th",{className:"p-4",children:"Latence"}),y.jsx("th",{className:"p-4",children:"Cas d'usage"})]})}),y.jsxs("tbody",{className:"divide-y divide-slate-800",children:[y.jsxs("tr",{children:[y.jsx("td",{className:"p-4 font-mono text-blue-400",children:"gemini-2.5-flash-native-audio..."}),y.jsx("td",{className:"p-4",children:y.jsx("span",{className:"bg-green-500/20 text-green-400 px-2 py-1 rounded text-xs uppercase",children:"Bidirectionnel"})}),y.jsx("td",{className:"p-4",children:"~300ms"}),y.jsx("td",{className:"p-4",children:"Avatars Vocaux, Interruption Temps Rel"})]}),y.jsxs("tr",{children:[y.jsx("td",{className:"p-4 font-mono text-purple-400",children:"gemini-2.0-pro-exp-02-05"}),y.jsx("td",{className:"p-4",children:y.jsx("span",{className:"bg-blue-500/20 text-blue-400 px-2 py-1 rounded text-xs uppercase",children:"Directionnel"})}),y.jsx("td",{className:"p-4",children:"~1.5s"}),y.jsx("td",{className:"p-4",children:"Raisonnement complexe, Rdaction financire"})]}),y.jsxs("tr",{children:[y.jsx("td",{className:"p-4 font-mono text-yellow-400",children:"gemini-2.5-flash-thinking"}),y.jsx("td",{className:"p-4",children:y.jsx("span",{className:"bg-blue-500/20 text-blue-400 px-2 py-1 rounded text-xs uppercase",children:"Directionnel"})}),y.jsx("td",{className:"p-4",children:"~3s+"}),y.jsx("td",{className:"p-4",children:"Analyse profonde, Chain of Thought (CoT)"})]})]})]})})]})]})]})]})})},WM=({onClose:n,onSelect:e})=>{var g;const[i,r]=$.useState("finance"),[a,l]=$.useState(null),c=[{id:"finance",label:"Finance (Chat/Vocal)"},{id:"economy",label:"Macro"},{id:"politics",label:"Politique"},{id:"researcher",label:"Recherchiste"},{id:"ceo",label:"CEO Simulator"},{id:"critic",label:"Avocat du Diable"},{id:"writer",label:"Rdactrice"},{id:"geek",label:"Geek Technique"},{id:"tavus",label:"Emma Naturelle"}],h=()=>{a&&(e(i,a),n())};return y.jsx("div",{className:"fixed inset-0 z-[100] bg-slate-950/90 backdrop-blur-md flex items-center justify-center p-4",children:y.jsxs("div",{className:"bg-slate-900 border border-slate-700 w-full max-w-6xl h-[85vh] rounded-2xl shadow-2xl flex flex-col overflow-hidden animate-in fade-in zoom-in-95 duration-200",children:[y.jsxs("div",{className:"p-6 border-b border-slate-800 flex justify-between items-center bg-slate-950",children:[y.jsxs("div",{children:[y.jsxs("h2",{className:"text-xl font-bold text-white flex items-center gap-2",children:[y.jsx(Bn,{className:"w-5 h-5 text-blue-500"})," Galerie d'Avatars"]}),y.jsxs("p",{className:"text-xs text-slate-500 mt-1",children:["Personnalisez l'apparence de chaque section (",xg.length," options)."]})]}),y.jsx("button",{onClick:n,className:"p-2 hover:bg-slate-800 rounded-full transition-colors text-slate-400 hover:text-white",children:y.jsx(xd,{className:"w-6 h-6"})})]}),y.jsxs("div",{className:"flex flex-1 overflow-hidden",children:[y.jsxs("div",{className:"w-64 bg-slate-950 border-r border-slate-800 p-4 overflow-y-auto hidden md:block",children:[y.jsx("h3",{className:"text-xs font-bold text-slate-500 uppercase tracking-widest mb-4",children:"Sections"}),y.jsx("div",{className:"space-y-1",children:c.map(p=>y.jsx("button",{onClick:()=>r(p.id),className:be("w-full text-left px-4 py-3 rounded-lg text-sm font-medium transition-colors",i===p.id?"bg-blue-600 text-white":"text-slate-400 hover:bg-slate-800 hover:text-white"),children:p.label},p.id))})]}),y.jsxs("div",{className:"flex-1 p-6 overflow-y-auto bg-slate-900 custom-scrollbar",children:[y.jsxs("div",{className:"md:hidden mb-4",children:[y.jsx("label",{className:"text-xs text-slate-400 block mb-2",children:"Section  modifier"}),y.jsx("select",{value:i,onChange:p=>r(p.target.value),className:"w-full bg-slate-800 border border-slate-700 rounded-lg p-2 text-white text-sm",children:c.map(p=>y.jsx("option",{value:p.id,children:p.label},p.id))})]}),y.jsx("div",{className:"grid grid-cols-3 sm:grid-cols-4 md:grid-cols-5 lg:grid-cols-6 gap-3",children:xg.map((p,_)=>y.jsxs("button",{onClick:()=>l(p),className:be("relative aspect-square rounded-xl overflow-hidden border-2 transition-all group",a===p?"border-blue-500 ring-4 ring-blue-500/20 scale-95":"border-slate-800 hover:border-slate-600 hover:scale-105"),children:[y.jsx("img",{src:p,className:"w-full h-full object-cover",loading:"lazy",alt:`Avatar ${_}`}),a===p&&y.jsx("div",{className:"absolute inset-0 bg-blue-500/20 flex items-center justify-center",children:y.jsx("div",{className:"bg-blue-600 text-white p-1.5 rounded-full shadow-lg animate-in zoom-in",children:y.jsx(Ny,{className:"w-4 h-4"})})}),y.jsx("div",{className:"absolute inset-0 bg-black/0 group-hover:bg-black/20 transition-colors"})]},_))})]})]}),y.jsxs("div",{className:"p-4 border-t border-slate-800 bg-slate-950 flex justify-end gap-3",children:[y.jsx("button",{onClick:n,className:"px-6 py-2 rounded-lg border border-slate-700 text-slate-300 hover:text-white hover:bg-slate-800 transition-colors text-sm",children:"Annuler"}),y.jsxs("button",{onClick:h,disabled:!a,className:"px-6 py-2 rounded-lg bg-blue-600 hover:bg-blue-500 text-white font-medium shadow-lg disabled:opacity-50 disabled:cursor-not-allowed transition-all text-sm",children:["Appliquer  ",(g=c.find(p=>p.id===i))==null?void 0:g.label]})]})]})})},eI=()=>{const[n,e]=$.useState(null),i=Qy(),[r,a]=$.useState(!1),[l,c]=$.useState(!1),[h,g]=$.useState(!1),[p,_]=$.useState(!1),[x,S]=$.useState(!1),[T,w]=$.useState(null),[C,M]=$.useState("finance"),[D,B]=$.useState({systemInstruction:Vi,llmModel:Vs,llmTemperature:.6,geminiVoice:Sd,chatMode:"solo",heygenToken:"",heygenAvatarId:Ba,heygenQuality:"medium",heygenEmotion:"Friendly",heygenRemoveBackground:!1,akoolToken:"",akoolAvatarId:Ky,akoolRegion:"us-west",akoolFaceEnhance:!0,activeProvider:"both",muteGeminiAudio:!1,integrationConfig:Yr}),[I,z]=$.useState(ZN),U=$.useRef(null),K=$.useRef(null),[G,X]=$.useState(!1),[Y,ce]=$.useState(null),[he,re]=$.useState([]),[ve,Ve]=$.useState([]),[He,q]=$.useState(!1),[Q,ie]=$.useState({userTime:0,aiTime:{},lastActive:null}),ge=$.useRef(null),[Ee,N]=$.useState(null),[H,Z]=$.useState({});$.useEffect(()=>{new $v(Yr).loadAllConfigs().then(Ke=>w(Ke))},[]);const W=_e=>{e(_e)},le=()=>{i.connectionState===et.CONNECTED&&i.disconnect(),U.current&&U.current.endConversation(),e(null)},me=()=>{if(n==="tavus-video")return;let _e={...D};if(T&&(n==="ceo-mode"&&T.ceo?(_e.systemInstruction=T.ceo.systemPrompt,_e.geminiVoice=T.ceo.voiceName):n==="critic-mode"&&T.critic?(_e.systemInstruction=T.critic.systemPrompt,_e.geminiVoice=T.critic.voiceName):n==="technical-analyst"&&T.geek&&(_e.systemInstruction=T.geek.systemPrompt)),n==="avatar-hybrid"){const Ke=pi.find(Xe=>Xe.id===C);Ke&&(_e.systemInstruction=Ke.systemPrompt,_e.geminiVoice=Ke.voiceName,_e.heygenAvatarId=Ke.avatarId)}D.chatMode==="panel"&&(_e.systemInstruction=JN),n==="ceo-mode"&&Ee&&(_e.systemInstruction=Ee),i.connect(_e),ce(null),re([]),Ve([]),ie({userTime:0,aiTime:{},lastActive:null})},Ae=()=>{i.disconnect()};$.useEffect(()=>{i.connectionState,et.DISCONNECTED},[C]),$.useEffect(()=>(i.connectionState===et.CONNECTED?(K.current=new Date,ge.current=window.setInterval(()=>{const _e=i.userVolume>10,Ke=i.assistantVolume>10;ie(Xe=>{var tt;const De={...Xe};if(_e&&(De.userTime+=1,De.lastActive="User"),Ke){const rt=((tt=i.messages.slice().reverse().find(dn=>dn.role==="assistant"))==null?void 0:tt.text)||"";let $t="Emma IA";rt.includes("[Marc]:")&&($t="Marc"),rt.includes("[Sarah]:")&&($t="Sarah"),De.aiTime[$t]=(De.aiTime[$t]||0)+1,De.lastActive=$t}return De})},1e3)):ge.current&&clearInterval(ge.current),()=>{ge.current&&clearInterval(ge.current)}),[i.connectionState,i.userVolume,i.assistantVolume]),$.useEffect(()=>{var Ke;if(i.connectionState!==et.CONNECTED)return;const _e=i.messages[i.messages.length-1];if(_e&&_e.role==="assistant"){const Xe=_e.text.match(/###VISUAL_JSON_START###([\s\S]*?)###VISUAL_JSON_END###/);if(Xe&&Xe[1])try{const De=JSON.parse(Xe[1]);if(De.title){const tt={id:Date.now().toString(),type:De.type,title:De.title,topic:De.topic||"Gnral",content:((Ke=De.data)==null?void 0:Ke.summary)||De.content||JSON.stringify(De.data),url:De.url,timestamp:new Date,metadata:{...De,verificationStatus:De.verificationStatus}};re(rt=>[tt,...rt]),X(!0)}De.suggestions&&Array.isArray(De.suggestions)&&Ve(De.suggestions.map((tt,rt)=>({id:Date.now()+rt+"_sugg",type:tt.category==="News"?"news":"question",text:tt.text,category:tt.category||"Gnral"})).slice(0,3))}catch(De){console.error(De)}}},[i.messages,i.connectionState]);const st=()=>y.jsxs("div",{className:"fixed inset-0 z-[-1] overflow-hidden pointer-events-none",children:[y.jsx("div",{className:"absolute inset-0 animated-bg opacity-40"}),y.jsx("div",{className:"absolute top-0 left-0 w-full h-full bg-[radial-gradient(ellipse_at_top,_rgba(59,130,246,0.15),transparent_50%)]"}),y.jsx("div",{className:"absolute bottom-0 right-0 w-full h-full bg-[radial-gradient(ellipse_at_bottom,_rgba(168,85,247,0.15),transparent_50%)]"})]}),je=()=>{var Ke;if(!n)return y.jsx(GM,{onSelect:W,onOpenDevGuide:()=>c(!0),onOpenGallery:()=>S(!0),customImages:H});const _e=()=>S(!0);return n==="text-chat"?y.jsx(VM,{onBack:le,avatarImage:H.finance,onOpenGallery:_e}):n==="letter-writer"?y.jsx($M,{onBack:le,avatarImage:H.writer,onOpenGallery:_e}):n==="researcher"?y.jsxs(y.Fragment,{children:[y.jsx(KM,{}),y.jsx(JM,{onBack:le,avatarImage:H.researcher,onOpenGallery:_e})]}):n==="ceo-mode"?y.jsx(YM,{onBack:le,onInjectPrompt:N,avatarImage:H.ceo,onOpenGallery:_e}):n==="critic-mode"?y.jsx(QM,{onBack:le,avatarImage:H.critic,onOpenGallery:_e}):n==="technical-analyst"?y.jsx(XM,{onBack:le,avatarImage:H.geek,onOpenGallery:_e}):n==="tavus-video"?y.jsx(jM,{onBack:le,config:T?T.tavus:void 0,avatarImage:H.tavus,onOpenGallery:_e}):y.jsxs("div",{className:"min-h-screen flex flex-col md:flex-row relative",children:[y.jsxs("main",{className:"flex-1 flex flex-col relative h-[60vh] md:h-screen transition-all duration-300",children:[y.jsxs("div",{className:"absolute top-0 left-0 right-0 p-6 z-20 flex justify-between items-start pointer-events-none",children:[y.jsx("div",{className:"pointer-events-auto flex items-center gap-4",children:y.jsx("button",{onClick:le,className:"text-xs bg-slate-800/80 hover:bg-slate-700 text-slate-300 px-3 py-1 rounded-lg border border-white/10 backdrop-blur transition-colors",children:" Menu"})}),y.jsxs("div",{className:"flex flex-col items-end gap-2 pointer-events-auto",children:[y.jsx(PM,{state:i.connectionState,temperature:D.llmTemperature,latencyMs:24,isSpeaking:i.volume>10}),i.connectionState===et.CONNECTED&&y.jsx(qM,{startTime:K.current,stats:Q})]})]}),i.error&&y.jsxs("div",{className:"absolute top-24 left-1/2 -translate-x-1/2 z-50 bg-red-500/90 border border-red-400 text-white px-6 py-3 rounded-full flex items-center gap-2 backdrop-blur-md shadow-xl animate-bounce",children:[y.jsx(Ry,{className:"w-5 h-5"})," ",y.jsx("span",{className:"text-sm font-medium",children:i.error})]}),y.jsx("div",{className:"flex-1 flex items-center justify-center pt-20 md:pt-0",children:y.jsx(Jv,{state:i.connectionState,volume:i.assistantVolume,config:D,lastMessage:((Ke=i.messages.slice().reverse().find(Xe=>Xe.role==="assistant"))==null?void 0:Ke.text)||""})}),y.jsxs("div",{className:"relative z-30 pb-4 md:pb-8 flex flex-col items-center gap-4",children:[i.connectionState!==et.CONNECTED&&y.jsxs("div",{className:"mb-2 animate-in slide-in-from-bottom-4 fade-in",children:[y.jsx("div",{className:"text-[10px] text-slate-400 font-bold uppercase tracking-wider text-center mb-2",children:"Choisir l'Expert Vocal"}),y.jsx(Zv,{activeId:C,onSelect:M,className:"bg-slate-900/60 p-2 rounded-2xl backdrop-blur-md border border-white/10"})]}),i.connectionState===et.CONNECTED&&ve.length>0&&y.jsx(BM,{suggestions:ve,onSelect:Xe=>{i.sendText(Xe.text),Ve(De=>De.filter(tt=>tt.id!==Xe.id))}}),y.jsx(OM,{actions:I,onAction:Xe=>Xe==="OPEN_EMAIL_MODAL"?_(!0):i.sendText(`[ACTION]: ${Xe}`),onUpdateActions:z}),y.jsx(Kv,{state:i.connectionState,onConnect:me,onDisconnect:Ae,onEmail:()=>_(!0),onOpenAdmin:()=>a(!0),onToggleInsights:()=>X(!G),showInsights:G}),y.jsx("button",{id:"connect-btn-trigger",className:"hidden",onClick:me})]})]}),y.jsxs("aside",{className:"hidden md:flex flex-row h-screen z-20",children:[y.jsx("div",{className:"w-80 border-l border-white/5 bg-slate-950/80 backdrop-blur-xl flex flex-col h-full shadow-2xl",children:y.jsx("div",{className:"flex-1 overflow-hidden p-4",children:y.jsx(Yv,{messages:i.messages})})}),G&&y.jsx(Qv,{personalityData:Y,contextItems:he,isLoading:He})]})]})};return y.jsxs(y.Fragment,{children:[y.jsx(st,{}),r&&y.jsx(UM,{config:D,onSave:B,onClose:()=>a(!1)}),l&&y.jsx(ZM,{onClose:()=>c(!1)}),h&&y.jsx(Xv,{onClose:()=>g(!1)}),x&&y.jsx(WM,{onClose:()=>S(!1),onSelect:(_e,Ke)=>Z({...H,[_e]:Ke})}),p&&y.jsx(LM,{onClose:()=>_(!1),onProcess:_e=>{_(!1),i.sendText(`[ANALYSE CE COURRIEL]: ${_e}`)}}),je()]})},Wv=document.getElementById("root");if(!Wv)throw new Error("Could not find root element to mount to");const tI=Ub.createRoot(Wv);tI.render(y.jsx(Qg.StrictMode,{children:y.jsx(eI,{})}));
