{"version":3,"file":"index.js","sources":["../../node_modules/react/cjs/react-jsx-runtime.production.min.js","../../node_modules/react/jsx-runtime.js","../../node_modules/react-dom/client.js","../../src/components/tabs/AdminJSLaiTab.tsx","../../src/components/tabs/PlusTab.tsx","../../src/components/tabs/DansWatchlistTab.tsx","../../src/components/tabs/StocksNewsTab.tsx","../../src/components/tabs/IntelliStocksTab.tsx","../../src/components/tabs/EconomicCalendarTab.tsx","../../src/components/BetaCombinedDashboard.tsx","../../src/utils/iconMapping.tsx","../../src/App.tsx","../../src/main.tsx"],"sourcesContent":["/**\n * @license React\n * react-jsx-runtime.production.min.js\n *\n * Copyright (c) Facebook, Inc. and its affiliates.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */\n'use strict';var f=require(\"react\"),k=Symbol.for(\"react.element\"),l=Symbol.for(\"react.fragment\"),m=Object.prototype.hasOwnProperty,n=f.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,p={key:!0,ref:!0,__self:!0,__source:!0};\nfunction q(c,a,g){var b,d={},e=null,h=null;void 0!==g&&(e=\"\"+g);void 0!==a.key&&(e=\"\"+a.key);void 0!==a.ref&&(h=a.ref);for(b in a)m.call(a,b)&&!p.hasOwnProperty(b)&&(d[b]=a[b]);if(c&&c.defaultProps)for(b in a=c.defaultProps,a)void 0===d[b]&&(d[b]=a[b]);return{$$typeof:k,type:c,key:e,ref:h,props:d,_owner:n.current}}exports.Fragment=l;exports.jsx=q;exports.jsxs=q;\n","'use strict';\n\nif (process.env.NODE_ENV === 'production') {\n  module.exports = require('./cjs/react-jsx-runtime.production.min.js');\n} else {\n  module.exports = require('./cjs/react-jsx-runtime.development.js');\n}\n","'use strict';\n\nvar m = require('react-dom');\nif (process.env.NODE_ENV === 'production') {\n  exports.createRoot = m.createRoot;\n  exports.hydrateRoot = m.hydrateRoot;\n} else {\n  var i = m.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED;\n  exports.createRoot = function(c, o) {\n    i.usingClientEntryPoint = true;\n    try {\n      return m.createRoot(c, o);\n    } finally {\n      i.usingClientEntryPoint = false;\n    }\n  };\n  exports.hydrateRoot = function(c, h, o) {\n    i.usingClientEntryPoint = true;\n    try {\n      return m.hydrateRoot(c, h, o);\n    } finally {\n      i.usingClientEntryPoint = false;\n    }\n  };\n}\n","import React, { useState, useEffect, useRef, useCallback } from 'react';\nimport type { TabProps } from '../../types';\n\ndeclare const Chart: any;\ndeclare const Recharts: any;\ndeclare const LightweightCharts: any;\n\nexport const AdminJSLaiTab: React.FC<TabProps> = (props) => {\n    const {             emmaConnected,                 setEmmaConnected,                 showPromptEditor,                 setShowPromptEditor,                 showTemperatureEditor,                 setShowTemperatureEditor,                 showLengthEditor,                 setShowLengthEditor } = props;\n                // √âtats pour Temp√©rature et Longueur (charg√©s depuis localStorage)\n                const [emmaTemperature, setEmmaTemperature] = useState(() => {\n                    const saved = localStorage.getItem('emma-temperature');\n                    return saved ? parseFloat(saved) : 0.3;\n                });\n                const [emmaMaxTokens, setEmmaMaxTokens] = useState(() => {\n                    const saved = localStorage.getItem('emma-max-tokens');\n                    return saved ? parseInt(saved) : 4096;\n                });\n\n                // √âtat pour le prompt syst√®me Emma (partag√© avec AskEmmaTab via localStorage)\n                const [emmaPrompt, setEmmaPrompt] = useState(() => {\n                    const saved = localStorage.getItem('emma-financial-prompt');\n                    return saved || `Tu es Emma, CFA¬Æ Level III, analyste financi√®re senior avec 15+ ans exp√©rience gestion portefeuille institutionnel.\n\nMISSION: Fournir analyses financi√®res rigoureuses, factuelles, actionnables de niveau Bloomberg Terminal.\n\n///\nDONN√âES DISPONIBLES (via outils dashboard):\n- Prix actions temps r√©el (FMP, Polygon, Twelve Data)\n- Fondamentaux (ratios P/E, ROE, marges, cash flow)\n- Actualit√©s financi√®res (<24h, Finnhub, FMP)\n- Indicateurs techniques (RSI, MACD, SMA)\n- Calendriers (earnings, √©v√©nements √©conomiques)\n- Watchlist utilisateur + tickers √©quipe\n///\n\nCAPACIT√âS PRINCIPALES:\n1. Analyses compl√®tes CFA¬Æ (valorisation, fondamentaux, technique)\n2. Explications concepts financiers (DCF, Graham, Buffett, Lynch)\n3. Contexte macro et sectoriel (Fed, taux, inflation)\n4. Cadres d√©cisionnels structur√©s (Porter's Five Forces, Moat analysis)\n\nAPPROCHE:\n- Priorit√© donn√©es R√âELLES via outils (prix, ratios, news)\n- Analyses chiffr√©es (minimum 8 ratios financiers)\n- Comparaisons sectorielles + historique 3-5 ans\n- Sources cit√©es (FMP, Bloomberg, FactSet)\n\nSTYLE:\n- Professionnel niveau CFA Institute\n- Factuel, pr√©cis, sans g√©n√©ralit√©s vagues\n- Proactif: proposer analyses compl√©mentaires\n- P√©dagogique: expliquer ratios et concepts\n- Toujours en fran√ßais\n\nCONTRAINTES:\n- Z√âRO mention limitations (\"Je n'ai pas acc√®s\")\n- Commencer par ce que tu PEUX analyser avec donn√©es disponibles\n- Longueur: 200-400 mots (questions simples), PROFONDEUR MAXIMALE pour analyses compl√®tes (aucune limite)\n- V√©rifier coh√©rence donn√©es avant r√©ponse finale\n- Disclaimer obligatoire si recommandations d'investissement`;\n                });\n\n                // √âtat pour function calling (partag√© avec AskEmmaTab via localStorage)\n                const [useFunctionCalling, setUseFunctionCalling] = useState(() => {\n                    const saved = localStorage.getItem('emma-use-function-calling');\n                    return saved !== null ? saved === 'true' : true;\n                });\n\n                // √âtat pour afficher/masquer les sections\n                const [showEmmaConfig, setShowEmmaConfig] = useState(false);\n\n                // Handlers pour sauvegarder dans localStorage\n                const handlePromptChange = (newPrompt) => {\n                    setEmmaPrompt(newPrompt);\n                    localStorage.setItem('emma-financial-prompt', newPrompt);\n                };\n\n                const handleTemperatureChange = (newTemp) => {\n                    setEmmaTemperature(newTemp);\n                    localStorage.setItem('emma-temperature', newTemp.toString());\n                };\n\n                const handleMaxTokensChange = (newTokens) => {\n                    setEmmaMaxTokens(newTokens);\n                    localStorage.setItem('emma-max-tokens', newTokens.toString());\n                };\n\n                const handleFunctionCallingToggle = (enabled) => {\n                    setUseFunctionCalling(enabled);\n                    localStorage.setItem('emma-use-function-calling', enabled.toString());\n                };\n\n                const resetToOptimizedPrompt = () => {\n                    const optimizedPrompt = `Tu es Emma, CFA¬Æ Level III, analyste financi√®re senior avec 15+ ans exp√©rience gestion portefeuille institutionnel.\n\nMISSION: Fournir analyses financi√®res rigoureuses, factuelles, actionnables de niveau Bloomberg Terminal.\n\n///\nDONN√âES DISPONIBLES (via outils dashboard):\n- Prix actions temps r√©el (FMP, Polygon, Twelve Data)\n- Fondamentaux (ratios P/E, ROE, marges, cash flow)\n- Actualit√©s financi√®res (<24h, Finnhub, FMP)\n- Indicateurs techniques (RSI, MACD, SMA)\n- Calendriers (earnings, √©v√©nements √©conomiques)\n- Watchlist utilisateur + tickers √©quipe\n///\n\nCAPACIT√âS PRINCIPALES:\n1. Analyses compl√®tes CFA¬Æ (valorisation, fondamentaux, technique)\n2. Explications concepts financiers (DCF, Graham, Buffett, Lynch)\n3. Contexte macro et sectoriel (Fed, taux, inflation)\n4. Cadres d√©cisionnels structur√©s (Porter's Five Forces, Moat analysis)\n\nAPPROCHE:\n- Priorit√© donn√©es R√âELLES via outils (prix, ratios, news)\n- Analyses chiffr√©es (minimum 8 ratios financiers)\n- Comparaisons sectorielles + historique 3-5 ans\n- Sources cit√©es (FMP, Bloomberg, FactSet)\n\nSTYLE:\n- Professionnel niveau CFA Institute\n- Factuel, pr√©cis, sans g√©n√©ralit√©s vagues\n- Proactif: proposer analyses compl√©mentaires\n- P√©dagogique: expliquer ratios et concepts\n- Toujours en fran√ßais\n\nCONTRAINTES:\n- Z√âRO mention limitations (\"Je n'ai pas acc√®s\")\n- Commencer par ce que tu PEUX analyser avec donn√©es disponibles\n- Longueur: 200-400 mots (questions simples), PROFONDEUR MAXIMALE pour analyses compl√®tes (aucune limite)\n- V√©rifier coh√©rence donn√©es avant r√©ponse finale\n- Disclaimer obligatoire si recommandations d'investissement`;\n                    handlePromptChange(optimizedPrompt);\n                };\n\n                return (\n                <div className=\"space-y-6\">\n                    <div className=\"flex justify-between items-center\">\n                        <h2 className={`text-2xl font-bold transition-colors duration-300 ${\n                            isDarkMode ? 'text-white' : 'text-gray-900'\n                        }`}>‚öôÔ∏è Admin-JSLAI</h2>\n                    </div>\n\n                    <EmmaSmsPanel />\n\n                    {/* ü§ñ Emma Configuration (nouveau - centralis√© pour admin) */}\n                    <div className={`rounded-lg p-4 border transition-colors duration-300 ${\n                        isDarkMode ? 'bg-gradient-to-br from-purple-900/20 to-gray-900 border-purple-700' : 'bg-gradient-to-br from-purple-50 to-gray-50 border-purple-200'\n                    }`}>\n                        <div className=\"flex justify-between items-center mb-4 cursor-pointer\" onClick={() => setShowEmmaConfig(!showEmmaConfig)}>\n                            <h3 className={`text-lg font-semibold flex items-center gap-2 ${isDarkMode ? 'text-purple-300' : 'text-purple-900'}`}>\n                                <Icon emoji=\"ü§ñ\" size={20} />\n                                Emma Configuration (Prompts Optimis√©s)\n                                <span className=\"text-xs opacity-70\">(partag√© avec onglet Emma IA‚Ñ¢)</span>\n                            </h3>\n                            <button className={`px-3 py-1 text-xs rounded transition-colors ${\n                                isDarkMode ? 'bg-purple-600 hover:bg-purple-700 text-white' : 'bg-purple-500 hover:bg-purple-600 text-white'\n                            }`}>\n                                {showEmmaConfig ? '‚ñº Masquer' : '‚ñ∂ Afficher'}\n                            </button>\n                        </div>\n\n                        {showEmmaConfig && (\n                            <div className=\"space-y-4\">\n                                {/* Prompt Syst√®me */}\n                                <div className={`p-3 rounded ${isDarkMode ? 'bg-gray-800' : 'bg-white'}`}>\n                                    <div className=\"flex justify-between items-center mb-3\">\n                                        <label className={`font-semibold flex items-center gap-2 ${isDarkMode ? 'text-purple-300' : 'text-purple-900'}`}>\n                                            <Icon emoji=\"üìù\" size={16} />\n                                            Prompt Syst√®me (Optimis√© Hassid)\n                                        </label>\n                                        <div className=\"flex gap-2\">\n                                            <button\n                                                onClick={resetToOptimizedPrompt}\n                                                className={`px-3 py-1 text-xs rounded transition-colors ${\n                                                    isDarkMode ? 'bg-green-600 hover:bg-green-700 text-white' : 'bg-green-500 hover:bg-green-600 text-white'\n                                                }`}\n                                            >\n                                                ‚úÖ Restaurer prompt optimis√©\n                                            </button>\n                                            <span className={`px-3 py-1 text-xs rounded ${isDarkMode ? 'bg-blue-900 text-blue-200' : 'bg-blue-100 text-blue-800'}`}>\n                                                {emmaPrompt.split(' ').length} mots (-85.6% vs original)\n                                            </span>\n                                        </div>\n                                    </div>\n                                    <textarea\n                                        value={emmaPrompt}\n                                        onChange={(e) => handlePromptChange(e.target.value)}\n                                        className={`w-full h-64 p-3 rounded border font-mono text-sm ${\n                                            isDarkMode ? 'bg-gray-900 border-gray-700 text-gray-200' : 'bg-white border-gray-300 text-gray-900'\n                                        }`}\n                                        placeholder=\"Prompt syst√®me Emma...\"\n                                    />\n                                    <div className={`mt-2 text-xs ${isDarkMode ? 'text-gray-400' : 'text-gray-600'}`}>\n                                        üí° Prompt optimis√© selon principes Hassid: layered structure, d√©limiteurs ///, contraintes en fin (recency effect)\n                                    </div>\n                                </div>\n\n                                {/* Temp√©rature */}\n                                <div className={`p-3 rounded ${isDarkMode ? 'bg-gray-800' : 'bg-white'}`}>\n                                    <label className={`block font-semibold mb-2 flex items-center gap-2 ${isDarkMode ? 'text-purple-300' : 'text-purple-900'}`}>\n                                        <Icon emoji=\"üå°Ô∏è\" size={16} />\n                                        Temp√©rature: <span className=\"font-bold text-blue-600\">{emmaTemperature.toFixed(2)}</span>\n                                        <span className=\"text-xs font-normal opacity-70\">\n                                            ({emmaTemperature <= 0.3 ? 'Pr√©cis/Factuel' : emmaTemperature <= 0.6 ? '√âquilibr√©' : 'Cr√©atif'})\n                                        </span>\n                                    </label>\n                                    <input\n                                        type=\"range\"\n                                        min=\"0.1\"\n                                        max=\"1.0\"\n                                        step=\"0.05\"\n                                        value={emmaTemperature}\n                                        onChange={(e) => handleTemperatureChange(parseFloat(e.target.value))}\n                                        className=\"w-full\"\n                                    />\n                                    <div className={`flex justify-between text-xs mt-1 ${isDarkMode ? 'text-gray-400' : 'text-gray-600'}`}>\n                                        <span>0.1 (Pr√©cis)</span>\n                                        <span>0.5 (√âquilibr√©)</span>\n                                        <span>1.0 (Cr√©atif)</span>\n                                    </div>\n                                </div>\n\n                                {/* Max Tokens */}\n                                <div className={`p-3 rounded ${isDarkMode ? 'bg-gray-800' : 'bg-white'}`}>\n                                    <label className={`block font-semibold mb-2 flex items-center gap-2 ${isDarkMode ? 'text-purple-300' : 'text-purple-900'}`}>\n                                        <Icon emoji=\"üìè\" size={16} />\n                                        Longueur Max: <span className=\"font-bold text-blue-600\">{emmaMaxTokens} tokens</span>\n                                        <span className=\"text-xs font-normal opacity-70\">\n                                            (~{Math.round(emmaMaxTokens * 0.75)} mots)\n                                        </span>\n                                    </label>\n                                    <input\n                                        type=\"range\"\n                                        min=\"1024\"\n                                        max=\"16384\"\n                                        step=\"512\"\n                                        value={emmaMaxTokens}\n                                        onChange={(e) => handleMaxTokensChange(parseInt(e.target.value))}\n                                        className=\"w-full\"\n                                    />\n                                    <div className={`flex justify-between text-xs mt-1 ${isDarkMode ? 'text-gray-400' : 'text-gray-600'}`}>\n                                        <span>1024</span>\n                                        <span>4096 (d√©faut)</span>\n                                        <span>8192</span>\n                                        <span>16384</span>\n                                    </div>\n                                    <div className={`mt-2 text-xs ${isDarkMode ? 'text-yellow-400' : 'text-yellow-700'}`}>\n                                        ‚ö†Ô∏è Note: Analyses compl√®tes SMS = max 2 parties (~3500 chars). Web/Email = profondeur maximale.\n                                    </div>\n                                </div>\n\n                                {/* Function Calling */}\n                                <div className={`p-3 rounded ${isDarkMode ? 'bg-gray-800' : 'bg-white'}`}>\n                                    <div className=\"flex items-center justify-between\">\n                                        <label className={`font-semibold flex items-center gap-2 ${isDarkMode ? 'text-purple-300' : 'text-purple-900'}`}>\n                                            <Icon emoji=\"üîß\" size={16} />\n                                            Function Calling (APIs temps r√©el)\n                                        </label>\n                                        <label className=\"relative inline-flex items-center cursor-pointer\">\n                                            <input\n                                                type=\"checkbox\"\n                                                checked={useFunctionCalling}\n                                                onChange={(e) => handleFunctionCallingToggle(e.target.checked)}\n                                                className=\"sr-only peer\"\n                                            />\n                                            <div className=\"w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-purple-300 dark:peer-focus:ring-purple-800 rounded-full peer dark:bg-gray-700 peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all dark:border-gray-600 peer-checked:bg-purple-600\"></div>\n                                            <span className={`ml-3 text-sm font-medium ${isDarkMode ? 'text-gray-300' : 'text-gray-900'}`}>\n                                                {useFunctionCalling ? 'Activ√© ‚úÖ' : 'D√©sactiv√© ‚ùå'}\n                                            </span>\n                                        </label>\n                                    </div>\n                                    <div className={`mt-2 text-xs ${isDarkMode ? 'text-gray-400' : 'text-gray-600'}`}>\n                                        {useFunctionCalling\n                                            ? '‚úÖ Emma utilise les APIs (FMP, Finnhub, etc.) pour donn√©es temps r√©el'\n                                            : '‚ùå Emma se base uniquement sur ses connaissances d\\'entra√Ænement'}\n                                    </div>\n                                </div>\n\n                                {/* Info Synchronisation */}\n                                <div className={`p-3 rounded border-2 ${isDarkMode ? 'bg-blue-900/20 border-blue-700' : 'bg-blue-50 border-blue-300'}`}>\n                                    <div className={`text-sm ${isDarkMode ? 'text-blue-200' : 'text-blue-900'}`}>\n                                        <Icon emoji=\"‚ÑπÔ∏è\" size={16} /> <strong>Synchronisation automatique:</strong> Tous les r√©glages sont partag√©s avec l'onglet \"Emma IA‚Ñ¢\" via localStorage.\n                                        Les modifications ici s'appliquent imm√©diatement partout.\n                                    </div>\n                                </div>\n                            </div>\n                        )}\n                    </div>\n\n                    {/* üîç Debug des Donn√©es (d√©plac√© ici depuis Titres & nouvelles) */}\n                    <div className={`rounded-lg p-4 border transition-colors duration-300 ${\n                        isDarkMode ? 'bg-gray-900 border-gray-700' : 'bg-gray-50 border-gray-200'\n                    }`}>\n                        <h3 className={`text-lg font-semibold mb-4 flex items-center gap-2 ${isDarkMode ? 'text-white' : 'text-gray-900'}`}>\n                            <Icon emoji=\"üîç\" size={20} />\n                            Debug des Donn√©es\n                        </h3>\n                        <div className=\"grid grid-cols-1 md:grid-cols-3 gap-4 text-sm\">\n                            <div className={`${isDarkMode ? 'bg-gray-800 border-gray-700' : 'bg-white border-gray-200'} rounded p-3 border`}>\n                                <div className=\"text-blue-600 font-medium mb-2 flex items-center gap-2\">\n                                    <Icon emoji=\"üìä\" size={18} />\n                                    Stock Data\n                                </div>\n                                <div className={isDarkMode ? 'text-gray-200' : 'text-gray-700'}>\n                                    Tickers: {tickers.length} ({tickers.join(', ')})\n                                </div>\n                                <div className={isDarkMode ? 'text-gray-200' : 'text-gray-700'}>\n                                    Donn√©es charg√©es: {Object.keys(stockData).length}\n                                </div>\n                                <div className={isDarkMode ? 'text-gray-200' : 'text-gray-700'}>\n                                    Derni√®re MAJ: {lastUpdate ? new Date(lastUpdate).toLocaleString('fr-FR') : 'Jamais'}\n                                </div>\n                            </div>\n                            <div className={`${isDarkMode ? 'bg-gray-800 border-gray-700' : 'bg-white border-gray-200'} rounded p-3 border`}>\n                                <div className=\"text-emerald-600 font-medium mb-2 flex items-center gap-2\">\n                                    <Icon emoji=\"üì∞\" size={18} />\n                                    News Data\n                                </div>\n                                <div className={isDarkMode ? 'text-gray-200' : 'text-gray-700'}>\n                                    Articles: {newsData.length}\n                                </div>\n                                <div className={isDarkMode ? 'text-gray-200' : 'text-gray-700'}>\n                                    Premier article: {newsData[0]?.title?.substring(0, 30) || 'Aucun'}...\n                                </div>\n                            </div>\n                            <div className={`${isDarkMode ? 'bg-gray-800 border-gray-700' : 'bg-white border-gray-200'} rounded p-3 border`}>\n                                <div className=\"text-violet-600 font-medium mb-2 flex items-center gap-2\">\n                                    <Icon emoji=\"üéØ\" size={18} />\n                                    Seeking Alpha\n                                </div>\n                                <div className={isDarkMode ? 'text-gray-200' : 'text-gray-700'}>\n                                    Stocks: {seekingAlphaData.stocks?.length || 0}\n                                </div>\n                                <div className={isDarkMode ? 'text-gray-200' : 'text-gray-700'}>\n                                    Stock Data: {Object.keys(seekingAlphaStockData.stocks || {}).length}\n                                </div>\n                            </div>\n                        </div>\n                    </div>\n\n                    {/* üì¶ Gestion du Cache Supabase */}\n                    <div className={`rounded-lg p-4 border transition-colors duration-300 ${\n                        isDarkMode ? 'bg-gradient-to-br from-blue-900/20 to-gray-900 border-blue-700' : 'bg-gradient-to-br from-blue-50 to-gray-50 border-blue-200'\n                    }`}>\n                        <div className=\"flex justify-between items-center mb-4\">\n                            <h3 className={`text-lg font-semibold flex items-center gap-2 ${isDarkMode ? 'text-blue-300' : 'text-blue-900'}`}>\n                                <Icon emoji=\"üì¶\" size={20} />\n                                Gestion du Cache Supabase\n                            </h3>\n                            <button\n                                onClick={async () => {\n                                    setLoadingCacheStatus(true);\n                                    try {\n                                        const response = await fetch(`${API_BASE_URL}/api/supabase-daily-cache?type=status&maxAgeHours=${cacheSettings.maxAgeHours || 4}`);\n                                        if (response.ok) {\n                                            const data = await response.json();\n                                            setCacheStatus(data.status || {});\n                                        }\n                                    } catch (error) {\n                                        console.error('Erreur r√©cup√©ration statut cache:', error);\n                                    } finally {\n                                        setLoadingCacheStatus(false);\n                                    }\n                                }}\n                                disabled={loadingCacheStatus}\n                                className={`px-3 py-1 text-xs rounded transition-colors ${\n                                    loadingCacheStatus\n                                        ? 'bg-gray-500 text-white cursor-not-allowed'\n                                        : isDarkMode ? 'bg-blue-600 hover:bg-blue-700 text-white' : 'bg-blue-500 hover:bg-blue-600 text-white'\n                                }`}\n                            >\n                                {loadingCacheStatus ? '‚è≥ Chargement...' : 'üîÑ Actualiser'}\n                            </button>\n                        </div>\n\n                        {/* Param√®tres du Cache */}\n                        <div className={`space-y-4 ${isDarkMode ? 'text-gray-300' : 'text-gray-700'}`}>\n                            <div className={`p-3 rounded ${isDarkMode ? 'bg-gray-800' : 'bg-white'}`}>\n                                <div className=\"font-semibold mb-3 flex items-center gap-2\">\n                                    <Icon emoji=\"‚öôÔ∏è\" size={16} />\n                                    Param√®tres du Cache\n                                </div>\n                                <div className=\"space-y-3\">\n                                    <div>\n                                        <label className=\"block text-sm mb-2\">\n                                            Dur√©e du cache (heures): <span className=\"font-bold text-blue-600\">{cacheSettings.maxAgeHours}h</span>\n                                        </label>\n                                        <input\n                                            type=\"range\"\n                                            min=\"1\"\n                                            max=\"12\"\n                                            value={cacheSettings.maxAgeHours}\n                                            onChange={(e) => {\n                                                const newSettings = { ...cacheSettings, maxAgeHours: parseInt(e.target.value) };\n                                                setCacheSettings(newSettings);\n                                                localStorage.setItem('cacheSettings', JSON.stringify(newSettings));\n                                            }}\n                                            className=\"w-full\"\n                                        />\n                                        <div className=\"flex justify-between text-xs text-gray-500 mt-1\">\n                                            <span>1h</span>\n                                            <span>6h</span>\n                                            <span>12h</span>\n                                        </div>\n                                    </div>\n                                    <div className=\"flex items-center gap-2\">\n                                        <input\n                                            type=\"checkbox\"\n                                            id=\"refreshOnNavigation\"\n                                            checked={cacheSettings.refreshOnNavigation}\n                                            onChange={(e) => {\n                                                const newSettings = { ...cacheSettings, refreshOnNavigation: e.target.checked };\n                                                setCacheSettings(newSettings);\n                                                localStorage.setItem('cacheSettings', JSON.stringify(newSettings));\n                                            }}\n                                            className=\"rounded\"\n                                        />\n                                        <label htmlFor=\"refreshOnNavigation\" className=\"text-sm\">\n                                            Rafra√Æchir les donn√©es tickers lors de la navigation\n                                        </label>\n                                    </div>\n                                    {cacheSettings.refreshOnNavigation && (\n                                        <div className=\"ml-6\">\n                                            <label className=\"block text-sm mb-2\">\n                                                Intervalle de rafra√Æchissement (minutes): <span className=\"font-bold text-blue-600\">{cacheSettings.refreshIntervalMinutes} min</span>\n                                            </label>\n                                            <input\n                                                type=\"range\"\n                                                min=\"5\"\n                                                max=\"30\"\n                                                step=\"5\"\n                                                value={cacheSettings.refreshIntervalMinutes}\n                                                onChange={(e) => {\n                                                    const newSettings = { ...cacheSettings, refreshIntervalMinutes: parseInt(e.target.value) };\n                                                    setCacheSettings(newSettings);\n                                                    localStorage.setItem('cacheSettings', JSON.stringify(newSettings));\n                                                }}\n                                                className=\"w-full\"\n                                            />\n                                        </div>\n                                    )}\n                                </div>\n                            </div>\n\n                            {/* √âtat du Cache */}\n                            <div className={`p-3 rounded ${isDarkMode ? 'bg-gray-800' : 'bg-white'}`}>\n                                <div className=\"font-semibold mb-3 flex items-center gap-2\">\n                                    <Icon emoji=\"üìä\" size={16} />\n                                    √âtat du Cache\n                                </div>\n                                <div className=\"space-y-2 text-xs\">\n                                    {Object.keys(cacheStatus).length === 0 ? (\n                                        <div className={`text-center py-2 ${isDarkMode ? 'text-gray-400' : 'text-gray-500'}`}>\n                                            Cliquez sur \"Actualiser\" pour voir l'√©tat du cache\n                                        </div>\n                                    ) : (\n                                        Object.entries(cacheStatus).map(([type, status]) => (\n                                            <div key={type} className={`p-2 rounded border ${\n                                                status.expired\n                                                    ? isDarkMode ? 'bg-yellow-900/30 border-yellow-800' : 'bg-yellow-50 border-yellow-200'\n                                                    : isDarkMode ? 'bg-green-900/30 border-green-800' : 'bg-green-50 border-green-200'\n                                            }`}>\n                                                <div className=\"flex justify-between items-center\">\n                                                    <span className=\"font-semibold capitalize\">{type.replace('_', ' ')}</span>\n                                                    <span className={`px-2 py-1 rounded text-xs ${\n                                                        status.expired\n                                                            ? 'bg-yellow-500 text-white'\n                                                            : 'bg-green-500 text-white'\n                                                    }`}>\n                                                        {status.expired ? '‚ö†Ô∏è Expir√©' : '‚úÖ Valide'}\n                                                    </span>\n                                                </div>\n                                                {status.age_hours && (\n                                                    <div className=\"mt-1 text-gray-600\">\n                                                        √Çge: {parseFloat(status.age_hours).toFixed(1)}h / {status.max_age_hours || cacheSettings.maxAgeHours}h max\n                                                    </div>\n                                                )}\n                                            </div>\n                                        ))\n                                    )}\n                                </div>\n                            </div>\n\n                            {/* Actions */}\n                            <div className=\"flex gap-2\">\n                                <button\n                                    onClick={async () => {\n                                        if (confirm('Vider tout le cache Supabase ? Les donn√©es seront recharg√©es depuis les APIs.')) {\n                                            try {\n                                                const response = await fetch(`${API_BASE_URL}/api/supabase-daily-cache`, {\n                                                    method: 'DELETE'\n                                                });\n                                                if (response.ok) {\n                                                    alert('Cache vid√© avec succ√®s');\n                                                    setCacheStatus({});\n                                                }\n                                            } catch (error) {\n                                                alert('Erreur lors du vidage du cache');\n                                            }\n                                        }\n                                    }}\n                                    className={`px-4 py-2 rounded text-sm font-semibold transition-colors ${\n                                        isDarkMode ? 'bg-red-600 hover:bg-red-700 text-white' : 'bg-red-500 hover:bg-red-600 text-white'\n                                    }`}\n                                >\n                                    üóëÔ∏è Vider le Cache\n                                </button>\n                                <button\n                                    onClick={() => {\n                                        const defaultSettings = {\n                                            maxAgeHours: 4,\n                                            refreshOnNavigation: true,\n                                            refreshIntervalMinutes: 10\n                                        };\n                                        setCacheSettings(defaultSettings);\n                                        localStorage.setItem('cacheSettings', JSON.stringify(defaultSettings));\n                                        alert('Param√®tres r√©initialis√©s aux valeurs par d√©faut');\n                                    }}\n                                    className={`px-4 py-2 rounded text-sm font-semibold transition-colors ${\n                                        isDarkMode ? 'bg-gray-700 hover:bg-gray-600 text-white' : 'bg-gray-600 hover:bg-gray-700 text-white'\n                                    }`}\n                                >\n                                    üîÑ R√©initialiser\n                                </button>\n                            </div>\n                        </div>\n                    </div>\n\n                    {/* üìã Logs Syst√®me - Nouveau */}\n                    <div className={`rounded-lg p-4 border transition-colors duration-300 ${\n                        isDarkMode ? 'bg-gray-900 border-gray-700' : 'bg-gray-50 border-gray-200'\n                    }`}>\n                        <div className=\"flex justify-between items-center mb-4\">\n                            <h3 className={`text-lg font-semibold flex items-center gap-2 ${isDarkMode ? 'text-white' : 'text-gray-900'}`}>\n                                <Icon emoji=\"üìã\" size={20} />\n                                Logs Syst√®me\n                            </h3>\n                            <button\n                                onClick={() => setSystemLogs([])}\n                                className=\"px-3 py-1 text-xs bg-red-500 text-white rounded hover:bg-red-600 transition-colors\"\n                            >\n                                Effacer logs\n                            </button>\n                        </div>\n                        <div className={`max-h-64 overflow-y-auto rounded p-3 font-mono text-xs ${\n                            isDarkMode ? 'bg-gray-800' : 'bg-white'\n                        }`}>\n                            {systemLogs.length === 0 ? (\n                                <div className={`text-center py-4 ${isDarkMode ? 'text-gray-400' : 'text-gray-500'}`}>\n                                    Aucun log pour le moment\n                                </div>\n                            ) : (\n                                systemLogs.map((log, index) => (\n                                    <div\n                                        key={index}\n                                        className={`py-1 border-b ${\n                                            isDarkMode ? 'border-gray-700' : 'border-gray-200'\n                                        } ${\n                                            log.type === 'error' ? 'text-red-500' :\n                                            log.type === 'success' ? 'text-green-500' :\n                                            log.type === 'warning' ? 'text-yellow-500' :\n                                            isDarkMode ? 'text-gray-300' : 'text-gray-700'\n                                        }`}\n                                    >\n                                        <span className=\"text-gray-500\">[{log.timestamp}]</span> {log.text}\n                                    </div>\n                                ))\n                            )}\n                        </div>\n                    </div>\n\n                    {/* üß† Deep Think - Analyses Profondes */}\n                    <div className={`rounded-lg p-4 border transition-colors duration-300 ${\n                        isDarkMode ? 'bg-gradient-to-br from-purple-900/20 to-gray-900 border-purple-700' : 'bg-gradient-to-br from-purple-50 to-gray-50 border-purple-200'\n                    }`}>\n                        <div className=\"flex justify-between items-center mb-4\">\n                            <h3 className={`text-lg font-semibold flex items-center gap-2 ${isDarkMode ? 'text-purple-300' : 'text-purple-900'}`}>\n                                <Icon emoji=\"üß†\" size={20} />\n                                Deep Think\n                            </h3>\n                            <span className={`px-2 py-1 text-xs rounded ${isDarkMode ? 'bg-purple-900/50 text-purple-300' : 'bg-purple-200 text-purple-900'}`}>\n                                AI Analysis System\n                            </span>\n                        </div>\n                        <div className={`space-y-2 text-sm ${isDarkMode ? 'text-gray-300' : 'text-gray-700'}`}>\n                            <div className={`p-3 rounded ${isDarkMode ? 'bg-gray-800' : 'bg-white'}`}>\n                                <div className=\"font-semibold mb-1 flex items-center gap-2\">\n                                    <Icon emoji=\"üéØ\" size={16} />\n                                    Statut du syst√®me\n                                </div>\n                                <div className=\"text-xs space-y-1\">\n                                    <div>‚Ä¢ Gemini API: {typeof window !== 'undefined' ? '‚úÖ Actif' : '‚ö†Ô∏è V√©rification...'}</div>\n                                    <div>‚Ä¢ Emma Agent: {systemLogs.filter(l => l.text.includes('Emma')).length > 0 ? '‚úÖ Op√©rationnel' : '‚è∏Ô∏è En attente'}</div>\n                                    <div>‚Ä¢ Deep Analysis: {stockData && Object.keys(stockData).length > 0 ? '‚úÖ Donn√©es disponibles' : '‚ö†Ô∏è Pas de donn√©es'}</div>\n                                </div>\n                            </div>\n                            <div className={`p-3 rounded ${isDarkMode ? 'bg-gray-800' : 'bg-white'}`}>\n                                <div className=\"font-semibold mb-1 flex items-center gap-2\">\n                                    <Icon emoji=\"üìä\" size={16} />\n                                    M√©triques\n                                </div>\n                                <div className=\"text-xs space-y-1\">\n                                    <div>‚Ä¢ Analyses effectu√©es: {systemLogs.filter(l => l.type === 'success').length}</div>\n                                    <div>‚Ä¢ Requ√™tes API: {systemLogs.length}</div>\n                                    <div>‚Ä¢ Derni√®re analyse: {systemLogs[0]?.timestamp || 'N/A'}</div>\n                                </div>\n                            </div>\n                        </div>\n                    </div>\n\n                    {/* ‚ö†Ô∏è Violations & Diagnostics */}\n                    <div className={`rounded-lg p-4 border transition-colors duration-300 ${\n                        isDarkMode ? 'bg-gradient-to-br from-red-900/20 to-gray-900 border-red-700' : 'bg-gradient-to-br from-red-50 to-gray-50 border-red-200'\n                    }`}>\n                        <div className=\"flex justify-between items-center mb-4\">\n                            <h3 className={`text-lg font-semibold flex items-center gap-2 ${isDarkMode ? 'text-red-300' : 'text-red-900'}`}>\n                                <Icon emoji=\"‚ö†Ô∏è\" size={20} />\n                                Violations\n                            </h3>\n                            <span className={`px-2 py-1 text-xs rounded ${\n                                systemLogs.filter(l => l.type === 'error').length > 0\n                                    ? 'bg-red-500 text-white'\n                                    : isDarkMode ? 'bg-green-900/50 text-green-300' : 'bg-green-200 text-green-900'\n                            }`}>\n                                {systemLogs.filter(l => l.type === 'error').length} erreur(s)\n                            </span>\n                        </div>\n                        <div className={`max-h-48 overflow-y-auto rounded p-3 font-mono text-xs ${\n                            isDarkMode ? 'bg-gray-800' : 'bg-white'\n                        }`}>\n                            {systemLogs.filter(l => l.type === 'error').length === 0 ? (\n                                <div className={`text-center py-4 ${isDarkMode ? 'text-green-400' : 'text-green-600'}`}>\n                                    ‚úÖ Aucune violation d√©tect√©e - Syst√®me op√©rationnel\n                                </div>\n                            ) : (\n                                <div className=\"space-y-2\">\n                                    {systemLogs.filter(l => l.type === 'error').map((log, index) => (\n                                        <div\n                                            key={index}\n                                            className={`p-2 rounded border ${\n                                                isDarkMode ? 'bg-red-900/30 border-red-800 text-red-200' : 'bg-red-50 border-red-200 text-red-800'\n                                            }`}\n                                        >\n                                            <div className=\"flex items-start gap-2\">\n                                                <span className=\"text-red-500\">‚ö†Ô∏è</span>\n                                                <div className=\"flex-1\">\n                                                    <div className=\"font-semibold text-xs\">[{log.timestamp}]</div>\n                                                    <div className=\"mt-1\">{log.text}</div>\n                                                </div>\n                                            </div>\n                                        </div>\n                                    ))}\n                                </div>\n                            )}\n                        </div>\n                        <div className={`mt-3 p-2 rounded text-xs ${isDarkMode ? 'bg-gray-800 text-gray-400' : 'bg-white text-gray-600'}`}>\n                            üí° <strong>Info:</strong> Les violations sont automatiquement track√©es. Consultez les logs syst√®me ci-dessus pour plus de d√©tails.\n                        </div>\n                    </div>\n\n                    {/* üé® Mode Professionnel / Fun */}\n                    <div className={`rounded-lg p-4 border transition-colors duration-300 ${\n                        isDarkMode ? 'bg-gradient-to-br from-indigo-900/20 to-gray-900 border-indigo-700' : 'bg-gradient-to-br from-indigo-50 to-gray-50 border-indigo-200'\n                    }`}>\n                        <div className=\"flex justify-between items-center mb-4\">\n                            <h3 className={`text-lg font-semibold flex items-center gap-2 ${isDarkMode ? 'text-indigo-300' : 'text-indigo-900'}`}>\n                                <Icon emoji=\"üé®\" size={20} />\n                                Mode d'Affichage des Ic√¥nes\n                            </h3>\n                            <div className={`px-3 py-1 rounded text-xs font-medium ${\n                                isProfessionalMode\n                                    ? isDarkMode ? 'bg-blue-900/50 text-blue-300' : 'bg-blue-200 text-blue-900'\n                                    : isDarkMode ? 'bg-purple-900/50 text-purple-300' : 'bg-purple-200 text-purple-900'\n                            }`}>\n                                {isProfessionalMode ? 'üíº Professionnel' : 'üéâ Fun'}\n                            </div>\n                        </div>\n                        <div className={`space-y-3 ${isDarkMode ? 'text-gray-300' : 'text-gray-700'}`}>\n                            <div className={`p-3 rounded ${isDarkMode ? 'bg-gray-800' : 'bg-white'}`}>\n                                <div className=\"flex items-center justify-between mb-2\">\n                                    <div className=\"flex items-center gap-2\">\n                                        <Icon emoji={isProfessionalMode ? \"üíº\" : \"üéâ\"} size={18} />\n                                        <span className=\"font-semibold\">\n                                            {isProfessionalMode ? 'Mode Professionnel' : 'Mode Fun'}\n                                        </span>\n                                    </div>\n                                    <button\n                                        onClick={() => {\n                                            const newMode = window.ProfessionalModeSystem.toggle();\n                                            setIsProfessionalMode(newMode);\n                                        }}\n                                        className={`px-4 py-2 rounded-lg transition-all duration-300 border-2 font-semibold ${\n                                            isProfessionalMode\n                                                ? 'bg-gradient-to-br from-blue-600 to-blue-700 border-blue-400 text-white hover:from-blue-700 hover:to-blue-800'\n                                                : 'bg-gradient-to-br from-purple-600 to-pink-600 border-purple-400 text-white hover:from-purple-700 hover:to-pink-700'\n                                        }`}\n                                    >\n                                        {isProfessionalMode ? (\n                                            <span className=\"flex items-center gap-2\">\n                                                <i className=\"iconoir-briefcase\"></i>\n                                                Mode Professionnel\n                                            </span>\n                                        ) : (\n                                            <span className=\"flex items-center gap-2\">\n                                                <span>üéâ</span>\n                                                Mode Fun\n                                            </span>\n                                        )}\n                                    </button>\n                                </div>\n                                <div className={`text-xs mt-2 ${isDarkMode ? 'text-gray-400' : 'text-gray-600'}`}>\n                                    {isProfessionalMode ? (\n                                        <>\n                                            <p className=\"mb-1\">‚úÖ Ic√¥nes professionnelles Iconoir activ√©es</p>\n                                            <p>Les emojis sont remplac√©s par des ic√¥nes vectorielles modernes pour une apparence plus professionnelle.</p>\n                                        </>\n                                    ) : (\n                                        <>\n                                            <p className=\"mb-1\">‚úÖ Mode Fun avec emojis activ√©</p>\n                                            <p>Les ic√¥nes sont affich√©es sous forme d'emojis color√©s pour une exp√©rience plus d√©contract√©e.</p>\n                                        </>\n                                    )}\n                                </div>\n                            </div>\n                            <div className={`p-2 rounded text-xs ${isDarkMode ? 'bg-gray-800/50 text-gray-400' : 'bg-gray-50 text-gray-600'}`}>\n                                üí° <strong>Astuce:</strong> Le mode s√©lectionn√© est sauvegard√© automatiquement et s'applique √† tous les onglets du dashboard.\n                            </div>\n                        </div>\n                    </div>\n\n                    {/* ü§ñ Configuration Emma IA */}\n                    <div className={`rounded-lg p-4 border transition-colors duration-300 ${\n                        isDarkMode ? 'bg-gradient-to-br from-emerald-900/20 to-gray-900 border-emerald-700' : 'bg-gradient-to-br from-emerald-50 to-gray-50 border-emerald-200'\n                    }`}>\n                        <div className=\"flex justify-between items-center mb-4\">\n                            <h3 className={`text-lg font-semibold flex items-center gap-2 ${isDarkMode ? 'text-emerald-300' : 'text-emerald-900'}`}>\n                                <Icon emoji=\"ü§ñ\" size={20} />\n                                Configuration Emma IA\n                            </h3>\n                            <div className={`px-3 py-1 rounded text-xs font-medium ${\n                                emmaConnected\n                                    ? isDarkMode ? 'bg-green-900/50 text-green-300' : 'bg-green-200 text-green-900'\n                                    : isDarkMode ? 'bg-red-900/50 text-red-300' : 'bg-red-200 text-red-900'\n                            }`}>\n                                {emmaConnected ? '‚úÖ Gemini Actif' : '‚ùå Gemini Inactif'}\n                            </div>\n                        </div>\n                        <div className=\"flex flex-wrap gap-2 mb-4\">\n                            <button\n                                onClick={() => setShowPromptEditor(!showPromptEditor)}\n                                className={`px-4 py-2 rounded transition-colors ${\n                                    isDarkMode\n                                        ? 'bg-purple-800 hover:bg-purple-700 text-white'\n                                        : 'bg-purple-600 hover:bg-purple-700 text-white'\n                                }`}\n                            >\n                                üìù Modifier Prompt\n                            </button>\n                            <button\n                                onClick={() => setShowTemperatureEditor(!showTemperatureEditor)}\n                                className={`px-4 py-2 rounded transition-colors ${\n                                    isDarkMode\n                                        ? 'bg-gray-800 hover:bg-gray-700 text-white'\n                                        : 'bg-gray-800 hover:bg-gray-700 text-white'\n                                }`}\n                            >\n                                üå°Ô∏è Temp√©rature\n                            </button>\n                            <button\n                                onClick={() => setShowLengthEditor(!showLengthEditor)}\n                                className={`px-4 py-2 rounded transition-colors ${\n                                    isDarkMode\n                                        ? 'bg-green-800 hover:bg-green-700 text-white'\n                                        : 'bg-green-600 hover:bg-green-700 text-white'\n                                }`}\n                            >\n                                üìè Longueur R√©ponse\n                            </button>\n                        </div>\n                        \n                        {/* Sliders pour Temp√©rature et Longueur */}\n                        <div className={`space-y-4 ${isDarkMode ? 'bg-gray-800/50' : 'bg-white'} p-4 rounded-lg border ${isDarkMode ? 'border-gray-700' : 'border-gray-200'}`}>\n                            {/* Slider Temp√©rature */}\n                            <div>\n                                <div className=\"flex items-center justify-between mb-2\">\n                                    <label className={`text-sm font-semibold ${isDarkMode ? 'text-gray-300' : 'text-gray-700'}`}>\n                                        üå°Ô∏è Temp√©rature: <span className=\"font-bold text-blue-600\">{emmaTemperature.toFixed(1)}</span>\n                                    </label>\n                                    <span className={`text-xs ${isDarkMode ? 'text-gray-400' : 'text-gray-500'}`}>\n                                        {emmaTemperature <= 0.3 ? 'Pr√©cis' : emmaTemperature <= 0.5 ? '√âquilibr√©' : emmaTemperature <= 0.7 ? 'Naturel' : 'Cr√©atif'}\n                                    </span>\n                                </div>\n                                <input\n                                    type=\"range\"\n                                    min=\"0.1\"\n                                    max=\"1.0\"\n                                    step=\"0.1\"\n                                    value={emmaTemperature}\n                                    onChange={(e) => {\n                                        const newTemp = parseFloat(e.target.value);\n                                        setEmmaTemperature(newTemp);\n                                        localStorage.setItem('emma-temperature', newTemp.toString());\n                                    }}\n                                    className=\"w-full h-2 bg-gray-200 rounded-lg appearance-none cursor-pointer\"\n                                    style={{\n                                        background: `linear-gradient(to right, #3b82f6 0%, #3b82f6 ${(emmaTemperature - 0.1) / 0.9 * 100}%, #e5e7eb ${(emmaTemperature - 0.1) / 0.9 * 100}%, #e5e7eb 100%)`\n                                    }}\n                                />\n                                <div className=\"flex justify-between text-xs text-gray-500 mt-1\">\n                                    <span>0.1</span>\n                                    <span>0.5</span>\n                                    <span>1.0</span>\n                                </div>\n                            </div>\n                            \n                            {/* Slider Longueur */}\n                            <div>\n                                <div className=\"flex items-center justify-between mb-2\">\n                                    <label className={`text-sm font-semibold ${isDarkMode ? 'text-gray-300' : 'text-gray-700'}`}>\n                                        üìè Longueur: <span className=\"font-bold text-green-600\">{emmaMaxTokens}</span> tokens\n                                    </label>\n                                    <span className={`text-xs ${isDarkMode ? 'text-gray-400' : 'text-gray-500'}`}>\n                                        {emmaMaxTokens <= 2048 ? 'Concis' : emmaMaxTokens <= 4096 ? 'D√©taill√©' : 'Tr√®s d√©taill√©'}\n                                    </span>\n                                </div>\n                                <input\n                                    type=\"range\"\n                                    min=\"512\"\n                                    max=\"8192\"\n                                    step=\"512\"\n                                    value={emmaMaxTokens}\n                                    onChange={(e) => {\n                                        const newTokens = parseInt(e.target.value);\n                                        setEmmaMaxTokens(newTokens);\n                                        localStorage.setItem('emma-max-tokens', newTokens.toString());\n                                    }}\n                                    className=\"w-full h-2 bg-gray-200 rounded-lg appearance-none cursor-pointer\"\n                                    style={{\n                                        background: `linear-gradient(to right, #10b981 0%, #10b981 ${(emmaMaxTokens - 512) / 7680 * 100}%, #e5e7eb ${(emmaMaxTokens - 512) / 7680 * 100}%, #e5e7eb 100%)`\n                                    }}\n                                />\n                                <div className=\"flex justify-between text-xs text-gray-500 mt-1\">\n                                    <span>512</span>\n                                    <span>4096</span>\n                                    <span>8192</span>\n                                </div>\n                            </div>\n                        </div>\n                        \n                        <div className={`mt-3 p-2 rounded text-xs ${isDarkMode ? 'bg-gray-800 text-gray-400' : 'bg-white text-gray-600'}`}>\n                            üí° <strong>Info:</strong> Ces param√®tres affectent le comportement d'Emma IA dans l'onglet Ask Emma. Modifications appliqu√©es imm√©diatement et sauvegard√©es dans localStorage.\n                        </div>\n                    </div>\n\n                    {/* Configuration Scraping Seeking Alpha */}\n                    <div className={`rounded-lg p-4 border transition-colors duration-300 ${\n                        isDarkMode ? 'bg-gradient-to-br from-orange-900/20 to-gray-900 border-orange-700' : 'bg-gradient-to-br from-orange-50 to-gray-50 border-orange-200'\n                    }`}>\n                        <div className=\"flex justify-between items-center mb-4\">\n                            <h3 className={`text-lg font-semibold flex items-center gap-2 ${isDarkMode ? 'text-orange-300' : 'text-orange-900'}`}>\n                                <Icon emoji=\"üîê\" size={20} />\n                                Configuration Scraping Seeking Alpha\n                            </h3>\n                        </div>\n                        \n                        <div className={`space-y-4 ${isDarkMode ? 'bg-gray-800/50' : 'bg-white'} p-4 rounded-lg border ${isDarkMode ? 'border-gray-700' : 'border-gray-200'}`}>\n                            {/* Email */}\n                            <div>\n                                <label className={`block text-sm font-semibold mb-2 ${isDarkMode ? 'text-gray-300' : 'text-gray-700'}`}>\n                                    üìß Email:\n                                </label>\n                                <div className={`p-3 rounded-lg border ${isDarkMode ? 'bg-gray-700 border-gray-600 text-gray-200' : 'bg-gray-50 border-gray-300 text-gray-900'}`}>\n                                    mvilla@videotron.ca\n                                </div>\n                            </div>\n                            \n                            {/* Mot de passe */}\n                            <div>\n                                <label className={`block text-sm font-semibold mb-2 ${isDarkMode ? 'text-gray-300' : 'text-gray-700'}`}>\n                                    üîë Mot de passe:\n                                </label>\n                                <div className=\"flex items-center gap-2\">\n                                    <div className={`flex-1 p-3 rounded-lg border ${isDarkMode ? 'bg-gray-700 border-gray-600 text-gray-200' : 'bg-gray-50 border-gray-300 text-gray-900'}`}>\n                                        <span id=\"seeking-alpha-password-display\">‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢</span>\n                                    </div>\n                                    <button\n                                        onClick={() => {\n                                            const display = document.getElementById('seeking-alpha-password-display');\n                                            if (display) {\n                                                if (display.textContent === '‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢') {\n                                                    display.textContent = 'Mickey69';\n                                                } else {\n                                                    display.textContent = '‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢';\n                                                }\n                                            }\n                                        }}\n                                        className={`px-4 py-3 rounded-lg border transition-colors ${\n                                            isDarkMode \n                                                ? 'bg-orange-700 hover:bg-orange-600 border-orange-600 text-white' \n                                                : 'bg-orange-500 hover:bg-orange-600 border-orange-400 text-white'\n                                        }`}\n                                    >\n                                        üëÅÔ∏è\n                                    </button>\n                                </div>\n                            </div>\n                            \n                            {/* Instructions */}\n                            <div className={`mt-4 p-3 rounded-lg border ${isDarkMode ? 'bg-blue-900/20 border-blue-700 text-blue-200' : 'bg-blue-50 border-blue-200 text-blue-800'}`}>\n                                <div className=\"text-sm font-semibold mb-2\">üìã Instructions d'utilisation:</div>\n                                <ol className=\"text-xs space-y-1 list-decimal list-inside\">\n                                    <li>Connectez-vous √† Seeking Alpha avec les identifiants ci-dessus</li>\n                                    <li>Utilisez la section \"√âTAPE 1: SCRAPING BATCH\" ci-dessous pour lancer le scraping</li>\n                                    <li>Pour chaque popup ouverte, appuyez sur F12, allez dans la Console, et collez le script g√©n√©r√©</li>\n                                    <li>Les donn√©es sont automatiquement sauvegard√©es dans Supabase</li>\n                                    <li>Utilisez \"√âTAPE 2: ANALYSE BATCH PERPLEXITY\" pour analyser les donn√©es scrap√©es</li>\n                                </ol>\n                            </div>\n                        </div>\n                    </div>\n\n                    {/* Section Administration des Stocks */}\n                    <div className={`backdrop-blur-sm rounded-lg p-6 border transition-colors duration-300 ${\n                        isDarkMode\n                            ? 'bg-gray-900 border-gray-700'\n                            : 'bg-gray-50 border-gray-200'\n                    }`}>\n                        <h3 className={`text-lg font-semibold mb-4 transition-colors duration-300 ${\n                            isDarkMode ? 'text-white' : 'text-gray-900'\n                        }`}>\n                        <Icon emoji=\"üìä\" size={20} className=\"mr-2 inline-block\" />\n                        Gestion des Stocks\n                    </h3>\n                        <div className=\"flex flex-wrap gap-2\">\n                            <button\n                                onClick={refreshAllStocks}\n                                disabled={loading}\n                                className=\"px-4 py-2 bg-emerald-600 text-white rounded hover:bg-emerald-700 disabled:opacity-50 transition-colors\"\n                            >\n                                {loading ? 'Actualisation...' : 'Actualiser Stocks'}\n                            </button>\n                            <button\n                                onClick={fetchNews}\n                                className=\"px-4 py-2 bg-green-600 text-white rounded hover:bg-green-700 transition-colors\"\n                            >\n                                Actualiser News\n                            </button>\n                        </div>\n                    </div>\n\n                    {/* Section Scraping Seeking Alpha */}\n                    {/* WORKFLOW EN 3 √âTAPES CLAIRES */}\n                    <div className=\"space-y-4\">\n                        {/* √âTAPE 1: SCRAPING BATCH */}\n                        <div className={`backdrop-blur-sm rounded-xl p-6 border-2 transition-colors duration-300 ${\n                            isDarkMode\n                                ? 'bg-gradient-to-r from-gray-900/40 to-gray-800/40 border-gray-500/50'\n                                : 'bg-gradient-to-r from-gray-800/40 to-gray-700/40 border-gray-400/50'\n                        }`}>\n                            <div className=\"flex items-center justify-between mb-4\">\n                                <h3 className={`text-xl font-bold transition-colors duration-300 ${\n                                    isDarkMode ? 'text-white' : 'text-gray-900'\n                                }`}>\n                                <Icon emoji=\"üìä\" size={20} className=\"mr-2 inline-block\" />\n                                √âTAPE 1: SCRAPING BATCH (25 tickers)\n                            </h3>\n                                <span className={`px-4 py-2 rounded-full text-sm font-bold ${\n                                    scrapingStatus === 'idle' ? 'bg-gray-500 text-white' :\n                                    scrapingStatus === 'running' ? 'bg-gray-700 text-white animate-pulse' :\n                                    scrapingStatus === 'completed' ? 'bg-green-500 text-white' :\n                                    'bg-red-500 text-white'\n                                }`}>\n                                    {scrapingStatus === 'idle' ? '‚è∏Ô∏è EN ATTENTE' :\n                                     scrapingStatus === 'running' ? 'üîÑ SCRAPING...' :\n                                     scrapingStatus === 'completed' ? '‚úÖ TERMIN√â' :\n                                     '‚ùå ERREUR'}\n                                </span>\n                            </div>\n\n                            {/* Barre de progression */}\n                            {scrapingStatus === 'running' && (\n                                <div className=\"mb-4\">\n                                    <div className=\"w-full bg-gray-700 rounded-full h-4\">\n                                        <div\n                                            className=\"bg-gradient-to-r from-gray-700 to-gray-600 h-4 rounded-full transition-all duration-300 flex items-center justify-center text-white text-xs font-bold\"\n                                            style={{ width: `${scrapingProgress}%` }}\n                                        >\n                                            {scrapingProgress}%\n                                        </div>\n                                    </div>\n                                </div>\n                            )}\n\n                            <div className={`mb-4 p-4 rounded-lg transition-colors duration-300 ${\n                                isDarkMode ? 'bg-black/30' : 'bg-white/60'\n                            }`}>\n                                <p className={`text-sm mb-3 font-semibold transition-colors duration-300 ${\n                                    isDarkMode ? 'text-yellow-300' : 'text-yellow-800'\n                                }`}>\n                                    ‚ö†Ô∏è IMPORTANT: Connectez-vous AVANT de lancer le scraping!\n                                </p>\n                                <ol className={`text-sm space-y-2 transition-colors duration-300 ${\n                                    isDarkMode ? 'text-gray-300' : 'text-gray-700'\n                                }`}>\n                                    <li><strong>1.</strong> Cliquez \"üîê SE CONNECTER\" ‚Üí Login Seeking Alpha</li>\n                                    <li><strong>2.</strong> Cliquez \"üöÄ LANCER SCRAPING BATCH\" ‚Üí Toutes les popups s'ouvrent</li>\n                                    <li><strong>3.</strong> Pour CHAQUE popup: F12 ‚Üí Console ‚Üí Collez script ‚Üí Entr√©e</li>\n                                    <li><strong>4.</strong> Fermez la popup apr√®s copie</li>\n                                    <li><strong>5.</strong> Les donn√©es sont auto-sauvegard√©es dans Supabase</li>\n                                </ol>\n                            </div>\n\n                            <div className=\"flex gap-3\">\n                                <button\n                                    onClick={() => {\n                                        addScrapingLog('üîê Ouverture de la page de connexion Seeking Alpha...', 'info');\n                                        window.open('https://seekingalpha.com/account/login', '_blank');\n                                        addScrapingLog('‚úÖ Connectez-vous, puis revenez ici', 'success');\n                                    }}\n                                    className=\"flex-1 px-6 py-4 bg-gradient-to-r from-green-600 to-emerald-600 text-white rounded-lg hover:from-green-700 hover:to-emerald-700 transition-all font-bold text-lg shadow-lg\"\n                                >\n                                    üîê SE CONNECTER √Ä SEEKING ALPHA\n                                </button>\n                                <button\n                                    onClick={runSeekingAlphaScraper}\n                                    disabled={scrapingStatus === 'running'}\n                                    className=\"flex-1 px-6 py-4 bg-gradient-to-r from-violet-600 to-purple-600 text-white rounded-lg hover:from-violet-700 hover:to-purple-700 disabled:opacity-50 disabled:cursor-not-allowed transition-all font-bold text-lg shadow-lg\"\n                                >\n                                    {scrapingStatus === 'running' ? '‚è≥ SCRAPING EN COURS...' : 'üöÄ LANCER SCRAPING BATCH'}\n                                </button>\n                            </div>\n                        </div>\n\n                        {/* √âTAPE 2: ANALYSE PERPLEXITY */}\n                        <div className={`backdrop-blur-sm rounded-xl p-6 border-2 transition-colors duration-300 ${\n                            isDarkMode\n                                ? 'bg-gradient-to-r from-pink-900/40 to-rose-900/40 border-pink-500/50'\n                                : 'bg-gradient-to-r from-pink-50 to-rose-50 border-pink-400/50'\n                        }`}>\n                            <h3 className={`text-xl font-bold mb-4 transition-colors duration-300 ${\n                                isDarkMode ? 'text-white' : 'text-gray-900'\n                            }`}>\n                            <Icon emoji=\"ü§ñ\" size={20} className=\"mr-2 inline-block\" />\n                            √âTAPE 2: ANALYSE BATCH PERPLEXITY\n                        </h3>\n\n                            <div className={`mb-4 p-4 rounded-lg transition-colors duration-300 ${\n                                isDarkMode ? 'bg-black/30' : 'bg-white/60'\n                            }`}>\n                                <p className={`text-sm mb-3 transition-colors duration-300 ${\n                                    isDarkMode ? 'text-gray-300' : 'text-gray-700'\n                                }`}>\n                                    üìä Cliquez pour analyser TOUTES les donn√©es scrap√©es en une seule fois:\n                                </p>\n                                <ul className={`text-sm space-y-2 transition-colors duration-300 ${\n                                    isDarkMode ? 'text-gray-300' : 'text-gray-700'\n                                }`}>\n                                    <li>‚úì R√©cup√®re tous les raw scrapes depuis Supabase</li>\n                                    <li>‚úì Analyse avec Perplexity AI en batch</li>\n                                    <li>‚úì Formate en JSON structur√©</li>\n                                    <li>‚úì Sauvegarde dans seeking_alpha_analysis</li>\n                                    <li>‚úì Affiche les r√©sultats dans le tableau ci-dessous</li>\n                                </ul>\n                            </div>\n\n                            <button\n                                onClick={async () => {\n                                    addScrapingLog('ü§ñ D√©marrage analyse Perplexity BATCH...', 'info');\n                                    try {\n                                        // R√©cup√©rer tous les raw scrapes depuis Supabase\n                                        addScrapingLog('üì• R√©cup√©ration des donn√©es depuis Supabase...', 'info');\n                                        const response = await fetch('/api/seeking-alpha-scraping?type=raw&limit=100');\n                                        const data = await response.json();\n\n                                        if (data.success && data.data && data.data.length > 0) {\n                                            addScrapingLog(`‚úÖ ${data.data.length} raw scrapes trouv√©s`, 'success');\n\n                                            for (const item of data.data) {\n                                                const ticker = item.ticker;\n                                                addScrapingLog(`üîÑ Analyse de ${ticker} avec Perplexity...`, 'info');\n                                                await analyzeWithPerplexityAndUpdate(ticker, {\n                                                    fullText: item.raw_text,\n                                                    url: item.url,\n                                                    content: {}\n                                                });\n                                            }\n                                            addScrapingLog('üéâ Analyse Perplexity termin√©e pour TOUS les tickers!', 'success');\n                                            addScrapingLog('üíæ R√©sultats sauvegard√©s dans Supabase', 'success');\n                                        } else {\n                                            addScrapingLog('‚ö†Ô∏è Aucune donn√©e trouv√©e dans Supabase', 'warning');\n                                            addScrapingLog('üí° Effectuez d\\'abord le scraping (√âtape 1)', 'info');\n                                        }\n                                    } catch (error) {\n                                        addScrapingLog(`‚ùå Erreur: ${error.message}`, 'error');\n                                    }\n                                }}\n                                className=\"w-full px-6 py-4 bg-gradient-to-r from-pink-600 to-rose-600 text-white rounded-lg hover:from-pink-700 hover:to-rose-700 transition-all font-bold text-lg shadow-lg\"\n                            >\n                                ü§ñ ANALYSER TOUT AVEC PERPLEXITY ({tickers.length} tickers)\n                            </button>\n                        </div>\n\n                        {/* √âTAPE 3: R√âSULTATS */}\n                        <div className={`backdrop-blur-sm rounded-xl p-6 border-2 transition-colors duration-300 ${\n                            isDarkMode\n                                ? 'bg-gradient-to-r from-emerald-900/40 to-teal-900/40 border-emerald-500/50'\n                                : 'bg-gradient-to-r from-emerald-50 to-teal-50 border-emerald-400/50'\n                        }`}>\n                            <h3 className={`text-xl font-bold mb-4 transition-colors duration-300 ${\n                                isDarkMode ? 'text-white' : 'text-gray-900'\n                            }`}>\n                            <Icon emoji=\"üìä\" size={20} className=\"mr-2 inline-block\" />\n                            √âTAPE 3: R√âSULTATS & AFFICHAGE\n                        </h3>\n\n                            <div className={`mb-4 p-4 rounded-lg transition-colors duration-300 ${\n                                isDarkMode ? 'bg-black/30' : 'bg-white/60'\n                            }`}>\n                                <p className={`text-sm transition-colors duration-300 ${\n                                    isDarkMode ? 'text-gray-300' : 'text-gray-700'\n                                }`}>\n                                    Toutes les analyses apparaissent dans le tableau ci-dessous. Cliquez sur \"RAFRA√éCHIR\" pour recharger les derni√®res donn√©es depuis Supabase.\n                                </p>\n                            </div>\n\n                            <button\n                                onClick={async () => {\n                                    addScrapingLog('üîÑ Rafra√Æchissement des donn√©es depuis Supabase...', 'info');\n                                    await fetchSeekingAlphaData();\n                                    await fetchSeekingAlphaStockData();\n                                    addScrapingLog('‚úÖ Donn√©es rafra√Æchies!', 'success');\n                                }}\n                                className=\"w-full px-6 py-4 bg-gradient-to-r from-emerald-600 to-teal-600 text-white rounded-lg hover:from-emerald-700 hover:to-teal-700 transition-all font-bold text-lg shadow-lg\"\n                            >\n                                üîÑ RAFRA√éCHIR LES DONN√âES DU TABLEAU\n                            </button>\n                        </div>\n                    </div>\n\n                    {/* Section Logs de Scraping */}\n                    {scrapingLogs.length > 0 && (\n                        <div className={`backdrop-blur-sm rounded-lg p-6 border transition-colors duration-300 ${\n                            isDarkMode \n                                ? 'bg-gray-900 border-gray-700' \n                                : 'bg-gray-50 border-gray-200'\n                        }`}>\n                            <h3 className={`text-lg font-semibold mb-4 transition-colors duration-300 ${\n                                isDarkMode ? 'text-white' : 'text-gray-900'\n                            }`}>üìã Logs de Scraping</h3>\n                            <div className={`max-h-64 overflow-y-auto space-y-2 ${\n                                isDarkMode ? 'bg-gray-800' : 'bg-white'\n                            } rounded-lg p-4`}>\n                                {scrapingLogs.map((log, index) => (\n                                    <div key={index} className={`text-sm p-2 rounded ${\n                                        log.type === 'error' ? 'bg-red-100 text-red-800' :\n                                        log.type === 'success' ? 'bg-green-100 text-green-800' :\n                                        log.type === 'warning' ? 'bg-yellow-100 text-yellow-800' :\n                                        'bg-gray-700 text-gray-200'\n                                    }`}>\n                                        <span className=\"font-mono text-xs opacity-70\">\n                                            {new Date(log.timestamp).toLocaleTimeString()}\n                                        </span>\n                                        <span className=\"ml-2\">{log.message}</span>\n                                    </div>\n                                ))}\n                            </div>\n                        </div>\n                    )}\n\n                    {/* Section √âtat des Connexions & Diagnostic des APIs - FUSIONN√âE */}\n                    <div className={`backdrop-blur-sm rounded-lg p-6 border transition-colors duration-300 ${\n                        isDarkMode \n                            ? 'bg-gray-900 border-gray-700' \n                            : 'bg-gray-50 border-gray-200'\n                    }`}>\n                        <div className=\"flex justify-between items-center mb-4\">\n                            <h3 className={`text-lg font-semibold transition-colors duration-300 ${\n                                isDarkMode ? 'text-white' : 'text-gray-900'\n                            }`}>üîó √âtat des Connexions & Diagnostic des APIs</h3>\n                            <div className=\"flex gap-2\">\n                                <button\n                                    onClick={async () => {\n                                        await checkApiStatus();\n                                        await runHealthCheck();\n                                    }}\n                                    disabled={healthCheckLoading}\n                                    className={`px-4 py-2 rounded-lg font-medium transition-colors duration-300 ${\n                                        healthCheckLoading\n                                            ? 'bg-gray-400 text-gray-200 cursor-not-allowed'\n                                            : 'bg-gray-800 text-white hover:bg-gray-700'\n                                    }`}\n                                >\n                                    {healthCheckLoading ? 'V√©rification...' : 'üîÑ V√©rifier Toutes'}\n                                </button>\n                            </div>\n                        </div>\n\n                        {/* Status Global (si healthStatus disponible) */}\n                        {healthStatus && (\n                            <div className={`p-4 rounded-lg border-2 mb-4 ${\n                                healthStatus.overall_status === 'healthy'\n                                    ? 'bg-green-50 border-green-200'\n                                    : healthStatus.overall_status === 'degraded'\n                                    ? 'bg-yellow-50 border-yellow-200'\n                                    : 'bg-red-50 border-red-200'\n                            }`}>\n                                <div className=\"flex items-center justify-between\">\n                                    <div>\n                                        <h4 className={`font-bold text-lg ${\n                                            healthStatus.overall_status === 'healthy'\n                                                ? 'text-green-800'\n                                                : healthStatus.overall_status === 'degraded'\n                                                ? 'text-yellow-800'\n                                                : 'text-red-800'\n                                        }`}>\n                                            {healthStatus.overall_status === 'healthy' ? 'üü¢' :\n                                             healthStatus.overall_status === 'degraded' ? 'üü°' : 'üî¥'}\n                                            Status Global: {healthStatus.overall_status.toUpperCase()}\n                                        </h4>\n                                        <p className={`text-sm ${\n                                            healthStatus.overall_status === 'healthy'\n                                                ? 'text-green-600'\n                                                : healthStatus.overall_status === 'degraded'\n                                                ? 'text-yellow-600'\n                                                : 'text-red-600'\n                                        }`}>\n                                            {healthStatus.healthy_apis}/{healthStatus.total_apis} APIs op√©rationnelles\n                                            ({Math.round((healthStatus.healthy_apis / healthStatus.total_apis) * 100)}%)\n                                        </p>\n                                    </div>\n                                    <div className=\"text-right\">\n                                        <p className={`text-sm font-medium ${\n                                            healthStatus.overall_status === 'healthy'\n                                                ? 'text-green-600'\n                                                : healthStatus.overall_status === 'degraded'\n                                                ? 'text-yellow-600'\n                                                : 'text-red-600'\n                                        }`}>\n                                            {healthStatus.response_time_ms}ms\n                                        </p>\n                                        <p className=\"text-xs text-gray-500\">\n                                            {new Date(healthStatus.timestamp).toLocaleTimeString('fr-FR')}\n                                        </p>\n                                    </div>\n                                </div>\n                            </div>\n                        )}\n\n                        {/* Liste d√©taill√©e des connexions */}\n                        {Object.keys(apiStatus).length > 0 && (\n                            <div className=\"space-y-3 mb-4\">\n                                <h4 className={`text-sm font-semibold mb-2 transition-colors duration-300 ${\n                                    isDarkMode ? 'text-gray-300' : 'text-gray-700'\n                                }`}>Connexions d√©taill√©es:</h4>\n                                {Object.entries(apiStatus).map(([api, status]) => (\n                                    <div key={api} className={`flex items-center justify-between p-3 rounded-lg transition-colors duration-300 ${\n                                        isDarkMode ? 'bg-gray-800' : 'bg-gray-100'\n                                    }`}>\n                                        <div className=\"flex-1\">\n                                            <span className={`font-mono capitalize transition-colors duration-300 ${\n                                                isDarkMode ? 'text-gray-300' : 'text-gray-700'\n                                            }`}>{api}</span>\n                                            {status.error && (\n                                                <div className={`text-xs mt-1 transition-colors duration-300 ${\n                                                    isDarkMode ? 'text-red-400' : 'text-red-600'\n                                                }`}>\n                                                    {status.error}\n                                                </div>\n                                            )}\n                                            {status.source && (\n                                                <div className={`text-xs mt-1 transition-colors duration-300 ${\n                                                    isDarkMode ? 'text-gray-500' : 'text-gray-500'\n                                                }`}>\n                                                    Source: {status.source}\n                                                </div>\n                                            )}\n                                        </div>\n                                        <div className=\"flex items-center gap-2\">\n                                            <span className={`w-3 h-3 rounded-full ${\n                                                status.status === 'success' ? 'bg-green-500' :\n                                                status.status === 'warning' ? 'bg-yellow-500' :\n                                                status.status === 'error' ? 'bg-red-500' : 'bg-gray-500'\n                                            }`}></span>\n                                            <span className={`text-sm transition-colors duration-300 ${\n                                                isDarkMode ? 'text-gray-400' : 'text-gray-600'\n                                            }`}>\n                                                {status.responseTime}ms\n                                            </span>\n                                        </div>\n                                    </div>\n                                ))}\n                            </div>\n                        )}\n\n                        {/* Recommandations (si healthStatus disponible) */}\n                        {healthStatus && healthStatus.recommendations && healthStatus.recommendations.length > 0 && (\n                            <div className={`p-4 rounded-lg mt-4 ${\n                                isDarkMode ? 'bg-gray-800' : 'bg-gray-700'\n                            }`}>\n                                <h4 className={`font-semibold mb-3 ${\n                                    isDarkMode ? 'text-white' : 'text-blue-900'\n                                }`}>\n                                    üí° Recommandations\n                                </h4>\n                                <div className=\"space-y-2\">\n                                    {healthStatus.recommendations.map((rec, index) => (\n                                        <div key={index} className={`p-3 rounded-lg ${\n                                            rec.priority === 'critical' ? 'bg-red-100 border border-red-200' :\n                                            rec.priority === 'high' ? 'bg-green-100 border border-green-200' :\n                                            'bg-yellow-100 border border-yellow-200'\n                                        }`}>\n                                            <div className=\"flex items-start justify-between\">\n                                                <div className=\"flex-1\">\n                                                    <p className={`font-medium text-sm ${\n                                                        rec.priority === 'critical' ? 'text-red-800' :\n                                                        rec.priority === 'high' ? 'text-green-800' :\n                                                        'text-yellow-800'\n                                                    }`}>\n                                                        {rec.priority === 'critical' ? 'üö®' :\n                                                         rec.priority === 'high' ? '‚ö†Ô∏è' : 'üí°'}\n                                                        {rec.message}\n                                                    </p>\n                                                    <p className=\"text-xs text-gray-600 mt-1\">\n                                                        <strong>Action:</strong> {rec.action}\n                                                    </p>\n                                                </div>\n                                            </div>\n                                        </div>\n                                    ))}\n                                </div>\n                            </div>\n                        )}\n\n                        {Object.keys(apiStatus).length === 0 && !healthStatus && (\n                            <div className={`text-center py-8 ${isDarkMode ? 'text-gray-400' : 'text-gray-600'}`}>\n                                <p>Cliquez sur \"üîÑ V√©rifier Toutes\" pour diagnostiquer les connexions</p>\n                            </div>\n                        )}\n                    </div>\n\n                    {/* Section Monitoring API Emma */}\n                    <div className={`backdrop-blur-sm rounded-lg p-6 border transition-colors duration-300 ${\n                        isDarkMode\n                            ? 'bg-gray-900 border-gray-700'\n                            : 'bg-gray-50 border-gray-200'\n                    }`}>\n                        <h3 className={`text-lg font-semibold mb-4 transition-colors duration-300 ${\n                            isDarkMode ? 'text-white' : 'text-gray-900'\n                        }`}>\n                        <Icon emoji=\"ü§ñ\" size={20} className=\"mr-2 inline-block\" />\n                        Monitoring Emma AI\n                    </h3>\n                        <div className=\"space-y-4\">\n                            <div className=\"grid grid-cols-1 md:grid-cols-3 gap-4\">\n                                <div className={`p-4 rounded-lg border transition-colors duration-300 ${\n                                    isDarkMode ? 'bg-gray-800 border-gray-600' : 'bg-white border-gray-200'\n                                }`}>\n                                    <div className=\"text-purple-600 font-medium mb-2 flex items-center gap-2\">\n                                        <Icon emoji=\"üß†\" size={18} />\n                                        Emma Agent\n                                    </div>\n                                    <div className={`text-sm transition-colors duration-300 ${\n                                        isDarkMode ? 'text-gray-300' : 'text-gray-700'\n                                    }`}>\n                                        Status: <span className=\"text-green-500\">‚úÖ Op√©rationnel</span>\n                                    </div>\n                                    <div className={`text-sm transition-colors duration-300 ${\n                                        isDarkMode ? 'text-gray-300' : 'text-gray-700'\n                                    }`}>\n                                        Outils: 12 disponibles\n                                    </div>\n                                </div>\n                                <div className={`p-4 rounded-lg border transition-colors duration-300 ${\n                                    isDarkMode ? 'bg-gray-800 border-gray-600' : 'bg-white border-gray-200'\n                                }`}>\n                                    <div className=\"text-blue-600 font-medium mb-2\">üìß Briefings</div>\n                                    <div className={`text-sm transition-colors duration-300 ${\n                                        isDarkMode ? 'text-gray-300' : 'text-gray-700'\n                                    }`}>\n                                        Cron: <span className=\"text-green-500\">‚úÖ Actif</span>\n                                    </div>\n                                    <div className={`text-sm transition-colors duration-300 ${\n                                        isDarkMode ? 'text-gray-300' : 'text-gray-700'\n                                    }`}>\n                                        Horaires: 7h20 ‚Ä¢ 11h50 ‚Ä¢ 16h20\n                                    </div>\n                                </div>\n                                <div className={`p-4 rounded-lg border transition-colors duration-300 ${\n                                    isDarkMode ? 'bg-gray-800 border-gray-600' : 'bg-white border-gray-200'\n                                }`}>\n                                    <div className=\"text-emerald-600 font-medium mb-2\">üóÑÔ∏è Supabase</div>\n                                    <div className={`text-sm transition-colors duration-300 ${\n                                        isDarkMode ? 'text-gray-300' : 'text-gray-700'\n                                    }`}>\n                                        Tables: 4 cr√©√©es\n                                    </div>\n                                    <div className={`text-sm transition-colors duration-300 ${\n                                        isDarkMode ? 'text-gray-300' : 'text-gray-700'\n                                    }`}>\n                                        Tickers: {teamTickers.length} team + {watchlistTickers.length} watchlist\n                                    </div>\n                                </div>\n                            </div>\n                            <div className=\"flex gap-2\">\n                                <button\n                                    onClick={() => {\n                                        fetch('/api/emma-agent', {\n                                            method: 'POST',\n                                            headers: { 'Content-Type': 'application/json' },\n                                            body: JSON.stringify({\n                                                message: 'Test de connexion Emma Agent',\n                                                context: { test: true }\n                                            })\n                                        }).then(response => response.json())\n                                        .then(data => {\n                                            if (data.success) {\n                                                showMessage('‚úÖ Emma Agent op√©rationnel', 'success');\n                                            } else {\n                                                showMessage('‚ùå Emma Agent erreur: ' + data.error, 'error');\n                                            }\n                                        }).catch(error => {\n                                            showMessage('‚ùå Erreur connexion Emma Agent', 'error');\n                                        });\n                                    }}\n                                    className=\"px-4 py-2 bg-purple-600 text-white rounded hover:bg-purple-700 transition-colors\"\n                                >\n                                    üß™ Tester Emma Agent\n                                </button>\n                                <button\n                                    onClick={() => {\n                                        fetch('/api/emma-briefing?type=morning')\n                                        .then(response => response.json())\n                                        .then(data => {\n                                            if (data.success) {\n                                                showMessage('‚úÖ Emma Briefing op√©rationnel', 'success');\n                                            } else {\n                                                showMessage('‚ùå Emma Briefing erreur: ' + data.error, 'error');\n                                            }\n                                        }).catch(error => {\n                                            showMessage('‚ùå Erreur connexion Emma Briefing', 'error');\n                                        });\n                                    }}\n                                    className=\"px-4 py-2 bg-gray-800 text-white rounded hover:bg-gray-700 transition-colors\"\n                                >\n                                    üìß Tester Briefing\n                                </button>\n                            </div>\n                        </div>\n                    </div>\n\n                    {/* Section Gestion des Outils Emma */}\n                    <div className={`backdrop-blur-sm rounded-lg p-6 border transition-colors duration-300 ${\n                        isDarkMode\n                            ? 'bg-gray-900 border-gray-700'\n                            : 'bg-gray-50 border-gray-200'\n                    }`}>\n                        <h3 className={`text-lg font-semibold mb-4 transition-colors duration-300 ${\n                            isDarkMode ? 'text-white' : 'text-gray-900'\n                        }`}>üîß Gestion des Outils Emma</h3>\n                        <div className=\"space-y-4\">\n                            <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\n                                <div className={`p-4 rounded-lg border transition-colors duration-300 ${\n                                    isDarkMode ? 'bg-gray-800 border-gray-600' : 'bg-white border-gray-200'\n                                }`}>\n                                    <h4 className={`font-medium mb-2 transition-colors duration-300 ${\n                                        isDarkMode ? 'text-white' : 'text-gray-900'\n                                    }`}>\n                                    <Icon emoji=\"üìä\" size={18} className=\"mr-2 inline-block\" />\n                                    Outils Financiers\n                                </h4>\n                                    <div className=\"space-y-1 text-sm\">\n                                        <div className={`transition-colors duration-300 ${\n                                            isDarkMode ? 'text-gray-300' : 'text-gray-700'\n                                        }`}>‚Ä¢ Polygon Stock Price</div>\n                                        <div className={`transition-colors duration-300 ${\n                                            isDarkMode ? 'text-gray-300' : 'text-gray-700'\n                                        }`}>‚Ä¢ FMP Fundamentals</div>\n                                        <div className={`transition-colors duration-300 ${\n                                            isDarkMode ? 'text-gray-300' : 'text-gray-700'\n                                        }`}>‚Ä¢ Finnhub News</div>\n                                        <div className={`transition-colors duration-300 ${\n                                            isDarkMode ? 'text-gray-300' : 'text-gray-700'\n                                        }`}>‚Ä¢ Twelve Data Technical</div>\n                                        <div className={`transition-colors duration-300 ${\n                                            isDarkMode ? 'text-gray-300' : 'text-gray-700'\n                                        }`}>‚Ä¢ Alpha Vantage Ratios</div>\n                                    </div>\n                                </div>\n                                <div className={`p-4 rounded-lg border transition-colors duration-300 ${\n                                    isDarkMode ? 'bg-gray-800 border-gray-600' : 'bg-white border-gray-200'\n                                }`}>\n                                    <h4 className={`font-medium mb-2 transition-colors duration-300 ${\n                                        isDarkMode ? 'text-white' : 'text-gray-900'\n                                    }`}>üóÑÔ∏è Outils Supabase</h4>\n                                    <div className=\"space-y-1 text-sm\">\n                                        <div className={`transition-colors duration-300 ${\n                                            isDarkMode ? 'text-gray-300' : 'text-gray-700'\n                                        }`}>‚Ä¢ Watchlist Manager</div>\n                                        <div className={`transition-colors duration-300 ${\n                                            isDarkMode ? 'text-gray-300' : 'text-gray-700'\n                                        }`}>‚Ä¢ Team Tickers</div>\n                                        <div className={`transition-colors duration-300 ${\n                                            isDarkMode ? 'text-gray-300' : 'text-gray-700'\n                                        }`}>‚Ä¢ Economic Calendar</div>\n                                        <div className={`transition-colors duration-300 ${\n                                            isDarkMode ? 'text-gray-300' : 'text-gray-700'\n                                        }`}>‚Ä¢ Earnings Calendar</div>\n                                        <div className={`transition-colors duration-300 ${\n                                            isDarkMode ? 'text-gray-300' : 'text-gray-700'\n                                        }`}>‚Ä¢ Analyst Recommendations</div>\n                                    </div>\n                                </div>\n                            </div>\n                            <div className=\"flex gap-2\">\n                                <button\n                                    onClick={() => {\n                                        fetch('/api/emma-agent', {\n                                            method: 'POST',\n                                            headers: { 'Content-Type': 'application/json' },\n                                            body: JSON.stringify({\n                                                message: 'Afficher la configuration des outils',\n                                                context: { action: 'show_tools_config' }\n                                            })\n                                        }).then(response => response.json())\n                                        .then(data => {\n                                            if (data.success) {\n                                                showMessage('‚úÖ Configuration des outils r√©cup√©r√©e', 'success');\n                                                console.log('Tools Config:', data.tools_config);\n                                            } else {\n                                                showMessage('‚ùå Erreur r√©cup√©ration config', 'error');\n                                            }\n                                        }).catch(error => {\n                                            showMessage('‚ùå Erreur connexion', 'error');\n                                        });\n                                    }}\n                                    className=\"px-4 py-2 bg-indigo-600 text-white rounded hover:bg-indigo-700 transition-colors\"\n                                >\n                                    ‚öôÔ∏è Voir Configuration\n                                </button>\n                            </div>\n                        </div>\n                    </div>\n\n\n                    {/* Section Configuration */}\n                    <div className={`backdrop-blur-sm rounded-lg p-6 border transition-colors duration-300 ${\n                        isDarkMode\n                            ? 'bg-gray-900 border-gray-700'\n                            : 'bg-gray-50 border-gray-200'\n                    }`}>\n                        <h3 className={`text-lg font-semibold mb-4 transition-colors duration-300 ${\n                            isDarkMode ? 'text-white' : 'text-gray-900'\n                        }`}>\n                        <Icon emoji=\"‚öôÔ∏è\" size={20} className=\"mr-2 inline-block\" />\n                        Configuration\n                    </h3>\n                        <div className=\"space-y-4\">\n                            <div>\n                                <label className={`block text-sm font-medium mb-2 transition-colors duration-300 ${\n                                    isDarkMode ? 'text-gray-300' : 'text-gray-700'\n                                }`}>\n                                    Token GitHub (pour les mises √† jour)\n                                </label>\n                                <input\n                                    type=\"password\"\n                                    value={githubToken}\n                                    onChange={(e) => setGithubToken(e.target.value)}\n                                    placeholder=\"Entrez votre token GitHub\"\n                                    className={`w-full px-3 py-2 rounded-lg border transition-colors duration-300 ${\n                                        isDarkMode \n                                            ? 'bg-gray-700 border-gray-600 text-white placeholder-gray-400' \n                                            : 'bg-white border-gray-300 text-gray-900 placeholder-gray-500'\n                                    }`}\n                                />\n                            </div>\n                            <div className=\"flex gap-2\">\n                                <button\n                                    onClick={() => setShowSettings(!showSettings)}\n                                    className=\"px-4 py-2 bg-gray-800 text-white rounded hover:bg-gray-700 transition-colors\"\n                                >\n                                    {showSettings ? 'Masquer' : 'Afficher'} les param√®tres\n                                </button>\n                            </div>\n                        </div>\n                    </div>\n                </div>\n            );\n\n\n};\nexport default AdminJSLaiTab;\n","import React from 'react';\nimport type { TabProps } from '../../types';\n\nexport const PlusTab: React.FC<TabProps> = (props) => {\n    const { isDarkMode = true } = props;\n\n    const handleLogout = () => {\n        // Nettoyer toutes les donn√©es de session\n        sessionStorage.clear();\n        localStorage.clear();\n\n        // Rediriger vers la page de login\n        window.location.href = '/login.html';\n    };\n\n    return (\n        <div className=\"space-y-6\">\n            <div className={`backdrop-blur-sm rounded-lg p-6 border transition-colors duration-300 ${\n                isDarkMode\n                    ? 'bg-gray-900 border-gray-700'\n                    : 'bg-gray-50 border-gray-200'\n            }`}>\n                <h2 className={`text-2xl font-bold mb-6 transition-colors duration-300 ${\n                    isDarkMode ? 'text-white' : 'text-gray-900'\n                }`}>\n                    ‚öôÔ∏è Param√®tres & Actions\n                </h2>\n\n                <div className=\"space-y-4\">\n                    {/* Bouton D√©connexion */}\n                    <div className={`p-4 rounded-lg border transition-colors duration-300 ${\n                        isDarkMode\n                            ? 'bg-gray-800 border-gray-600'\n                            : 'bg-white border-gray-300'\n                    }`}>\n                        <h3 className={`text-lg font-semibold mb-2 transition-colors duration-300 ${\n                            isDarkMode ? 'text-white' : 'text-gray-900'\n                        }`}>\n                            Gestion de Session\n                        </h3>\n                        <p className={`text-sm mb-4 transition-colors duration-300 ${\n                            isDarkMode ? 'text-gray-400' : 'text-gray-600'\n                        }`}>\n                            D√©connectez-vous pour revenir √† la page de connexion\n                        </p>\n                        <button\n                            onClick={handleLogout}\n                            className=\"bg-red-600 hover:bg-red-700 text-white font-semibold py-2 px-4 rounded-lg transition-colors duration-200 flex items-center space-x-2\"\n                        >\n                            <span>üö™</span>\n                            <span>D√©connexion</span>\n                        </button>\n                    </div>\n\n                    {/* Section Fonctionnalit√©s √† venir */}\n                    <div className={`p-4 rounded-lg border transition-colors duration-300 ${\n                        isDarkMode\n                            ? 'bg-gray-800 border-gray-600'\n                            : 'bg-white border-gray-300'\n                    }`}>\n                        <h3 className={`text-lg font-semibold mb-2 transition-colors duration-300 ${\n                            isDarkMode ? 'text-white' : 'text-gray-900'\n                        }`}>\n                            Fonctionnalit√©s √† venir\n                        </h3>\n                        <ul className={`list-disc list-inside space-y-1 text-sm transition-colors duration-300 ${\n                            isDarkMode ? 'text-gray-400' : 'text-gray-600'\n                        }`}>\n                            <li>Gestion des pr√©f√©rences utilisateur</li>\n                            <li>Configuration des notifications</li>\n                            <li>Th√®me personnalis√©</li>\n                            <li>Export/Import de configuration</li>\n                        </ul>\n                    </div>\n                </div>\n            </div>\n        </div>\n    );\n};\n\nexport default PlusTab;\n","import React, { useState, useEffect, useRef, useCallback } from 'react';\nimport type { TabProps } from '../../types';\n\ndeclare const Chart: any;\ndeclare const Recharts: any;\ndeclare const LightweightCharts: any;\n\n            export const DansWatchlistTab: React.FC<TabProps> = (props) => {\n    const { isDarkMode = true, tickers = [], stockData = {}, API_BASE_URL, fetchStockData, showMessage, getCompanyLogo, emmaPopulateWatchlist, initialLoadComplete } = props;\n                const [watchlistTickers, setWatchlistTickers] = useState([]);\n                const [newTicker, setNewTicker] = useState('');\n                const [watchlistStockData, setWatchlistStockData] = useState({});\n                const [watchlistLoading, setWatchlistLoading] = useState(false);\n                const [showScreener, setShowScreener] = useState(false);\n                const [loadingScreener, setLoadingScreener] = useState(false);\n                const [screenerResults, setScreenerResults] = useState([]);\n                const [screenerFilters, setScreenerFilters] = useState({\n                    minMarketCap: 0,\n                    maxPE: 50,\n                    minROE: 0,\n                    sector: 'all'\n                });\n                const WATCHLIST_FILE = '/dans-watchlist.json'; // servi depuis /public\n                \n                // Fonction pour ex√©cuter le screener sur la watchlist\n                const runWatchlistScreener = async () => {\n                    // Convertir les tickers en format attendu par le screener\n                    const watchlistStocks = watchlistTickers.map(ticker => ({\n                        symbol: ticker,\n                        name: ticker // Le nom sera r√©cup√©r√© par l'API\n                    }));\n                    \n                    setLoadingScreener(true);\n                    try {\n                        const results = [];\n                        \n                        for (const stock of watchlistStocks) {\n                            try {\n                                const [quoteRes, profileRes, ratiosRes] = await Promise.allSettled([\n                                    fetch(`/api/marketdata?endpoint=quote&symbol=${stock.symbol}&source=auto`),\n                                    fetch(`/api/fmp?endpoint=profile&symbol=${stock.symbol}`),\n                                    fetch(`/api/fmp?endpoint=ratios&symbol=${stock.symbol}`)\n                                ]);\n                                \n                                const quote = quoteRes.status === 'fulfilled' && quoteRes.value.ok \n                                    ? await quoteRes.value.json() : null;\n                                const profile = profileRes.status === 'fulfilled' && profileRes.value.ok \n                                    ? await profileRes.value.json() : null;\n                                const ratios = ratiosRes.status === 'fulfilled' && ratiosRes.value.ok \n                                    ? await ratiosRes.value.json() : null;\n                                \n                                const stockData = {\n                                    symbol: stock.symbol,\n                                    name: profile?.data?.[0]?.companyName || profile?.companyName || stock.symbol,\n                                    price: quote?.c || 0,\n                                    change: quote?.dp || 0,\n                                    marketCap: profile?.data?.[0]?.mktCap || profile?.mktCap || 0,\n                                    pe: ratios?.data?.[0]?.peRatioTTM || ratios?.peRatioTTM || null,\n                                    roe: ratios?.data?.[0]?.returnOnEquityTTM || ratios?.returnOnEquityTTM || null,\n                                    debtEquity: ratios?.data?.[0]?.debtEquityRatioTTM || ratios?.debtEquityRatioTTM || null,\n                                    sector: profile?.data?.[0]?.sector || profile?.sector || 'Unknown'\n                                };\n                                \n                                // Appliquer les filtres\n                                if (stockData.marketCap >= screenerFilters.minMarketCap &&\n                                    (!stockData.pe || stockData.pe <= screenerFilters.maxPE) &&\n                                    (!stockData.roe || (stockData.roe * 100) >= screenerFilters.minROE) &&\n                                    (!stockData.debtEquity || stockData.debtEquity <= screenerFilters.maxDebtEquity) &&\n                                    (screenerFilters.sector === 'all' || stockData.sector === screenerFilters.sector)) {\n                                    results.push(stockData);\n                                }\n                            } catch (error) {\n                                console.error(`Erreur pour ${stock.symbol}:`, error);\n                            }\n                        }\n                        \n                        setScreenerResults(results);\n                        console.log(`‚úÖ Screener Watchlist: ${results.length} r√©sultats trouv√©s sur ${watchlistStocks.length} titres`);\n                    } catch (error) {\n                        console.error('Erreur screener:', error);\n                    } finally {\n                        setLoadingScreener(false);\n                    }\n                };\n                \n                // Fonctions utilitaires\n                const getMetricColor = (metric, value) => {\n                    if (value == null || value === 'N/A') return 'text-gray-400';\n                    const v = typeof value === 'string' ? parseFloat(value) : value;\n                    if (isNaN(v)) return 'text-gray-400';\n                    \n                    switch(metric) {\n                        case 'PE':\n                            if (v < 0) return 'text-red-500';\n                            if (v < 15) return 'text-emerald-500';\n                            if (v < 25) return 'text-blue-500';\n                            if (v < 35) return 'text-yellow-500';\n                            return 'text-red-500';\n                        case 'ROE':\n                            if (v < 0) return 'text-red-500';\n                            if (v < 10) return 'text-green-500';\n                            if (v < 15) return 'text-yellow-500';\n                            if (v < 20) return 'text-blue-500';\n                            return 'text-emerald-500';\n                        case 'DE':\n                            if (v < 0.3) return 'text-emerald-500';\n                            if (v < 0.7) return 'text-blue-500';\n                            if (v < 1.5) return 'text-yellow-500';\n                            if (v < 2.5) return 'text-green-500';\n                            return 'text-red-500';\n                        default:\n                            return 'text-gray-400';\n                    }\n                };\n                \n                const formatNumber = (num, prefix = '', suffix = '') => {\n                    if (!num && num !== 0) return 'N/A';\n                    const n = parseFloat(num);\n                    if (isNaN(n)) return 'N/A';\n                    if (n >= 1e12) return `${prefix}${(n / 1e12).toFixed(2)}T${suffix}`;\n                    if (n >= 1e9) return `${prefix}${(n / 1e9).toFixed(2)}B${suffix}`;\n                    if (n >= 1e6) return `${prefix}${(n / 1e6).toFixed(2)}M${suffix}`;\n                    if (n >= 1e3) return `${prefix}${(n / 1e3).toFixed(2)}K${suffix}`;\n                    return `${prefix}${n.toFixed(2)}${suffix}`;\n                };\n\n                // √âtat pour √©viter le rechargement de la watchlist\n                const [watchlistLoaded, setWatchlistLoaded] = useState(false);\n\n                // Charger la watchlist UNE SEULE FOIS au d√©marrage\n                useEffect(() => {\n                    if (watchlistLoaded) return; // √âviter les rechargements\n                    \n                    const loadInitialWatchlist = async () => {\n                        try {\n                            // Essayer de charger depuis Supabase d'abord\n                            const res = await fetch('/api/supabase-watchlist');\n                            if (res.ok) {\n                                const json = await res.json();\n                                const tickers = Array.isArray(json.tickers) ? json.tickers : [];\n                                console.log('‚úÖ Watchlist charg√©e depuis Supabase:', tickers);\n                                setWatchlistTickers(tickers);\n                                localStorage.setItem('dans-watchlist', JSON.stringify(tickers));\n                                loadWatchlistData(tickers);\n                                setWatchlistLoaded(true);\n                                return;\n                            }\n                        } catch (e) {\n                            console.log('‚ö†Ô∏è Supabase non disponible, utilisation du localStorage');\n                        }\n                        \n                        // Fallback: charger depuis localStorage\n                        const savedWatchlist = localStorage.getItem('dans-watchlist');\n                        if (savedWatchlist) {\n                            const tickers = JSON.parse(savedWatchlist);\n                            console.log('üì¶ Watchlist charg√©e depuis localStorage:', tickers);\n                            setWatchlistTickers(tickers);\n                            loadWatchlistData(tickers);\n                        }\n                        setWatchlistLoaded(true);\n                    };\n                    \n                    loadInitialWatchlist();\n                }, []); // D√©pendance vide = une seule fois au montage\n\n                // Fallback: Individual ticker loading (used when batch fails)\n                const loadWatchlistDataIndividual = async (tickers, dataObject) => {\n                    for (const ticker of tickers) {\n                        try {\n                            const data = await fetchStockData(ticker);\n                            if (data && !data.message) {\n                                dataObject[ticker] = {\n                                    ...data,\n                                    timestamp: new Date().toISOString()\n                                };\n                            }\n                        } catch (error) {\n                            console.error(`Erreur pour ${ticker}:`, error?.message || String(error));\n                        }\n                    }\n                };\n\n                // Charger les donn√©es pour les tickers de la watchlist (OPTIMIZED WITH BATCHING)\n                const loadWatchlistData = async (tickers, appendMode = false) => {\n                    if (tickers.length === 0) return;\n\n                    setWatchlistLoading(true);\n                    const newData = {};\n\n                    try {\n                        // BATCH OPTIMIZATION: Use batch endpoint for multiple tickers\n                        if (tickers.length > 1) {\n                            console.log(`üöÄ Batch loading ${tickers.length} tickers...`);\n                            const symbolsQuery = tickers.join(',');\n                            const batchResponse = await fetch(`${API_BASE_URL}/api/marketdata/batch?symbols=${symbolsQuery}&endpoints=quote,fundamentals`);\n\n                            if (batchResponse.ok) {\n                                const batchData = await batchResponse.json();\n                                console.log(`‚úÖ Batch loaded: ${batchData.metadata?.total_data_points || 'N/A'} data points`);\n                                console.log(`üí∞ API Calls Saved: ${batchData.metadata?.api_calls_saved || 'N/A'}`);\n\n                                // Process batch results\n                                if (batchData.success && batchData.data) {\n                                    const quotes = batchData.data.quote || {};\n                                    const fundamentals = batchData.data.fundamentals || {};\n\n                                    tickers.forEach(ticker => {\n                                        const tickerUpper = ticker.toUpperCase();\n                                        const quote = quotes[tickerUpper];\n                                        const fundamental = fundamentals[tickerUpper];\n\n                                        if (quote || fundamental) {\n                                            newData[ticker] = {\n                                                symbol: tickerUpper,\n                                                price: quote?.c || fundamental?.quote?.price || 0,\n                                                change: quote?.d || fundamental?.quote?.change || 0,\n                                                changePercent: quote?.dp || fundamental?.quote?.changesPercentage || 0,\n                                                profile: fundamental?.profile || null,\n                                                ratios: fundamental?.ratios || null,\n                                                source: quote?.source || fundamental?.source || 'batch',\n                                                timestamp: new Date().toISOString()\n                                            };\n                                        }\n                                    });\n                                }\n                            } else {\n                                console.warn('‚ö†Ô∏è Batch endpoint failed, falling back to individual requests');\n                                // Fallback to individual requests\n                                await loadWatchlistDataIndividual(tickers, newData);\n                            }\n                        } else {\n                            // Single ticker - use regular fetch\n                            await loadWatchlistDataIndividual(tickers, newData);\n                        }\n                    } catch (error) {\n                        console.error('‚ùå Batch loading error:', error);\n                        // Fallback to individual requests on error\n                        await loadWatchlistDataIndividual(tickers, newData);\n                    }\n\n                    // Si appendMode, ajouter aux donn√©es existantes au lieu de remplacer\n                    if (appendMode) {\n                        setWatchlistStockData(prev => ({ ...prev, ...newData }));\n                    } else {\n                        setWatchlistStockData(newData);\n                    }\n                    setWatchlistLoading(false);\n                };\n\n                // Ajouter un ticker √† la watchlist\n                const addTickerToWatchlist = async () => {\n                    if (!newTicker.trim()) return;\n                    \n                    const ticker = newTicker.trim().toUpperCase();\n                    if (watchlistTickers.includes(ticker)) {\n                        showMessage('Ce ticker est d√©j√† dans la watchlist', 'warning');\n                        return;\n                    }\n                    \n                    // 1. AFFICHAGE IMM√âDIAT : Ajouter le ticker √† la liste TOUT DE SUITE\n                    const updatedTickers = [...watchlistTickers, ticker];\n                    setWatchlistTickers(updatedTickers);\n                    localStorage.setItem('dans-watchlist', JSON.stringify(updatedTickers));\n                    setNewTicker('');\n                    // Message discret pour l'ajout\n                    console.log(`‚úÖ ${ticker} ajout√© √† la watchlist`);\n                    \n                    // 2. Ajouter un placeholder avec √©tat \"loading\" pour affichage imm√©diat\n                    setWatchlistStockData(prev => ({\n                        ...prev,\n                        [ticker]: {\n                            symbol: ticker,\n                            loading: true,\n                            timestamp: new Date().toISOString()\n                        }\n                    }));\n                    \n                    // 3. ARRI√àRE-PLAN : Charger les vraies donn√©es (sans bloquer l'UI)\n                    loadWatchlistData([ticker], true).catch(err => {\n                        console.error('Erreur chargement:', err);\n                    });\n                    \n                    // 4. ARRI√àRE-PLAN : Sauvegarder sur Supabase (sans bloquer l'UI)\n                    saveWatchlistToSupabaseAuto(ticker, 'add').catch(err => {\n                        console.error('Erreur sauvegarde Supabase:', err);\n                    });\n                };\n\n                // Supprimer un ticker de la watchlist\n                const removeTickerFromWatchlist = async (ticker) => {\n                    // 1. SUPPRESSION IMM√âDIATE : Retirer de la liste TOUT DE SUITE\n                    const updatedTickers = watchlistTickers.filter(t => t !== ticker);\n                    setWatchlistTickers(updatedTickers);\n                    localStorage.setItem('dans-watchlist', JSON.stringify(updatedTickers));\n                    \n                    // 2. Supprimer les donn√©es du ticker imm√©diatement\n                    setWatchlistStockData(prev => {\n                        const newData = { ...prev };\n                        delete newData[ticker];\n                        return newData;\n                    });\n                    \n                    // Message discret pour la suppression\n                    console.log(`‚úÖ ${ticker} supprim√© de la watchlist`);\n                    \n                    // 3. ARRI√àRE-PLAN : Sauvegarder sur Supabase (sans bloquer l'UI)\n                    saveWatchlistToSupabaseAuto(ticker, 'remove').catch(err => {\n                        console.error('Erreur sauvegarde Supabase:', err);\n                    });\n                };\n\n                // Actualiser les donn√©es de la watchlist (silencieux)\n                const refreshWatchlist = async () => {\n                    await loadWatchlistData(watchlistTickers);\n                    console.log('‚úÖ Watchlist actualis√©e silencieusement');\n                };\n\n                // Timer pour debounce de la sauvegarde Supabase\n                let saveSupabaseTimer = null;\n                \n                // Sauvegarder automatiquement la watchlist sur Supabase (silencieux avec debounce)\n                const saveWatchlistToSupabaseAuto = async (ticker, action) => {\n                    // Annuler la sauvegarde pr√©c√©dente si elle est en attente\n                    if (saveSupabaseTimer) {\n                        clearTimeout(saveSupabaseTimer);\n                    }\n                    \n                    // Attendre 500ms avant de sauvegarder sur Supabase (debounce plus court)\n                    saveSupabaseTimer = setTimeout(async () => {\n                        try {\n                            const response = await fetch('/api/supabase-watchlist', {\n                                method: 'POST',\n                                headers: { 'Content-Type': 'application/json' },\n                                body: JSON.stringify({\n                                    action: action,\n                                    ticker: ticker\n                                })\n                            });\n                            \n                            if (!response.ok) {\n                                throw new Error(`HTTP ${response.status}`);\n                            }\n                            \n                            const result = await response.json();\n                            console.log(`‚úÖ Supabase: ${result.message}`);\n                        } catch (e) {\n                            console.error('‚ö†Ô∏è Erreur sauvegarde Supabase:', e);\n                            // Silencieux pour ne pas perturber l'UX\n                        }\n                    }, 500); // Debounce de 500ms (plus rapide que GitHub)\n                };\n\n                // Sauvegarder manuellement la watchlist dans Supabase (avec confirmation)\n                const saveWatchlistToSupabase = async () => {\n                    try {\n                        const response = await fetch('/api/supabase-watchlist', {\n                            method: 'POST',\n                            headers: { 'Content-Type': 'application/json' },\n                            body: JSON.stringify({\n                                action: 'save',\n                                tickers: watchlistTickers\n                            })\n                        });\n                        \n                        if (!response.ok) throw new Error(`HTTP ${response.status}`);\n                        \n                        const result = await response.json();\n                        console.log('‚úÖ Watchlist sauvegard√©e sur Supabase');\n                    } catch (e) {\n                        console.error('Erreur sauvegarde Supabase watchlist:', e);\n                        showMessage('Erreur sauvegarde Supabase', 'error');\n                    }\n                };\n\n                // Charger la watchlist depuis Supabase\n                const loadWatchlistFromSupabase = async () => {\n                    try {\n                        const res = await fetch('/api/supabase-watchlist');\n                        if (!res.ok) throw new Error(`HTTP ${res.status}`);\n                        const json = await res.json();\n                        const tickers = Array.isArray(json.tickers) ? json.tickers : [];\n                        setWatchlistTickers(tickers);\n                        localStorage.setItem('dans-watchlist', JSON.stringify(tickers));\n                        await loadWatchlistData(tickers);\n                        console.log('‚úÖ Watchlist charg√©e depuis Supabase');\n                    } catch (e) {\n                        console.error('Erreur chargement Supabase watchlist:', e);\n                        showMessage('Erreur chargement Supabase', 'error');\n                    }\n                };\n\n                // Effet pour initialiser le TradingView Ticker Tape avec les tickers de la watchlist\n                useEffect(() => {\n                    if (watchlistTickers.length > 0) {\n                        // Supprimer le widget existant s'il existe\n                        const existingWidget = document.getElementById('tradingview-ticker-dan-watchlist');\n                        if (existingWidget) {\n                            existingWidget.innerHTML = '';\n                        }\n\n                        // Cr√©er les symboles format√©s pour TradingView (EXCHANGE:TICKER)\n                        // Par d√©faut, on assume que les tickers US sont sur NASDAQ ou NYSE\n                        const tvSymbols = watchlistTickers.map(ticker => {\n                            // D√©tecter les tickers canadiens (qui se terminent souvent par .TO, .V, etc.)\n                            if (ticker.includes('.TO') || ticker.includes('.V')) {\n                                return { \"proName\": `TSX:${ticker.replace(/\\.(TO|V)/, '')}`, \"title\": ticker };\n                            }\n                            // Par d√©faut, utiliser NASDAQ pour les tickers US\n                            return { \"proName\": `NASDAQ:${ticker}`, \"title\": ticker };\n                        });\n\n                        // Cr√©er le script TradingView\n                        const script = document.createElement('script');\n                        script.type = 'text/javascript';\n                        script.src = 'https://s3.tradingview.com/external-embedding/embed-widget-ticker-tape.js';\n                        script.async = true;\n                        script.innerHTML = JSON.stringify({\n                            \"symbols\": tvSymbols.slice(0, 20), // Limiter √† 20 symboles pour performance\n                            \"showSymbolLogo\": true,\n                            \"isTransparent\": isDarkMode,\n                            \"displayMode\": \"adaptive\",\n                            \"colorTheme\": isDarkMode ? \"dark\" : \"light\",\n                            \"locale\": \"fr\"\n                        });\n\n                        const widgetContainer = document.getElementById('tradingview-ticker-dan-watchlist');\n                        if (widgetContainer) {\n                            widgetContainer.appendChild(script);\n                        }\n                    }\n                }, [watchlistTickers, isDarkMode]);\n\n                return (\n                    <div className=\"space-y-6\">\n                        {/* TradingView Ticker Tape - VAGUE 2: Quick Wins */}\n                        {watchlistTickers.length > 0 && (\n                            <div className={`rounded-lg overflow-hidden border transition-colors duration-300 ${\n                                isDarkMode ? 'border-gray-700 bg-gray-900' : 'border-gray-200 bg-white'\n                            }`}>\n                                <div className=\"tradingview-widget-container\" style={{ height: '62px' }}>\n                                    <div id=\"tradingview-ticker-dan-watchlist\" style={{ height: '100%' }}></div>\n                                </div>\n                            </div>\n                        )}\n\n                        {/* Screener pour Dan's Watchlist - Identique √† celui d'IntelliStocks */}\n                        {showScreener && (\n                            <div className={`border rounded-lg p-3 transition-colors duration-300 ${\n                                isDarkMode ? 'bg-gray-900 border-gray-700' : 'bg-white border-gray-200'\n                            }`}>\n                                <div className=\"flex items-center justify-between mb-3\">\n                                    <div className=\"flex items-center gap-2\">\n                                        <span className=\"text-xl\">üîç</span>\n                                        <h3 className={`text-sm font-bold ${isDarkMode ? 'text-white' : 'text-gray-900'}`}>\n                                            Screener - Dan's Watchlist\n                                        </h3>\n                                        <span className=\"text-xs text-gray-500\">({watchlistTickers.length} titres)</span>\n                                    </div>\n                                    <button\n                                        onClick={() => setShowScreener(false)}\n                                        className={`p-1 rounded ${isDarkMode ? 'hover:bg-gray-800' : 'hover:bg-gray-100'}`}\n                                    >\n                                        <span className=\"text-gray-500\">‚úï</span>\n                                    </button>\n                                </div>\n                                \n                                {/* Filtres - M√™mes que IntelliStocks */}\n                                <div className=\"grid grid-cols-5 gap-2 mb-3\">\n                                    <div>\n                                        <label className=\"text-[9px] text-gray-500 mb-1 block\">Market Cap Min (B$)</label>\n                                        <input\n                                            type=\"number\"\n                                            value={screenerFilters.minMarketCap / 1e9}\n                                            onChange={(e) => setScreenerFilters({...screenerFilters, minMarketCap: parseFloat(e.target.value || 0) * 1e9})}\n                                            className={`w-full px-2 py-1 text-xs rounded border ${\n                                                isDarkMode \n                                                    ? 'bg-gray-800 border-gray-700 text-white' \n                                                    : 'bg-white border-gray-300 text-gray-900'\n                                            }`}\n                                        />\n                                    </div>\n                                    <div>\n                                        <label className=\"text-[9px] text-gray-500 mb-1 block\">P/E Max</label>\n                                        <input\n                                            type=\"number\"\n                                            value={screenerFilters.maxPE}\n                                            onChange={(e) => setScreenerFilters({...screenerFilters, maxPE: parseFloat(e.target.value || 50)})}\n                                            className={`w-full px-2 py-1 text-xs rounded border ${\n                                                isDarkMode \n                                                    ? 'bg-gray-800 border-gray-700 text-white' \n                                                    : 'bg-white border-gray-300 text-gray-900'\n                                            }`}\n                                        />\n                                    </div>\n                                    <div>\n                                        <label className=\"text-[9px] text-gray-500 mb-1 block\">ROE Min (%)</label>\n                                        <input\n                                            type=\"number\"\n                                            value={screenerFilters.minROE}\n                                            onChange={(e) => setScreenerFilters({...screenerFilters, minROE: parseFloat(e.target.value || 0)})}\n                                            className={`w-full px-2 py-1 text-xs rounded border ${\n                                                isDarkMode \n                                                    ? 'bg-gray-800 border-gray-700 text-white' \n                                                    : 'bg-white border-gray-300 text-gray-900'\n                                            }`}\n                                        />\n                                    </div>\n                                    <div>\n                                        <label className=\"text-[9px] text-gray-500 mb-1 block\">D/E Max</label>\n                                        <input\n                                            type=\"number\"\n                                            step=\"0.1\"\n                                            value={screenerFilters.maxDebtEquity}\n                                            onChange={(e) => setScreenerFilters({...screenerFilters, maxDebtEquity: parseFloat(e.target.value || 2)})}\n                                            className={`w-full px-2 py-1 text-xs rounded border ${\n                                                isDarkMode \n                                                    ? 'bg-gray-800 border-gray-700 text-white' \n                                                    : 'bg-white border-gray-300 text-gray-900'\n                                            }`}\n                                        />\n                                    </div>\n                                    <div>\n                                        <label className=\"text-[9px] text-gray-500 mb-1 block\">Secteur</label>\n                                        <select\n                                            value={screenerFilters.sector}\n                                            onChange={(e) => setScreenerFilters({...screenerFilters, sector: e.target.value})}\n                                            className={`w-full px-2 py-1 text-xs rounded border ${\n                                                isDarkMode \n                                                    ? 'bg-gray-800 border-gray-700 text-white' \n                                                    : 'bg-white border-gray-300 text-gray-900'\n                                            }`}\n                                        >\n                                            <option value=\"all\">Tous</option>\n                                            <option value=\"Technology\">Technologie</option>\n                                            <option value=\"Consumer Cyclical\">Consommation</option>\n                                            <option value=\"Healthcare\">Sant√©</option>\n                                            <option value=\"Financial\">Finance</option>\n                                        </select>\n                                    </div>\n                                </div>\n                                \n                                <button\n                                    onClick={runWatchlistScreener}\n                                    disabled={loadingScreener || watchlistTickers.length === 0}\n                                    className={`w-full py-2 rounded text-sm font-semibold transition-colors ${\n                                        loadingScreener\n                                            ? 'bg-gray-400 cursor-not-allowed'\n                                            : 'bg-gray-800 hover:bg-gray-700 text-white'\n                                    }`}\n                                >\n                                    {loadingScreener ? '‚è≥ Analyse en cours...' : `üîç Analyser ma Watchlist (${watchlistTickers.length} titres)`}\n                                </button>\n                                \n                                {/* R√©sultats */}\n                                {screenerResults.length > 0 && (\n                                    <div className=\"mt-3\">\n                                        <div className=\"text-xs text-gray-500 mb-2\">\n                                            {screenerResults.length} titre(s) correspondant aux crit√®res\n                                        </div>\n                                        <div className={`max-h-64 overflow-y-auto border rounded ${\n                                            isDarkMode ? 'border-gray-700' : 'border-gray-300'\n                                        }`}>\n                                            <table className=\"w-full text-xs\">\n                                                <thead className={`sticky top-0 ${isDarkMode ? 'bg-gray-800' : 'bg-gray-100'}`}>\n                                                    <tr>\n                                                        <th className=\"text-left p-2 text-gray-500\">Symbole</th>\n                                                        <th className=\"text-right p-2 text-gray-500\">Prix</th>\n                                                        <th className=\"text-right p-2 text-gray-500\">Var %</th>\n                                                        <th className=\"text-right p-2 text-gray-500\">Cap.</th>\n                                                        <th className=\"text-right p-2 text-gray-500\">P/E</th>\n                                                        <th className=\"text-right p-2 text-gray-500\">ROE</th>\n                                                        <th className=\"text-right p-2 text-gray-500\">D/E</th>\n                                                    </tr>\n                                                </thead>\n                                                <tbody>\n                                                    {screenerResults.map((stock) => (\n                                                        <tr key={stock.symbol} className={`border-t ${\n                                                            isDarkMode ? 'border-gray-700 hover:bg-gray-800' : 'border-gray-200 hover:bg-gray-50'\n                                                        }`}>\n                                                            <td className=\"p-2\">\n                                                                <div className={`font-bold ${isDarkMode ? 'text-white' : 'text-gray-900'}`}>{stock.symbol}</div>\n                                                                <div className=\"text-[9px] text-gray-500\">{stock.name}</div>\n                                                            </td>\n                                                            <td className={`text-right p-2 font-semibold ${isDarkMode ? 'text-white' : 'text-gray-900'}`}>\n                                                                ${stock.price.toFixed(2)}\n                                                            </td>\n                                                            <td className={`text-right p-2 font-semibold ${\n                                                                stock.change >= 0 ? 'text-emerald-500' : 'text-red-500'\n                                                            }`}>\n                                                                {(() => {\n                                                                    const change = stock.change;\n                                                                    if (!change) return '0.00%';\n                                                                    const value = typeof change === 'number' ? change : \n                                                                                 typeof change === 'object' ? (change.raw || change.fmt || 0) : \n                                                                                 parseFloat(change) || 0;\n                                                                    return (value >= 0 ? '+' : '') + value.toFixed(2) + '%';\n                                                                })()}\n                                                            </td>\n                                                            <td className=\"text-right p-2 text-gray-400\">\n                                                                {formatNumber(stock.marketCap)}\n                                                            </td>\n                                                            <td className={`text-right p-2 font-semibold ${getMetricColor('PE', stock.pe)}`}>\n                                                                {stock.pe ? stock.pe.toFixed(1) : 'N/A'}\n                                                            </td>\n                                                            <td className={`text-right p-2 font-semibold ${getMetricColor('ROE', stock.roe ? stock.roe * 100 : null)}`}>\n                                                                {stock.roe ? (stock.roe * 100).toFixed(1) + '%' : 'N/A'}\n                                                            </td>\n                                                            <td className={`text-right p-2 font-semibold ${getMetricColor('DE', stock.debtEquity)}`}>\n                                                                {stock.debtEquity ? stock.debtEquity.toFixed(2) : 'N/A'}\n                                                            </td>\n                                                        </tr>\n                                                    ))}\n                                                </tbody>\n                                            </table>\n                                        </div>\n                                    </div>\n                                )}\n                            </div>\n                        )}\n                        \n                        <div className=\"flex justify-between items-center\">\n                            <h2 className={`text-2xl font-bold transition-colors duration-300 ${\n                                isDarkMode ? 'text-white' : 'text-gray-900'\n                            }`}>üëÄ Dan's Watchlist</h2>\n                            <div className=\"flex gap-2\">\n                                <button\n                                    onClick={() => setShowScreener(!showScreener)}\n                                    className={`px-4 py-2 rounded transition-colors ${\n                                        showScreener\n                                            ? 'bg-gray-800 text-white'\n                                            : (isDarkMode \n                                                ? 'bg-gray-700 hover:bg-gray-600 text-white' \n                                                : 'bg-gray-200 hover:bg-gray-300 text-gray-900')\n                                    }`}\n                                >\n                                    {showScreener ? '‚úï Fermer Screener' : 'üîç Ouvrir Screener'}\n                                </button>\n                                <button\n                                    onClick={refreshWatchlist}\n                                    disabled={watchlistLoading || watchlistTickers.length === 0}\n                                    className=\"px-4 py-2 bg-gray-800 text-white rounded hover:bg-gray-700 disabled:opacity-50 transition-colors\"\n                                >\n                                    {watchlistLoading ? 'Actualisation...' : 'üîÑ Actualiser'}\n                                </button>\n                                <button\n                                    onClick={emmaPopulateWatchlist}\n                                    disabled={watchlistLoading}\n                                    className=\"px-4 py-2 bg-purple-600 text-white rounded hover:bg-purple-700 disabled:opacity-50 flex items-center gap-2\"\n                                >\n                                    <span>ü§ñ</span>\n                                    Emma Populate\n                                </button>\n                                <div className={`text-sm px-4 py-2 rounded ${\n                                    isDarkMode ? 'bg-gray-800 text-gray-400' : 'bg-gray-100 text-gray-600'\n                                }`}>\n                                    {!initialLoadComplete ? '‚è≥ Chargement initial...' : 'üöÄ Supabase + Arri√®re-plan silencieux'}\n                                </div>\n                            </div>\n                        </div>\n\n                        {/* Section d'ajout de ticker */}\n                        <div className={`backdrop-blur-sm rounded-lg p-6 border transition-colors duration-300 ${\n                            isDarkMode \n                                ? 'bg-gray-900 border-gray-700' \n                                : 'bg-gray-50 border-gray-200'\n                        }`}>\n                            <h3 className={`text-lg font-semibold mb-4 transition-colors duration-300 ${\n                                isDarkMode ? 'text-white' : 'text-gray-900'\n                            }`}>‚ûï Ajouter un Ticker</h3>\n                            <div className=\"flex gap-2\">\n                                <input\n                                    type=\"text\"\n                                    value={newTicker}\n                                    onChange={(e) => setNewTicker(e.target.value)}\n                                    placeholder=\"Ex: AAPL, TSLA, GOOGL...\"\n                                    className={`flex-1 px-3 py-2 rounded-lg border transition-colors duration-300 ${\n                                        isDarkMode \n                                            ? 'bg-gray-700 border-gray-600 text-white placeholder-gray-400' \n                                            : 'bg-white border-gray-300 text-gray-900 placeholder-gray-500'\n                                    }`}\n                                    onKeyPress={(e) => e.key === 'Enter' && addTickerToWatchlist()}\n                                />\n                                <button\n                                    onClick={addTickerToWatchlist}\n                                    className=\"px-4 py-2 bg-green-600 text-white rounded hover:bg-green-700 transition-colors\"\n                                >\n                                    ‚ûï Ajouter\n                                </button>\n                            </div>\n                            <p className={`text-sm mt-2 transition-colors duration-300 ${\n                                isDarkMode ? 'text-gray-400' : 'text-gray-600'\n                            }`}>\n                                üí° Ces tickers ne seront visibles que dans cette watchlist personnalis√©e\n                            </p>\n                        </div>\n\n                        {/* Liste des tickers de la watchlist */}\n                        {watchlistTickers.length > 0 ? (\n                            <div className={`backdrop-blur-sm rounded-lg p-6 border transition-colors duration-300 ${\n                                isDarkMode \n                                    ? 'bg-gray-900 border-gray-700' \n                                    : 'bg-gray-50 border-gray-200'\n                            }`}>\n                                <h3 className={`text-lg font-semibold mb-4 transition-colors duration-300 ${\n                                    isDarkMode ? 'text-white' : 'text-gray-900'\n                                }`}>\n                                    üìä Tickers de la Watchlist ({watchlistTickers.length})\n                                </h3>\n                                \n                                <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4\">\n                                    {watchlistTickers.map(ticker => {\n                                        const data = watchlistStockData[ticker];\n                                        const change = data?.dp ? (data.dp >= 0 ? '+' : '') + data.dp.toFixed(2) + '%' : 'N/A';\n                                        const changeColor = data?.dp >= 0 ? 'text-green-400' : 'text-red-400';\n                                        const changeBgColor = data?.dp >= 0 ? 'bg-green-500' : 'bg-red-500';\n                                        \n                                        return (\n                                            <div key={ticker} className={`rounded-lg p-4 border transition-colors duration-300 ${\n                                                isDarkMode \n                                                    ? 'bg-gray-800 border-gray-600 hover:border-blue-400/50' \n                                                    : 'bg-white border-gray-300 hover:border-blue-300'\n                                            }`}>\n                                                <div className=\"flex justify-between items-start mb-3\">\n                                                    <div className=\"flex items-center gap-2\">\n                                                        <img \n                                                            src={getCompanyLogo(ticker)} \n                                                            alt={`${ticker} logo`}\n                                                            className=\"w-8 h-8 rounded\"\n                                                            onError={(e) => {\n                                                                e.target.style.display = 'none';\n                                                            }}\n                                                        />\n                                                        <h4 className={`font-bold text-lg transition-colors duration-300 ${\n                                                            isDarkMode ? 'text-white' : 'text-gray-900'\n                                                        }`}>{ticker}</h4>\n                                                    </div>\n                                                    <button\n                                                        onClick={() => removeTickerFromWatchlist(ticker)}\n                                                        className={`p-1 rounded transition-colors duration-300 ${\n                                                            isDarkMode \n                                                                ? 'text-gray-400 hover:text-red-400 hover:bg-red-900/20' \n                                                                : 'text-gray-500 hover:text-red-600 hover:bg-red-50'\n                                                        }`}\n                                                        title=\"Supprimer de la watchlist\"\n                                                    >\n                                                        ‚úï\n                                                    </button>\n                                                </div>\n                                                \n                                                {data ? (\n                                                    <>\n                                                        <div className={`rounded-lg p-3 mb-3 transition-colors duration-300 ${\n                                                            isDarkMode ? 'bg-gray-700' : 'bg-gray-100'\n                                                        }`}>\n                                                            <div className={`text-2xl font-bold mb-1 transition-colors duration-300 ${\n                                                                isDarkMode ? 'text-white' : 'text-gray-900'\n                                                            }`}>\n                                                                ${data.c?.toFixed(2) || 'N/A'}\n                                                            </div>\n                                                            <div className=\"flex items-center gap-2\">\n                                                                <div className={`w-3 h-3 ${changeBgColor} rounded`}></div>\n                                                                <span className={`text-sm font-medium ${changeColor}`}>\n                                                                    {change}\n                                                                </span>\n                                                            </div>\n                                                        </div>\n                                                        \n                                                        <div className=\"space-y-2 text-sm\">\n                                                            <div className=\"flex justify-between\">\n                                                                <span className={`transition-colors duration-300 ${\n                                                                    isDarkMode ? 'text-gray-400' : 'text-gray-600'\n                                                                }`}>Volume:</span>\n                                                                <span className={`transition-colors duration-300 ${\n                                                                    isDarkMode ? 'text-white' : 'text-gray-900'\n                                                                }`}>{data.v?.toLocaleString() || 'N/A'}</span>\n                                                            </div>\n                                                            <div className=\"flex justify-between\">\n                                                                <span className={`transition-colors duration-300 ${\n                                                                    isDarkMode ? 'text-gray-400' : 'text-gray-600'\n                                                                }`}>High:</span>\n                                                                <span className={`transition-colors duration-300 ${\n                                                                    isDarkMode ? 'text-white' : 'text-gray-900'\n                                                                }`}>${data.h?.toFixed(2) || 'N/A'}</span>\n                                                            </div>\n                                                            <div className=\"flex justify-between\">\n                                                                <span className={`transition-colors duration-300 ${\n                                                                    isDarkMode ? 'text-gray-400' : 'text-gray-600'\n                                                                }`}>Low:</span>\n                                                                <span className={`transition-colors duration-300 ${\n                                                                    isDarkMode ? 'text-white' : 'text-gray-900'\n                                                                }`}>${data.l?.toFixed(2) || 'N/A'}</span>\n                                                            </div>\n                                                        </div>\n                                                    </>\n                                                ) : (\n                                                    <div className={`text-center py-4 transition-colors duration-300 ${\n                                                        isDarkMode ? 'text-gray-400' : 'text-gray-500'\n                                                    }`}>\n                                                        <div className=\"animate-spin w-6 h-6 border-2 border-gray-400 border-t-transparent rounded-full mx-auto mb-2\"></div>\n                                                        <span className=\"text-sm\">Chargement...</span>\n                                                    </div>\n                                                )}\n                                            </div>\n                                        );\n                                    })}\n                                </div>\n                            </div>\n                        ) : (\n                            <div className={`backdrop-blur-sm rounded-lg p-8 border transition-colors duration-300 ${\n                                isDarkMode \n                                    ? 'bg-gray-900 border-gray-700' \n                                    : 'bg-gray-50 border-gray-200'\n                            } text-center`}>\n                                <div className=\"text-6xl mb-4\">üëÄ</div>\n                                <h3 className={`text-xl font-semibold mb-2 transition-colors duration-300 ${\n                                    isDarkMode ? 'text-white' : 'text-gray-900'\n                                }`}>Watchlist Vide</h3>\n                                <p className={`transition-colors duration-300 ${\n                                    isDarkMode ? 'text-gray-400' : 'text-gray-600'\n                                }`}>\n                                    Ajoutez des tickers pour commencer √† suivre vos investissements personnalis√©s\n                                </p>\n                            </div>\n                        )}\n                    </div>\n                );\n            };\n\n\nexport default DansWatchlistTab;\n","import React, { useState, useEffect, useRef, useCallback } from 'react';\nimport type { TabProps } from '../../types';\n\ndeclare const Chart: any;\ndeclare const Recharts: any;\ndeclare const LightweightCharts: any;\n\n            export const StocksNewsTab: React.FC<TabProps> = (props) => {\n    const { isDarkMode = true, tickers = [], stockData = {}, newsData = [], loading = false, lastUpdate, setSelectedStock, setActiveTab, fetchNews, refreshAllStocks, loadTickersFromSupabase, fetchLatestNewsForTickers, LucideIcon, getCompanyLogo } = props;\n                const [stocksViewMode, setStocksViewMode] = useState('list'); // list par d√©faut (3 vues: list, cards, table)\n                const [expandedStock, setExpandedStock] = useState(null);\n\n                const renderMarketBadge = (type) => {\n                    const isBull = type === 'bull';\n                    return (\n                        <span\n                            className={`w-9 h-9 rounded-full flex items-center justify-center text-xl font-semibold shadow-inner border ${\n                                isBull\n                                    ? isDarkMode\n                                        ? 'bg-lime-900/70 border-lime-500/40 text-lime-300'\n                                        : 'bg-lime-100 border-lime-400 text-lime-700'\n                                    : isDarkMode\n                                        ? 'bg-rose-900/70 border-rose-500/40 text-rose-200'\n                                        : 'bg-rose-100 border-rose-300 text-rose-700'\n                            }`}\n                        >\n                            {isBull ? 'üêÇ' : 'üêª'}\n                        </span>\n                    );\n                };\n\n                // Helper functions for news credibility scoring (d√©finies dans le composant)\n                const getNewsCredibilityScore = (sourceName) => {\n                    if (!sourceName) return 50;\n\n                    const source = sourceName.toLowerCase();\n\n                    // Premium sources (90-100)\n                    const premiumSources = ['bloomberg', 'reuters', 'wall street journal', 'wsj', 'financial times', 'ft'];\n                    if (premiumSources.some(s => source.includes(s))) return 95;\n\n                    // High credibility (75-89)\n                    const highSources = ['cnbc', 'marketwatch', 'barron', 'seeking alpha', 'yahoo finance', 'morningstar', 'the economist'];\n                    if (highSources.some(s => source.includes(s))) return 82;\n\n                    // Medium credibility (50-74)\n                    const mediumSources = ['forbes', 'benzinga', 'investor', 'zacks', 'motley fool', 'nasdaq', 'business insider'];\n                    if (mediumSources.some(s => source.includes(s))) return 65;\n\n                    // Low credibility (below 50)\n                    return 40;\n                };\n\n                const getCredibilityTier = (score) => {\n                    if (score >= 90) return 'premium';\n                    if (score >= 75) return 'high';\n                    if (score >= 50) return 'medium';\n                    return 'low';\n                };\n\n                // Fonction pour formater les nombres\n                const formatNumber = (num) => {\n                    if (!num && num !== 0) return 'N/A';\n                    if (num >= 1e9) return (num / 1e9).toFixed(2) + 'B';\n                    if (num >= 1e6) return (num / 1e6).toFixed(2) + 'M';\n                    if (num >= 1e3) return (num / 1e3).toFixed(2) + 'K';\n                    return num.toLocaleString('fr-FR');\n                };\n\n                // Mapping des noms de compagnies pour affichage\n                const companyNames = {\n                    AAPL: 'Apple Inc.',\n                    TSLA: 'Tesla Inc.',\n                    GOOGL: 'Alphabet Inc.',\n                    GOOG: 'Alphabet Inc.',\n                    MSFT: 'Microsoft Corporation',\n                    NVDA: 'NVIDIA Corporation',\n                    AMZN: 'Amazon.com Inc.',\n                    META: 'Meta Platforms Inc.',\n                    NFLX: 'Netflix Inc.',\n                    AMD: 'Advanced Micro Devices Inc.',\n                    INTC: 'Intel Corporation',\n                    CRM: 'Salesforce Inc.',\n                    ORCL: 'Oracle Corporation',\n                    CSCO: 'Cisco Systems Inc.',\n                    ADBE: 'Adobe Inc.',\n                    PYPL: 'PayPal Holdings Inc.',\n                    DIS: 'The Walt Disney Company',\n                    BA: 'The Boeing Company',\n                    GE: 'General Electric Company',\n                    JPM: 'JPMorgan Chase & Co.',\n                    BAC: 'Bank of America Corporation',\n                    WMT: 'Walmart Inc.',\n                    HD: 'The Home Depot Inc.',\n                    PG: 'Procter & Gamble Company',\n                    JNJ: 'Johnson & Johnson',\n                    V: 'Visa Inc.',\n                    MA: 'Mastercard Incorporated',\n                    UNH: 'UnitedHealth Group Inc.',\n                    PFE: 'Pfizer Inc.',\n                    MRK: 'Merck & Co. Inc.'\n                };\n\n                return (\n                <div className=\"space-y-6\">\n                    {/* Message d'√©tat si pas de donn√©es */}\n                    {tickers.length === 0 && (\n                        <div className={`p-6 rounded-xl border-2 transition-colors duration-300 ${\n                            isDarkMode\n                                ? 'bg-gray-800 border-yellow-500/30'\n                                : 'bg-yellow-50 border-yellow-200'\n                        }`}>\n                            <div className=\"flex items-center gap-3 mb-2\">\n                                <span className=\"text-2xl\">‚è≥</span>\n                                <h3 className={`text-lg font-semibold ${isDarkMode ? 'text-white' : 'text-gray-900'}`}>\n                                    Chargement des donn√©es...\n                                </h3>\n                            </div>\n                            <p className={`text-sm ${isDarkMode ? 'text-gray-400' : 'text-gray-600'}`}>\n                                Les titres et nouvelles sont en cours de chargement. Veuillez patienter quelques instants.\n                            </p>\n                            <button\n                                onClick={async () => {\n                                    await loadTickersFromSupabase();\n                                    await fetchNews();\n                                }}\n                                className={`mt-4 px-4 py-2 rounded-lg font-semibold transition-all duration-300 ${\n                                    isDarkMode\n                                        ? 'bg-blue-600 hover:bg-blue-700 text-white'\n                                        : 'bg-blue-500 hover:bg-blue-600 text-white'\n                                }`}\n                            >\n                                üîÑ Forcer le chargement\n                            </button>\n                        </div>\n                    )}\n\n                    <div className=\"flex justify-between items-center\">\n                        <h2 className={`text-2xl font-bold transition-colors duration-300 ${\n                            isDarkMode ? 'text-white' : 'text-gray-900'\n                        }`}>üìä Titres & nouvelles</h2>\n                        <div className=\"flex gap-2\">\n                            {/* Toggle Vue */}\n                            <div className={`flex gap-1 p-1 rounded-lg transition-colors duration-300 ${\n                                isDarkMode ? 'bg-gray-800' : 'bg-gray-200'\n                            }`}>\n                                <button\n                                    onClick={() => setStocksViewMode('list')}\n                                    className={`px-3 py-1 rounded text-sm font-medium transition-all duration-200 ${\n                                        stocksViewMode === 'list'\n                                            ? (isDarkMode ? 'bg-blue-600 text-white' : 'bg-blue-500 text-white')\n                                            : (isDarkMode ? 'text-gray-400 hover:text-white' : 'text-gray-600 hover:text-gray-900')\n                                    }`}\n                                >\n                                    üìã Liste\n                                </button>\n                                <button\n                                    onClick={() => setStocksViewMode('cards')}\n                                    className={`px-3 py-1 rounded text-sm font-medium transition-all duration-200 ${\n                                        stocksViewMode === 'cards'\n                                            ? (isDarkMode ? 'bg-blue-600 text-white' : 'bg-blue-500 text-white')\n                                            : (isDarkMode ? 'text-gray-400 hover:text-white' : 'text-gray-600 hover:text-gray-900')\n                                    }`}\n                                >\n                                    üé¥ Cartes\n                                </button>\n                                <button\n                                    onClick={() => setStocksViewMode('table')}\n                                    className={`px-3 py-1 rounded text-sm font-medium transition-all duration-200 ${\n                                        stocksViewMode === 'table'\n                                            ? (isDarkMode ? 'bg-blue-600 text-white' : 'bg-blue-500 text-white')\n                                            : (isDarkMode ? 'text-gray-400 hover:text-white' : 'text-gray-600 hover:text-gray-900')\n                                    }`}\n                                >\n                                    üìä Tableau\n                                </button>\n                            </div>\n                            <button\n                                onClick={async () => {\n                                    await refreshAllStocks();\n                                    await fetchNews();\n                                    await fetchLatestNewsForTickers();\n                                }}\n                                disabled={loading}\n                                className={`px-4 py-2 rounded-lg font-semibold transition-all duration-300 disabled:opacity-50 ${\n                                    isDarkMode\n                                        ? 'bg-gray-800 hover:bg-gray-700 text-white'\n                                        : 'bg-gray-700 hover:bg-gray-600 text-white'\n                                }`}\n                            >\n                                {loading ? '‚è≥ Actualisation...' : 'üîÑ Actualiser'}\n                            </button>\n                        </div>\n                    </div>\n\n                    {lastUpdate && (\n                        <p className=\"text-gray-400 text-sm\">\n                            Derni√®re mise √† jour: {new Date(lastUpdate).toLocaleString('fr-FR')}\n                        </p>\n                    )}\n\n                    {/* TOP MOVERS - Vue rapide */}\n                    {tickers.length > 0 && (\n                        <div className={`mt-6 p-6 rounded-xl transition-colors duration-300 ${\n                            isDarkMode\n                                ? 'bg-gradient-to-br from-gray-800 to-gray-900 border border-gray-700'\n                                : 'bg-gradient-to-br from-white to-gray-50 border border-gray-200'\n                        }`}>\n                            <h3 className={`text-xl font-bold mb-4 flex items-center gap-2 ${isDarkMode ? 'text-white' : 'text-gray-900'}`}>\n                                <LucideIcon name=\"Fire\" className=\"w-6 h-6 text-orange-500\" />\n                                Top Movers du Jour\n                            </h3>\n                            <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\n                                {/* Top Gainers */}\n                                <div className={`p-3 sm:p-4 rounded-lg ${isDarkMode ? 'bg-green-500/10 border border-green-500/30' : 'bg-green-50 border border-green-200'}`}>\n                                    <h4 className={`text-base sm:text-sm font-bold mb-3 sm:mb-3 flex items-center gap-3 ${isDarkMode ? 'text-green-400' : 'text-green-700'}`}>\n                                        <LucideIcon name=\"TrendingUp\" className=\"w-5 h-5\" />\n                                        {renderMarketBadge('bull')}\n                                        Top Gainers\n                                    </h4>\n                                    <div className=\"space-y-2.5 sm:space-y-2\">\n                                        {tickers\n                                            .map(ticker => ({\n                                                ticker,\n                                                change: stockData[ticker]?.dp || 0,\n                                                price: stockData[ticker]?.c || 0\n                                            }))\n                                            .filter(item => item.change > 0)\n                                            .sort((a, b) => b.change - a.change)\n                                            .slice(0, 5)\n                                            .map((item, idx) => (\n                                                <div\n                                                    key={item.ticker}\n                                                    className={`flex items-start justify-between p-2 sm:p-2 rounded cursor-pointer transition-all hover:scale-[1.02] ${\n                                                        isDarkMode ? 'hover:bg-green-500/20' : 'hover:bg-green-100'\n                                                    }`}\n                                                    onClick={() => {\n                                                        setSelectedStock(item.ticker);\n                                                        setActiveTab('intellistocks');\n                                                    }}\n                                                >\n                                                    <div className=\"flex-1 min-w-0 pr-2\">\n                                                        <div className=\"flex items-center gap-2 mb-1\">\n                                                            <div className={`w-6 h-6 rounded-full flex items-center justify-center text-xs font-bold flex-shrink-0 ${\n                                                                isDarkMode ? 'bg-green-500/30 text-green-300' : 'bg-green-100 text-green-700'\n                                                            }`}>\n                                                                {idx + 1}\n                                                            </div>\n                                                            <img\n                                                                src={getCompanyLogo(item.ticker)}\n                                                                alt={item.ticker}\n                                                                className=\"w-6 h-6 rounded flex-shrink-0\"\n                                                                onError={(e) => e.target.style.display = 'none'}\n                                                            />\n                                                            <span className={`font-mono font-bold text-sm ${isDarkMode ? 'text-white' : 'text-gray-900'} flex-shrink-0`}>\n                                                                {item.ticker}\n                                                            </span>\n                                                            <div className=\"text-green-500 font-bold text-sm ml-auto flex-shrink-0\">\n                                                                +{item.change.toFixed(2)}% ‚Üë\n                                                            </div>\n                                                            <div className={`text-xs ${isDarkMode ? 'text-gray-400' : 'text-gray-600'} flex-shrink-0`}>\n                                                                ${item.price.toFixed(2)}\n                                                            </div>\n                                                        </div>\n                                                        \n                                                        {/* Espace d√©di√© pour les news avec placeholder */}\n                                                        <div className={`mt-1 ml-8 min-h-[20px] ${isDarkMode ? 'text-gray-400' : 'text-gray-600'}`}>\n                                                            {(() => {\n                                                                const reason = extractMoveReason(item.ticker, item.change);\n                                                                if (reason && reason !== '') {\n                                                                    return (\n                                                                        <div className={`text-xs flex items-start gap-2 leading-relaxed ${\n                                                                            isDarkMode ? 'text-gray-300' : 'text-gray-700'\n                                                                        }`}>\n                                                                            {tickerMoveReasons[item.ticker]?.source === 'Finviz AI' ? (\n                                                                                <span className=\"inline-flex items-center gap-1.5 flex-wrap\">\n                                                                                    <span className=\"px-1.5 py-0.5 rounded text-[10px] font-semibold bg-blue-500/20 text-blue-300 border border-blue-500/30 flex-shrink-0\">\n                                                                                        AI\n                                                                                    </span>\n                                                                                    <span className=\"leading-relaxed break-words\">{reason}</span>\n                                                                                </span>\n                                                                            ) : (\n                                                                                <span className=\"inline-flex items-start gap-1.5\">\n                                                                                    <span className=\"text-blue-400 flex-shrink-0 text-sm\">üì∞</span>\n                                                                                    <span className=\"leading-relaxed break-words\">{reason}</span>\n                                                                                </span>\n                                                                            )}\n                                                                        </div>\n                                                                    );\n                                                                }\n                                                                return (\n                                                                    <div className={`text-xs italic ${isDarkMode ? 'text-gray-600' : 'text-gray-400'}`}>\n                                                                        Chargement des explications...\n                                                                    </div>\n                                                                );\n                                                            })()}\n                                                        </div>\n                                                    </div>\n                                                </div>\n                                            ))}\n                                    </div>\n                                </div>\n\n                                {/* Top Losers */}\n                                <div className={`p-4 rounded-lg ${isDarkMode ? 'bg-red-500/10 border border-red-500/30' : 'bg-red-50 border border-red-200'}`}>\n                                    <h4 className={`text-sm font-bold mb-3 flex items-center gap-3 ${isDarkMode ? 'text-red-400' : 'text-red-700'}`}>\n                                        <LucideIcon name=\"TrendingDown\" className=\"w-5 h-5\" />\n                                        {renderMarketBadge('bear')}\n                                        Top Losers\n                                    </h4>\n                                    <div className=\"space-y-2\">\n                                        {tickers\n                                            .map(ticker => ({\n                                                ticker,\n                                                change: stockData[ticker]?.dp || 0,\n                                                price: stockData[ticker]?.c || 0\n                                            }))\n                                            .filter(item => item.change < 0)\n                                            .sort((a, b) => a.change - b.change)\n                                            .slice(0, 5)\n                                            .map((item, idx) => (\n                                                <div\n                                                    key={item.ticker}\n                                                    className={`flex items-start justify-between p-2 rounded cursor-pointer transition-all hover:scale-[1.02] ${\n                                                        isDarkMode ? 'hover:bg-red-500/20' : 'hover:bg-red-100'\n                                                    }`}\n                                                    onClick={() => {\n                                                        setSelectedStock(item.ticker);\n                                                        setActiveTab('intellistocks');\n                                                    }}\n                                                >\n                                                    <div className=\"flex-1 min-w-0 pr-2\">\n                                                        <div className=\"flex items-center gap-2 mb-1\">\n                                                            <div className={`w-6 h-6 rounded-full flex items-center justify-center text-xs font-bold flex-shrink-0 ${\n                                                                isDarkMode ? 'bg-red-500/30 text-red-300' : 'bg-red-100 text-red-700'\n                                                            }`}>\n                                                                {idx + 1}\n                                                            </div>\n                                                            <img\n                                                                src={getCompanyLogo(item.ticker)}\n                                                                alt={item.ticker}\n                                                                className=\"w-6 h-6 rounded flex-shrink-0\"\n                                                                onError={(e) => e.target.style.display = 'none'}\n                                                            />\n                                                            <span className={`font-mono font-bold text-sm ${isDarkMode ? 'text-white' : 'text-gray-900'} flex-shrink-0`}>\n                                                                {item.ticker}\n                                                            </span>\n                                                            <div className=\"text-red-500 font-bold text-sm ml-auto flex-shrink-0\">\n                                                                {item.change.toFixed(2)}% ‚Üì\n                                                            </div>\n                                                            <div className={`text-xs ${isDarkMode ? 'text-gray-400' : 'text-gray-600'} flex-shrink-0`}>\n                                                                ${item.price.toFixed(2)}\n                                                            </div>\n                                                        </div>\n                                                        \n                                                        {/* Espace d√©di√© pour les news avec placeholder */}\n                                                        <div className={`mt-1 ml-8 min-h-[20px] ${isDarkMode ? 'text-gray-400' : 'text-gray-600'}`}>\n                                                            {(() => {\n                                                                const reason = extractMoveReason(item.ticker, item.change);\n                                                                if (reason && reason !== '') {\n                                                                    return (\n                                                                        <div className={`text-xs flex items-start gap-2 leading-relaxed ${\n                                                                            isDarkMode ? 'text-gray-300' : 'text-gray-700'\n                                                                        }`}>\n                                                                            {tickerMoveReasons[item.ticker]?.source === 'Finviz AI' ? (\n                                                                                <span className=\"inline-flex items-center gap-1.5 flex-wrap\">\n                                                                                    <span className=\"px-1.5 py-0.5 rounded text-[10px] font-semibold bg-blue-500/20 text-blue-300 border border-blue-500/30 flex-shrink-0\">\n                                                                                        AI\n                                                                                    </span>\n                                                                                    <span className=\"leading-relaxed break-words\">{reason}</span>\n                                                                                </span>\n                                                                            ) : (\n                                                                                <span className=\"inline-flex items-start gap-1.5\">\n                                                                                    <span className=\"text-blue-400 flex-shrink-0 text-sm\">üì∞</span>\n                                                                                    <span className=\"leading-relaxed break-words\">{reason}</span>\n                                                                                </span>\n                                                                            )}\n                                                                        </div>\n                                                                    );\n                                                                }\n                                                                return (\n                                                                    <div className={`text-xs italic ${isDarkMode ? 'text-gray-600' : 'text-gray-400'}`}>\n                                                                        Chargement des explications...\n                                                                    </div>\n                                                                );\n                                                            })()}\n                                                        </div>\n                                                    </div>\n                                                </div>\n                                            ))}\n                                    </div>\n                                </div>\n                            </div>\n                        </div>\n                    )}\n\n                    {/* ANALYSES & OPINIONS D'ANALYSTES */}\n                    {tickers.length > 0 && Object.keys(stockData).length > 0 && (\n                        <div className={`mt-6 p-6 rounded-xl transition-colors duration-300 ${\n                            isDarkMode\n                                ? 'bg-gradient-to-br from-gray-800 to-gray-900 border border-gray-700'\n                                : 'bg-gradient-to-br from-white to-gray-50 border border-gray-200'\n                        }`}>\n                            <h3 className={`text-xl font-bold mb-4 flex items-center gap-2 ${isDarkMode ? 'text-white' : 'text-gray-900'}`}>\n                                <LucideIcon name=\"Target\" className=\"w-6 h-6 text-indigo-500\" />\n                                Analyses & Opinions d'Analystes\n                            </h3>\n                            <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4\">\n                                {tickers\n                                    .map(ticker => {\n                                        const finnhubData = stockData[ticker];\n                                        const recommendation = finnhubData?.recommendation?.[0];\n\n                                        if (!recommendation) return null;\n\n                                        const totalAnalysts = (recommendation.buy || 0) +\n                                                            (recommendation.hold || 0) +\n                                                            (recommendation.sell || 0) +\n                                                            (recommendation.strongBuy || 0) +\n                                                            (recommendation.strongSell || 0);\n\n                                        if (totalAnalysts === 0) return null;\n\n                                        const buyScore = (recommendation.strongBuy || 0) * 2 + (recommendation.buy || 0);\n                                        const sellScore = (recommendation.strongSell || 0) * 2 + (recommendation.sell || 0);\n                                        const holdScore = recommendation.hold || 0;\n\n                                        let consensus = 'Hold';\n                                        let consensusColor = 'yellow';\n                                        if (buyScore > sellScore && buyScore > holdScore) {\n                                            consensus = 'Buy';\n                                            consensusColor = 'green';\n                                        } else if (sellScore > buyScore && sellScore > holdScore) {\n                                            consensus = 'Sell';\n                                            consensusColor = 'red';\n                                        }\n\n                                        return {\n                                            ticker,\n                                            totalAnalysts,\n                                            consensus,\n                                            consensusColor,\n                                            buyScore,\n                                            sellScore,\n                                            holdScore,\n                                            recommendation\n                                        };\n                                    })\n                                    .filter(item => item !== null)\n                                    .sort((a, b) => b.totalAnalysts - a.totalAnalysts)\n                                    .slice(0, 6)\n                                    .map((item) => (\n                                        <div\n                                            key={item.ticker}\n                                            className={`p-4 rounded-lg cursor-pointer transition-all hover:scale-[1.02] ${\n                                                isDarkMode\n                                                    ? 'bg-gray-700/50 hover:bg-gray-700/70 border border-gray-600'\n                                                    : 'bg-white hover:bg-gray-50 border border-gray-200'\n                                            }`}\n                                            onClick={() => {\n                                                setSelectedStock(item.ticker);\n                                                setActiveTab('intellistocks');\n                                            }}\n                                        >\n                                            <div className=\"flex items-center justify-between mb-3\">\n                                                <div className=\"flex items-center gap-2\">\n                                                    <img\n                                                        src={getCompanyLogo(item.ticker)}\n                                                        alt={item.ticker}\n                                                        className=\"w-8 h-8 rounded\"\n                                                        onError={(e) => e.target.style.display = 'none'}\n                                                    />\n                                                    <span className={`font-mono font-bold text-lg ${isDarkMode ? 'text-white' : 'text-gray-900'}`}>\n                                                        {item.ticker}\n                                                    </span>\n                                                </div>\n                                                <div className={`px-3 py-1 rounded-full text-xs font-bold ${\n                                                    item.consensusColor === 'green'\n                                                        ? 'bg-green-500/20 text-green-500 border border-green-500/30'\n                                                        : item.consensusColor === 'red'\n                                                        ? 'bg-red-500/20 text-red-500 border border-red-500/30'\n                                                        : 'bg-yellow-500/20 text-yellow-500 border border-yellow-500/30'\n                                                }`}>\n                                                    {item.consensus === 'Buy' ? 'ACHAT' : item.consensus === 'Sell' ? 'VENTE' : 'CONSERVER'}\n                                                </div>\n                                            </div>\n\n                                            <div className={`text-sm mb-2 ${isDarkMode ? 'text-gray-300' : 'text-gray-600'}`}>\n                                                {item.totalAnalysts} analyste{item.totalAnalysts > 1 ? 's' : ''}\n                                            </div>\n\n                                            <div className=\"space-y-1.5\">\n                                                {item.recommendation.strongBuy > 0 && (\n                                                    <div className=\"flex items-center justify-between text-xs\">\n                                                        <span className={isDarkMode ? 'text-gray-400' : 'text-gray-600'}>Strong Buy</span>\n                                                        <span className=\"font-bold text-green-500\">{item.recommendation.strongBuy}</span>\n                                                    </div>\n                                                )}\n                                                {item.recommendation.buy > 0 && (\n                                                    <div className=\"flex items-center justify-between text-xs\">\n                                                        <span className={isDarkMode ? 'text-gray-400' : 'text-gray-600'}>Buy</span>\n                                                        <span className=\"font-bold text-green-400\">{item.recommendation.buy}</span>\n                                                    </div>\n                                                )}\n                                                {item.recommendation.hold > 0 && (\n                                                    <div className=\"flex items-center justify-between text-xs\">\n                                                        <span className={isDarkMode ? 'text-gray-400' : 'text-gray-600'}>Hold</span>\n                                                        <span className=\"font-bold text-yellow-500\">{item.recommendation.hold}</span>\n                                                    </div>\n                                                )}\n                                                {item.recommendation.sell > 0 && (\n                                                    <div className=\"flex items-center justify-between text-xs\">\n                                                        <span className={isDarkMode ? 'text-gray-400' : 'text-gray-600'}>Sell</span>\n                                                        <span className=\"font-bold text-red-400\">{item.recommendation.sell}</span>\n                                                    </div>\n                                                )}\n                                                {item.recommendation.strongSell > 0 && (\n                                                    <div className=\"flex items-center justify-between text-xs\">\n                                                        <span className={isDarkMode ? 'text-gray-400' : 'text-gray-600'}>Strong Sell</span>\n                                                        <span className=\"font-bold text-red-500\">{item.recommendation.strongSell}</span>\n                                                    </div>\n                                                )}\n                                            </div>\n\n                                            <div className={`mt-3 pt-3 border-t ${isDarkMode ? 'border-gray-600' : 'border-gray-200'}`}>\n                                                <div className=\"flex items-center gap-2\">\n                                                    <LucideIcon name=\"ArrowUpRight\" className=\"w-3 h-3 text-gray-400\" />\n                                                    <span className={`text-xs ${isDarkMode ? 'text-gray-400' : 'text-gray-600'}`}>\n                                                        Cliquer pour analyse compl√®te\n                                                    </span>\n                                                </div>\n                                            </div>\n                                        </div>\n                                    ))}\n                            </div>\n\n                            {tickers.filter(ticker => {\n                                const finnhubData = stockData[ticker];\n                                const recommendation = finnhubData?.recommendation?.[0];\n                                return recommendation && (\n                                    (recommendation.buy || 0) +\n                                    (recommendation.hold || 0) +\n                                    (recommendation.sell || 0) +\n                                    (recommendation.strongBuy || 0) +\n                                    (recommendation.strongSell || 0)\n                                ) > 0;\n                            }).length === 0 && (\n                                <div className={`text-center py-8 ${isDarkMode ? 'text-gray-400' : 'text-gray-600'}`}>\n                                    <LucideIcon name=\"AlertCircle\" className=\"w-12 h-12 mx-auto mb-3 opacity-50\" />\n                                    <p>Aucune recommandation d'analyste disponible pour le moment</p>\n                                    <p className=\"text-sm mt-2\">Les donn√©es seront charg√©es lors de la prochaine actualisation</p>\n                                </div>\n                            )}\n                        </div>\n                    )}\n\n                    {/* Debug des donn√©es d√©plac√© vers Admin-JSLAI */}\n\n                    {/* Vue LIST - Compacte */}\n                    {stocksViewMode === 'list' && (\n                        <div className=\"mt-8\">\n                            <div className={`backdrop-blur-sm rounded-2xl p-8 border-2 shadow-2xl transition-colors duration-300 ${\n                                isDarkMode\n                                    ? 'bg-gradient-to-br from-gray-800/90 to-gray-900/90 border-blue-500/30 shadow-blue-500/10'\n                                    : 'bg-gradient-to-br from-white/95 to-gray-50/95 border-blue-400/40 shadow-blue-400/10'\n                            }`}>\n                                <h2 className={`text-2xl font-bold mb-6 transition-colors duration-300 ${\n                                    isDarkMode ? 'text-white' : 'text-gray-900'\n                                }`}>üìä Titres - Vue Liste</h2>\n\n                                {tickers.length === 0 ? (\n                                    <div className={`text-center py-12 ${isDarkMode ? 'text-gray-400' : 'text-gray-600'}`}>\n                                        <p className=\"text-lg font-semibold mb-2\">Aucun titre disponible</p>\n                                        <p className=\"text-sm\">Les donn√©es sont en cours de chargement...</p>\n                                    </div>\n                                ) : Object.keys(stockData).length === 0 ? (\n                                    <div className={`text-center py-12 ${isDarkMode ? 'text-gray-400' : 'text-gray-600'}`}>\n                                        <p className=\"text-lg font-semibold mb-2\">Chargement des donn√©es de march√©...</p>\n                                        <p className=\"text-sm\">Veuillez patienter quelques instants</p>\n                                    </div>\n                                ) : (\n                                <div className=\"space-y-3\">\n                                    {tickers.map((ticker) => {\n                                        const data = stockData[ticker] || {};\n                                        const price = data.c || data.price || 0;\n                                        const change = data.d || data.change || 0;\n                                        const changePercent = data.dp || data.changePercent || 0;\n                                        const isPositive = changePercent >= 0;\n\n                                        return (\n                                            <div\n                                                key={ticker}\n                                                className={`flex items-center justify-between p-4 rounded-xl cursor-pointer transition-all hover:scale-[1.01] ${\n                                                    isDarkMode\n                                                        ? 'bg-gray-700/50 hover:bg-gray-700/70 border border-gray-600'\n                                                        : 'bg-white hover:bg-gray-50 border border-gray-200'\n                                                }`}\n                                                onClick={() => {\n                                                    setSelectedStock(ticker);\n                                                    setActiveTab('intellistocks');\n                                                }}\n                                            >\n                                                <div className=\"flex items-center gap-4 flex-1\">\n                                                    <img\n                                                        src={getCompanyLogo(ticker)}\n                                                        alt={ticker}\n                                                        className=\"w-12 h-12 rounded-lg\"\n                                                        onError={(e) => e.target.style.display = 'none'}\n                                                    />\n                                                    <div className=\"flex-1\">\n                                                        <div className={`font-mono font-bold text-lg ${isDarkMode ? 'text-white' : 'text-gray-900'}`}>\n                                                            {ticker}\n                                                        </div>\n                                                        <div className={`text-sm ${isDarkMode ? 'text-gray-400' : 'text-gray-600'}`}>\n                                                            {companyNames[ticker] || ticker}\n                                                        </div>\n                                                        \n                                                        {/* Espace d√©di√© pour les news avec extractMoveReason */}\n                                                        <div className={`mt-2 min-h-[20px] ${isDarkMode ? 'text-gray-400' : 'text-gray-600'}`}>\n                                                            {extractMoveReason(ticker, changePercent) ? (\n                                                                <div className={`text-xs flex items-start gap-2 ${\n                                                                    isDarkMode ? 'text-gray-300' : 'text-gray-700'\n                                                                }`}>\n                                                                    {tickerMoveReasons[ticker]?.source === 'Finviz AI' ? (\n                                                                        <span className=\"inline-flex items-center gap-1.5 flex-wrap\">\n                                                                            <span className=\"px-1.5 py-0.5 rounded text-[10px] font-semibold bg-blue-500/20 text-blue-300 border border-blue-500/30 flex-shrink-0\">\n                                                                                AI\n                                                                            </span>\n                                                                            <span className=\"leading-relaxed\">{extractMoveReason(ticker, changePercent)}</span>\n                                                                        </span>\n                                                                    ) : (\n                                                                        <span className=\"inline-flex items-start gap-1.5\">\n                                                                            <span className=\"text-blue-400 flex-shrink-0\">üì∞</span>\n                                                                            <span className=\"leading-relaxed\">{extractMoveReason(ticker, changePercent)}</span>\n                                                                        </span>\n                                                                    )}\n                                                                </div>\n                                                            ) : tickerLatestNews[ticker] ? (\n                                                                <div className={`text-xs ${isDarkMode ? 'text-gray-500' : 'text-gray-500'}`}>\n                                                                    üì∞ <span className=\"italic\">{tickerLatestNews[ticker].title.length > 70 ? tickerLatestNews[ticker].title.substring(0, 70) + '...' : tickerLatestNews[ticker].title}</span>\n                                                                </div>\n                                                            ) : (\n                                                                <div className={`text-xs italic ${isDarkMode ? 'text-gray-600' : 'text-gray-400'}`}>\n                                                                    Chargement des explications...\n                                                                </div>\n                                                            )}\n                                                        </div>\n                                                    </div>\n                                                </div>\n\n                                                <div className=\"text-right\">\n                                                    <div className={`font-bold text-xl ${isDarkMode ? 'text-white' : 'text-gray-900'}`}>\n                                                        ${price.toFixed(2)}\n                                                    </div>\n                                                    <div className={`font-semibold ${isPositive ? 'text-green-500' : 'text-red-500'}`}>\n                                                        {isPositive ? '+' : ''}{changePercent.toFixed(2)}%\n                                                    </div>\n                                                    </div>\n                                                </div>\n                                            );\n                                    })}\n                                </div>\n                                )}\n                            </div>\n                        </div>\n                    )}\n\n                    {/* Vue CARDS - Visuelle */}\n                    {stocksViewMode === 'cards' && (\n                        <div className=\"mt-8\">\n                            <div className={`backdrop-blur-sm rounded-2xl p-8 border-2 shadow-2xl transition-colors duration-300 ${\n                                isDarkMode\n                                    ? 'bg-gradient-to-br from-gray-800/90 to-gray-900/90 border-blue-500/30 shadow-blue-500/10'\n                                    : 'bg-gradient-to-br from-white/95 to-gray-50/95 border-blue-400/40 shadow-blue-400/10'\n                            }`}>\n                                <h2 className={`text-2xl font-bold mb-6 transition-colors duration-300 ${\n                                    isDarkMode ? 'text-white' : 'text-gray-900'\n                                }`}>üé¥ Titres - Vue Cartes</h2>\n\n                                {tickers.length === 0 ? (\n                                    <div className={`text-center py-12 ${isDarkMode ? 'text-gray-400' : 'text-gray-600'}`}>\n                                        <p className=\"text-lg font-semibold mb-2\">Aucun titre disponible</p>\n                                        <p className=\"text-sm\">Les donn√©es sont en cours de chargement...</p>\n                                    </div>\n                                ) : Object.keys(stockData).length === 0 ? (\n                                    <div className={`text-center py-12 ${isDarkMode ? 'text-gray-400' : 'text-gray-600'}`}>\n                                        <p className=\"text-lg font-semibold mb-2\">Chargement des donn√©es de march√©...</p>\n                                        <p className=\"text-sm\">Veuillez patienter quelques instants</p>\n                                    </div>\n                                ) : (\n                                    <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6\">\n                                        {tickers.map((ticker) => {\n                                        const data = stockData[ticker] || {};\n                                        const price = data.c || data.price || 0;\n                                        const change = data.d || data.change || 0;\n                                        const changePercent = data.dp || data.changePercent || 0;\n                                        const high = data.h || 0;\n                                        const low = data.l || 0;\n                                        const volume = data.v || 0;\n                                        const isPositive = changePercent >= 0;\n\n                                        return (\n                                            <div\n                                                key={ticker}\n                                                className={`p-6 rounded-xl cursor-pointer transition-all hover:scale-[1.02] ${\n                                                    isDarkMode\n                                                        ? 'bg-gradient-to-br from-gray-700/50 to-gray-800/50 hover:from-gray-700/70 hover:to-gray-800/70 border border-gray-600'\n                                                        : 'bg-gradient-to-br from-white to-gray-50 hover:from-gray-50 hover:to-gray-100 border border-gray-200 shadow-lg'\n                                                }`}\n                                                onClick={() => {\n                                                    setSelectedStock(ticker);\n                                                    setActiveTab('intellistocks');\n                                                }}\n                                            >\n                                                <div className=\"flex items-start justify-between mb-4\">\n                                                    <div className=\"flex items-center gap-3\">\n                                                        <img\n                                                            src={getCompanyLogo(ticker)}\n                                                            alt={ticker}\n                                                            className=\"w-14 h-14 rounded-xl\"\n                                                            onError={(e) => e.target.style.display = 'none'}\n                                                        />\n                                                        <div className=\"flex-1\">\n                                                            <div className={`font-mono font-bold text-xl ${isDarkMode ? 'text-white' : 'text-gray-900'}`}>\n                                                                {ticker}\n                                                            </div>\n                                                            <div className={`text-xs ${isDarkMode ? 'text-gray-400' : 'text-gray-600'}`}>\n                                                                {companyNames[ticker] || ticker}\n                                                            </div>\n                                                            \n                                                            {/* Espace d√©di√© pour les news avec extractMoveReason */}\n                                                            <div className={`mt-2 min-h-[24px] ${isDarkMode ? 'text-gray-400' : 'text-gray-600'}`}>\n                                                                {extractMoveReason(ticker, changePercent) ? (\n                                                                    <div className={`text-xs flex items-start gap-2 ${\n                                                                        isDarkMode ? 'text-gray-300' : 'text-gray-700'\n                                                                    }`}>\n                                                                        {tickerMoveReasons[ticker]?.source === 'Finviz AI' ? (\n                                                                            <span className=\"inline-flex items-center gap-1.5 flex-wrap\">\n                                                                                <span className=\"px-1.5 py-0.5 rounded text-[10px] font-semibold bg-blue-500/20 text-blue-300 border border-blue-500/30 flex-shrink-0\">\n                                                                                    AI\n                                                                                </span>\n                                                                                <span className=\"leading-relaxed\">{extractMoveReason(ticker, changePercent)}</span>\n                                                                            </span>\n                                                                        ) : (\n                                                                            <span className=\"inline-flex items-start gap-1.5\">\n                                                                                <span className=\"text-blue-400 flex-shrink-0\">üì∞</span>\n                                                                                <span className=\"leading-relaxed\">{extractMoveReason(ticker, changePercent)}</span>\n                                                                            </span>\n                                                                        )}\n                                                                    </div>\n                                                                ) : tickerLatestNews[ticker] ? (\n                                                                    <div className={`text-xs ${isDarkMode ? 'text-gray-500' : 'text-gray-500'}`}>\n                                                                        üì∞ <span className=\"italic\">{tickerLatestNews[ticker].title.length > 60 ? tickerLatestNews[ticker].title.substring(0, 60) + '...' : tickerLatestNews[ticker].title}</span>\n                                                                    </div>\n                                                                ) : (\n                                                                    <div className={`text-xs italic ${isDarkMode ? 'text-gray-600' : 'text-gray-400'}`}>\n                                                                        Chargement des explications...\n                                                                    </div>\n                                                                )}\n                                                            </div>\n                                                        </div>\n                                                    </div>\n\n                                                    <div className={`px-3 py-1 rounded-full text-xs font-bold ${\n                                                        isPositive\n                                                            ? 'bg-green-500/20 text-green-500 border border-green-500/30'\n                                                            : 'bg-red-500/20 text-red-500 border border-red-500/30'\n                                                    }`}>\n                                                        {isPositive ? '‚ñ≤' : '‚ñº'}\n                                                    </div>\n                                                </div>\n\n                                                <div className=\"mb-4\">\n                                                    <div className={`text-3xl font-bold mb-1 ${isDarkMode ? 'text-white' : 'text-gray-900'}`}>\n                                                        ${price.toFixed(2)}\n                                                    </div>\n                                                    <div className={`text-lg font-semibold ${isPositive ? 'text-green-500' : 'text-red-500'}`}>\n                                                        {isPositive ? '+' : ''}{change.toFixed(2)} ({isPositive ? '+' : ''}{changePercent.toFixed(2)}%)\n                                                    </div>\n                                                </div>\n\n                                                <div className={`grid grid-cols-2 gap-2 pt-4 border-t ${isDarkMode ? 'border-gray-600' : 'border-gray-200'}`}>\n                                                    <div>\n                                                        <div className={`text-xs ${isDarkMode ? 'text-gray-400' : 'text-gray-600'}`}>Haut</div>\n                                                        <div className={`font-bold ${isDarkMode ? 'text-white' : 'text-gray-900'}`}>${high.toFixed(2)}</div>\n                                                    </div>\n                                                    <div>\n                                                        <div className={`text-xs ${isDarkMode ? 'text-gray-400' : 'text-gray-600'}`}>Bas</div>\n                                                        <div className={`font-bold ${isDarkMode ? 'text-white' : 'text-gray-900'}`}>${low.toFixed(2)}</div>\n                                                    </div>\n                                                    <div className=\"col-span-2\">\n                                                        <div className={`text-xs ${isDarkMode ? 'text-gray-400' : 'text-gray-600'}`}>Volume</div>\n                                                        <div className={`font-bold ${isDarkMode ? 'text-white' : 'text-gray-900'}`}>{formatNumber(volume)}</div>\n                                                    </div>\n                                                </div>\n                                            </div>\n                                        );\n                                    })}\n                                    </div>\n                                )}\n                            </div>\n                        </div>\n                    )}\n\n                    {/* Section Donn√©es Financi√®res & Actualit√©s (Finnhub) - PRINCIPALE */}\n                    {stocksViewMode === 'table' && (\n                    <div className=\"mt-8\">\n                        <div className={`backdrop-blur-sm rounded-2xl p-8 border-2 shadow-2xl transition-colors duration-300 ${\n                            isDarkMode \n                                ? 'bg-gradient-to-br from-gray-800/90 to-gray-900/90 border-blue-500/30 shadow-blue-500/10' \n                                : 'bg-gradient-to-br from-white/95 to-gray-50/95 border-blue-400/40 shadow-blue-400/10'\n                        }`}>\n                            <div className=\"text-center mb-6\">\n                                <h2 className={`text-2xl font-bold mb-3 transition-colors duration-300 ${\n                                    isDarkMode ? 'text-white' : 'text-gray-900'\n                                }`}>\n                                    üìä Donn√©es Financi√®res & Actualit√©s\n                                </h2>\n                                <div className={`inline-flex items-center px-4 py-2 rounded-full text-sm font-semibold transition-colors duration-300 ${\n                                    isDarkMode \n                                        ? 'bg-gray-600/20 text-gray-300 border border-gray-500/30' \n                                        : 'bg-gray-700/80 text-gray-200 border border-gray-600/50'\n                                }`}>\n                                    <span className=\"mr-2\">üîó</span>\n                                    Source: Finnhub API\n                                </div>\n                                <p className={`text-sm mt-3 transition-colors duration-300 ${\n                                    isDarkMode ? 'text-gray-300' : 'text-gray-600'\n                                }`}>\n                                    Donn√©es en temps r√©el avec 3 actualit√©s par titre\n                                </p>\n                            </div>\n                            <div className=\"overflow-x-auto max-h-[70vh] overflow-y-auto scrollbar-thin scrollbar-thumb-gray-400 scrollbar-track-gray-200 dark:scrollbar-thumb-gray-600 dark:scrollbar-track-gray-800 relative text-sm\">\n                                <table className=\"w-full text-sm\">\n                                    <thead>\n                                        <tr className={`border-b-2 transition-colors duration-300 ${\n                                            isDarkMode ? 'border-blue-500/50 bg-gray-900' : 'border-blue-400/50 bg-gray-100'\n                                        }`}>\n                                            <th className={`text-left py-2 px-3 font-bold transition-colors duration-300 ${\n                                                isDarkMode ? 'text-blue-300' : 'text-blue-700'\n                                            }`}>üìà Ticker</th>\n                                            <th className={`text-left py-2 px-3 font-bold transition-colors duration-300 ${\n                                                isDarkMode ? 'text-blue-300' : 'text-blue-700'\n                                            }`}>üí∞ Prix</th>\n                                            <th className={`text-left py-2 px-3 font-bold transition-colors duration-300 ${\n                                                isDarkMode ? 'text-blue-300' : 'text-blue-700'\n                                            }`}>üìä Change</th>\n                                            <th className={`text-left py-2 px-3 font-bold transition-colors duration-300 ${\n                                                isDarkMode ? 'text-blue-300' : 'text-blue-700'\n                                            }`}>üìà P/E</th>\n                                            <th className={`text-left py-2 px-3 font-bold transition-colors duration-300 ${\n                                                isDarkMode ? 'text-blue-300' : 'text-blue-700'\n                                            }`}>üíé Dividende</th>\n                                            <th className={`text-left py-2 px-3 font-bold transition-colors duration-300 ${\n                                                isDarkMode ? 'text-blue-300' : 'text-blue-700'\n                                            }`}>üè¢ Secteur</th>\n                                            <th className={`text-left py-2 px-3 font-bold transition-colors duration-300 ${\n                                                isDarkMode ? 'text-blue-300' : 'text-blue-700'\n                                            }`}>‚≠ê Rating</th>\n                                            <th className={`text-left py-2 px-3 font-bold transition-colors duration-300 ${\n                                                isDarkMode ? 'text-blue-300' : 'text-blue-700'\n                                            }`}>üòä Sentiment</th>\n                                            <th className={`text-left py-2 px-3 font-bold transition-colors duration-300 ${\n                                                isDarkMode ? 'text-blue-300' : 'text-blue-700'\n                                            }`}>‚ö° Actions</th>\n                                        </tr>\n                                    </thead>\n                                    <tbody>\n                                        {tickers.map(ticker => {\n                                            // Donn√©es de Finnhub uniquement\n                                            const finnhubData = stockData[ticker];\n                                            const price = finnhubData?.c ? `$${finnhubData.c.toFixed(2)}` : 'N/A';\n                                            const change = finnhubData?.d ? `${finnhubData.d > 0 ? '+' : ''}${finnhubData.d.toFixed(2)}` : 'N/A';\n                                            const changePercent = finnhubData?.dp ? `${finnhubData.dp > 0 ? '+' : ''}${finnhubData.dp.toFixed(2)}%` : 'N/A';\n                                            const changeColor = finnhubData?.d > 0 ? 'text-green-400' : finnhubData?.d < 0 ? 'text-red-400' : 'text-gray-400';\n                                            \n                                            // Donn√©es de profil Finnhub\n                                            const profile = finnhubData?.profile;\n                                            const fundamentals = finnhubData?.fundamentals;\n                                            const peRatio = fundamentals?.peRatio\n                                                ? (Number.isFinite(fundamentals.peRatio) ? fundamentals.peRatio.toFixed(2) : fundamentals.peRatio)\n                                                : (profile?.pe ? profile.pe.toFixed(2) : 'N/A');\n                                            const dividendYield = fundamentals?.dividendYield\n                                                ? `${(Number(fundamentals.dividendYield) * 100).toFixed(2)}%`\n                                                : (profile?.dividend ? `${(profile.dividend * 100).toFixed(2)}%` : 'N/A');\n                                            const sector = fundamentals?.sector || profile?.industry || 'N/A';\n                                            \n                                            // Donn√©es de recommandation Finnhub\n                                            const recommendation = finnhubData?.recommendation;\n                                            const rating = recommendation?.length > 0 ? \n                                                (recommendation[0].buy + recommendation[0].strongBuy > recommendation[0].sell + recommendation[0].strongSell ? 'Achat' : \n                                                 recommendation[0].sell + recommendation[0].strongSell > recommendation[0].buy + recommendation[0].strongBuy ? 'Vente' : 'Neutre') : 'N/A';\n                                            \n                                            // 2 actualit√©s les plus cr√©dibles pour ce ticker\n                                            const tickerNews = sortNewsByCredibility(\n                                                newsData.filter(article => {\n                                                const text = (article.title + ' ' + article.description).toLowerCase();\n                                                return text.includes(ticker.toLowerCase());\n                                                })\n                                            ).slice(0, 2);\n                                            \n                                            // Analyse du sentiment\n                                            const analyzeSentiment = (title, description) => {\n                                                const text = (title + ' ' + description).toLowerCase();\n                                                const positiveWords = ['hausse', 'croissance', 'gain', 'profit', 'positif', 'am√©lioration', 'succ√®s', 'fort', 'solide'];\n                                                const negativeWords = ['baisse', 'chute', 'perte', 'n√©gatif', 'd√©clin', 'faible', 'probl√®me', 'risque', 'inqui√©tude'];\n                                                \n                                                const positiveCount = positiveWords.filter(word => text.includes(word)).length;\n                                                const negativeCount = negativeWords.filter(word => text.includes(word)).length;\n                                                \n                                                if (positiveCount > negativeCount) return { sentiment: 'Positif', color: 'text-green-400' };\n                                                if (negativeCount > positiveCount) return { sentiment: 'N√©gatif', color: 'text-red-400' };\n                                                return { sentiment: 'Neutre', color: 'text-gray-400' };\n                                            };\n                                            \n                                            const sentiment = tickerNews.length > 0 ? analyzeSentiment(tickerNews[0].title, tickerNews[0].description) : { sentiment: 'N/A', color: 'text-gray-400' };\n                                            \n                                            return (\n                                                <React.Fragment key={ticker}>\n                                                    {/* Ligne principale - STYLE PRINCIPAL */}\n                                                    <tr className={`border-b-2 transition-all duration-300 hover:scale-[1.02] ${\n                                                        isDarkMode \n                                                            ? 'border-gray-600/50 hover:bg-gradient-to-r hover:from-gray-800/80 hover:to-gray-700/80 hover:shadow-lg hover:shadow-blue-500/10' \n                                                            : 'border-gray-300/50 hover:bg-gradient-to-r hover:from-gray-50/80 hover:to-white/80 hover:shadow-lg hover:shadow-blue-400/10'\n                                                    }`}>\n                                                        <td className=\"py-4 px-3\">\n                                                            <div className=\"flex items-center gap-3\">\n                                                                <img \n                                                                    src={getCompanyLogo(ticker)} \n                                                                    alt={`${ticker} logo`}\n                                                                    className=\"w-8 h-8 rounded-lg shadow-md\"\n                                                                    onError={(e) => {\n                                                                        e.target.style.display = 'none';\n                                                                    }}\n                                                                />\n                                                                <span className={`font-mono font-bold text-xl transition-colors duration-300 ${\n                                                                    isDarkMode ? 'text-white' : 'text-gray-900'\n                                                                }`}>{ticker}</span>\n                                                            </div>\n                                                        </td>\n                                                        <td className={`py-2 px-3 font-bold transition-colors duration-300 ${\n                                                            isDarkMode ? 'text-white' : 'text-gray-900'\n                                                        }`}>{price}</td>\n                                                        <td className={`py-2 px-3 font-semibold transition-colors duration-300 ${changeColor}`}>\n                                                            {change} ({changePercent})\n                                                        </td>\n                                                        <td className={`py-2 px-3 font-medium transition-colors duration-300 ${\n                                                            isDarkMode ? 'text-gray-200' : 'text-gray-700'\n                                                        }`}>{peRatio}</td>\n                                                        <td className={`py-2 px-3 font-medium transition-colors duration-300 ${\n                                                            isDarkMode ? 'text-green-300' : 'text-green-600'\n                                                        }`}>{dividendYield}</td>\n                                                        <td className={`py-2 px-3 text-sm transition-colors duration-300 ${\n                                                            isDarkMode ? 'text-gray-300' : 'text-gray-600'\n                                                        }`}>{cleanText(sector)}</td>\n                                                        <td className=\"py-4 px-3\">\n                                                            <span className={`px-4 py-2 rounded-full text-sm font-bold transition-colors duration-300 ${\n                                                                rating === 'Achat' ? 'bg-green-500 text-white' :\n                                                                rating === 'Vente' ? 'bg-red-500 text-white' :\n                                                                'bg-yellow-500 text-black'\n                                                            }`}>\n                                                                {rating}\n                                                            </span>\n                                                        </td>\n                                                        <td className=\"py-4 px-3\">\n                                                            <div className={`flex items-center gap-2 px-3 py-2 rounded-full transition-colors duration-300 ${\n                                                                sentiment.sentiment === 'Positif' ? 'bg-green-100 text-green-800' :\n                                                                sentiment.sentiment === 'N√©gatif' ? 'bg-red-100 text-red-800' :\n                                                                'bg-gray-100 text-gray-800'\n                                                            }`}>\n                                                                <span className=\"text-lg\">\n                                                                    {sentiment.sentiment === 'Positif' ? 'üòä' : \n                                                                     sentiment.sentiment === 'N√©gatif' ? 'üòü' : 'üòê'}\n                                                                </span>\n                                                                <span className=\"font-semibold\">{sentiment.sentiment}</span>\n                                                            </div>\n                                                        </td>\n                                                        <td className=\"py-4 px-3\">\n                                                            <button\n                                                                onClick={() => {\n                                                                    setSelectedStock(ticker);\n                                                                    setActiveTab('intellistocks');\n                                                                }}\n                                                                className={`px-4 py-2 text-xs font-semibold rounded-lg transition-all duration-300 hover:scale-[1.02] shadow ${\n                                                                    isDarkMode\n                                                                        ? 'bg-gradient-to-r from-blue-600 to-blue-700 hover:from-blue-500 hover:to-blue-600 text-white shadow-blue-500/25'\n                                                                        : 'bg-gradient-to-r from-blue-500 to-blue-600 hover:from-blue-400 hover:to-blue-500 text-white shadow-blue-400/25'\n                                                                }`}\n                                                            >\n                                                                üìä Voir dans JLab\n                                                            </button>\n                                                        </td>\n                                                    </tr>\n\n                                                    {/* Ligne Finviz - Ce qui bouge (si disponible) */}\n                                                    {finvizNews[ticker] && (\n                                                        <tr className={`border-b-2 transition-all duration-300 ${\n                                                            isDarkMode\n                                                                ? 'border-purple-500/30 bg-gradient-to-r from-purple-900/20 to-indigo-900/20 hover:from-purple-900/30 hover:to-indigo-900/30'\n                                                                : 'border-purple-400/30 bg-gradient-to-r from-purple-50/60 to-indigo-50/60 hover:from-purple-100/80 hover:to-indigo-100/80'\n                                                        }`}>\n                                                            <td colSpan=\"9\" className=\"py-4 px-4\">\n                                                                <div className=\"flex items-start gap-3\">\n                                                                    {/* Ic√¥ne √©toile (sparkles) */}\n                                                                    <div className={`p-2 rounded-full ${\n                                                                        isDarkMode ? 'bg-purple-500/20' : 'bg-purple-100'\n                                                                    }`}>\n                                                                        <LucideIcon name=\"Sparkles\" className=\"w-5 h-5 text-purple-500\" />\n                                                                    </div>\n\n                                                                    {/* Contenu */}\n                                                                    <div className=\"flex-1\">\n                                                                        <div className=\"flex items-center gap-2 mb-1\">\n                                                                            <span className={`text-xs font-bold px-2 py-0.5 rounded ${\n                                                                                isDarkMode ? 'bg-purple-500/30 text-purple-300' : 'bg-purple-200 text-purple-700'\n                                                                            }`}>\n                                                                                üî• CE QUI BOUGE\n                                                                            </span>\n                                                                            <span className={`text-xs ${isDarkMode ? 'text-gray-400' : 'text-gray-600'}`}>\n                                                                                {finvizNews[ticker].date}\n                                                                            </span>\n                                                                        </div>\n                                                                        <p className={`text-sm font-medium leading-relaxed ${\n                                                                            isDarkMode ? 'text-gray-200' : 'text-gray-800'\n                                                                        }`}>\n                                                                            {finvizNews[ticker].headline}\n                                                                        </p>\n                                                                        {finvizNews[ticker].link && (\n                                                                            <a\n                                                                                href={finvizNews[ticker].link}\n                                                                                target=\"_blank\"\n                                                                                rel=\"noopener noreferrer\"\n                                                                                onClick={(e) => e.stopPropagation()}\n                                                                                className={`text-xs mt-2 inline-flex items-center gap-1 hover:underline ${\n                                                                                    isDarkMode ? 'text-purple-400' : 'text-purple-600'\n                                                                                }`}\n                                                                            >\n                                                                                <LucideIcon name=\"ExternalLink\" className=\"w-3 h-3\" />\n                                                                                Lire l'article complet\n                                                                            </a>\n                                                                        )}\n                                                                    </div>\n                                                                </div>\n                                                            </td>\n                                                        </tr>\n                                                    )}\n\n                                                    {/* Lignes d'actualit√©s (3 maximum) - STYLE AM√âLIOR√â */}\n                                                    {tickerNews.map((news, newsIndex) => (\n                                                        <tr key={`${ticker}-news-${newsIndex}`} className={`border-b-2 transition-all duration-300 hover:scale-[1.01] ${\n                                                            isDarkMode \n                                                                ? 'border-gray-600/30 bg-gradient-to-r from-gray-800/40 to-gray-700/40 hover:from-gray-700/60 hover:to-gray-600/60' \n                                                                : 'border-gray-300/30 bg-gradient-to-r from-gray-50/60 to-white/60 hover:from-gray-100/80 hover:to-gray-50/80'\n                                                        }`}>\n                                                            <td colSpan=\"9\" className=\"py-6 px-4\">\n                                                                <div className={`transition-colors duration-300 ${\n                                                                    isDarkMode ? 'text-gray-200' : 'text-gray-700'\n                                                                }`}>\n                                                                    <div className=\"flex items-start gap-4\">\n                                                                        {(() => {\n                                                                            const newsIconData = getNewsIcon(news.title, news.description, news.sentiment);\n                                                                            return (\n                                                                        <div className={`p-3 rounded-full transition-colors duration-300 ${\n                                                                                    isDarkMode ? 'bg-gray-600/20' : 'bg-gray-200/60'\n                                                                        }`}>\n                                                                                    <LucideIcon name={newsIconData.icon} className={`w-6 h-6 ${newsIconData.color}`} />\n                                                                        </div>\n                                                                            );\n                                                                        })()}\n                                                                        <div className=\"flex-1\">\n                                                                            <h5 className={`font-bold text-lg mb-3 transition-colors duration-300 ${\n                                                                                isDarkMode ? 'text-white' : 'text-gray-900'\n                                                                            }`}>\n                                                                                {news.url ? (\n                                                                                    <a \n                                                                                        href={news.url} \n                                                                                        target=\"_blank\" \n                                                                                        rel=\"noopener noreferrer\"\n                                                                                        className={`hover:underline transition-colors duration-300 ${\n                                                                                            isDarkMode \n                                                                                                ? 'text-blue-300 hover:text-blue-200' \n                                                                                                : 'text-blue-600 hover:text-blue-700'\n                                                                                        }`}\n                                                                                    >\n                                                                                        {cleanText(news.title)}\n                                                                                    </a>\n                                                                                ) : (\n                                                                                    cleanText(news.title)\n                                                                                )}\n                                                                            </h5>\n                                                                            <p className={`text-base mb-4 leading-relaxed transition-colors duration-300 ${\n                                                                                isDarkMode ? 'text-gray-300' : 'text-gray-600'\n                                                                            }`}>\n                                                                                {cleanText(news.description)}\n                                                                            </p>\n                                                                            <div className={`flex items-center gap-4 text-sm transition-colors duration-300 ${\n                                                                                isDarkMode ? 'text-gray-400' : 'text-gray-500'\n                                                                            }`}>\n                                                                                <div className={`flex items-center gap-2 px-3 py-1 rounded-full transition-colors duration-300 ${\n                                                                                    isDarkMode ? 'bg-gray-800' : 'bg-gray-200'\n                                                                                }`}>\n                                                                                    <span className=\"font-semibold\">{news.source?.name || 'Source inconnue'}</span>\n                                                                                </div>\n                                                                                <div className={`flex items-center gap-2 px-3 py-1 rounded-full transition-colors duration-300 ${\n                                                                                    isDarkMode ? 'bg-gray-800' : 'bg-gray-200'\n                                                                                }`}>\n                                                                                    <span>üïí</span>\n                                                                                    <span>\n                                                                                        {news.publishedAt ? \n                                                                                            new Date(news.publishedAt).toLocaleString('fr-FR') : \n                                                                                            'Date inconnue'\n                                                                                        }\n                                                                                    </span>\n                                                                                </div>\n                                                                                {news.url && (\n                                                                                    <a \n                                                                                        href={news.url} \n                                                                                        target=\"_blank\" \n                                                                                        rel=\"noopener noreferrer\"\n                                                                                        className={`px-4 py-2 rounded-full font-semibold transition-all duration-300 hover:scale-105 ${\n                                                                                            isDarkMode \n                                                                                                ? 'bg-gray-800 hover:bg-gray-700 text-white shadow-lg shadow-gray-500/25' \n                                                                                                : 'bg-gray-700 hover:bg-gray-600 text-white shadow-lg shadow-gray-400/25'\n                                                                                        }`}\n                                                                                    >\n                                                                                        üìñ Lire l'article\n                                                                                    </a>\n                                                                                )}\n                                                                            </div>\n                                                                        </div>\n                                                                    </div>\n                                                                </div>\n                                                            </td>\n                                                        </tr>\n                                                    ))}\n                                                </React.Fragment>\n                                            );\n                                        })}\n                                    </tbody>\n                                </table>\n                            </div>\n                            <div className={`text-center mt-8 p-6 rounded-xl transition-colors duration-300 ${\n                                isDarkMode \n                                    ? 'bg-gradient-to-r from-blue-900/30 to-purple-900/30 border border-blue-500/20' \n                                    : 'bg-gradient-to-r from-blue-100/80 to-purple-100/80 border border-blue-300/30'\n                            }`}>\n                                <div className={`text-lg font-semibold mb-2 transition-colors duration-300 ${\n                                    isDarkMode ? 'text-blue-300' : 'text-blue-700'\n                                }`}>\n                                    üìú Section Principale - Donn√©es Financi√®res\n                                </div>\n                                <div className={`text-sm transition-colors duration-300 ${\n                                    isDarkMode ? 'text-gray-300' : 'text-gray-600'\n                                }`}>\n                                    Faites d√©filer pour voir toutes les donn√©es ‚Ä¢ Source: Finnhub API ‚Ä¢ 3 actualit√©s par titre\n                                </div>\n                                <div className={`text-xs mt-2 transition-colors duration-300 ${\n                                    isDarkMode ? 'text-gray-400' : 'text-gray-500'\n                                }`}>\n                                    Donn√©es mises √† jour automatiquement toutes les 5 minutes\n                                </div>\n                            </div>\n                        </div>\n                    </div>\n                    )}\n\n                    {/* Message si aucune donn√©e */}\n                    {tickers.length === 0 && (\n                        <div className=\"bg-yellow-900/20 backdrop-blur-sm rounded-lg p-6 border border-yellow-300/20\">\n                            <div className=\"flex items-center gap-3\">\n                                <span className=\"text-yellow-400 text-2xl\">‚ö†Ô∏è</span>\n                                <div>\n                                    <h3 className=\"text-yellow-200 font-semibold\">Aucun ticker configur√©</h3>\n                                    <p className=\"text-yellow-300/80 text-sm mt-1\">\n                                        Ajoutez des tickers dans l'onglet Seeking Alpha pour voir les donn√©es ici.\n                                    </p>\n                                </div>\n                            </div>\n                        </div>\n                    )}\n\n                    {/* ===== SECTION ACTUALIT√âS S√âPAR√âE ===== */}\n                    {newsData.length > 0 && (\n                        <div className=\"mt-12\">\n                            <div className={`backdrop-blur-sm rounded-2xl p-8 border-2 shadow-2xl transition-colors duration-300 ${\n                                isDarkMode\n                                    ? 'bg-gradient-to-br from-gray-800/90 to-gray-900/90 border-purple-500/30 shadow-purple-500/10'\n                                    : 'bg-gradient-to-br from-white/95 to-gray-50/95 border-purple-400/40 shadow-purple-400/10'\n                            }`}>\n                                <div className=\"flex items-center justify-between mb-6\">\n                                    <h2 className={`text-2xl font-bold transition-colors duration-300 ${\n                                        isDarkMode ? 'text-white' : 'text-gray-900'\n                                    }`}>\n                                        üì∞ Actualit√©s du March√©\n                                    </h2>\n                                    <div className={`px-4 py-2 rounded-full text-sm font-semibold transition-colors duration-300 ${\n                                        isDarkMode\n                                            ? 'bg-purple-500/20 text-purple-300 border border-purple-500/30'\n                                            : 'bg-purple-100 text-purple-700 border border-purple-300'\n                                    }`}>\n                                        {newsData.length} articles\n                                    </div>\n                                </div>\n\n                                <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6\">\n                                    {newsData.slice(0, 12).map((article, index) => {\n                                        const credibilityScore = getNewsCredibilityScore(article.source?.name || '');\n                                        const credibilityTier = getCredibilityTier(credibilityScore);\n\n                                        return (\n                                            <div\n                                                key={index}\n                                                role=\"button\"\n                                                tabIndex={0}\n                                                onClick={() => {\n                                                    if (article.url) {\n                                                        window.open(article.url, '_blank', 'noopener,noreferrer');\n                                                    }\n                                                }}\n                                                onKeyDown={(event) => {\n                                                    if ((event.key === 'Enter' || event.key === ' ') && article.url) {\n                                                        event.preventDefault();\n                                                        window.open(article.url, '_blank', 'noopener,noreferrer');\n                                                    }\n                                                }}\n                                                className={`p-6 rounded-xl cursor-pointer transition-all hover:scale-[1.02] focus:outline-none focus:ring-2 focus:ring-emerald-500 ${\n                                                    isDarkMode\n                                                        ? 'bg-gradient-to-br from-gray-700/50 to-gray-800/50 hover:from-gray-700/70 hover:to-gray-800/70 border border-gray-600'\n                                                        : 'bg-gradient-to-br from-white to-gray-50 hover:from-gray-50 hover:to-gray-100 border border-gray-200 shadow-lg'\n                                                }`}\n                                            >\n                                                {/* Source et cr√©dibilit√© */}\n                                                <div className=\"flex items-center justify-between mb-3\">\n                                                    <div className={`px-3 py-1 rounded-full text-xs font-bold ${\n                                                        credibilityTier === 'premium'\n                                                            ? 'bg-yellow-500/20 text-yellow-500 border border-yellow-500/30'\n                                                            : credibilityTier === 'high'\n                                                            ? 'bg-green-500/20 text-green-500 border border-green-500/30'\n                                                            : credibilityTier === 'medium'\n                                                            ? 'bg-blue-500/20 text-blue-500 border border-blue-500/30'\n                                                            : credibilityTier === 'low'\n                                                            ? 'bg-gray-500/20 text-gray-500 border border-gray-500/30'\n                                                            : 'bg-red-500/20 text-red-500 border border-red-500/30'\n                                                    }`}>\n                                                        {article.source?.name || 'Source inconnue'}\n                                                    </div>\n                                                    <div className={`text-xs ${isDarkMode ? 'text-gray-400' : 'text-gray-600'}`}>\n                                                        {new Date(article.publishedAt).toLocaleDateString('fr-FR', {\n                                                            month: 'short',\n                                                            day: 'numeric',\n                                                            hour: '2-digit',\n                                                            minute: '2-digit'\n                                                        })}\n                                                    </div>\n                                                </div>\n\n                                                {/* Titre */}\n                                                <h3 className={`font-bold text-lg mb-3 line-clamp-2 transition-colors duration-300 ${\n                                                    isDarkMode ? 'text-white' : 'text-gray-900'\n                                                }`}>\n                                                    {article.title}\n                                                </h3>\n\n                                                {/* Description */}\n                                                {article.description && (\n                                                    <p className={`text-sm mb-4 line-clamp-3 transition-colors duration-300 ${\n                                                        isDarkMode ? 'text-gray-300' : 'text-gray-600'\n                                                    }`}>\n                                                        {article.description}\n                                                    </p>\n                                                )}\n\n                                                {/* Actions */}\n                                                <div className=\"flex gap-2 mt-4\">\n                                                    <a\n                                                        href={article.url}\n                                                        target=\"_blank\"\n                                                        rel=\"noopener noreferrer\"\n                                                        onClick={(e) => e.stopPropagation()}\n                                                        className={`flex-1 px-3 py-2 rounded-lg text-center text-sm font-semibold transition-all ${\n                                                            isDarkMode\n                                                                ? 'bg-blue-600 hover:bg-blue-500 text-white'\n                                                                : 'bg-blue-500 hover:bg-blue-600 text-white'\n                                                        }`}\n                                                    >\n                                                        <IconoirIcon name=\"ExternalLink\" className=\"w-4 h-4 inline mr-1\" />\n                                                        Lire\n                                                    </a>\n                                                    <button\n                                                        onClick={(event) => {\n                                                            event.stopPropagation();\n                                                            summarizeWithEmma(article.url, article.title);\n                                                        }}\n                                                        className={`flex-1 px-3 py-2 rounded-lg text-center text-sm font-semibold transition-all ${\n                                                            isDarkMode\n                                                                ? 'bg-purple-600 hover:bg-purple-500 text-white'\n                                                                : 'bg-purple-500 hover:bg-purple-600 text-white'\n                                                        }`}\n                                                    >\n                                                        <IconoirIcon name=\"Brain\" className=\"w-4 h-4 inline mr-1\" />\n                                                        Emma\n                                                    </button>\n                                                </div>\n                                            </div>\n                                        );\n                                    })}\n                                </div>\n\n                                {newsData.length > 12 && (\n                                    <div className=\"text-center mt-6\">\n                                        <button\n                                            onClick={() => setActiveTab('markets-economy')}\n                                            className={`px-6 py-3 rounded-lg font-semibold transition-all ${\n                                                isDarkMode\n                                                    ? 'bg-purple-600 hover:bg-purple-500 text-white'\n                                                    : 'bg-purple-500 hover:bg-purple-600 text-white'\n                                            }`}\n                                        >\n                                            Voir toutes les actualit√©s ({newsData.length}) ‚Üí\n                                        </button>\n                                    </div>\n                                )}\n                            </div>\n                        </div>\n                    )}\n\n                </div>\n            );\n        };\n\n            // ============================================\n            // COMPOSANT INTELLISTOCKS\n            // ============================================\n\n\nexport default StocksNewsTab;\n","import React, { useState, useEffect, useRef, useCallback } from 'react';\nimport type { TabProps } from '../../types';\n\ndeclare const Chart: any;\ndeclare const Recharts: any;\ndeclare const LightweightCharts: any;\n\n            export const IntelliStocksTab: React.FC<TabProps> = (props) => {\n    const { isDarkMode = true } = props;\n                const [time, setTime] = useState(new Date());\n                const [selectedStock, setSelectedStock] = useState('AAPL');\n                const [timeframe, setTimeframe] = useState('1D');\n                const [menuOpen, setMenuOpen] = useState(false);\n                const [stockDataIntelli, setStockDataIntelli] = useState(null);\n                const [loadingIntelli, setLoadingIntelli] = useState(true);\n                const [connected, setConnected] = useState(false);\n                const [lastUpdateIntelli, setLastUpdateIntelli] = useState(null);\n                // Helppop: visibilit√© et liste des violations d√©tect√©es\n                const [showHelp, setShowHelp] = useState(false);\n                const [violations, setViolations] = useState([]);\n                // Screener visibility\n                const [showScreener, setShowScreener] = useState(false);\n                \n                // üéØ Configuration du Score JSLAI‚Ñ¢ (pond√©rations)\n                const [jslaiConfig, setJslaiConfig] = useState(() => {\n                    const saved = localStorage.getItem('jslaiConfig');\n                    return saved ? JSON.parse(saved) : {\n                        valuation: 20,        // Multiples de valorisation\n                        profitability: 20,    // Marges, ROE, ROA\n                        growth: 15,           // Croissance revenus & EPS\n                        financialHealth: 20,  // Bilan, dette, liquidit√©\n                        momentum: 10,         // RSI, tendances, moyennes mobiles\n                        moat: 10,             // Avantage concurrentiel\n                        sectorPosition: 5     // Position dans le secteur\n                    };\n                });\n\n                // Sauvegarder la config JSLAI\n                useEffect(() => {\n                    localStorage.setItem('jslaiConfig', JSON.stringify(jslaiConfig));\n                }, [jslaiConfig]);\n\n                // G√©n√©ration de donn√©es mock\n                const generateMockData = (symbol) => {\n                    const basePrice = {\n                        AAPL: 183.45, TSLA: 251.23, GOOGL: 143.12,\n                        MSFT: 384.89, NVDA: 485.32, AMZN: 178.91\n                    }[symbol] || 180;\n\n                    const companyNames = {\n                        AAPL: 'Apple Inc.', TSLA: 'Tesla Inc.', GOOGL: 'Alphabet Inc.',\n                        MSFT: 'Microsoft Corp.', NVDA: 'NVIDIA Corp.', AMZN: 'Amazon.com Inc.'\n                    };\n\n                    return {\n                        quote: {\n                            symbol,\n                            name: companyNames[symbol] || 'Company Inc.',\n                            price: basePrice,\n                            change: parseFloat((Math.random() * 6 - 2).toFixed(2)),\n                            changesPercentage: parseFloat((Math.random() * 4 - 1).toFixed(2)),\n                            volume: Math.floor(Math.random() * 50000000 + 30000000),\n                            marketCap: Math.floor(Math.random() * 2000000000000 + 1000000000000),\n                            avgVolume: Math.floor(Math.random() * 60000000 + 40000000)\n                        },\n                        intraday: Array.from({ length: 20 }, (_, i) => ({\n                            date: `${9 + Math.floor(i/4)}:${(i % 4) * 15}`,\n                            open: basePrice + (Math.random() * 4 - 2),\n                            high: basePrice + (Math.random() * 5 - 1),\n                            low: basePrice + (Math.random() * 3 - 3),\n                            close: basePrice + (Math.random() * 4 - 2),\n                            volume: Math.floor(Math.random() * 5000000 + 2000000)\n                        })),\n                        metrics: {\n                            peRatioTTM: parseFloat((Math.random() * 40 + 15).toFixed(1)),\n                            pegRatioTTM: parseFloat((Math.random() * 2 + 0.5).toFixed(2)),\n                            priceToSalesRatioTTM: parseFloat((Math.random() * 8 + 2).toFixed(2)),\n                            dividendYieldTTM: parseFloat((Math.random() * 0.03).toFixed(4))\n                        },\n                        ratios: {\n                            debtEquityRatio: parseFloat((Math.random() * 2 + 0.3).toFixed(2)),\n                            returnOnEquityTTM: parseFloat((Math.random() * 0.4 + 0.1).toFixed(3)),\n                            returnOnAssetsTTM: parseFloat((Math.random() * 0.2 + 0.05).toFixed(3)),\n                            netProfitMarginTTM: parseFloat((Math.random() * 0.3 + 0.1).toFixed(3)),\n                        },\n                        profile: {\n                            companyName: companyNames[symbol] || 'Company Inc.',\n                            price: basePrice,\n                            beta: parseFloat((Math.random() * 0.6 + 0.8).toFixed(2)),\n                            sector: 'Technology',\n                            industry: 'Consumer Electronics'\n                        },\n                        news: [\n                            {\n                                title: `${symbol} annonce r√©sultats trimestriels record`,\n                                publishedDate: new Date(Date.now() - 2*3600000).toISOString(),\n                                site: 'Reuters'\n                            },\n                            {\n                                title: `Nouveau partenariat strat√©gique annonc√©`,\n                                publishedDate: new Date(Date.now() - 5*3600000).toISOString(),\n                                site: 'Bloomberg'\n                            },\n                            {\n                                title: `Analystes rel√®vent objectif de prix`,\n                                publishedDate: new Date(Date.now() - 8*3600000).toISOString(),\n                                site: 'CNBC'\n                            }\n                        ],\n                        sentiment: {\n                            overall: Math.floor(Math.random() * 30 + 60),\n                            news: Math.floor(Math.random() * 30 + 65),\n                            social: Math.floor(Math.random() * 30 + 60),\n                            institutional: Math.floor(Math.random() * 30 + 55),\n                            retail: Math.floor(Math.random() * 30 + 70),\n                            summary: 'Sentiment globalement positif avec optimisme mod√©r√©'\n                        },\n                        insights: {\n                            catalysts: [\n                                'R√©sultats trimestriels sup√©rieurs aux attentes',\n                                'Innovation produit majeure annonc√©e',\n                                'Expansion internationale r√©ussie'\n                            ],\n                            risks: [\n                                'Concurrence accrue dans le secteur',\n                                'Incertitudes macro√©conomiques',\n                                'Volatilit√© des march√©s'\n                            ],\n                            consensus: 'bullish',\n                            reasoning: 'Les fondamentaux solides et la croissance continue justifient un sentiment positif'\n                        }\n                    };\n                };\n\n                // üéØ CALCULATED SENTIMENT - No AI, pure data-driven analysis\n                // Replaces Perplexity AI with free calculated metrics\n\n                // üéØ Calculate sentiment from financial data (NO AI, NO COST)\n                const calculateSentiment = (symbol, stockData) => {\n                    const { quote, metrics, ratios, profile, news } = stockData;\n\n                    console.log(`üìä Calculating sentiment for ${symbol} from financial data...`);\n\n                    // 1. Calculate fundamental score (0-100)\n                    let fundamentalScore = 50;\n\n                    // ROE Analysis\n                    const roe = (ratios?.returnOnEquityTTM || 0) * 100;\n                    if (roe > 20) fundamentalScore += 20;\n                    else if (roe > 15) fundamentalScore += 15;\n                    else if (roe > 10) fundamentalScore += 10;\n                    else if (roe < 5) fundamentalScore -= 10;\n\n                    // P/E Ratio Analysis\n                    const pe = metrics?.peRatioTTM || 0;\n                    if (pe > 0 && pe < 15) fundamentalScore += 15;\n                    else if (pe >= 15 && pe < 25) fundamentalScore += 10;\n                    else if (pe >= 25 && pe < 35) fundamentalScore += 5;\n                    else if (pe >= 50) fundamentalScore -= 10;\n\n                    // Profit Margin Analysis\n                    const margin = (ratios?.netProfitMarginTTM || 0) * 100;\n                    if (margin > 20) fundamentalScore += 15;\n                    else if (margin > 10) fundamentalScore += 10;\n                    else if (margin > 5) fundamentalScore += 5;\n                    else if (margin < 0) fundamentalScore -= 15;\n\n                    // 2. Calculate momentum score (0-100)\n                    const priceChange = quote?.changesPercentage || 0;\n                    let momentumScore = 50;\n                    if (priceChange > 5) momentumScore += 30;\n                    else if (priceChange > 2) momentumScore += 20;\n                    else if (priceChange > 0) momentumScore += 10;\n                    else if (priceChange < -5) momentumScore -= 30;\n                    else if (priceChange < -2) momentumScore -= 20;\n                    else if (priceChange < 0) momentumScore -= 10;\n\n                    // 3. Calculate overall sentiment\n                    const overallSentiment = Math.round(fundamentalScore * 0.6 + momentumScore * 0.4);\n                    const newsSentiment = Math.max(40, Math.min(80, overallSentiment + (Math.random() * 20 - 10)));\n\n                    // 4. Determine consensus\n                    let consensus = 'neutral';\n                    if (overallSentiment >= 70) consensus = 'bullish';\n                    else if (overallSentiment <= 40) consensus = 'bearish';\n\n                    // 5. Generate recommendation\n                    let recommendation = 'HOLD';\n                    let confidence = 60;\n                    if (overallSentiment >= 80) { recommendation = 'STRONG_BUY'; confidence = 85; }\n                    else if (overallSentiment >= 65) { recommendation = 'BUY'; confidence = 75; }\n                    else if (overallSentiment >= 55) { recommendation = 'HOLD'; confidence = 65; }\n                    else if (overallSentiment >= 40) { recommendation = 'SELL'; confidence = 70; }\n                    else { recommendation = 'STRONG_SELL'; confidence = 80; }\n\n                    // 6. Generate insights\n                    const catalysts = [];\n                    const risks = [];\n\n                    if (roe > 15) catalysts.push(`Strong ROE of ${roe.toFixed(1)}% indicates excellent profitability`);\n                    if (margin > 10) catalysts.push(`Healthy profit margin of ${margin.toFixed(1)}% shows operational efficiency`);\n                    if (priceChange > 2) catalysts.push(`Positive momentum with ${priceChange.toFixed(1)}% recent gain`);\n                    if (catalysts.length === 0) catalysts.push('Analyzing financial metrics for opportunities');\n\n                    if (pe > 40) risks.push(`High P/E ratio of ${pe.toFixed(1)} suggests potential overvaluation`);\n                    const debtEquity = ratios?.debtEquityRatio || 0;\n                    if (debtEquity > 2) risks.push(`Elevated debt-to-equity ratio of ${debtEquity.toFixed(2)} indicates leverage risk`);\n                    if (priceChange < -2) risks.push(`Recent decline of ${priceChange.toFixed(1)}% shows negative momentum`);\n                    if (risks.length === 0) risks.push('Monitoring market conditions and sector trends');\n\n                    // Fill remaining slots\n                    while (catalysts.length < 3) catalysts.push('Tracking fundamental performance indicators');\n                    while (risks.length < 3) risks.push('Monitoring macroeconomic factors');\n\n                    const keyPoints = [\n                        `ROE: ${roe.toFixed(1)}% | P/E: ${pe.toFixed(1)} | Margin: ${margin.toFixed(1)}%`,\n                        `Sentiment Score: ${overallSentiment}/100 (${consensus})`,\n                        `Price momentum: ${priceChange >= 0 ? '+' : ''}${priceChange.toFixed(1)}%`\n                    ];\n\n                    return {\n                        sentiment: {\n                            overall: overallSentiment,\n                            news: Math.round(newsSentiment),\n                            summary: `${consensus.charAt(0).toUpperCase() + consensus.slice(1)} outlook based on ${roe > 15 ? 'strong' : 'moderate'} fundamentals and ${priceChange > 0 ? 'positive' : 'negative'} momentum`\n                        },\n                        insights: {\n                            catalysts: catalysts.slice(0, 3),\n                            risks: risks.slice(0, 3),\n                            consensus,\n                            reasoning: `Analysis based on ROE (${roe.toFixed(1)}%), profit margins (${margin.toFixed(1)}%), and technical momentum. ${consensus === 'bullish' ? 'Strong fundamentals support positive outlook' : consensus === 'bearish' ? 'Weak metrics suggest caution' : 'Mixed signals warrant neutral stance'}.`\n                        },\n                        analyst: {\n                            recommendation,\n                            confidence,\n                            keyPoints\n                        }\n                    };\n                };\n\n                // Fonction pour r√©cup√©rer les donn√©es r√©elles d'un stock\n                const fetchRealStockData = async (symbol, currentTimeframe = '1D') => {\n                    try {\n                        console.log(`üîç R√©cup√©ration des donn√©es r√©elles pour ${symbol}...`);\n                        \n                        // D√©terminer le timeframe et les param√®tres pour les donn√©es historiques\n                        let historicalTimeframe, historicalLimit;\n                        switch (currentTimeframe) {\n                            case '1D':\n                                historicalTimeframe = '15min';\n                                historicalLimit = 20;\n                                break;\n                            case '1W':\n                                historicalTimeframe = '1hour';\n                                historicalLimit = 24;\n                                break;\n                            case '1M':\n                                historicalTimeframe = '1day';\n                                historicalLimit = 30;\n                                break;\n                            case '3M':\n                                historicalTimeframe = '1day';\n                                historicalLimit = 90;\n                                break;\n                            case '6M':\n                                historicalTimeframe = '1day';\n                                historicalLimit = 180;\n                                break;\n                            case '1A':\n                                historicalTimeframe = '1day';\n                                historicalLimit = 365;\n                                break;\n                            case '5A':\n                                historicalTimeframe = '1week';\n                                historicalLimit = 260;\n                                break;\n                            case 'MAX':\n                                historicalTimeframe = '1month';\n                                historicalLimit = 120;\n                                break;\n                            case 'YTD':\n                                historicalTimeframe = '1day';\n                                // Calculer le nombre de jours depuis le d√©but de l'ann√©e\n                                const now = new Date();\n                                const startOfYear = new Date(now.getFullYear(), 0, 1);\n                                const daysSinceStart = Math.ceil((now - startOfYear) / (1000 * 60 * 60 * 24));\n                                historicalLimit = Math.min(daysSinceStart, 365);\n                                break;\n                            default:\n                                historicalTimeframe = '1day';\n                                historicalLimit = 30;\n                        }\n\n                        // Appels parall√®les aux APIs hybrides (Base locale + APIs externes)\n                        \n// Appels parall√®les aux APIs avec gestion d'erreur am√©lior√©e\nconst [quoteResult, profileResult, ratiosResult, newsResult, intradayResult, analystResult, earningsResult] = await Promise.allSettled([\n  fetchHybridData(symbol, 'quote'),\n  fetchHybridData(symbol, 'profile'),\n  fetchHybridData(symbol, 'ratios'),\n  fetchHybridData(symbol, 'news'),\n  fetchHybridData(symbol, 'prices'),\n  fetchHybridData(symbol, 'analyst'),\n  fetchHybridData(symbol, 'earnings')\n]);\n\n                        // Parser les r√©sultats hybrides avec indicateurs de fallback\n                        const quote = quoteResult.status === 'fulfilled' && quoteResult.value.success ? quoteResult.value.data : null;\n                        const profile = profileResult.status === 'fulfilled' && profileResult.value.success ? profileResult.value.data : null;\n                        const ratios = ratiosResult.status === 'fulfilled' && ratiosResult.value.success ? ratiosResult.value.data : null;\n                        const news = newsResult.status === 'fulfilled' && newsResult.value.success ? newsResult.value.data : null;\n                        const intradayData = intradayResult.status === 'fulfilled' && intradayResult.value.success ? intradayResult.value.data : null;\n                        const analystData = analystResult.status === 'fulfilled' && analystResult.value.success ? analystResult.value.data : null;\n                        const earningsData = earningsResult.status === 'fulfilled' && earningsResult.value.success ? earningsResult.value.data : null;\n                        \n                        // Collecter les indicateurs de fallback\n                        const fallbackIndicators = {\n                            quote: quoteResult.status === 'fulfilled' ? quoteResult.value.fallback || false : true,\n                            profile: profileResult.status === 'fulfilled' ? profileResult.value.fallback || false : true,\n                            ratios: ratiosResult.status === 'fulfilled' ? ratiosResult.value.fallback || false : true,\n                            news: newsResult.status === 'fulfilled' ? newsResult.value.fallback || false : true,\n                            intraday: intradayResult.status === 'fulfilled' ? intradayResult.value.fallback || false : true,\n                            analyst: analystResult.status === 'fulfilled' ? analystResult.value.fallback || false : true,\n                            earnings: earningsResult.status === 'fulfilled' ? earningsResult.value.fallback || false : true\n                        };\n                        \n                        \n// Log des donn√©es r√©cup√©r√©es avec indicateurs de fallback\nconsole.log('‚úÖ Donn√©es r√©cup√©r√©es:', { \n  hasQuote: !!quote, \n  hasProfile: !!profile, \n  hasRatios: !!ratios,\n  hasNews: !!news,\n  hasIntraday: !!intradayData,\n  hasAnalyst: !!analystData,\n  hasEarnings: !!earningsData,\n  fallbackIndicators: fallbackIndicators\n});\n\n// Calculer le pourcentage de donn√©es r√©elles\nconst totalSections = Object.keys(fallbackIndicators).length;\nconst fallbackSections = Object.values(fallbackIndicators).filter(Boolean).length;\nconst productionSections = totalSections - fallbackSections;\nconst qualityPercentage = Math.round((productionSections / totalSections) * 100);\n\nconsole.log(`üìä Qualit√© des donn√©es: ${qualityPercentage}% (${productionSections}/${totalSections} sections en production)`);\n\n// Gestion des erreurs\nconst errors = [];\nif (!quote) errors.push('Quote manquant');\nif (!profile) errors.push('Profile manquant');\nif (!ratios) errors.push('Ratios manquant');\nif (!news) errors.push('News manquant');\n\nif (errors.length > 0) {\n  console.warn('‚ö†Ô∏è Donn√©es manquantes:', errors);\n  // setMessage removed - was causing infinite loop due to undefined reference\n}\n\nconsole.log('‚úÖ Donn√©es hybrides r√©cup√©r√©es:', { \n                            hasQuote: !!quote, \n                            hasProfile: !!profile, \n                            hasRatios: !!ratios, \n                            hasNews: !!news,\n                            hasIntraday: !!intradayData,\n                            hasAnalyst: !!analystData,\n                            hasEarnings: !!earningsData,\n                            quoteSource: quote?.source || 'unknown',\n                            profileSource: profile?.source || 'unknown',\n                            ratiosSource: ratios?.source || 'unknown',\n                            quoteConfidence: quote?.metadata?.confidence || 0,\n                            profileConfidence: profile?.metadata?.confidence || 0,\n                            ratiosConfidence: ratios?.metadata?.confidence || 0,\n                            quoteFreshness: quote?.metadata?.freshness || 'unknown',\n                            profileFreshness: profile?.metadata?.freshness || 'unknown',\n                            ratiosFreshness: ratios?.metadata?.freshness || 'unknown'\n                        });\n\n                        // üéØ Calcul du Score JSLAI‚Ñ¢ Global (0-100)\n                        const calculateJSLAIScore = () => {\n                            let totalScore = 0;\n                            let scores = {};\n                            \n                            // 1. VALUATION (bas√© sur P/E ratio)\n                            const pe = ratios?.data?.[0]?.peRatioTTM || ratios?.peRatioTTM || null;\n                            let valuationScore = 50;\n                            if (pe) {\n                                if (pe < 10) valuationScore = 100;\n                                else if (pe < 15) valuationScore = 85;\n                                else if (pe < 20) valuationScore = 70;\n                                else if (pe < 25) valuationScore = 55;\n                                else if (pe < 30) valuationScore = 40;\n                                else valuationScore = 25;\n                            }\n                            scores.valuation = valuationScore;\n                            totalScore += (valuationScore * jslaiConfig.valuation) / 100;\n                            \n                            // 2. PROFITABILITY (bas√© sur ROE)\n                            const roe = ratios?.data?.[0]?.returnOnEquityTTM || ratios?.returnOnEquityTTM || null;\n                            let profitabilityScore = 50;\n                            if (roe) {\n                                const roePercent = roe * 100;\n                                if (roePercent > 25) profitabilityScore = 100;\n                                else if (roePercent > 20) profitabilityScore = 85;\n                                else if (roePercent > 15) profitabilityScore = 70;\n                                else if (roePercent > 10) profitabilityScore = 55;\n                                else if (roePercent > 5) profitabilityScore = 40;\n                                else profitabilityScore = 25;\n                            }\n                            scores.profitability = profitabilityScore;\n                            totalScore += (profitabilityScore * jslaiConfig.profitability) / 100;\n                            \n                            // 3. GROWTH (bas√© sur croissance revenue + marges)\n                            const grossMargin = ratios?.data?.[0]?.grossProfitMarginTTM || ratios?.grossProfitMarginTTM || null;\n                            const netMargin = ratios?.data?.[0]?.netProfitMarginTTM || ratios?.netProfitMarginTTM || null;\n                            let growthScore = 60; // Neutre par d√©faut\n\n                            // Utiliser les marges comme proxy de croissance\n                            if (grossMargin && netMargin) {\n                                const avgMargin = (grossMargin + netMargin) / 2;\n                                if (avgMargin > 0.30) growthScore = 100; // Marges >30% = excellente croissance\n                                else if (avgMargin > 0.20) growthScore = 85;\n                                else if (avgMargin > 0.15) growthScore = 70;\n                                else if (avgMargin > 0.10) growthScore = 55;\n                                else if (avgMargin > 0.05) growthScore = 40;\n                                else growthScore = 25;\n                            }\n                            scores.growth = growthScore;\n                            totalScore += (growthScore * jslaiConfig.growth) / 100;\n\n                            // 4. FINANCIAL HEALTH (bas√© sur debt/equity + current ratio)\n                            const de = ratios?.data?.[0]?.debtEquityRatioTTM || ratios?.debtEquityRatioTTM || null;\n                            const currentRatio = ratios?.data?.[0]?.currentRatio || ratios?.currentRatio || null;\n                            let healthScore = 50;\n\n                            // Score bas√© sur D/E\n                            let deScore = 50;\n                            if (de !== null) {\n                                if (de < 0.3) deScore = 100;\n                                else if (de < 0.5) deScore = 85;\n                                else if (de < 1.0) deScore = 70;\n                                else if (de < 1.5) deScore = 55;\n                                else if (de < 2.0) deScore = 40;\n                                else deScore = 25;\n                            }\n\n                            // Score bas√© sur Current Ratio (liquidit√©)\n                            let liquidityScore = 50;\n                            if (currentRatio !== null) {\n                                if (currentRatio > 3.0) liquidityScore = 100;\n                                else if (currentRatio > 2.0) liquidityScore = 85;\n                                else if (currentRatio > 1.5) liquidityScore = 70;\n                                else if (currentRatio > 1.0) liquidityScore = 55;\n                                else if (currentRatio > 0.5) liquidityScore = 40;\n                                else liquidityScore = 25;\n                            }\n\n                            // Moyenne pond√©r√©e: 60% D/E, 40% liquidit√©\n                            healthScore = Math.round((deScore * 0.6) + (liquidityScore * 0.4));\n                            scores.financialHealth = healthScore;\n                            totalScore += (healthScore * jslaiConfig.financialHealth) / 100;\n\n                            // 5. MOMENTUM (bas√© sur performance r√©cente)\n                            const priceChange = quote?.dp || 0; // Variation % depuis fermeture\n                            let momentumScore = 50;\n\n                            if (priceChange > 10) momentumScore = 100; // +10%+ = tr√®s fort momentum\n                            else if (priceChange > 5) momentumScore = 85;\n                            else if (priceChange > 2) momentumScore = 70;\n                            else if (priceChange > 0) momentumScore = 60;\n                            else if (priceChange > -2) momentumScore = 45;\n                            else if (priceChange > -5) momentumScore = 30;\n                            else momentumScore = 15;\n\n                            scores.momentum = momentumScore;\n                            totalScore += (momentumScore * jslaiConfig.momentum) / 100;\n\n                            // 6. MOAT (bas√© sur marges op√©rationnelles et brutes)\n                            const operatingMargin = ratios?.data?.[0]?.operatingProfitMarginTTM || ratios?.operatingProfitMarginTTM || null;\n                            let moatScore = 60; // Neutre par d√©faut\n\n                            // Entreprises avec fortes marges = moat √©conomique solide\n                            if (grossMargin && operatingMargin) {\n                                const avgProfitMargin = (grossMargin + operatingMargin) / 2;\n                                if (avgProfitMargin > 0.40) moatScore = 100; // Marges >40% = moat exceptionnel\n                                else if (avgProfitMargin > 0.30) moatScore = 85;\n                                else if (avgProfitMargin > 0.20) moatScore = 70;\n                                else if (avgProfitMargin > 0.15) moatScore = 60;\n                                else if (avgProfitMargin > 0.10) moatScore = 45;\n                                else moatScore = 30;\n                            }\n                            scores.moat = moatScore;\n                            totalScore += (moatScore * jslaiConfig.moat) / 100;\n\n                            // 7. SECTOR POSITION (bas√© sur beta - volatilit√© vs march√©)\n                            const beta = profile?.data?.[0]?.beta || profile?.beta || null;\n                            let sectorScore = 60; // Neutre par d√©faut\n\n                            // Beta < 1 = moins volatil que le march√© (bon signe)\n                            // Beta > 1 = plus volatil (risque)\n                            if (beta !== null) {\n                                if (beta < 0.5) sectorScore = 100; // Tr√®s stable\n                                else if (beta < 0.8) sectorScore = 85;\n                                else if (beta < 1.0) sectorScore = 75;\n                                else if (beta < 1.2) sectorScore = 60;\n                                else if (beta < 1.5) sectorScore = 45;\n                                else sectorScore = 30; // Tr√®s volatil\n                            }\n                            scores.sectorPosition = sectorScore;\n                            totalScore += (sectorScore * jslaiConfig.sectorPosition) / 100;\n                            \n                            const finalScore = Math.round(totalScore);\n                            \n                            return {\n                                total: finalScore,\n                                breakdown: scores,\n                                interpretation: finalScore >= 85 ? 'Excellent' :\n                                               finalScore >= 75 ? 'Tr√®s Bon' :\n                                               finalScore >= 65 ? 'Bon' :\n                                               finalScore >= 50 ? 'Moyen' :\n                                               finalScore >= 35 ? 'Faible' : 'Mauvais',\n                                recommendation: finalScore >= 75 ? 'Achat Fort' :\n                                               finalScore >= 65 ? 'Achat' :\n                                               finalScore >= 50 ? 'Conserver' :\n                                               finalScore >= 35 ? 'Surveiller' : '√âviter'\n                            };\n                        };\n\n                        const jslaiScore = calculateJSLAIScore();\n\n                        // üéØ Calcul automatique du sentiment et insights bas√© sur les donn√©es r√©elles\n                        // Plus besoin de Perplexity - on utilise les donn√©es gratuites des APIs\n                        console.log('ü§ñ Calcul du sentiment et insights √† partir des donn√©es r√©elles...');\n\n                        // Calculer le sentiment bas√© sur le changement de prix et les ratios\n                        const priceChange = quote?.dp || 0;\n                        const roe = (ratios?.data?.[0]?.returnOnEquityTTM || ratios?.returnOnEquityTTM || 0) * 100;\n                        const pe = ratios?.data?.[0]?.peRatioTTM || ratios?.peRatioTTM || 0;\n\n                        // Score bas√© sur les fondamentaux (0-100)\n                        let fundamentalScore = 50;\n                        if (roe > 20) fundamentalScore += 20;\n                        else if (roe > 15) fundamentalScore += 10;\n                        if (pe > 0 && pe < 15) fundamentalScore += 15;\n                        else if (pe > 0 && pe < 25) fundamentalScore += 5;\n\n                        // Score bas√© sur le momentum (0-100)\n                        let momentumScore = 60;\n                        if (priceChange > 5) momentumScore = 85;\n                        else if (priceChange > 2) momentumScore = 75;\n                        else if (priceChange > 0) momentumScore = 65;\n                        else if (priceChange > -2) momentumScore = 55;\n                        else if (priceChange > -5) momentumScore = 45;\n                        else momentumScore = 30;\n\n                        // Sentiment global (moyenne pond√©r√©e: 60% fondamentaux, 40% momentum)\n                        const overallSentiment = Math.round(fundamentalScore * 0.6 + momentumScore * 0.4);\n\n                        // G√©n√©rer catalysts bas√©s sur les donn√©es\n                        const catalysts = [];\n                        if (roe > 20) catalysts.push(`ROE excellent √† ${roe.toFixed(1)}%`);\n                        if (priceChange > 2) catalysts.push(`Forte dynamique haussi√®re (+${priceChange.toFixed(2)}%)`);\n                        if (pe > 0 && pe < 15) catalysts.push(`Valorisation attractive (P/E: ${pe.toFixed(1)})`);\n                        if (catalysts.length === 0) catalysts.push('Fondamentaux stables');\n\n                        // G√©n√©rer risques bas√©s sur les donn√©es\n                        const risks = [];\n                        const debtEquity = ratios?.data?.[0]?.debtEquityRatioTTM || ratios?.debtEquityRatioTTM || 0;\n                        if (debtEquity > 2) risks.push(`Endettement √©lev√© (D/E: ${debtEquity.toFixed(2)})`);\n                        if (priceChange < -5) risks.push('Momentum baissier significatif');\n                        if (pe > 40) risks.push(`Valorisation √©lev√©e (P/E: ${pe.toFixed(1)})`);\n                        if (risks.length === 0) risks.push('Volatilit√© de march√© normale');\n\n                        // D√©terminer le consensus\n                        let consensus = 'neutral';\n                        if (overallSentiment >= 70) consensus = 'bullish';\n                        else if (overallSentiment <= 45) consensus = 'bearish';\n\n                        // D√©terminer la recommandation bas√©e sur le score JSLAI\n                        let recommendation = 'HOLD';\n                        let confidence = overallSentiment;\n                        if (jslaiScore.total >= 75) { recommendation = 'STRONG_BUY'; confidence = Math.min(90, confidence + 10); }\n                        else if (jslaiScore.total >= 65) { recommendation = 'BUY'; confidence = Math.min(85, confidence + 5); }\n                        else if (jslaiScore.total <= 35) { recommendation = 'SELL'; confidence = Math.min(85, confidence); }\n                        else if (jslaiScore.total <= 25) { recommendation = 'STRONG_SELL'; confidence = Math.min(90, confidence); }\n\n                        const aiData = {\n                            sentiment: {\n                                overall: overallSentiment,\n                                news: momentumScore,\n                                summary: `Sentiment ${consensus === 'bullish' ? 'positif' : consensus === 'bearish' ? 'n√©gatif' : 'neutre'} bas√© sur les fondamentaux et le momentum`\n                            },\n                            insights: {\n                                catalysts,\n                                risks,\n                                consensus,\n                                reasoning: `Score JSLAI‚Ñ¢ de ${jslaiScore.total}/100 (${jslaiScore.interpretation}). ${jslaiScore.recommendation}.`\n                            },\n                            analyst: {\n                                recommendation,\n                                confidence,\n                                keyPoints: [\n                                    `Score JSLAI‚Ñ¢: ${jslaiScore.total}/100`,\n                                    `Sentiment: ${overallSentiment}/100`,\n                                    `Tendance: ${consensus}`\n                                ]\n                            }\n                        };\n\n                        console.log('‚úÖ Sentiment et insights calcul√©s √† partir des donn√©es r√©elles (sans Perplexity)');\n\n                        // Construire l'objet de donn√©es structur√©\n                        return {\n                            jslaiScore: jslaiScore,  // üéØ Score JSLAI‚Ñ¢ ajout√©\n                            quote: {\n                                symbol: symbol,\n                                name: profile?.data?.[0]?.companyName || profile?.companyName || `${symbol} Inc.`,\n                                price: quote?.c || 0,\n                                change: quote?.d || 0,\n                                changesPercentage: quote?.dp || 0,\n                                volume: quote?.volume || 0,\n                                marketCap: profile?.data?.[0]?.mktCap || profile?.mktCap || 0,\n                                avgVolume: quote?.avgVolume || 0\n                            },\n                            intraday: (() => {\n                                // Si on a des donn√©es historiques r√©elles, les utiliser\n                                if (intradayData && Array.isArray(intradayData) && intradayData.length > 0) {\n                                    console.log(`üìä Donn√©es historiques r√©elles r√©cup√©r√©es: ${intradayData.length} points`);\n                                    return intradayData.map((candle, i) => ({\n                                        date: candle.date || new Date(candle.timestamp || Date.now() - i * 60000).toLocaleString('fr-FR'),\n                                        open: candle.open || 0,\n                                        high: candle.high || 0,\n                                        low: candle.low || 0,\n                                        close: candle.close || 0,\n                                volume: candle.volume || 0\n                                    }));\n                                }\n                                \n                                // Si on a des donn√©es dans le format FMP\n                                if (intradayData?.historical && Array.isArray(intradayData.historical) && intradayData.historical.length > 0) {\n                                    console.log(`üìä Donn√©es FMP historiques r√©cup√©r√©es: ${intradayData.historical.length} points`);\n                                    \n                                    let filteredData = intradayData.historical;\n                                    \n                                    // Pour YTD, filtrer les donn√©es depuis le d√©but de l'ann√©e\n                                    if (currentTimeframe === 'YTD') {\n                                        const currentYear = new Date().getFullYear();\n                                        filteredData = intradayData.historical.filter(candle => {\n                                            const candleDate = new Date(candle.date);\n                                            return candleDate.getFullYear() === currentYear;\n                                        });\n                                        console.log(`üìä Donn√©es YTD filtr√©es: ${filteredData.length} points`);\n                                    }\n                                    \n                                    return filteredData.map((candle, i) => ({\n                                        date: candle.date || new Date(candle.timestamp || Date.now() - i * 60000).toLocaleString('fr-FR'),\n                                        open: candle.open || 0,\n                                        high: candle.high || 0,\n                                        low: candle.low || 0,\n                                        close: candle.close || 0,\n                                        volume: candle.volume || 0\n                                    }));\n                                }\n                                \n                                // Sinon, g√©n√©rer des donn√©es de fallback bas√©es sur le prix actuel\n                                const currentPrice = quote?.c || 0;\n                                const change = quote?.d || 0;\n                                const changePercent = quote?.dp || 0;\n                                \n                                if (currentPrice > 0) {\n                                    // G√©n√©rer des donn√©es selon le timeframe s√©lectionn√©\n                                    const dataPoints = [];\n                                    const basePrice = currentPrice - change; // Prix d'ouverture\n                                    const timeframe = currentTimeframe; // Utiliser le timeframe pass√© en param√®tre\n                                    \n                                    let pointCount, timeInterval, timeFormat;\n                                    \n                                    switch (timeframe) {\n                                        case '1D':\n                                            pointCount = 20;\n                                            timeInterval = 3; // 3 minutes\n                                            timeFormat = (i) => {\n                                                const time = new Date();\n                                                time.setHours(9, i * timeInterval, 0, 0);\n                                                return time.toLocaleTimeString('fr-FR', { hour: '2-digit', minute: '2-digit' });\n                                            };\n                                            break;\n                                        case '1W':\n                                            pointCount = 7;\n                                            timeInterval = 1; // 1 jour\n                                            timeFormat = (i) => {\n                                                const date = new Date();\n                                                date.setDate(date.getDate() - (6 - i));\n                                                return date.toLocaleDateString('fr-FR', { weekday: 'short' });\n                                            };\n                                            break;\n                                        case '1M':\n                                            pointCount = 30;\n                                            timeInterval = 1; // 1 jour\n                                            timeFormat = (i) => {\n                                                const date = new Date();\n                                                date.setDate(date.getDate() - (29 - i));\n                                                return date.toLocaleDateString('fr-FR', { day: '2-digit' });\n                                            };\n                                            break;\n                                        case '3M':\n                                            pointCount = 12;\n                                            timeInterval = 7; // 1 semaine\n                                            timeFormat = (i) => {\n                                                const date = new Date();\n                                                date.setDate(date.getDate() - (11 - i) * 7);\n                                                return date.toLocaleDateString('fr-FR', { month: 'short' });\n                                            };\n                                            break;\n                                        case '6M':\n                                            pointCount = 24;\n                                            timeInterval = 7; // 1 semaine\n                                            timeFormat = (i) => {\n                                                const date = new Date();\n                                                date.setDate(date.getDate() - (23 - i) * 7);\n                                                return date.toLocaleDateString('fr-FR', { month: 'short' });\n                                            };\n                                            break;\n                                        case '1A':\n                                            pointCount = 12;\n                                            timeInterval = 30; // 1 mois\n                                            timeFormat = (i) => {\n                                                const date = new Date();\n                                                date.setMonth(date.getMonth() - (11 - i));\n                                                return date.toLocaleDateString('fr-FR', { month: 'short' });\n                                            };\n                                            break;\n                                        case '5A':\n                                            pointCount = 20;\n                                            timeInterval = 90; // 3 mois\n                                            timeFormat = (i) => {\n                                                const date = new Date();\n                                                date.setMonth(date.getMonth() - (19 - i) * 3);\n                                                return date.toLocaleDateString('fr-FR', { year: '2-digit', month: 'short' });\n                                            };\n                                            break;\n                                        case 'MAX':\n                                            pointCount = 30;\n                                            timeInterval = 120; // 4 mois\n                                            timeFormat = (i) => {\n                                                const date = new Date();\n                                                date.setMonth(date.getMonth() - (29 - i) * 4);\n                                                return date.toLocaleDateString('fr-FR', { year: '2-digit', month: 'short' });\n                                            };\n                                            break;\n                                        case 'YTD':\n                                            pointCount = 12;\n                                            timeInterval = 30; // 1 mois depuis d√©but d'ann√©e\n                                            timeFormat = (i) => {\n                                                const date = new Date();\n                                                date.setMonth(i); // Janvier = 0, D√©cembre = 11\n                                                return date.toLocaleDateString('fr-FR', { month: 'short' });\n                                            };\n                                            break;\n                                        default:\n                                            pointCount = 20;\n                                            timeInterval = 3;\n                                            timeFormat = (i) => {\n                                                const time = new Date();\n                                                time.setHours(9, i * timeInterval, 0, 0);\n                                                return time.toLocaleTimeString('fr-FR', { hour: '2-digit', minute: '2-digit' });\n                                            };\n                                    }\n                                    \n                                    // G√©n√©rer des donn√©es historiques plus r√©alistes\n                                    for (let i = 0; i < pointCount; i++) {\n                                        const progress = i / (pointCount - 1); // 0 √† 1\n                                        \n                                        // Calculer le prix historique bas√© sur la tendance et la volatilit√©\n                                        let historicalPrice;\n                                        \n                                        if (timeframe === 'YTD') {\n                                            // Pour YTD, commencer au prix d'ouverture de l'ann√©e\n                                            const yearStartPrice = basePrice * (1 - changePercent / 100 * 0.8); // Prix approximatif d√©but d'ann√©e\n                                            const yearProgress = i / (pointCount - 1);\n                                            historicalPrice = yearStartPrice + (yearProgress * (currentPrice - yearStartPrice));\n                                        } else if (timeframe === '5A' || timeframe === 'MAX') {\n                                            // Pour les p√©riodes longues, simuler une croissance/√©volution historique\n                                            const yearsBack = timeframe === '5A' ? 5 : 10;\n                                            const historicalMultiplier = 1 - (changePercent / 100) * (yearsBack * 0.2); // √âvolution sur plusieurs ann√©es\n                                            const startPrice = currentPrice * historicalMultiplier;\n                                            historicalPrice = startPrice + (progress * (currentPrice - startPrice));\n                                        } else {\n                                            // Pour les p√©riodes courtes, utiliser la logique existante\n                                            const trend = changePercent > 0 ? 1 : -1;\n                                            const volatility = Math.random() * 0.02 - 0.01; // ¬±1% de volatilit√©\n                                            const priceVariation = (progress * change) + (volatility * basePrice);\n                                            historicalPrice = Math.max(0.01, basePrice + priceVariation);\n                                        }\n                                        \n                                        // Ajouter de la volatilit√© r√©aliste\n                                        const volatility = Math.random() * 0.015 - 0.0075; // ¬±0.75% de volatilit√©\n                                        const finalPrice = historicalPrice * (1 + volatility);\n                                        \n                                        // Calculer OHLC r√©alistes\n                                        const open = i === 0 ? (timeframe === 'YTD' ? basePrice * 0.9 : basePrice) : dataPoints[i-1]?.close || finalPrice;\n                                        const close = Math.max(0.01, finalPrice);\n                                        const high = Math.max(open, close) * (1 + Math.random() * 0.01);\n                                        const low = Math.min(open, close) * (1 - Math.random() * 0.01);\n                                        \n                                        dataPoints.push({\n                                            date: timeFormat(i),\n                                            open: open,\n                                            high: high,\n                                            low: low,\n                                            close: close,\n                                            volume: Math.floor(Math.random() * 2000000) + 500000 // Volume plus r√©aliste\n                                        });\n                                    }\n                                    \n                                    console.log(`üìä Donn√©es ${timeframe} g√©n√©r√©es pour ${symbol}: ${dataPoints.length} points`);\n                                    return dataPoints;\n                                }\n                                \n                                return [];\n                            })(),\n                            metrics: {\n                                peRatioTTM: ratios?.valuation?.peRatio || null,\n                                pegRatioTTM: ratios?.valuation?.pegRatio || null,\n                                priceToSalesRatioTTM: ratios?.valuation?.psRatio || null,\n                                dividendYieldTTM: ratios?.debt?.dividendYield || null\n                            },\n                            ratios: {\n                                debtEquityRatio: ratios?.debt?.debtEquityRatio || null,\n                                returnOnEquityTTM: ratios?.profitability?.returnOnEquity || null,\n                                returnOnAssetsTTM: ratios?.profitability?.returnOnAssets || null,\n                                netProfitMarginTTM: ratios?.profitability?.netProfitMargin || null,\n                                currentRatio: ratios?.liquidity?.currentRatio || null,\n                                quickRatio: ratios?.liquidity?.quickRatio || null,\n                                grossProfitMargin: ratios?.profitability?.grossProfitMargin || null,\n                                operatingProfitMargin: ratios?.profitability?.operatingIncomeMargin || null\n                            },\n                            profile: {\n                                companyName: profile?.data?.[0]?.companyName || profile?.companyName || `${symbol} Inc.`,\n                                price: quote?.c || 0,\n                                beta: profile?.data?.[0]?.beta || profile?.beta || null,\n                                sector: profile?.data?.[0]?.sector || profile?.sector || 'Unknown',\n                                industry: profile?.data?.[0]?.industry || profile?.industry || 'Unknown'\n                            },\n                            news: news?.news?.slice(0, 5)?.map(article => ({\n                                title: article.title,\n                                source: article.source?.name || 'Marketaux',\n                                time: article.publishedAt,\n                                url: article.url || '#',\n                                sentiment: article.sentiment || 'neutral'\n                            })) || [],\n                            sentiment: {\n                                overall: aiData?.sentiment?.overall || 60,\n                                news: aiData?.sentiment?.news || 65,\n                                social: 60,  // Pas encore disponible via IA\n                                institutional: 55,  // Pas encore disponible via IA\n                                retail: 70,  // Pas encore disponible via IA\n                                summary: aiData?.sentiment?.summary || 'Analyse en cours'\n                            },\n                            // üéØ Nouvelles donn√©es avec validation crois√©e\n                            analystRecommendations: analystData ? {\n                                consensus: analystData.consensus?.rating || 'N/A',\n                                targetPrice: analystData.consensus?.targetPrice || null,\n                                upside: analystData.consensus?.upside || null,\n                                analystCount: analystData.consensus?.analystCount || 0,\n                                breakdown: analystData.breakdown || {},\n                                confidence: analystData.validation?.confidence || 0,\n                                sources: analystData.validation?.sources || []\n                            } : null,\n                            earningsCalendar: earningsData ? {\n                                nextEarningsDate: earningsData.consensus?.nextEarningsDate || null,\n                                estimatedEPS: earningsData.consensus?.estimatedEPS || null,\n                                estimatedRevenue: earningsData.consensus?.estimatedRevenue || null,\n                                upcoming: earningsData.upcoming || [],\n                                historical: earningsData.historical?.slice(0, 4) || [],\n                                statistics: earningsData.statistics || null,\n                                confidence: earningsData.validation?.confidence || 0\n                            } : null,\n                            dataValidation: {\n                                quote: {\n                                    confidence: quote?.metadata?.confidence || 0,\n                                    status: quote?.metadata?.freshness || 'unknown',\n                                    source: quote?.source || 'unknown',\n                                    lastUpdated: quote?.metadata?.lastUpdated || null\n                                },\n                                profile: {\n                                    confidence: profile?.metadata?.confidence || 0,\n                                    status: profile?.metadata?.freshness || 'unknown',\n                                    source: profile?.source || 'unknown',\n                                    lastUpdated: profile?.metadata?.lastUpdated || null\n                                },\n                                ratios: {\n                                    confidence: ratios?.metadata?.confidence || 0,\n                                    quality: ratios?.metadata?.dataQuality || 'Unknown',\n                                    source: ratios?.source || 'unknown',\n                                    lastUpdated: ratios?.metadata?.lastUpdated || null\n                                }\n                            },\n                            insights: {\n                                catalysts: aiData?.insights?.catalysts || [\n                                    'Analyse en cours des catalyseurs de march√©',\n                                    'Surveillance des annonces d\\'entreprise',\n                                    'Suivi des tendances du secteur'\n                                ],\n                                risks: aiData?.insights?.risks || [\n                                    'Volatilit√© du march√©',\n                                    'Conditions macro√©conomiques',\n                                    'Concurrence sectorielle'\n                                ],\n                                consensus: aiData?.insights?.consensus || 'neutral',\n                                reasoning: aiData?.insights?.reasoning || 'Analyse bas√©e sur les donn√©es de march√© actuelles'\n                            },\n                            // üéØ Recommandations d'analyste IA (batch Perplexity)\n                            aiAnalyst: aiData?.analyst ? {\n                                recommendation: aiData.analyst.recommendation,\n                                confidence: aiData.analyst.confidence,\n                                keyPoints: aiData.analyst.keyPoints\n                            } : null,\n                            // üéØ Indicateurs de fallback pour transparence\n                            fallbackIndicators: fallbackIndicators,\n                            dataQuality: {\n                                total_sections: totalSections,\n                                fallback_sections: fallbackSections,\n                                production_sections: productionSections,\n                                quality_percentage: qualityPercentage,\n                                status: qualityPercentage >= 80 ? 'EXCELLENT' : \n                                        qualityPercentage >= 60 ? 'GOOD' : \n                                        qualityPercentage >= 40 ? 'FAIR' : 'POOR'\n                            }\n                        };\n\n                    } catch (error) {\n                        console.error(`Error fetching real data for ${symbol}:`, error);\n                        return null;\n                    }\n                };\n\n                // Chargement des donn√©es\n                useEffect(() => {\n                    const fetchData = async () => {\n                        try {\n                            setLoadingIntelli(true);\n                            console.log(`üìä Chargement des donn√©es pour ${selectedStock}...`);\n                            \n                            // Essayer d'abord avec les vraies APIs\n                            const realData = await fetchRealStockData(selectedStock, timeframe);\n                            if (realData && realData.quote && realData.quote.price > 0) {\n                                setStockDataIntelli(realData);\n                                setConnected(true);\n                                setLastUpdateIntelli(new Date());\n                                console.log('‚úÖ Donn√©es charg√©es avec succ√®s');\n                                \n                                // V√©rifier si les donn√©es intraday sont disponibles\n                                if (!realData.intraday || realData.intraday.length === 0) {\n                                    setViolations(prev => {\n                                        // √âviter les doublons\n                                        if (prev.find(v => v.code === 'intraday_missing')) return prev;\n                                        return [\n                                            ...prev,\n                                            { code: 'intraday_missing', severity: 'low', message: 'Donn√©es intraday non disponibles - utilisation des donn√©es quote uniquement.' }\n                                        ];\n                                    });\n                                }\n                            } else {\n                                throw new Error('Donn√©es invalides re√ßues de l\\'API');\n                            }\n                        } catch (error) {\n                            console.error('‚ùå Erreur lors du chargement:', error?.message || String(error));\n                            setConnected(false);\n                            \n                            // Utiliser mock data en dernier recours\n                            const mockData = generateMockData(selectedStock);\n                            setStockDataIntelli(mockData);\n                            \n                            // Enregistrer une violation visible dans l'helppop\n                            setViolations(prev => {\n                                if (prev.find(v => v.code === 'data_fetch_error')) return prev;\n                                return [\n                                    ...prev,\n                                    { code: 'data_fetch_error', severity: 'high', message: '√âchec de r√©cup√©ration API. V√©rifiez votre connexion et les cl√©s API.' }\n                                ];\n                            });\n                            setShowHelp(true);\n                        } finally {\n                            setLoadingIntelli(false);\n                        }\n                    };\n                    fetchData();\n                    // ‚ö° OPTIMISATION API: Pas d'auto-refresh\n                    // Chargement uniquement au changement de stock ou manuel\n                }, [selectedStock]);\n\n                // üîÑ Rechargement du TradingView Mini Chart quand le ticker change - VAGUE 2\n                useEffect(() => {\n                    const container = document.getElementById('tradingview-mini-chart-jlab');\n                    if (container) {\n                        // Supprimer l'ancien widget\n                        container.innerHTML = '';\n\n                        // Cr√©er le nouveau script avec le ticker mis √† jour\n                        const script = document.createElement('script');\n                        script.type = 'text/javascript';\n                        script.src = 'https://s3.tradingview.com/external-embedding/embed-widget-mini-symbol-overview.js';\n                        script.async = true;\n                        script.innerHTML = JSON.stringify({\n                            \"symbol\": `NASDAQ:${selectedStock}`,\n                            \"width\": \"100%\",\n                            \"height\": \"100%\",\n                            \"locale\": \"fr\",\n                            \"dateRange\": \"1D\",\n                            \"colorTheme\": isDarkMode ? \"dark\" : \"light\",\n                            \"isTransparent\": false,\n                            \"autosize\": true,\n                            \"largeChartUrl\": \"\"\n                        });\n                        container.appendChild(script);\n                        console.log(`üìä TradingView Mini Chart recharg√© pour ${selectedStock}`);\n                    }\n                }, [selectedStock, isDarkMode]);\n\n                // ‚ö° AUTO-REFRESH: D√©sactiv√© - Chargement unique √† l'arriv√©e sur la page\n                // L'utilisateur peut actualiser manuellement via le bouton refresh\n                // Les caches API optimisent les appels r√©p√©t√©s:\n                // - Quotes: 5 min cache\n                // - Fundamentals: 1h cache\n                // - AI data: 30 min cache\n\n                // Timer (d√©sactiv√© pour √©viter les actualisations inutiles)\n                // useEffect(() => {\n                //     const timer = setInterval(() => setTime(new Date()), 1000);\n                //     return () => clearInterval(timer);\n                // }, []);\n\n                // Diagnostics environnementaux (violations) + ouverture auto du HelpPop\n                useEffect(() => {\n                    const newViolations = [];\n                    try {\n                        // V√©rifier les biblioth√®ques de graphiques\n                        const rechartsAvailable = typeof window.Recharts !== 'undefined' || \n                                                typeof Recharts !== 'undefined' ||\n                                                (typeof window !== 'undefined' && window.Recharts);\n                        \n                        const chartJsAvailable = typeof Chart !== 'undefined' || \n                                               (typeof window !== 'undefined' && window.Chart);\n                        \n                        if (!rechartsAvailable && !chartJsAvailable) {\n                            newViolations.push({\n                                code: 'charts_missing',\n                                severity: 'high',\n                                message: 'Aucune biblioth√®que de graphiques disponible ‚Äî graphiques d√©sactiv√©s.'\n                            });\n                        } else if (!rechartsAvailable && chartJsAvailable) {\n                            newViolations.push({\n                                code: 'recharts_missing',\n                                severity: 'medium',\n                                message: 'Recharts non disponible ‚Äî utilisation de Chart.js comme alternative.'\n                            });\n                        }\n                    } catch (_) {\n                        newViolations.push({ code: 'charts_missing', severity: 'high', message: 'Erreur de d√©tection des biblioth√®ques de graphiques.' });\n                    }\n\n                    try {\n                        // V√©rifier les ic√¥nes (maintenant g√©r√©es par notre composant LucideIcon)\n                        const iconsAvailable = typeof window.LucideIcon !== 'undefined' && \n                                             typeof window.LucideIcon === 'function';\n                        \n                        if (!iconsAvailable) {\n                            newViolations.push({\n                                code: 'icons_missing',\n                                severity: 'low',\n                                message: 'Composant d\\'ic√¥nes personnalis√© non disponible (fallback activ√©).'\n                            });\n                        }\n                    } catch (_) {\n                        newViolations.push({ code: 'icons_missing', severity: 'low', message: 'Composant d\\'ic√¥nes personnalis√© non disponible (fallback activ√©).' });\n                    }\n\n                    setViolations(newViolations);\n                    if (newViolations.length > 0) {\n                        setShowHelp(true);\n                    }\n                }, []);\n\n                const stocks = [\n                    { symbol: 'AAPL', name: 'Apple Inc.' },\n                    { symbol: 'TSLA', name: 'Tesla Inc.' },\n                    { symbol: 'GOOGL', name: 'Alphabet Inc.' },\n                    { symbol: 'MSFT', name: 'Microsoft Corp.' },\n                    { symbol: 'NVDA', name: 'NVIDIA Corp.' },\n                    { symbol: 'AMZN', name: 'Amazon.com Inc.' },\n                    { symbol: 'META', name: 'Meta Platforms Inc.' },\n                    { symbol: 'NFLX', name: 'Netflix Inc.' },\n                    { symbol: 'AMD', name: 'Advanced Micro Devices' },\n                    { symbol: 'INTC', name: 'Intel Corporation' },\n                ];\n                \n                // Fonction pour d√©terminer la couleur d'un indicateur\n                // Bas√©e sur les standards de l'industrie financi√®re et les meilleures pratiques d'analyse\n                const getMetricColor = (metric, value) => {\n                    if (value == null || value === 'N/A') return 'text-gray-400';\n                    \n                    const v = typeof value === 'string' ? parseFloat(value) : value;\n                    if (isNaN(v)) return 'text-gray-400';\n                    \n                    switch(metric) {\n                        case 'PE':\n                            // P/E Ratio (Price to Earnings)\n                            // Standards: S&P 500 moyenne historique ~15-20\n                            // Source: Investopedia, Morningstar\n                            if (v < 0) return 'text-red-500'; // N√©gatif = pertes\n                            if (v < 15) return 'text-emerald-500'; // Sous-√©valu√© / Excellent\n                            if (v < 25) return 'text-blue-500'; // Juste valoris√© / Bon\n                            if (v < 35) return 'text-yellow-500'; // L√©g√®rement sur√©valu√© / Attention\n                            return 'text-red-500'; // Sur√©valu√© / Risque √©lev√©\n                            \n                        case 'PEG':\n                            // PEG Ratio (Price/Earnings to Growth)\n                            // Standard: Peter Lynch sugg√®re <1 = sous-√©valu√©\n                            // Source: \"One Up on Wall Street\" par Peter Lynch\n                            if (v < 0) return 'text-red-500'; // Invalide\n                            if (v < 1) return 'text-emerald-500'; // Sous-√©valu√© / Excellent achat\n                            if (v < 1.5) return 'text-blue-500'; // Juste valoris√© / Bon\n                            if (v < 2) return 'text-yellow-500'; // L√©g√®rement cher / Attention\n                            return 'text-green-500'; // Sur√©valu√© / √âviter\n                            \n                        case 'PS':\n                            // P/S Ratio (Price to Sales)\n                            // Standards varient par secteur, Tech: 2-5, Retail: 0.5-2\n                            if (v < 1) return 'text-emerald-500'; // Sous-√©valu√©\n                            if (v < 3) return 'text-blue-500'; // Raisonnable\n                            if (v < 5) return 'text-yellow-500'; // √âlev√©\n                            return 'text-green-500'; // Tr√®s √©lev√©\n                            \n                        case 'ROE':\n                            // ROE (Return on Equity)\n                            // Standard: Warren Buffett recherche >15% de mani√®re constante\n                            // Source: Berkshire Hathaway Letters to Shareholders\n                            if (v < 0) return 'text-red-500'; // Perte / Tr√®s mauvais\n                            if (v < 10) return 'text-green-500'; // Faible / Mauvais\n                            if (v < 15) return 'text-yellow-500'; // Moyen / Acceptable\n                            if (v < 20) return 'text-blue-500'; // Bon / Au-dessus moyenne\n                            return 'text-emerald-500'; // Excellent / Sup√©rieur\n                            \n                        case 'ROA':\n                            // ROA (Return on Assets)\n                            // Standard: >5% bon, >10% excellent pour la plupart des industries\n                            // Source: Corporate Finance Institute\n                            if (v < 0) return 'text-red-500'; // Perte\n                            if (v < 5) return 'text-green-500'; // Faible utilisation des actifs\n                            if (v < 10) return 'text-blue-500'; // Bon\n                            if (v < 15) return 'text-emerald-500'; // Tr√®s bon\n                            return 'text-emerald-400'; // Exceptionnel\n                            \n                        case 'DE':\n                            // D/E Ratio (Debt to Equity)\n                            // Standard: <1 sain, >2 risqu√© (varie selon secteur)\n                            // Source: Financial Times, Wall Street Journal\n                            if (v < 0.3) return 'text-emerald-500'; // Tr√®s faible endettement / Excellent\n                            if (v < 0.7) return 'text-blue-500'; // Endettement sain / Bon\n                            if (v < 1.5) return 'text-yellow-500'; // Endettement mod√©r√© / Attention\n                            if (v < 2.5) return 'text-green-500'; // Endettement √©lev√© / Risque\n                            return 'text-red-500'; // Endettement tr√®s √©lev√© / Danger\n                            \n                        case 'Margin':\n                            // Marge Nette (Net Profit Margin)\n                            // Standards: Tech 15-25%, Retail 2-5%, Services 10-20%\n                            // Source: NYU Stern School of Business - Damodaran\n                            if (v < 0) return 'text-red-500'; // Pertes\n                            if (v < 5) return 'text-green-500'; // Faible rentabilit√©\n                            if (v < 10) return 'text-yellow-500'; // Rentabilit√© mod√©r√©e\n                            if (v < 20) return 'text-blue-500'; // Bonne rentabilit√©\n                            return 'text-emerald-500'; // Excellente rentabilit√©\n                            \n                        case 'Beta':\n                            // Beta (Volatilit√© vs march√©)\n                            // Standard: 1 = volatilit√© du march√©, <1 d√©fensif, >1 agressif\n                            // Source: Modern Portfolio Theory - Markowitz\n                            if (v < 0) return 'text-purple-500'; // Inverse du march√© / Rare\n                            if (v < 0.8) return 'text-emerald-500'; // Tr√®s d√©fensif / Faible volatilit√©\n                            if (v < 1) return 'text-blue-500'; // D√©fensif / Stable\n                            if (v < 1.3) return 'text-yellow-500'; // L√©g√®rement volatile\n                            if (v < 1.7) return 'text-green-500'; // Volatile\n                            return 'text-red-500'; // Tr√®s volatile / Risque √©lev√©\n                            \n                        case 'Div':\n                            // Dividend Yield\n                            // Standard: 2-5% sain, >7% potentiellement insoutenable\n                            // Source: Dividend Aristocrats criteria\n                            if (v < 1) return 'text-gray-400'; // Faible/Pas de dividende\n                            if (v < 2) return 'text-blue-400'; // Dividende modeste\n                            if (v < 4) return 'text-blue-500'; // Bon dividende\n                            if (v < 6) return 'text-emerald-500'; // Excellent dividende\n                            if (v < 8) return 'text-yellow-500'; // √âlev√© - v√©rifier soutenabilit√©\n                            return 'text-green-500'; // Tr√®s √©lev√© - risque de coupure\n                            \n                        case 'CurrentRatio':\n                            // Current Ratio (Liquidit√©)\n                            // Standard: 1.5-3 id√©al, <1 probl√®me de liquidit√©\n                            if (v < 1) return 'text-red-500'; // Probl√®me de liquidit√©\n                            if (v < 1.5) return 'text-green-500'; // Liquidit√© juste\n                            if (v < 2.5) return 'text-emerald-500'; // Liquidit√© saine\n                            if (v < 3.5) return 'text-blue-500'; // Bonne liquidit√©\n                            return 'text-yellow-500'; // Trop de liquidit√© non utilis√©e\n                            \n                        case 'QuickRatio':\n                            // Quick Ratio (Test acide)\n                            // Standard: >1 bon, >1.5 excellent\n                            if (v < 0.5) return 'text-red-500'; // Probl√®me majeur\n                            if (v < 1) return 'text-green-500'; // Risque de liquidit√©\n                            if (v < 1.5) return 'text-blue-500'; // Acceptable\n                            return 'text-emerald-500'; // Excellent\n                            \n                        case 'EPS':\n                            // Earnings Per Share (croissance)\n                            // Analyser la tendance plut√¥t que la valeur absolue\n                            if (v < 0) return 'text-red-500'; // Pertes\n                            if (v < 1) return 'text-green-500'; // Faible\n                            if (v < 3) return 'text-blue-500'; // Moyen\n                            return 'text-emerald-500'; // Fort\n                            \n                        default:\n                            return 'text-gray-400';\n                    }\n                };\n                \n                // Fonction pour ex√©cuter le screener (utilise la liste de stocks fournie)\n                const runScreenerForStocks = async (stocksList) => {\n                    setLoadingScreener(true);\n                    try {\n                        const results = [];\n                        \n                        // Parcourir les stocks fournis et r√©cup√©rer leurs donn√©es\n                        for (const stock of stocksList) {\n                            try {\n                                const [quoteRes, profileRes, ratiosRes] = await Promise.allSettled([\n                                    fetch(`/api/marketdata?endpoint=quote&symbol=${stock.symbol}&source=auto`),\n                                    fetch(`/api/fmp?endpoint=profile&symbol=${stock.symbol}`),\n                                    fetch(`/api/fmp?endpoint=ratios&symbol=${stock.symbol}`)\n                                ]);\n                                \n                                const quote = quoteRes.status === 'fulfilled' && quoteRes.value.ok \n                                    ? await quoteRes.value.json() : null;\n                                const profile = profileRes.status === 'fulfilled' && profileRes.value.ok \n                                    ? await profileRes.value.json() : null;\n                                const ratios = ratiosRes.status === 'fulfilled' && ratiosRes.value.ok \n                                    ? await ratiosRes.value.json() : null;\n                                \n                                const stockData = {\n                                    symbol: stock.symbol,\n                                    name: stock.name,\n                                    price: quote?.c || 0,\n                                    change: quote?.dp || 0,\n                                    marketCap: profile?.data?.[0]?.mktCap || profile?.mktCap || 0,\n                                    pe: ratios?.data?.[0]?.peRatioTTM || ratios?.peRatioTTM || null,\n                                    roe: ratios?.data?.[0]?.returnOnEquityTTM || ratios?.returnOnEquityTTM || null,\n                                    debtEquity: ratios?.data?.[0]?.debtEquityRatioTTM || ratios?.debtEquityRatioTTM || null,\n                                    sector: profile?.data?.[0]?.sector || profile?.sector || 'Unknown'\n                                };\n                                \n                                // Appliquer les filtres\n                                if (stockData.marketCap >= screenerFilters.minMarketCap &&\n                                    (!stockData.pe || stockData.pe <= screenerFilters.maxPE) &&\n                                    (!stockData.roe || (stockData.roe * 100) >= screenerFilters.minROE) &&\n                                    (!stockData.debtEquity || stockData.debtEquity <= screenerFilters.maxDebtEquity) &&\n                                    (screenerFilters.sector === 'all' || stockData.sector === screenerFilters.sector)) {\n                                    results.push(stockData);\n                                }\n                            } catch (error) {\n                                console.error(`Erreur pour ${stock.symbol}:`, error);\n                            }\n                        }\n                        \n                        setScreenerResults(results);\n                        console.log(`‚úÖ Screener: ${results.length} r√©sultats trouv√©s sur ${stocksList.length} titres`);\n                    } catch (error) {\n                        console.error('Erreur screener:', error);\n                    } finally {\n                        setLoadingScreener(false);\n                    }\n                };\n\n                const currentStock = stocks.find(s => s.symbol === selectedStock);\n                const quote = stockDataIntelli?.quote || {};\n                const metrics = stockDataIntelli?.metrics || {};\n                const ratios = stockDataIntelli?.ratios || {};\n                const profile = stockDataIntelli?.profile || {};\n                const intraday = stockDataIntelli?.intraday || [];\n                const news = stockDataIntelli?.news || [];\n                const sentiment = stockDataIntelli?.sentiment || {};\n                const insights = stockDataIntelli?.insights || {};\n                const historicalRatios = stockDataIntelli?.historicalRatios || [];\n                const movingAverages = stockDataIntelli?.movingAverages || {};\n\n                const formatNumber = (num, prefix = '', suffix = '') => {\n                    if (!num && num !== 0) return 'N/A';\n                    const n = parseFloat(num);\n                    if (isNaN(n)) return 'N/A';\n                    if (n >= 1e12) return `${prefix}${(n / 1e12).toFixed(2)}T${suffix}`;\n                    if (n >= 1e9) return `${prefix}${(n / 1e9).toFixed(2)}B${suffix}`;\n                    if (n >= 1e6) return `${prefix}${(n / 1e6).toFixed(2)}M${suffix}`;\n                    if (n >= 1e3) return `${prefix}${(n / 1e3).toFixed(2)}K${suffix}`;\n                    return `${prefix}${n.toFixed(2)}${suffix}`;\n                };\n\n                const formatTimeAgo = (dateString) => {\n                    const date = new Date(dateString);\n                    const hours = Math.floor((Date.now() - date.getTime()) / 3600000);\n                    if (hours < 1) return 'maintenant';\n                    if (hours < 24) return `${hours}h`;\n                    return `${Math.floor(hours / 24)}j`;\n                };\n\n                const technicalIndicators = {\n                    RSI: { value: 67.8, signal: 'Achat' },\n                    MACD: { value: 2.34, signal: 'Bullish' },\n                    SMA_50: { value: (quote.price || 0) * 0.98, signal: 'Au-dessus' },\n                    SMA_200: { value: (quote.price || 0) * 0.94, signal: 'Au-dessus' },\n                };\n\n                const orderFlow = { buyVolume: 68.4, sellVolume: 31.6 };\n\n                const peerComparison = [\n                    { name: 'AAPL', pe: metrics.peRatioTTM || 29.8, growth: 12.5, margin: (ratios.netProfitMarginTTM || 0.25) * 100 },\n                    { name: 'MSFT', pe: 35.2, growth: 15.8, margin: 32.1 },\n                    { name: 'GOOGL', pe: 24.6, growth: 18.2, margin: 28.7 },\n                    { name: 'AMZN', pe: 52.3, growth: 22.1, margin: 8.9 },\n                ];\n\n                if (loadingIntelli) {\n                    return (\n                        <div className={`min-h-screen p-2 flex items-center justify-center transition-colors duration-300 ${\n                            isDarkMode ? 'bg-neutral-950 text-gray-100' : 'bg-gray-50 text-gray-900'\n                        }`}>\n                            <div className=\"text-center\">\n                                <div className=\"animate-spin rounded-full h-12 w-12 border-b-2 border-gray-500 mx-auto mb-4\"></div>\n                                <div className=\"text-sm text-gray-400\">Chargement des donn√©es‚Ä¶</div>\n                            </div>\n                        </div>\n                    );\n                }\n                const SimpleChart = ({ data, type = 'line', width = 300, height = 200 }) => {\n                    const chartRef = useRef(null);\n                    \n                    useEffect(() => {\n                        if (chartRef.current && typeof Chart !== 'undefined') {\n                            const ctx = chartRef.current.getContext('2d');\n                            new Chart(ctx, {\n                                type: type,\n                                data: data,\n                                options: {\n                                    responsive: true,\n                                    maintainAspectRatio: false,\n                                    plugins: {\n                                        legend: {\n                                            display: false\n                                        }\n                                    }\n                                }\n                            });\n                        }\n                    }, [data, type]);\n                    \n                    return (\n                        <div className=\"w-full h-full\">\n                            <canvas ref={chartRef} width={width} height={height}></canvas>\n                        </div>\n                    );\n                };\n\n                // R√©f√©rence locale pour utiliser le composant global\n                const LucideIcon = window.LucideIcon;\n\n                return (\n                    <div className={`min-h-screen p-2 transition-colors duration-300 ${\n                        isDarkMode ? 'bg-neutral-950 text-gray-100' : 'bg-gray-50 text-gray-900'\n                    }`}>\n                        {/* Screener */}\n                        {showScreener && (\n                            <div className={`mb-2 border rounded-lg p-3 transition-colors duration-300 ${\n                                isDarkMode ? 'bg-neutral-900 border-neutral-800' : 'bg-white border-gray-300'\n                            }`}>\n                                <div className=\"flex items-center justify-between mb-3\">\n                                    <div className=\"flex items-center gap-2\">\n                                        <LucideIcon name=\"Filter\" className=\"w-4 h-4 text-blue-500\" />\n                                        <h3 className={`text-sm font-bold ${isDarkMode ? 'text-white' : 'text-gray-900'}`}>\n                                            üîç Screener de Titres\n                                        </h3>\n                                    </div>\n                                    <button\n                                        onClick={() => setShowScreener(false)}\n                                        className={`p-1 rounded ${isDarkMode ? 'hover:bg-neutral-800' : 'hover:bg-gray-100'}`}\n                                    >\n                                        <LucideIcon name=\"X\" className=\"w-4 h-4 text-gray-500\" />\n                                    </button>\n                                </div>\n                                \n                                {/* Filtres */}\n                                <div className=\"grid grid-cols-5 gap-2 mb-3\">\n                                    <div>\n                                        <label className=\"text-[9px] text-gray-500 mb-1 block\">Market Cap Min (B$)</label>\n                                        <input\n                                            type=\"number\"\n                                            value={screenerFilters.minMarketCap / 1e9}\n                                            onChange={(e) => setScreenerFilters({...screenerFilters, minMarketCap: parseFloat(e.target.value || 0) * 1e9})}\n                                            className={`w-full px-2 py-1 text-xs rounded border ${\n                                                isDarkMode \n                                                    ? 'bg-neutral-800 border-neutral-700 text-white' \n                                                    : 'bg-white border-gray-300 text-gray-900'\n                                            }`}\n                                        />\n                                    </div>\n                                    <div>\n                                        <label className=\"text-[9px] text-gray-500 mb-1 block\">P/E Max</label>\n                                        <input\n                                            type=\"number\"\n                                            value={screenerFilters.maxPE}\n                                            onChange={(e) => setScreenerFilters({...screenerFilters, maxPE: parseFloat(e.target.value || 50)})}\n                                            className={`w-full px-2 py-1 text-xs rounded border ${\n                                                isDarkMode \n                                                    ? 'bg-neutral-800 border-neutral-700 text-white' \n                                                    : 'bg-white border-gray-300 text-gray-900'\n                                            }`}\n                                        />\n                                    </div>\n                                    <div>\n                                        <label className=\"text-[9px] text-gray-500 mb-1 block\">ROE Min (%)</label>\n                                        <input\n                                            type=\"number\"\n                                            value={screenerFilters.minROE}\n                                            onChange={(e) => setScreenerFilters({...screenerFilters, minROE: parseFloat(e.target.value || 0)})}\n                                            className={`w-full px-2 py-1 text-xs rounded border ${\n                                                isDarkMode \n                                                    ? 'bg-neutral-800 border-neutral-700 text-white' \n                                                    : 'bg-white border-gray-300 text-gray-900'\n                                            }`}\n                                        />\n                                    </div>\n                                    <div>\n                                        <label className=\"text-[9px] text-gray-500 mb-1 block\">D/E Max</label>\n                                        <input\n                                            type=\"number\"\n                                            step=\"0.1\"\n                                            value={screenerFilters.maxDebtEquity}\n                                            onChange={(e) => setScreenerFilters({...screenerFilters, maxDebtEquity: parseFloat(e.target.value || 2)})}\n                                            className={`w-full px-2 py-1 text-xs rounded border ${\n                                                isDarkMode \n                                                    ? 'bg-neutral-800 border-neutral-700 text-white' \n                                                    : 'bg-white border-gray-300 text-gray-900'\n                                            }`}\n                                        />\n                                    </div>\n                                    <div>\n                                        <label className=\"text-[9px] text-gray-500 mb-1 block\">Secteur</label>\n                                        <select\n                                            value={screenerFilters.sector}\n                                            onChange={(e) => setScreenerFilters({...screenerFilters, sector: e.target.value})}\n                                            className={`w-full px-2 py-1 text-xs rounded border ${\n                                                isDarkMode \n                                                    ? 'bg-neutral-800 border-neutral-700 text-white' \n                                                    : 'bg-white border-gray-300 text-gray-900'\n                                            }`}\n                                        >\n                                            <option value=\"all\">Tous</option>\n                                            <option value=\"Technology\">Technologie</option>\n                                            <option value=\"Consumer Cyclical\">Consommation</option>\n                                            <option value=\"Healthcare\">Sant√©</option>\n                                            <option value=\"Financial\">Finance</option>\n                                        </select>\n                                    </div>\n                                </div>\n                                \n                                <button\n                                    onClick={() => runScreenerForStocks(stocks)}\n                                    disabled={loadingScreener}\n                                    className={`w-full py-2 rounded text-sm font-semibold transition-colors ${\n                                        loadingScreener\n                                            ? 'bg-gray-400 cursor-not-allowed'\n                                            : 'bg-gray-800 hover:bg-gray-700 text-white'\n                                    }`}\n                                >\n                                    {loadingScreener ? '‚è≥ Analyse en cours...' : 'üîç Lancer le Screener'}\n                                </button>\n                                \n                                {/* R√©sultats */}\n                                {screenerResults.length > 0 && (\n                                    <div className=\"mt-3\">\n                                        <div className=\"text-xs text-gray-500 mb-2\">\n                                            {screenerResults.length} titre(s) trouv√©(s)\n                                        </div>\n                                        <div className={`max-h-64 overflow-y-auto border rounded ${\n                                            isDarkMode ? 'border-neutral-700' : 'border-gray-300'\n                                        }`}>\n                                            <table className=\"w-full text-xs\">\n                                                <thead className={`sticky top-0 ${isDarkMode ? 'bg-neutral-800' : 'bg-gray-100'}`}>\n                                                    <tr>\n                                                        <th className=\"text-left p-2 text-gray-500\">Symbole</th>\n                                                        <th className=\"text-right p-2 text-gray-500\">Prix</th>\n                                                        <th className=\"text-right p-2 text-gray-500\">Var %</th>\n                                                        <th className=\"text-right p-2 text-gray-500\">Cap.</th>\n                                                        <th className=\"text-right p-2 text-gray-500\">P/E</th>\n                                                        <th className=\"text-right p-2 text-gray-500\">ROE</th>\n                                                        <th className=\"text-right p-2 text-gray-500\">D/E</th>\n                                                        <th className=\"text-center p-2 text-gray-500\">Action</th>\n                                                    </tr>\n                                                </thead>\n                                                <tbody>\n                                                    {screenerResults.map((stock) => (\n                                                        <tr key={stock.symbol} className={`border-t ${\n                                                            isDarkMode ? 'border-neutral-700 hover:bg-neutral-800' : 'border-gray-200 hover:bg-gray-50'\n                                                        }`}>\n                                                            <td className=\"p-2\">\n                                                                <div className={`font-bold ${isDarkMode ? 'text-white' : 'text-gray-900'}`}>{stock.symbol}</div>\n                                                                <div className=\"text-[9px] text-gray-500\">{stock.name}</div>\n                                                            </td>\n                                                            <td className={`text-right p-2 font-semibold ${isDarkMode ? 'text-white' : 'text-gray-900'}`}>\n                                                                ${stock.price.toFixed(2)}\n                                                            </td>\n                                                            <td className={`text-right p-2 font-semibold ${\n                                                                stock.change >= 0 ? 'text-emerald-500' : 'text-red-500'\n                                                            }`}>\n                                                                {(() => {\n                                                                    const change = stock.change;\n                                                                    if (!change) return '0.00%';\n                                                                    const value = typeof change === 'number' ? change : \n                                                                                 typeof change === 'object' ? (change.raw || change.fmt || 0) : \n                                                                                 parseFloat(change) || 0;\n                                                                    return (value >= 0 ? '+' : '') + value.toFixed(2) + '%';\n                                                                })()}\n                                                            </td>\n                                                            <td className=\"text-right p-2 text-gray-400\">\n                                                                {formatNumber(stock.marketCap)}\n                                                            </td>\n                                                            <td className={`text-right p-2 font-semibold ${getMetricColor('PE', stock.pe)}`}>\n                                                                {stock.pe ? stock.pe.toFixed(1) : 'N/A'}\n                                                            </td>\n                                                            <td className={`text-right p-2 font-semibold ${getMetricColor('ROE', stock.roe ? stock.roe * 100 : null)}`}>\n                                                                {stock.roe ? (stock.roe * 100).toFixed(1) + '%' : 'N/A'}\n                                                            </td>\n                                                            <td className={`text-right p-2 font-semibold ${getMetricColor('DE', stock.debtEquity)}`}>\n                                                                {stock.debtEquity ? stock.debtEquity.toFixed(2) : 'N/A'}\n                                                            </td>\n                                                            <td className=\"text-center p-2\">\n                                                                <button\n                                                                    onClick={() => {\n                                                                        setSelectedStock(stock.symbol);\n                                                                        setShowScreener(false);\n                                                                    }}\n                                                                    className=\"px-2 py-1 bg-gray-800 text-white rounded text-[9px] hover:bg-gray-700 transition-colors\"\n                                                                >\n                                                                    Voir\n                                                                </button>\n                                                            </td>\n                                                        </tr>\n                                                    ))}\n                                                </tbody>\n                                            </table>\n                                        </div>\n                                    </div>\n                                )}\n                            </div>\n                        )}\n                        \n                        {/* Header */}\n                        <div className=\"mb-2\">\n                            <div className=\"flex items-center justify-between mb-2\">\n                                <div className=\"flex items-center gap-2\">\n                                    <div className={`p-1.5 border rounded-lg transition-colors duration-300 ${\n                                        isDarkMode ? 'bg-neutral-900 border-neutral-800' : 'bg-white border-gray-300'\n                                    }`}>\n                                        <LucideIcon name=\"Activity\" className=\"w-4 h-4 text-gray-400\" />\n                                    </div>\n                                    <div>\n                                        <h1 className={`text-base font-bold flex items-center gap-2 transition-colors duration-300 ${\n                                            isDarkMode ? 'text-white' : 'text-gray-900'\n                                        }`}>\n                                            Expert Trading Analytics\n                                            {connected ? (\n                                                <LucideIcon name=\"Wifi\" className=\"w-3 h-3 text-green-500\" />\n                                            ) : (\n                                                <LucideIcon name=\"WifiOff\" className=\"w-3 h-3 text-red-500\" />\n                                            )}\n                                            {/* üéØ Badge Score JSLAI‚Ñ¢ avec Glow Animation - VAGUE 3+4 */}\n                                            {stockDataIntelli?.jslaiScore && (\n                                                <div className={`px-4 py-1.5 rounded text-sm font-bold border-2 ${\n                                                    stockDataIntelli.jslaiScore.total >= 75 ? 'bg-emerald-900/30 text-emerald-400 border-emerald-600 glow-pulse' :\n                                                    stockDataIntelli.jslaiScore.total >= 65 ? 'bg-gray-900/30 text-gray-400 border-gray-600' :\n                                                    stockDataIntelli.jslaiScore.total >= 50 ? 'bg-yellow-900/30 text-yellow-400 border-yellow-600' :\n                                                    'bg-red-900/30 text-red-400 border-red-600 glow-pulse-red'\n                                                }`}>\n                                                    üéØ JSLAI‚Ñ¢ {stockDataIntelli.jslaiScore.total}/100\n                                                </div>\n                                            )}\n                                            {/* Emma AI Analysis Button with Avatar */}\n                                            <button\n                                                onClick={() => {\n                                                    const analysisRequest = `Analyse approfondie de ${selectedStock}: fondamentaux, techniques, actualit√©s et recommandation d'investissement`;\n                                                    // Set prefill message first, then switch tab after a short delay\n                                                    setEmmaPrefillMessage(analysisRequest);\n                                                    setTimeout(() => handleTabChange('ask-emma'), 50);\n                                                }}\n                                                className={`flex items-center gap-2 px-4 py-1.5 rounded text-sm font-semibold border-2 transition-all hover:scale-105 ${\n                                                    isDarkMode\n                                                        ? 'bg-purple-900/30 hover:bg-purple-800/40 text-purple-400 border-purple-600'\n                                                        : 'bg-purple-100 hover:bg-purple-200 text-purple-700 border-purple-400'\n                                                }`}\n                                                title={`Demander une analyse d√©taill√©e de ${selectedStock} √† Emma IA`}\n                                            >\n                                                <img\n                                                    src=\"EMMA-JSLAI-GOB-dark.jpg\"\n                                                    alt=\"Emma\"\n                                                    className=\"w-4 h-4 rounded-full\"\n                                                />\n                                                Analyse d'Emma IA\n                                            </button>\n                                        </h1>\n                                        <p className=\"text-[8px] text-gray-600\">\n                                            {stockDataIntelli?.dataQuality ? (\n                                                <>\n                                                    üìä Qualit√©: {stockDataIntelli.dataQuality.quality_percentage}% ({stockDataIntelli.dataQuality.production_sections}/{stockDataIntelli.dataQuality.total_sections} r√©elles)\n                                                    {stockDataIntelli.dataQuality.status === 'EXCELLENT' && ' ‚úÖ'}\n                                                    {stockDataIntelli.dataQuality.status === 'GOOD' && ' üü¢'}\n                                                    {stockDataIntelli.dataQuality.status === 'FAIR' && ' üü°'}\n                                                    {stockDataIntelli.dataQuality.status === 'POOR' && ' üî¥'}\n                                                </>\n                                            ) : (\n                                                'Mode D√©mo Hybride ‚Ä¢ FMP + Perplexity AI'\n                                            )}\n                                            {stockDataIntelli?.jslaiScore && (\n                                                <span className=\"ml-2\">‚Ä¢ {stockDataIntelli.jslaiScore.interpretation} ({stockDataIntelli.jslaiScore.recommendation})</span>\n                                            )}\n                                        </p>\n                                    </div>\n                                </div>\n\n                                <div className=\"flex items-center gap-2\">\n                                    <button\n                                        onClick={async () => {\n                                            try {\n                                                setLoadingIntelli(true);\n                                                console.log('üîÑ Actualisation des donn√©es...');\n                                                const realData = await fetchRealStockData(selectedStock, timeframe);\n                                                if (realData && realData.quote && realData.quote.price > 0) {\n                                                    setStockDataIntelli(realData);\n                                                    setConnected(true);\n                                                    setLastUpdateIntelli(new Date());\n                                                    console.log('‚úÖ Donn√©es actualis√©es avec succ√®s');\n                                                } else {\n                                                    throw new Error('Donn√©es invalides re√ßues de l\\'API');\n                                                }\n                                            } catch (error) {\n                                                console.error('‚ùå Erreur lors de l\\'actualisation:', error);\n                                                setConnected(false);\n                                            } finally {\n                                                setLoadingIntelli(false);\n                                            }\n                                        }}\n                                        className={`p-1.5 border rounded-md transition-all ${\n                                            isDarkMode \n                                                ? 'bg-neutral-900 hover:bg-neutral-800 border-neutral-800' \n                                                : 'bg-white hover:bg-gray-100 border-gray-300'\n                                        }`}\n                                    >\n                                        <LucideIcon name=\"RefreshCw\" className=\"w-3 h-3 text-gray-400\" />\n                                    </button>\n\n                                    <button\n                                        onClick={emmaPopulateJLab}\n                                        disabled={loadingIntelli}\n                                        className={`px-3 py-1.5 border rounded-lg transition-all flex items-center gap-2 ${\n                                            isDarkMode \n                                                ? 'bg-purple-900 hover:bg-purple-800 border-purple-800 text-purple-200' \n                                                : 'bg-purple-600 hover:bg-purple-700 border-purple-600 text-white'\n                                        } disabled:opacity-50`}\n                                    >\n                                        <span>ü§ñ</span>\n                                        <span className=\"text-xs font-semibold\">Emma Populate</span>\n                                    </button>\n\n                                    <div className=\"relative\">\n                                        <button\n                                            onClick={() => setMenuOpen(!menuOpen)}\n                                            className={`flex items-center gap-2 px-3 py-1.5 border rounded-lg transition-all ${\n                                                isDarkMode \n                                                    ? 'bg-neutral-900 hover:bg-neutral-800 border-neutral-800' \n                                                    : 'bg-white hover:bg-gray-100 border-gray-300'\n                                            }`}\n                                        >\n                                            <div>\n                                                <div className={`text-xs font-bold transition-colors duration-300 ${\n                                                    isDarkMode ? 'text-white' : 'text-gray-900'\n                                                }`}>{selectedStock}</div>\n                                                <div className=\"text-[8px] text-gray-600\">{profile.companyName || currentStock?.name}</div>\n                                            </div>\n                                            <LucideIcon name=\"ChevronDown\" className={`w-3 h-3 text-gray-400 transition-transform ${menuOpen ? 'rotate-180' : ''}`} />\n                                        </button>\n\n                                        {menuOpen && (\n                                            <div className={`absolute top-full mt-1 right-0 w-48 border rounded-lg shadow-2xl overflow-hidden z-50 transition-colors duration-300 ${\n                                                isDarkMode ? 'bg-neutral-900 border-neutral-800' : 'bg-white border-gray-300'\n                                            }`}>\n                                                {stocks.map((stock) => (\n                                                    <button\n                                                        key={stock.symbol}\n                                                        onClick={() => {\n                                                            setSelectedStock(stock.symbol);\n                                                            setMenuOpen(false);\n                                                        }}\n                                                        className={`w-full p-2 flex items-center justify-between transition-all text-xs ${\n                                                            selectedStock === stock.symbol \n                                                                ? (isDarkMode ? 'bg-neutral-800' : 'bg-gray-100')\n                                                                : (isDarkMode ? 'hover:bg-neutral-800' : 'hover:bg-gray-50')\n                                                        }`}\n                                                    >\n                                                        <div className=\"text-left\">\n                                                            <div className={`font-bold transition-colors duration-300 ${\n                                                                isDarkMode ? 'text-white' : 'text-gray-900'\n                                                            }`}>{stock.symbol}</div>\n                                                            <div className=\"text-[8px] text-gray-600\">{stock.name}</div>\n                                                        </div>\n                                                    </button>\n                                                ))}\n                                            </div>\n                                        )}\n                                    </div>\n\n                                    <div className=\"text-right\">\n                                        <div className=\"text-xs font-mono font-bold text-gray-300\">\n                                            {time.toLocaleTimeString('fr-FR')}\n                                        </div>\n                                        <div className=\"text-[8px] text-gray-600\">\n                                            {time.toLocaleDateString('fr-FR', { day: 'numeric', month: 'short' })}\n                                        </div>\n                                    </div>\n\n                                <div className=\"flex gap-1\">\n                                        <button \n                                            onClick={() => setShowScreener(!showScreener)}\n                                            className={`p-1.5 border rounded-md transition-all ${\n                                                showScreener\n                                                    ? 'bg-gray-800 border-gray-800'\n                                                    : (isDarkMode \n                                                        ? 'bg-neutral-900 hover:bg-neutral-800 border-neutral-800' \n                                                        : 'bg-white hover:bg-gray-100 border-gray-300')\n                                            }`}\n                                            title=\"Ouvrir le screener de titres\"\n                                        >\n                                            <LucideIcon name=\"Filter\" className={`w-3 h-3 ${showScreener ? 'text-white' : 'text-gray-500'}`} />\n                                        </button>\n                                        <button className={`p-1.5 border rounded-md transition-all ${\n                                            isDarkMode \n                                                ? 'bg-neutral-900 hover:bg-neutral-800 border-neutral-800' \n                                                : 'bg-white hover:bg-gray-100 border-gray-300'\n                                        }`}>\n                                            <LucideIcon name=\"Bell\" className=\"w-3 h-3 text-gray-500\" />\n                                        </button>\n                                        <button className={`p-1.5 border rounded-md transition-all ${\n                                            isDarkMode \n                                                ? 'bg-neutral-900 hover:bg-neutral-800 border-neutral-800' \n                                                : 'bg-white hover:bg-gray-100 border-gray-300'\n                                        }`}>\n                                            <LucideIcon name=\"Search\" className=\"w-3 h-3 text-gray-500\" />\n                                        </button>\n                                        <button className={`p-1.5 border rounded-md transition-all ${\n                                            isDarkMode \n                                                ? 'bg-neutral-900 hover:bg-neutral-800 border-neutral-800' \n                                                : 'bg-white hover:bg-gray-100 border-gray-300'\n                                        }`}>\n                                            <LucideIcon name=\"Settings\" className=\"w-3 h-3 text-gray-500\" />\n                                        </button>\n                                    {/* HelpPop / Violations */}\n                                    <div className=\"relative\">\n                                        <button\n                                            onClick={() => setShowHelp(!showHelp)}\n                                            className={`p-1.5 border rounded-md transition-all ${\n                                                isDarkMode \n                                                    ? 'bg-neutral-900 hover:bg-neutral-800 border-neutral-800' \n                                                    : 'bg-white hover:bg-gray-100 border-gray-300'\n                                            }`}\n                                            title={violations.length ? 'Diagnostics: probl√®mes d√©tect√©s' : 'Aide IntelliStocks'}\n                                        >\n                                            <div className=\"relative\">\n                                                <LucideIcon name={violations.length ? 'AlertTriangle' : 'HelpCircle'} className={`w-3 h-3 ${violations.length ? 'text-yellow-500' : 'text-gray-500'}`} />\n                                                {violations.length > 0 && (\n                                                    <span className=\"absolute -top-0.5 -right-0.5 w-2 h-2 bg-red-500 rounded-full\"></span>\n                                                )}\n                                            </div>\n                                        </button>\n\n                                        {showHelp && (\n                                            <div className={`absolute right-0 mt-2 w-80 border rounded-xl shadow-2xl z-50 ${\n                                                isDarkMode ? 'bg-neutral-900 border-neutral-800' : 'bg-white border-gray-300'\n                                            }`}>\n                                                <div className={`p-3 border-b flex items-center justify-between gap-2 ${isDarkMode ? 'border-neutral-800' : 'border-gray-200'}`}>\n                                                    <div className=\"flex items-center gap-2\">\n                                                        <LucideIcon name=\"LifeBuoy\" className=\"w-4 h-4 text-blue-500\" />\n                                                        <div>\n                                                            <div className={`text-xs font-bold ${isDarkMode ? 'text-white' : 'text-gray-900'}`}>Aide & diagnostics IntelliStocks</div>\n                                                            <div className=\"text-[10px] text-gray-500\">Mode D√©mo Hybride ‚Ä¢ FMP + Perplexity</div>\n                                                        </div>\n                                                    </div>\n                                                    <button onClick={() => setShowHelp(false)} className={`p-1 rounded ${isDarkMode ? 'hover:bg-neutral-800' : 'hover:bg-gray-100'}`}>\n                                                        <LucideIcon name=\"X\" className=\"w-3 h-3 text-gray-500\" />\n                                                    </button>\n                                                </div>\n                                                <div className=\"p-3 space-y-2 text-[11px]\">\n                                                    {violations.length > 0 ? (\n                                                        <div>\n                                                            <div className={`mb-1 font-semibold ${isDarkMode ? 'text-white' : 'text-gray-900'}`}>Probl√®mes d√©tect√©s</div>\n                                                            <ul className=\"space-y-1\">\n                                                                {violations.map((v, i) => (\n                                                                    <li key={i} className={`p-2 rounded border ${\n                                                                        v.severity === 'high' ? (isDarkMode ? 'bg-red-900/30 border-red-800 text-red-200' : 'bg-red-50 border-red-200 text-red-800') :\n                                                                        v.severity === 'medium' ? (isDarkMode ? 'bg-yellow-900/30 border-yellow-800 text-yellow-200' : 'bg-yellow-50 border-yellow-200 text-yellow-800') :\n                                                                        (isDarkMode ? 'bg-gray-900/30 border-gray-800 text-gray-200' : 'bg-gray-50 border-gray-200 text-gray-800')\n                                                                    }`}>\n                                                                        {v.message}\n                                                                    </li>\n                                                                ))}\n                                                            </ul>\n                                                        </div>\n                                                    ) : (\n                                                        <div className={`p-2 rounded border ${isDarkMode ? 'bg-emerald-900/20 border-emerald-800 text-emerald-200' : 'bg-emerald-50 border-emerald-200 text-emerald-800'}`}>\n                                                            Aucun probl√®me d√©tect√©.\n                                                        </div>\n                                                    )}\n\n                                                    <div className={`pt-1 border-t ${isDarkMode ? 'border-neutral-800' : 'border-gray-200'}`} />\n                                                    <div className=\"space-y-1\">\n                                                        <div className={`font-semibold ${isDarkMode ? 'text-white' : 'text-gray-900'}`}>Conseils rapides</div>\n                                        <ul className=\"list-disc pl-4 space-y-1 text-gray-500\">\n                                            <li>Les graphiques utilisent Chart.js pour afficher les donn√©es en temps r√©el.</li>\n                                            <li>Les donn√©es proviennent de FMP et Marketaux via les APIs configur√©es.</li>\n                                            <li>Actualisez avec le bouton rafra√Æchir pour recharger les derni√®res donn√©es du march√©.</li>\n                                            <li>Les graphiques s'adaptent au th√®me sombre/clair automatiquement.</li>\n                                        </ul>\n                                        \n                                        <div className={`mt-2 pt-2 border-t ${isDarkMode ? 'border-neutral-800' : 'border-gray-200'}`} />\n                                        <div className=\"space-y-1\">\n                                            <div className={`font-semibold ${isDarkMode ? 'text-white' : 'text-gray-900'}`}>Code couleur des m√©triques</div>\n                                            <div className=\"grid grid-cols-2 gap-1 text-[10px]\">\n                                                <div className=\"flex items-center gap-1\">\n                                                    <div className=\"w-2 h-2 rounded-full bg-emerald-500\"></div>\n                                                    <span>Excellent / Sous-√©valu√©</span>\n                                                </div>\n                                                <div className=\"flex items-center gap-1\">\n                                                    <div className=\"w-2 h-2 rounded-full bg-gray-700\"></div>\n                                                    <span>Bon / Juste valoris√©</span>\n                                                </div>\n                                                <div className=\"flex items-center gap-1\">\n                                                    <div className=\"w-2 h-2 rounded-full bg-yellow-500\"></div>\n                                                    <span>Moyen / Attention</span>\n                                                </div>\n                                                <div className=\"flex items-center gap-1\">\n                                                    <div className=\"w-2 h-2 rounded-full bg-green-500\"></div>\n                                                    <span>Faible / Risque</span>\n                                                </div>\n                                                <div className=\"flex items-center gap-1\">\n                                                    <div className=\"w-2 h-2 rounded-full bg-red-500\"></div>\n                                                    <span>Mauvais / Danger</span>\n                                                </div>\n                                                <div className=\"flex items-center gap-1\">\n                                                    <div className=\"w-2 h-2 rounded-full bg-gray-400\"></div>\n                                                    <span>Non disponible</span>\n                                                </div>\n                                            </div>\n                                        </div>\n                                        \n                                        <div className={`mt-2 pt-2 border-t ${isDarkMode ? 'border-neutral-800' : 'border-gray-200'}`} />\n                                        <div className=\"space-y-1\">\n                                            <div className={`font-semibold text-[10px] ${isDarkMode ? 'text-white' : 'text-gray-900'}`}>Standards utilis√©s</div>\n                                            <ul className=\"space-y-0.5 text-[9px] text-gray-500\">\n                                                <li><strong>P/E:</strong> &lt;15 excellent, 15-25 bon, &gt;25 √©lev√©</li>\n                                                <li><strong>PEG:</strong> &lt;1 sous-√©valu√© (Peter Lynch), &gt;2 sur√©valu√©</li>\n                                                <li><strong>ROE:</strong> &gt;20% excellent (Warren Buffett), &gt;15% bon</li>\n                                                <li><strong>D/E:</strong> &lt;0.7 sain, &gt;2 risqu√©</li>\n                                                <li><strong>Marge:</strong> &gt;20% excellente, 10-20% bonne</li>\n                                                <li><strong>Beta:</strong> &lt;1 d√©fensif, &gt;1.5 volatil</li>\n                                            </ul>\n                                        </div>\n                                                    </div>\n                                                </div>\n                                            </div>\n                                        )}\n                                    </div>\n                                </div>\n                            </div>\n                        </div>\n\n                        {/* Grid Layout */}\n                        <div className=\"grid grid-cols-12 gap-2\">\n                            \n                            {/* Colonne gauche */}\n                            <div className=\"col-span-8 space-y-2\">\n                                \n                                {/* Graphique principal - VAGUE 3+4: Modern Effects */}\n                                <div className={`border rounded-lg p-2 transition-colors duration-300 hover-lift shine-effect ${\n                                    isDarkMode ? 'bg-neutral-900 border-neutral-800' : 'bg-white border-gray-300'\n                                }`}>\n                                    <div className=\"flex items-center justify-between mb-2\">\n                                        <div>\n                                            <h2 className={`text-sm font-bold mb-0.5 transition-colors duration-300 ${\n                                                isDarkMode ? 'text-white' : 'text-gray-900'\n                                            }`}>{selectedStock}</h2>\n                                            <p className=\"text-[8px] text-gray-600\">{profile.companyName || currentStock?.name} ‚Ä¢ {profile.sector || 'NASDAQ'}</p>\n                                        </div>\n                                        <div className=\"text-right\">\n                                            <div className={`text-lg font-bold transition-colors duration-300 ${\n                                                isDarkMode ? 'text-white' : 'text-gray-900'\n                                            }`}>${parseFloat(quote.price || 0).toFixed(2)}</div>\n                                            <div className={`flex items-center gap-1 justify-end text-xs ${parseFloat(quote.changesPercentage || 0) >= 0 ? 'text-emerald-500' : 'text-red-500'}`}>\n                                                {parseFloat(quote.changesPercentage || 0) >= 0 ? (\n                                                    <LucideIcon name=\"ArrowUpRight\" className=\"w-3 h-3\" />\n                                                ) : (\n                                                    <LucideIcon name=\"ArrowDownRight\" className=\"w-3 h-3\" />\n                                                )}\n                                                <span className=\"font-semibold\">\n                                                    {parseFloat(quote.changesPercentage || 0) >= 0 ? '+' : ''}{parseFloat(quote.changesPercentage || 0).toFixed(2)}%\n                                                </span>\n                                            </div>\n                                        </div>\n                                    </div>\n\n                                    <div style={{ width: '100%', height: 140 }}>\n                                        {typeof Chart !== 'undefined' && intraday && intraday.length > 0 ? (\n                                            <canvas key={`chart-${selectedStock}-${timeframe}`} ref={(canvas) => {\n                                                if (canvas) {\n                                                    // D√©truire l'ancien graphique s'il existe\n                                                    if (canvas.chart) {\n                                                        canvas.chart.destroy();\n                                                        canvas.chart = null;\n                                                    }\n                                                    \n                                                    const ctx = canvas.getContext('2d');\n                                                    canvas.chart = new Chart(ctx, {\n                                                        type: 'line',\n                                                        data: {\n                                                            labels: intraday.map(d => d.date),\n                                                            datasets: [{\n                                                                label: 'Prix',\n                                                                data: intraday.map(d => d.close),\n                                                                borderColor: parseFloat(quote.changesPercentage || 0) >= 0 ? 'rgb(34, 197, 94)' : 'rgb(239, 68, 68)',\n                                                                backgroundColor: parseFloat(quote.changesPercentage || 0) >= 0 ? 'rgba(34, 197, 94, 0.1)' : 'rgba(239, 68, 68, 0.1)',\n                                                                tension: 0.4,\n                                                                fill: true,\n                                                                borderWidth: 2\n                                                            }]\n                                                        },\n                                                        options: {\n                                                            responsive: true,\n                                                            maintainAspectRatio: false,\n                                                            plugins: {\n                                                                legend: { display: false },\n                                                                tooltip: {\n                                                                    mode: 'index',\n                                                                    intersect: false,\n                                                                    backgroundColor: isDarkMode ? 'rgba(0, 0, 0, 0.8)' : 'rgba(255, 255, 255, 0.8)',\n                                                                    titleColor: isDarkMode ? '#fff' : '#000',\n                                                                    bodyColor: isDarkMode ? '#fff' : '#000',\n                                                                    borderColor: isDarkMode ? '#444' : '#ddd',\n                                                                    borderWidth: 1\n                                                                }\n                                                            },\n                                                            scales: {\n                                                                x: {\n                                                                    display: timeframe === '1D' ? false : true, // Afficher les dates pour les p√©riodes longues\n                                                                    grid: { display: false },\n                                                                    ticks: {\n                                                                        color: isDarkMode ? '#888' : '#666',\n                                                                        font: { size: 8 },\n                                                                        maxTicksLimit: 6\n                                                                    }\n                                                                },\n                                                                y: {\n                                                                    display: true,\n                                                                    position: 'right',\n                                                                    grid: { color: isDarkMode ? 'rgba(255, 255, 255, 0.1)' : 'rgba(0, 0, 0, 0.1)' },\n                                                                    ticks: {\n                                                                        color: isDarkMode ? '#888' : '#666',\n                                                                        font: { size: 10 },\n                                                                        callback: function(value) {\n                                                                            return '$' + value.toFixed(2);\n                                                                        }\n                                                                    }\n                                                                }\n                                                            }\n                                                        }\n                                                    });\n                                                }\n                                            }} width=\"100%\" height=\"140\"></canvas>\n                                        ) : (\n                                            <div className=\"text-center text-gray-500 text-xs py-8\">\n                                                üìà Chargement des donn√©es du graphique...\n                                            </div>\n                                        )}\n                                    </div>\n\n                                    <div className=\"flex gap-1 mt-1.5\">\n                                    {['1D', '1W', '1M', '3M', '6M', '1A', '5A', 'MAX', 'YTD'].map((period) => (\n                                            <button\n                                                key={period}\n                                                onClick={async () => {\n                                                    setTimeframe(period);\n                                                    // Recharger les donn√©es avec le nouveau timeframe\n                                                    try {\n                                                        setLoadingIntelli(true);\n                                                        console.log(`üìä Changement de timeframe vers ${period}...`);\n                                                        const realData = await fetchRealStockData(selectedStock, period);\n                                                        if (realData && realData.quote && realData.quote.price > 0) {\n                                                            setStockDataIntelli(realData);\n                                                            setConnected(true);\n                                                            setLastUpdateIntelli(new Date());\n                                                            console.log(`‚úÖ Donn√©es ${period} charg√©es avec succ√®s`);\n                                                        }\n                                                    } catch (error) {\n                                                        console.error('‚ùå Erreur lors du changement de timeframe:', error);\n                                                    } finally {\n                                                        setLoadingIntelli(false);\n                                                    }\n                                                }}\n                                                className={`px-2 py-0.5 rounded text-[9px] font-semibold transition-all ${\n                                                    timeframe === period \n                                                        ? (isDarkMode \n                                                            ? 'bg-neutral-700 text-white border border-neutral-600' \n                                                            : 'bg-gray-300 text-gray-900 border border-gray-400')\n                                                        : (isDarkMode \n                                                            ? 'bg-neutral-800 hover:bg-neutral-700 border border-neutral-800 text-gray-500' \n                                                            : 'bg-gray-100 hover:bg-gray-200 border border-gray-200 text-gray-600')\n                                                }`}\n                                            >\n                                                {period}\n                                            </button>\n                                        ))}\n                                    </div>\n                                </div>\n\n                                {/* Volume */}\n                                <div className={`border rounded-lg p-2 transition-colors duration-300 ${\n                                    isDarkMode ? 'bg-neutral-900 border-neutral-800' : 'bg-white border-gray-300'\n                                }`}>\n                                    <h3 className=\"text-[10px] font-bold mb-1.5 flex items-center gap-1 text-gray-400\">\n                                        <LucideIcon name=\"BarChart3\" className=\"w-3 h-3 text-gray-500\" />\n                                        Volume & Flux d'Ordres\n                                    </h3>\n                                    <div className=\"grid grid-cols-2 gap-2\">\n                                        <div style={{ width: '100%', height: 80 }}>\n                                            {typeof Chart !== 'undefined' && intraday.length > 0 ? (\n                                                <canvas ref={(canvas) => {\n                                                    if (canvas && !canvas.chart) {\n                                                        const ctx = canvas.getContext('2d');\n                                                        canvas.chart = new Chart(ctx, {\n                                                            type: 'bar',\n                                                            data: {\n                                                                labels: intraday.map(d => d.date),\n                                                                datasets: [{\n                                                                    label: 'Volume',\n                                                                    data: intraday.map(d => d.volume),\n                                                                    backgroundColor: intraday.map((d, i) => {\n                                                                        if (i === 0) return 'rgba(34, 197, 94, 0.6)';\n                                                                        return d.close >= intraday[i-1].close \n                                                                            ? 'rgba(34, 197, 94, 0.6)' \n                                                                            : 'rgba(239, 68, 68, 0.6)';\n                                                                    }),\n                                                                    borderColor: intraday.map((d, i) => {\n                                                                        if (i === 0) return 'rgb(34, 197, 94)';\n                                                                        return d.close >= intraday[i-1].close \n                                                                            ? 'rgb(34, 197, 94)' \n                                                                            : 'rgb(239, 68, 68)';\n                                                                    }),\n                                                                    borderWidth: 1\n                                                                }]\n                                                            },\n                                                            options: {\n                                                                responsive: true,\n                                                                maintainAspectRatio: false,\n                                                                plugins: {\n                                                                    legend: { display: false },\n                                                                    tooltip: {\n                                                                        backgroundColor: isDarkMode ? 'rgba(0, 0, 0, 0.8)' : 'rgba(255, 255, 255, 0.8)',\n                                                                        titleColor: isDarkMode ? '#fff' : '#000',\n                                                                        bodyColor: isDarkMode ? '#fff' : '#000'\n                                                                    }\n                                                                },\n                                                                scales: {\n                                                                    x: { display: false },\n                                                                    y: { \n                                                                        display: true,\n                                                                        position: 'right',\n                                                                        grid: { color: isDarkMode ? 'rgba(255, 255, 255, 0.1)' : 'rgba(0, 0, 0, 0.1)' },\n                                                                        ticks: {\n                                                                            color: isDarkMode ? '#888' : '#666',\n                                                                            font: { size: 9 }\n                                                                        }\n                                                                    }\n                                                                }\n                                                            }\n                                                        });\n                                                    }\n                                                }} width=\"100%\" height=\"80\"></canvas>\n                                            ) : (\n                                                <div className=\"text-center text-gray-500 text-xs py-4\">\n                                                    üìä Chargement du volume...\n                                                </div>\n                                            )}\n                                        </div>\n\n                                        <div className=\"space-y-1.5\">\n                                            <div className={`flex items-center justify-between p-1.5 border rounded text-[9px] transition-colors duration-300 ${\n                                                isDarkMode ? 'bg-neutral-800 border-neutral-700' : 'bg-gray-50 border-gray-200'\n                                            }`}>\n                                                <span className=\"text-gray-500\">Acheteurs</span>\n                                                <div className=\"flex items-center gap-1\">\n                                                    <div className={`w-16 h-1.5 rounded-full overflow-hidden ${\n                                                        isDarkMode ? 'bg-neutral-700' : 'bg-gray-200'\n                                                    }`}>\n                                                        <div className=\"h-full bg-emerald-500\" style={{ width: `${orderFlow.buyVolume}%` }}></div>\n                                                    </div>\n                                                    <span className=\"text-emerald-500 font-bold\">{orderFlow.buyVolume}%</span>\n                                                </div>\n                                            </div>\n                                            <div className={`flex items-center justify-between p-1.5 border rounded text-[9px] transition-colors duration-300 ${\n                                                isDarkMode ? 'bg-neutral-800 border-neutral-700' : 'bg-gray-50 border-gray-200'\n                                            }`}>\n                                                <span className=\"text-gray-500\">Vendeurs</span>\n                                                <div className=\"flex items-center gap-1\">\n                                                    <div className={`w-16 h-1.5 rounded-full overflow-hidden ${\n                                                        isDarkMode ? 'bg-neutral-700' : 'bg-gray-200'\n                                                    }`}>\n                                                        <div className=\"h-full bg-red-500\" style={{ width: `${orderFlow.sellVolume}%` }}></div>\n                                                    </div>\n                                                    <span className=\"text-red-500 font-bold\">{orderFlow.sellVolume}%</span>\n                                                </div>\n                                            </div>\n                                            <div className=\"grid grid-cols-2 gap-1\">\n                                                <div className={`p-1.5 border rounded text-center transition-colors duration-300 ${\n                                                    isDarkMode ? 'bg-neutral-800 border-neutral-700' : 'bg-gray-50 border-gray-200'\n                                                }`}>\n                                                    <div className=\"text-[8px] text-gray-600\">Volume</div>\n                                                    <div className={`text-xs font-bold transition-colors duration-300 ${\n                                                        isDarkMode ? 'text-gray-300' : 'text-gray-700'\n                                                    }`}>{formatNumber(quote.volume)}</div>\n                                                </div>\n                                                <div className={`p-1.5 border rounded text-center transition-colors duration-300 ${\n                                                    isDarkMode ? 'bg-neutral-800 border-neutral-700' : 'bg-gray-50 border-gray-200'\n                                                }`}>\n                                                    <div className=\"text-[8px] text-gray-600\">Cap</div>\n                                                    <div className={`text-xs font-bold transition-colors duration-300 ${\n                                                        isDarkMode ? 'text-gray-300' : 'text-gray-700'\n                                                    }`}>{formatNumber(quote.marketCap)}</div>\n                                                </div>\n                                            </div>\n                                        </div>\n                                    </div>\n                                </div>\n\n                                {/* TradingView Mini Chart - VAGUE 2: Quick Wins + VAGUE 3+4: Modern Effects */}\n                                <div className={`border rounded-lg p-2 transition-colors duration-300 hover-lift shine-effect ${\n                                    isDarkMode ? 'bg-neutral-900 border-neutral-800' : 'bg-white border-gray-300'\n                                }`}>\n                                    <h3 className=\"text-[10px] font-bold mb-2 flex items-center gap-1 text-gray-400\">\n                                        <LucideIcon name=\"LineChart\" className=\"w-3 h-3 text-gray-500\" />\n                                        TradingView Mini Chart\n                                    </h3>\n                                    <div style={{ height: '250px' }}>\n                                        <div\n                                            id=\"tradingview-mini-chart-jlab\"\n                                            className=\"tradingview-widget-container\"\n                                            style={{ height: '100%', width: '100%' }}\n                                            ref={(container) => {\n                                                if (container && !container.hasChildNodes()) {\n                                                    // Cr√©er le script TradingView\n                                                    const script = document.createElement('script');\n                                                    script.type = 'text/javascript';\n                                                    script.src = 'https://s3.tradingview.com/external-embedding/embed-widget-mini-symbol-overview.js';\n                                                    script.async = true;\n                                                    script.innerHTML = JSON.stringify({\n                                                        \"symbol\": `NASDAQ:${selectedStock}`,\n                                                        \"width\": \"100%\",\n                                                        \"height\": \"100%\",\n                                                        \"locale\": \"fr\",\n                                                        \"dateRange\": \"1D\",\n                                                        \"colorTheme\": isDarkMode ? \"dark\" : \"light\",\n                                                        \"isTransparent\": false,\n                                                        \"autosize\": true,\n                                                        \"largeChartUrl\": \"\"\n                                                    });\n                                                    container.appendChild(script);\n                                                }\n                                            }}\n                                        ></div>\n                                    </div>\n                                </div>\n\n                                {/* Moyennes Mobiles - Analyse des Croisements */}\n                                <div className={`border rounded-lg p-2 transition-colors duration-300 ${\n                                    isDarkMode ? 'bg-neutral-900 border-neutral-800' : 'bg-white border-gray-300'\n                                }`}>\n                                    <h3 className=\"text-[10px] font-bold mb-1.5 flex items-center gap-1 text-gray-400\">\n                                        <LucideIcon name=\"TrendingUp\" className=\"w-3 h-3 text-gray-500\" />\n                                        Moyennes Mobiles & Croisements\n                                    </h3>\n                                    \n                                    {/* Indicateur de tendance global */}\n                                    <div className={`mb-2 p-2 border rounded text-center ${\n                                        movingAverages.interpretation?.trend?.includes('Haussier fort') \n                                            ? (isDarkMode ? 'bg-emerald-900/30 border-emerald-800' : 'bg-emerald-50 border-emerald-200')\n                                            : movingAverages.interpretation?.trend?.includes('Haussier') \n                                            ? (isDarkMode ? 'bg-gray-900/30 border-gray-800' : 'bg-gray-800 border-gray-700')\n                                            : movingAverages.interpretation?.trend?.includes('Baissier fort')\n                                            ? (isDarkMode ? 'bg-red-900/30 border-red-800' : 'bg-red-50 border-red-200')\n                                            : movingAverages.interpretation?.trend?.includes('Baissier')\n                                            ? (isDarkMode ? 'bg-green-900/30 border-green-800' : 'bg-green-50 border-green-200')\n                                            : (isDarkMode ? 'bg-gray-900/30 border-gray-800' : 'bg-gray-50 border-gray-200')\n                                    }`}>\n                                        <div className=\"text-[8px] text-gray-500 mb-0.5\">Tendance Globale</div>\n                                        <div className={`text-xs font-bold ${\n                                            movingAverages.interpretation?.trend?.includes('Haussier') ? 'text-emerald-500' :\n                                            movingAverages.interpretation?.trend?.includes('Baissier') ? 'text-red-500' :\n                                            'text-gray-400'\n                                        }`}>\n                                            {movingAverages.interpretation?.trend === 'Haussier fort' && 'üìà '}\n                                            {movingAverages.interpretation?.trend === 'Baissier fort' && 'üìâ '}\n                                            {movingAverages.interpretation?.trend || 'Calcul en cours...'}\n                                        </div>\n                                    </div>\n                                    \n                                    <div className=\"space-y-1.5\">\n                                        {/* SMA 20 */}\n                                        <div className={`p-1.5 border rounded transition-colors duration-300 ${\n                                            isDarkMode ? 'bg-neutral-800 border-neutral-700' : 'bg-gray-50 border-gray-200'\n                                        }`}>\n                                            <div className=\"flex items-center justify-between mb-1\">\n                                                <div className=\"text-[9px] font-semibold text-gray-400\">SMA 20 jours</div>\n                                                <div className=\"text-[9px] text-gray-500\">\n                                                    ${movingAverages.sma20?.value?.toFixed(2) || 'N/A'}\n                                                </div>\n                                            </div>\n                                            <div className=\"flex items-center justify-between\">\n                                                <div className={`text-[8px] font-semibold ${\n                                                    movingAverages.sma20?.diff > 0 ? 'text-emerald-500' : 'text-red-500'\n                                                }`}>\n                                                    {movingAverages.interpretation?.sma20}\n                                                    {movingAverages.sma20?.diff > 0 ? ' ‚Üë' : ' ‚Üì'}\n                                                </div>\n                                                <div className={`text-xs font-bold ${\n                                                    Math.abs(movingAverages.sma20?.diff || 0) > 5 \n                                                        ? (movingAverages.sma20?.diff > 0 ? 'text-emerald-500' : 'text-red-500')\n                                                        : 'text-blue-500'\n                                                }`}>\n                                                    {movingAverages.sma20?.diff > 0 ? '+' : ''}{movingAverages.sma20?.diff?.toFixed(2) || 0}%\n                                                </div>\n                                            </div>\n                                            <div className=\"text-[7px] text-gray-500 mt-1 italic\">\n                                                {Math.abs(movingAverages.sma20?.diff || 0) < 2 \n                                                    ? 'üí° Proche de la moyenne - Zone de consolidation'\n                                                    : movingAverages.sma20?.diff > 5 \n                                                    ? 'üöÄ Fort au-dessus - Momentum haussier'\n                                                    : movingAverages.sma20?.diff < -5\n                                                    ? '‚ö†Ô∏è Fort en-dessous - Pression baissi√®re'\n                                                    : movingAverages.sma20?.diff > 0\n                                                    ? '‚úÖ Au-dessus - Signal positif'\n                                                    : '‚ö†Ô∏è En-dessous - Signal n√©gatif'}\n                                            </div>\n                                        </div>\n                                        \n                                        {/* SMA 50 */}\n                                        <div className={`p-1.5 border rounded transition-colors duration-300 ${\n                                            isDarkMode ? 'bg-neutral-800 border-neutral-700' : 'bg-gray-50 border-gray-200'\n                                        }`}>\n                                            <div className=\"flex items-center justify-between mb-1\">\n                                                <div className=\"text-[9px] font-semibold text-gray-400\">SMA 50 jours</div>\n                                                <div className=\"text-[9px] text-gray-500\">\n                                                    ${movingAverages.sma50?.value?.toFixed(2) || 'N/A'}\n                                                </div>\n                                            </div>\n                                            <div className=\"flex items-center justify-between\">\n                                                <div className={`text-[8px] font-semibold ${\n                                                    movingAverages.sma50?.diff > 0 ? 'text-emerald-500' : 'text-red-500'\n                                                }`}>\n                                                    {movingAverages.interpretation?.sma50}\n                                                    {movingAverages.sma50?.diff > 0 ? ' ‚Üë' : ' ‚Üì'}\n                                                </div>\n                                                <div className={`text-xs font-bold ${\n                                                    Math.abs(movingAverages.sma50?.diff || 0) > 5 \n                                                        ? (movingAverages.sma50?.diff > 0 ? 'text-emerald-500' : 'text-red-500')\n                                                        : 'text-blue-500'\n                                                }`}>\n                                                    {movingAverages.sma50?.diff > 0 ? '+' : ''}{movingAverages.sma50?.diff?.toFixed(2) || 0}%\n                                                </div>\n                                            </div>\n                                            <div className=\"text-[7px] text-gray-500 mt-1 italic\">\n                                                {movingAverages.sma50?.diff > 0 && movingAverages.sma20?.diff > 0\n                                                    ? 'üìä Tendance moyen terme positive'\n                                                    : movingAverages.sma50?.diff < 0 && movingAverages.sma20?.diff < 0\n                                                    ? 'üìâ Tendance moyen terme n√©gative'\n                                                    : movingAverages.sma50?.diff > 0\n                                                    ? '‚ö° Support potentiel - Test en cours'\n                                                    : '‚ö†Ô∏è R√©sistance - Vigilance recommand√©e'}\n                                            </div>\n                                        </div>\n                                        \n                                        {/* SMA 200 */}\n                                        <div className={`p-1.5 border rounded transition-colors duration-300 ${\n                                            isDarkMode ? 'bg-neutral-800 border-neutral-700' : 'bg-gray-50 border-gray-200'\n                                        }`}>\n                                            <div className=\"flex items-center justify-between mb-1\">\n                                                <div className=\"text-[9px] font-semibold text-gray-400\">SMA 200 jours</div>\n                                                <div className=\"text-[9px] text-gray-500\">\n                                                    ${movingAverages.sma200?.value?.toFixed(2) || 'N/A'}\n                                                </div>\n                                            </div>\n                                            <div className=\"flex items-center justify-between\">\n                                                <div className={`text-[8px] font-semibold ${\n                                                    movingAverages.sma200?.diff > 0 ? 'text-emerald-500' : 'text-red-500'\n                                                }`}>\n                                                    {movingAverages.interpretation?.sma200}\n                                                    {movingAverages.sma200?.diff > 0 ? ' ‚Üë' : ' ‚Üì'}\n                                                </div>\n                                                <div className={`text-xs font-bold ${\n                                                    Math.abs(movingAverages.sma200?.diff || 0) > 10 \n                                                        ? (movingAverages.sma200?.diff > 0 ? 'text-emerald-500' : 'text-red-500')\n                                                        : 'text-blue-500'\n                                                }`}>\n                                                    {movingAverages.sma200?.diff > 0 ? '+' : ''}{movingAverages.sma200?.diff?.toFixed(2) || 0}%\n                                                </div>\n                                            </div>\n                                            <div className=\"text-[7px] text-gray-500 mt-1 italic\">\n                                                {movingAverages.sma200?.diff > 10\n                                                    ? 'üéØ Bull Market confirm√© - Tendance long terme haussi√®re'\n                                                    : movingAverages.sma200?.diff > 0\n                                                    ? '‚úÖ Au-dessus SMA200 - March√© haussier'\n                                                    : movingAverages.sma200?.diff < -10\n                                                    ? 'üêª Bear Market - Tendance long terme baissi√®re'\n                                                    : '‚ö†Ô∏è En-dessous SMA200 - March√© baissier'}\n                                            </div>\n                                        </div>\n                                    </div>\n                                    \n                                    {/* Interpr√©tation des croisements */}\n                                    {(movingAverages.sma20 && movingAverages.sma50) && (\n                                        <div className={`mt-2 p-2 border rounded text-[8px] ${\n                                            movingAverages.sma20.value > movingAverages.sma50.value && movingAverages.sma50.value > movingAverages.sma200.value\n                                                ? (isDarkMode ? 'bg-emerald-900/20 border-emerald-800 text-emerald-300' : 'bg-emerald-50 border-emerald-200 text-emerald-700')\n                                                : movingAverages.sma20.value < movingAverages.sma50.value && movingAverages.sma50.value < movingAverages.sma200.value\n                                                ? (isDarkMode ? 'bg-red-900/20 border-red-800 text-red-300' : 'bg-red-50 border-red-200 text-red-700')\n                                                : (isDarkMode ? 'bg-yellow-900/20 border-yellow-800 text-yellow-300' : 'bg-yellow-50 border-yellow-200 text-yellow-700')\n                                        }`}>\n                                            <div className=\"font-semibold mb-1 flex items-center gap-2\">\n                                                <Icon emoji=\"üìä\" size={16} />\n                                                Analyse des Croisements\n                                            </div>\n                                            {movingAverages.sma20.value > movingAverages.sma50.value && movingAverages.sma50.value > movingAverages.sma200.value ? (\n                                                <div>‚úÖ Configuration id√©ale : SMA20 &gt; SMA50 &gt; SMA200. Tendance haussi√®re confirm√©e sur tous les horizons temporels.</div>\n                                            ) : movingAverages.sma20.value < movingAverages.sma50.value && movingAverages.sma50.value < movingAverages.sma200.value ? (\n                                                <div>‚ö†Ô∏è Configuration baissi√®re : SMA20 &lt; SMA50 &lt; SMA200. Pression vendeuse sur tous les horizons. Prudence recommand√©e.</div>\n                                            ) : movingAverages.sma20.value > movingAverages.sma50.value ? (\n                                                <div>‚ö° Croisement r√©cent possible : SMA20 au-dessus de SMA50. Signal de retournement haussier √† confirmer.</div>\n                                            ) : (\n                                                <div>üìâ Moyennes d√©salign√©es : Configuration mixte. Attendre confirmation de tendance avant prise de position.</div>\n                                            )}\n                                        </div>\n                                    )}\n                                </div>\n\n                                {/* Indicateurs */}\n                                <div className={`border rounded-lg p-2 transition-colors duration-300 ${\n                                    isDarkMode ? 'bg-neutral-900 border-neutral-800' : 'bg-white border-gray-300'\n                                }`}>\n                                    <h3 className=\"text-[10px] font-bold mb-1.5 flex items-center gap-1 text-gray-400\">\n                                        <LucideIcon name=\"Activity\" className=\"w-3 h-3 text-gray-500\" />\n                                        Indicateurs Techniques\n                                    </h3>\n                                    <div className=\"grid grid-cols-2 gap-1.5\">\n                                        {Object.entries(technicalIndicators).map(([key, value]) => {\n                                            const signalColor = value.signal === 'Achat' || value.signal === 'Bullish' || value.signal === 'Au-dessus'\n                                                ? 'text-emerald-500'\n                                                : value.signal === 'Neutre'\n                                                ? 'text-blue-500'\n                                                : 'text-red-500';\n                                            \n                                            return (\n                                                <div key={key} className={`flex items-center justify-between p-1.5 border rounded transition-colors duration-300 ${\n                                                    isDarkMode ? 'bg-neutral-800 border-neutral-700' : 'bg-gray-50 border-gray-200'\n                                                }`}>\n                                                    <div>\n                                                        <div className=\"font-semibold text-[9px] text-gray-400\">{key.replace('_', ' ')}</div>\n                                                        <div className={`text-[8px] font-semibold ${signalColor}`}>{value.signal}</div>\n                                                    </div>\n                                                    <div className={`text-sm font-bold ${signalColor}`}>\n                                                        {typeof value.value === 'number' ? value.value.toFixed(2) : value.value}\n                                                    </div>\n                                                </div>\n                                            );\n                                        })}\n                                    </div>\n                                </div>\n\n                                {/* Fondamentaux */}\n                                <div className={`border rounded-lg p-2 transition-colors duration-300 ${\n                                    isDarkMode ? 'bg-neutral-900 border-neutral-800' : 'bg-white border-gray-300'\n                                }`}>\n                                    <h3 className=\"text-[10px] font-bold mb-1.5 flex items-center gap-1 text-gray-400\">\n                                        <LucideIcon name=\"DollarSign\" className=\"w-3 h-3 text-gray-500\" />\n                                        Analyse Fondamentale\n                                    </h3>\n                                    <div className=\"grid grid-cols-3 gap-1.5\">\n                                        {[\n                                            { label: 'P/E', value: metrics.peRatioTTM, suffix: 'x', metric: 'PE' },\n                                            { label: 'PEG', value: metrics.pegRatioTTM, suffix: '', metric: 'PEG' },\n                                            { label: 'P/S', value: metrics.priceToSalesRatioTTM, suffix: 'x', metric: 'PS' },\n                                            { label: 'ROE', value: ratios.returnOnEquityTTM ? (ratios.returnOnEquityTTM * 100) : null, suffix: '%', metric: 'ROE', isPercent: true },\n                                            { label: 'ROA', value: ratios.returnOnAssetsTTM ? (ratios.returnOnAssetsTTM * 100) : null, suffix: '%', metric: 'ROA', isPercent: true },\n                                            { label: 'D/E', value: ratios.debtEquityRatio, suffix: 'x', metric: 'DE' },\n                                            { label: 'Marge', value: ratios.netProfitMarginTTM ? (ratios.netProfitMarginTTM * 100) : null, suffix: '%', metric: 'Margin', isPercent: true },\n                                            { label: 'Beta', value: profile.beta, suffix: '', metric: 'Beta' },\n                                            { label: 'Div', value: metrics.dividendYieldTTM ? (metrics.dividendYieldTTM * 100) : null, suffix: '%', metric: 'Div', isPercent: true },\n                                        ].map((metric) => (\n                                            <div key={metric.label} className={`p-1.5 border rounded text-center transition-colors duration-300 ${\n                                                isDarkMode ? 'bg-neutral-800 border-neutral-700' : 'bg-gray-50 border-gray-200'\n                                            }`}>\n                                                <div className=\"text-[8px] text-gray-600 mb-0.5\">{metric.label}</div>\n                                                <div className={`text-xs font-bold transition-colors duration-300 ${\n                                                    getMetricColor(metric.metric, metric.value)\n                                                }`}>\n                                                    {metric.value != null ? \n                                                        (typeof metric.value === 'number' ? metric.value.toFixed(metric.isPercent ? 1 : 2) + metric.suffix : metric.value) \n                                                        : 'N/A'}\n                                                </div>\n                                            </div>\n                                        ))}\n                                    </div>\n                                </div>\n\n                                {/* Ratios Historiques */}\n                                <div className={`border rounded-lg p-2 transition-colors duration-300 ${\n                                    isDarkMode ? 'bg-neutral-900 border-neutral-800' : 'bg-white border-gray-300'\n                                }`}>\n                                    <h3 className=\"text-[10px] font-bold mb-2 flex items-center gap-1 text-gray-400\">\n                                        <LucideIcon name=\"TrendingUp\" className=\"w-3 h-3 text-gray-500\" />\n                                        Ratios Historiques (Tendances)\n                                    </h3>\n                                    \n                                    {historicalRatios.length > 0 ? (\n                                        <div className=\"space-y-2\">\n                                            {/* Graphique P/E Ratio */}\n                                            <div className={`border rounded p-1.5 ${isDarkMode ? 'bg-neutral-800 border-neutral-700' : 'bg-gray-50 border-gray-200'}`}>\n                                                <div className=\"text-[9px] font-semibold text-gray-400 mb-1\">P/E Ratio (Price to Earnings)</div>\n                                                <div style={{ width: '100%', height: 60 }}>\n                                                    <canvas ref={(canvas) => {\n                                                        if (canvas && !canvas.chart && historicalRatios.length > 0) {\n                                                            const ctx = canvas.getContext('2d');\n                                                            const peData = historicalRatios.map(r => r.peRatioTTM).filter(v => v != null).reverse();\n                                                            const labels = historicalRatios.map(r => new Date(r.date).toLocaleDateString('fr-FR', { month: 'short', year: '2-digit' })).reverse();\n                                                            \n                                                            canvas.chart = new Chart(ctx, {\n                                                                type: 'line',\n                                                                data: {\n                                                                    labels: labels,\n                                                                    datasets: [{\n                                                                        label: 'P/E',\n                                                                        data: peData,\n                                                                        borderColor: 'rgb(59, 130, 246)',\n                                                                        backgroundColor: 'rgba(59, 130, 246, 0.1)',\n                                                                        tension: 0.3,\n                                                                        fill: true,\n                                                                        borderWidth: 2,\n                                                                        pointRadius: 2\n                                                                    }]\n                                                                },\n                                                                options: {\n                                                                    responsive: true,\n                                                                    maintainAspectRatio: false,\n                                                                    plugins: {\n                                                                        legend: { display: false },\n                                                                        tooltip: {\n                                                                            backgroundColor: isDarkMode ? 'rgba(0, 0, 0, 0.8)' : 'rgba(255, 255, 255, 0.8)',\n                                                                            titleColor: isDarkMode ? '#fff' : '#000',\n                                                                            bodyColor: isDarkMode ? '#fff' : '#000',\n                                                                            borderColor: isDarkMode ? '#444' : '#ddd',\n                                                                            borderWidth: 1\n                                                                        }\n                                                                    },\n                                                                    scales: {\n                                                                        x: { \n                                                                            display: true,\n                                                                            grid: { display: false },\n                                                                            ticks: { \n                                                                                color: isDarkMode ? '#888' : '#666',\n                                                                                font: { size: 8 }\n                                                                            }\n                                                                        },\n                                                                        y: { \n                                                                            display: true,\n                                                                            position: 'right',\n                                                                            grid: { color: isDarkMode ? 'rgba(255, 255, 255, 0.1)' : 'rgba(0, 0, 0, 0.1)' },\n                                                                            ticks: { \n                                                                                color: isDarkMode ? '#888' : '#666',\n                                                                                font: { size: 8 }\n                                                                            }\n                                                                        }\n                                                                    }\n                                                                }\n                                                            });\n                                                        }\n                                                    }} width=\"100%\" height=\"60\"></canvas>\n                                                </div>\n                                            </div>\n\n                                            {/* Graphique ROE */}\n                                            <div className={`border rounded p-1.5 ${isDarkMode ? 'bg-neutral-800 border-neutral-700' : 'bg-gray-50 border-gray-200'}`}>\n                                                <div className=\"text-[9px] font-semibold text-gray-400 mb-1\">ROE (Return on Equity)</div>\n                                                <div style={{ width: '100%', height: 60 }}>\n                                                    <canvas ref={(canvas) => {\n                                                        if (canvas && !canvas.chart && historicalRatios.length > 0) {\n                                                            const ctx = canvas.getContext('2d');\n                                                            const roeData = historicalRatios.map(r => r.returnOnEquityTTM ? r.returnOnEquityTTM * 100 : null).filter(v => v != null).reverse();\n                                                            const labels = historicalRatios.map(r => new Date(r.date).toLocaleDateString('fr-FR', { month: 'short', year: '2-digit' })).reverse();\n                                                            \n                                                            canvas.chart = new Chart(ctx, {\n                                                                type: 'line',\n                                                                data: {\n                                                                    labels: labels,\n                                                                    datasets: [{\n                                                                        label: 'ROE %',\n                                                                        data: roeData,\n                                                                        borderColor: 'rgb(34, 197, 94)',\n                                                                        backgroundColor: 'rgba(34, 197, 94, 0.1)',\n                                                                        tension: 0.3,\n                                                                        fill: true,\n                                                                        borderWidth: 2,\n                                                                        pointRadius: 2\n                                                                    }]\n                                                                },\n                                                                options: {\n                                                                    responsive: true,\n                                                                    maintainAspectRatio: false,\n                                                                    plugins: {\n                                                                        legend: { display: false },\n                                                                        tooltip: {\n                                                                            backgroundColor: isDarkMode ? 'rgba(0, 0, 0, 0.8)' : 'rgba(255, 255, 255, 0.8)',\n                                                                            titleColor: isDarkMode ? '#fff' : '#000',\n                                                                            bodyColor: isDarkMode ? '#fff' : '#000',\n                                                                            borderColor: isDarkMode ? '#444' : '#ddd',\n                                                                            borderWidth: 1,\n                                                                            callbacks: {\n                                                                                label: (context) => `ROE: ${context.parsed.y.toFixed(2)}%`\n                                                                            }\n                                                                        }\n                                                                    },\n                                                                    scales: {\n                                                                        x: { \n                                                                            display: true,\n                                                                            grid: { display: false },\n                                                                            ticks: { \n                                                                                color: isDarkMode ? '#888' : '#666',\n                                                                                font: { size: 8 }\n                                                                            }\n                                                                        },\n                                                                        y: { \n                                                                            display: true,\n                                                                            position: 'right',\n                                                                            grid: { color: isDarkMode ? 'rgba(255, 255, 255, 0.1)' : 'rgba(0, 0, 0, 0.1)' },\n                                                                            ticks: { \n                                                                                color: isDarkMode ? '#888' : '#666',\n                                                                                font: { size: 8 },\n                                                                                callback: (value) => value.toFixed(1) + '%'\n                                                                            }\n                                                                        }\n                                                                    }\n                                                                }\n                                                            });\n                                                        }\n                                                    }} width=\"100%\" height=\"60\"></canvas>\n                                                </div>\n                                            </div>\n\n                                            {/* Graphique Debt to Equity */}\n                                            <div className={`border rounded p-1.5 ${isDarkMode ? 'bg-neutral-800 border-neutral-700' : 'bg-gray-50 border-gray-200'}`}>\n                                                <div className=\"text-[9px] font-semibold text-gray-400 mb-1\">D/E Ratio (Debt to Equity)</div>\n                                                <div style={{ width: '100%', height: 60 }}>\n                                                    <canvas ref={(canvas) => {\n                                                        if (canvas && !canvas.chart && historicalRatios.length > 0) {\n                                                            const ctx = canvas.getContext('2d');\n                                                            const deData = historicalRatios.map(r => r.debtEquityRatioTTM).filter(v => v != null).reverse();\n                                                            const labels = historicalRatios.map(r => new Date(r.date).toLocaleDateString('fr-FR', { month: 'short', year: '2-digit' })).reverse();\n                                                            \n                                                            canvas.chart = new Chart(ctx, {\n                                                                type: 'bar',\n                                                                data: {\n                                                                    labels: labels,\n                                                                    datasets: [{\n                                                                        label: 'D/E',\n                                                                        data: deData,\n                                                                        backgroundColor: deData.map(v => v > 1 ? 'rgba(239, 68, 68, 0.6)' : 'rgba(34, 197, 94, 0.6)'),\n                                                                        borderColor: deData.map(v => v > 1 ? 'rgb(239, 68, 68)' : 'rgb(34, 197, 94)'),\n                                                                        borderWidth: 1\n                                                                    }]\n                                                                },\n                                                                options: {\n                                                                    responsive: true,\n                                                                    maintainAspectRatio: false,\n                                                                    plugins: {\n                                                                        legend: { display: false },\n                                                                        tooltip: {\n                                                                            backgroundColor: isDarkMode ? 'rgba(0, 0, 0, 0.8)' : 'rgba(255, 255, 255, 0.8)',\n                                                                            titleColor: isDarkMode ? '#fff' : '#000',\n                                                                            bodyColor: isDarkMode ? '#fff' : '#000',\n                                                                            borderColor: isDarkMode ? '#444' : '#ddd',\n                                                                            borderWidth: 1\n                                                                        }\n                                                                    },\n                                                                    scales: {\n                                                                        x: { \n                                                                            display: true,\n                                                                            grid: { display: false },\n                                                                            ticks: { \n                                                                                color: isDarkMode ? '#888' : '#666',\n                                                                                font: { size: 8 }\n                                                                            }\n                                                                        },\n                                                                        y: { \n                                                                            display: true,\n                                                                            position: 'right',\n                                                                            grid: { color: isDarkMode ? 'rgba(255, 255, 255, 0.1)' : 'rgba(0, 0, 0, 0.1)' },\n                                                                            ticks: { \n                                                                                color: isDarkMode ? '#888' : '#666',\n                                                                                font: { size: 8 }\n                                                                            }\n                                                                        }\n                                                                    }\n                                                                }\n                                                            });\n                                                        }\n                                                    }} width=\"100%\" height=\"60\"></canvas>\n                                                </div>\n                                            </div>\n\n                                            {/* Graphique Profit Margin */}\n                                            <div className={`border rounded p-1.5 ${isDarkMode ? 'bg-neutral-800 border-neutral-700' : 'bg-gray-50 border-gray-200'}`}>\n                                                <div className=\"text-[9px] font-semibold text-gray-400 mb-1\">Marge Nette (Net Profit Margin)</div>\n                                                <div style={{ width: '100%', height: 60 }}>\n                                                    <canvas ref={(canvas) => {\n                                                        if (canvas && !canvas.chart && historicalRatios.length > 0) {\n                                                            const ctx = canvas.getContext('2d');\n                                                            const marginData = historicalRatios.map(r => r.netProfitMarginTTM ? r.netProfitMarginTTM * 100 : null).filter(v => v != null).reverse();\n                                                            const labels = historicalRatios.map(r => new Date(r.date).toLocaleDateString('fr-FR', { month: 'short', year: '2-digit' })).reverse();\n                                                            \n                                                            canvas.chart = new Chart(ctx, {\n                                                                type: 'line',\n                                                                data: {\n                                                                    labels: labels,\n                                                                    datasets: [{\n                                                                        label: 'Marge %',\n                                                                        data: marginData,\n                                                                        borderColor: 'rgb(168, 85, 247)',\n                                                                        backgroundColor: 'rgba(168, 85, 247, 0.1)',\n                                                                        tension: 0.3,\n                                                                        fill: true,\n                                                                        borderWidth: 2,\n                                                                        pointRadius: 2\n                                                                    }]\n                                                                },\n                                                                options: {\n                                                                    responsive: true,\n                                                                    maintainAspectRatio: false,\n                                                                    plugins: {\n                                                                        legend: { display: false },\n                                                                        tooltip: {\n                                                                            backgroundColor: isDarkMode ? 'rgba(0, 0, 0, 0.8)' : 'rgba(255, 255, 255, 0.8)',\n                                                                            titleColor: isDarkMode ? '#fff' : '#000',\n                                                                            bodyColor: isDarkMode ? '#fff' : '#000',\n                                                                            borderColor: isDarkMode ? '#444' : '#ddd',\n                                                                            borderWidth: 1,\n                                                                            callbacks: {\n                                                                                label: (context) => `Marge: ${context.parsed.y.toFixed(2)}%`\n                                                                            }\n                                                                        }\n                                                                    },\n                                                                    scales: {\n                                                                        x: { \n                                                                            display: true,\n                                                                            grid: { display: false },\n                                                                            ticks: { \n                                                                                color: isDarkMode ? '#888' : '#666',\n                                                                                font: { size: 8 }\n                                                                            }\n                                                                        },\n                                                                        y: { \n                                                                            display: true,\n                                                                            position: 'right',\n                                                                            grid: { color: isDarkMode ? 'rgba(255, 255, 255, 0.1)' : 'rgba(0, 0, 0, 0.1)' },\n                                                                            ticks: { \n                                                                                color: isDarkMode ? '#888' : '#666',\n                                                                                font: { size: 8 },\n                                                                                callback: (value) => value.toFixed(1) + '%'\n                                                                            }\n                                                                        }\n                                                                    }\n                                                                }\n                                                            });\n                                                        }\n                                                    }} width=\"100%\" height=\"60\"></canvas>\n                                                </div>\n                                            </div>\n                                        </div>\n                                    ) : (\n                                        <div className=\"text-center text-gray-500 text-xs py-4\">\n                                            <div className=\"mb-2\"><Icon emoji=\"üìä\" size={24} /></div>\n                                            <div>Chargement des ratios historiques...</div>\n                                        </div>\n                                    )}\n                                </div>\n\n                                {/* Insights */}\n                                {insights.catalysts && (\n                                    <div className={`border rounded-lg p-2 transition-colors duration-300 ${\n                                        isDarkMode ? 'bg-neutral-900 border-neutral-800' : 'bg-white border-gray-300'\n                                    }`}>\n                                        <h3 className=\"text-[10px] font-bold mb-1.5 flex items-center gap-1 text-gray-400\">\n                                            <LucideIcon name=\"Brain\" className=\"w-3 h-3 text-gray-500\" />\n                                            Insights IA (Perplexity)\n                                        </h3>\n                                        <div className=\"space-y-2\">\n                                            <div>\n                                                <div className=\"text-[9px] text-gray-500 mb-1 font-semibold\">üöÄ Catalyseurs</div>\n                                                {insights.catalysts.map((cat, i) => (\n                                                    <div key={i} className=\"text-[8px] text-emerald-400 mb-0.5\">‚Ä¢ {cat}</div>\n                                                ))}\n                                            </div>\n                                            <div>\n                                                <div className=\"text-[9px] text-gray-500 mb-1 font-semibold\">‚ö†Ô∏è Risques</div>\n                                                {insights.risks.map((risk, i) => (\n                                                    <div key={i} className=\"text-[8px] text-green-400 mb-0.5\">‚Ä¢ {risk}</div>\n                                                ))}\n                                            </div>\n                                            <div className={`p-1.5 border rounded transition-colors duration-300 ${\n                                                isDarkMode ? 'bg-neutral-800 border-neutral-700' : 'bg-gray-50 border-gray-200'\n                                            }`}>\n                                                <div className=\"text-[9px] text-gray-500 mb-0.5\">Consensus : \n                                                    <span className={`ml-1 font-bold ${\n                                                        insights.consensus === 'bullish' ? 'text-emerald-500' :\n                                                        insights.consensus === 'bearish' ? 'text-red-500' : 'text-gray-400'\n                                                    }`}>\n                                                        {insights.consensus === 'bullish' ? 'üìà Bullish' : \n                                                         insights.consensus === 'bearish' ? 'üìâ Bearish' : '‚ûñ Neutre'}\n                                                    </span>\n                                                </div>\n                                                <div className=\"text-[8px] text-gray-400\">{insights.reasoning}</div>\n                                            </div>\n                                        </div>\n                                    </div>\n                                )}\n\n                                {/* Comparaison */}\n                                <div className={`border rounded-lg p-2 transition-colors duration-300 ${\n                                    isDarkMode ? 'bg-neutral-900 border-neutral-800' : 'bg-white border-gray-300'\n                                }`}>\n                                    <h3 className=\"text-[10px] font-bold mb-1.5 flex items-center gap-1 text-gray-400\">\n                                        <LucideIcon name=\"TrendingUp\" className=\"w-3 h-3 text-gray-500\" />\n                                        Comparaison Pairs\n                                    </h3>\n                                    <div style={{ width: '100%', height: 120 }}>\n                                        <div className=\"text-center text-gray-500 text-xs py-8\">\n                                            üìä Graphique Radar (Recharts n√©cessite une configuration avanc√©e)\n                                        </div>\n                                    </div>\n                                </div>\n\n                            </div>\n\n                            {/* Colonne droite */}\n                            <div className=\"col-span-4 space-y-2\">\n                                \n                                {/* Stats */}\n                                <div className=\"space-y-1.5\">\n                                    <div className={`border rounded-lg p-2 transition-colors duration-300 ${\n                                        isDarkMode ? 'bg-neutral-900 border-neutral-800' : 'bg-white border-gray-300'\n                                    }`}>\n                                        <div className=\"text-[8px] text-gray-600 mb-0.5\">Capitalisation</div>\n                                        <div className={`text-base font-bold transition-colors duration-300 ${\n                                            isDarkMode ? 'text-white' : 'text-gray-900'\n                                        }`}>{formatNumber(quote.marketCap)}</div>\n                                        <div className=\"text-[8px] text-gray-500\">P/E: {metrics.peRatioTTM?.toFixed(1) || 'N/A'}</div>\n                                    </div>\n\n                                    <div className={`border rounded-lg p-2 transition-colors duration-300 ${\n                                        isDarkMode ? 'bg-neutral-900 border-neutral-800' : 'bg-white border-gray-300'\n                                    }`}>\n                                        <div className=\"text-[8px] text-gray-600 mb-0.5\">Sentiment IA</div>\n                                        <div className=\"flex items-center gap-1.5\">\n                                            <div className=\"text-base font-bold text-emerald-500\">{sentiment.overall || 0}%</div>\n                                            <div className={`flex-1 h-1.5 rounded-full overflow-hidden ${\n                                                isDarkMode ? 'bg-neutral-700' : 'bg-gray-200'\n                                            }`}>\n                                                <div className=\"h-full bg-emerald-500\" style={{ width: `${sentiment.overall || 0}%` }}></div>\n                                            </div>\n                                        </div>\n                                        <div className=\"text-[8px] text-emerald-500 mt-0.5\">\n                                            {(sentiment.overall || 0) > 70 ? 'Tr√®s Bullish' : (sentiment.overall || 0) > 50 ? 'Bullish' : 'Neutre'}\n                                        </div>\n                                    </div>\n\n                                    <div className={`border rounded-lg p-2 transition-colors duration-300 ${\n                                        isDarkMode ? 'bg-neutral-900 border-neutral-800' : 'bg-white border-gray-300'\n                                    }`}>\n                                        <div className=\"text-[8px] text-gray-600 mb-0.5\">Prix Actuel</div>\n                                        <div className={`text-base font-bold transition-colors duration-300 ${\n                                            isDarkMode ? 'text-white' : 'text-gray-900'\n                                        }`}>${parseFloat(quote.price || 0).toFixed(2)}</div>\n                                        <div className=\"text-[8px] text-emerald-500 mt-0.5\">Volume: {formatNumber(quote.volume)}</div>\n                                    </div>\n                                </div>\n\n                                {/* Sentiment d√©taill√© */}\n                                {sentiment.overall && (\n                                    <div className={`border rounded-lg p-2 transition-colors duration-300 ${\n                                        isDarkMode ? 'bg-neutral-900 border-neutral-800' : 'bg-white border-gray-300'\n                                    }`}>\n                                        <h3 className=\"text-[9px] font-bold mb-1.5 flex items-center gap-1 text-gray-400\">\n                                            <LucideIcon name=\"Brain\" className=\"w-3 h-3 text-gray-500\" />\n                                            Sentiment IA\n                                        </h3>\n                                        <div style={{ width: '100%', height: 90 }}>\n                                            <div className=\"text-center text-gray-500 text-xs py-6\">\n                                                üìä Graphique Sentiment\n                                            </div>\n                                        </div>\n                                        {sentiment.summary && (\n                                            <div className={`mt-1.5 p-1.5 border rounded transition-colors duration-300 ${\n                                                isDarkMode ? 'bg-neutral-800 border-neutral-700' : 'bg-gray-50 border-gray-200'\n                                            }`}>\n                                                <div className=\"text-[8px] text-gray-400\">{sentiment.summary}</div>\n                                            </div>\n                                        )}\n                                    </div>\n                                )}\n\n                                {/* News */}\n                                <div className={`border rounded-lg p-2 transition-colors duration-300 ${\n                                    isDarkMode ? 'bg-neutral-900 border-neutral-800' : 'bg-white border-gray-300'\n                                }`}>\n                                    <h3 className=\"text-[9px] font-bold mb-1.5 flex items-center gap-1 text-gray-400\">\n                                        <LucideIcon name=\"Newspaper\" className=\"w-3 h-3 text-gray-500\" />\n                                        News Temps R√©el\n                                    </h3>\n                                    <div className=\"space-y-1 max-h-40 overflow-y-auto\">\n                                        {news.map((item, i) => (\n                                            <div key={i} className={`p-1.5 border rounded transition-all cursor-pointer ${\n                                                isDarkMode \n                                                    ? 'bg-neutral-800 border-neutral-700 hover:bg-neutral-750' \n                                                    : 'bg-gray-50 border-gray-200 hover:bg-gray-100'\n                                            }`}>\n                                                <div className=\"flex items-start justify-between mb-0.5\">\n                                                    <div className=\"text-[7px] px-1 py-0.5 rounded bg-emerald-900 text-emerald-500\">üìà</div>\n                                                    <span className=\"text-[7px] text-gray-600\">{formatTimeAgo(item.publishedDate)}</span>\n                                                </div>\n                                                <div className={`font-semibold text-[8px] mb-0.5 transition-colors duration-300 ${\n                                                    isDarkMode ? 'text-gray-300' : 'text-gray-700'\n                                                }`}>{item.title}</div>\n                                                <div className=\"text-[7px] text-gray-500\">{item.site}</div>\n                                            </div>\n                                        ))}\n                                    </div>\n                                </div>\n\n                            </div>\n                        </div>\n\n                        {/* Footer */}\n                        <div className={`mt-2 p-1.5 border rounded-lg transition-colors duration-300 ${\n                            isDarkMode ? 'bg-neutral-900 border-neutral-800' : 'bg-white border-gray-300'\n                        }`}>\n                            <div className=\"flex items-center gap-2\">\n                                <LucideIcon name=\"AlertCircle\" className=\"w-3 h-3 text-gray-500\" />\n                                <div className=\"flex-1\">\n                                    <div className=\"font-semibold text-[9px] text-gray-400\">\n                                        ‚úÖ Dashboard Hybride Fonctionnel\n                                    </div>\n                                    <div className=\"text-[7px] text-gray-600\">\n                                        Mode D√©mo ‚Ä¢ FMP (donn√©es pr√©cises) + Perplexity (intelligence IA)\n                                    </div>\n                                </div>\n                                <div className=\"text-right\">\n                                    <div className=\"text-[8px] text-gray-500 font-bold\">Hybride Optimal</div>\n                                    <div className=\"text-[7px] text-gray-600\">Pr√©cision + IA</div>\n                                </div>\n                                </div>\n                            </div>\n                        </div>\n                    </div>\n                );\n            };\n\n            // ============================================================================\n            // COMPOSANT PERPLEXITY AI - SUPPRIM√â (Redondant avec Emma En Direct)\n            // La fonctionnalit√© Perplexity est maintenant int√©gr√©e dans EmailBriefingsTab\n            // ============================================================================\n\n\n            // ============================================================================\n            // COMPOSANT CALENDRIER √âCONOMIQUE AM√âLIOR√â\n            // ============================================================================\n\n\nexport default IntelliStocksTab;\n","import React, { useState, useEffect, useRef, useCallback } from 'react';\nimport type { TabProps } from '../../types';\n\ndeclare const Chart: any;\ndeclare const Recharts: any;\ndeclare const LightweightCharts: any;\n\nexport const EconomicCalendarTab: React.FC<TabProps> = (props) => {\n    const { isDarkMode = true } = props;\n\n                // Initialize with fallback data so component is never blank\n                const [activeSubTab, setActiveSubTab] = useState('economic');\n                const [calendarData, setCalendarData] = useState([{\n                    date: 'Mon Oct 16',\n                    events: [\n                        {\n                            time: '12:55 PM',\n                            currency: 'USD',\n                            impact: 2,\n                            event: 'Fed Paulson Speech',\n                            actual: 'N/A',\n                            forecast: 'N/A',\n                            previous: 'N/A'\n                        },\n                        {\n                            time: '08:30 AM',\n                            currency: 'USD',\n                            impact: 3,\n                            event: 'NY Empire State Manufacturing Index',\n                            actual: '10.70',\n                            forecast: '-1.00',\n                            previous: '-8.70'\n                        }\n                    ]\n                }]);\n                const [loading, setLoading] = useState(false);\n                const [error, setError] = useState(null);\n                const [isRefreshing, setIsRefreshing] = useState(false);\n\n                // Finviz-style filters\n                const [searchQuery, setSearchQuery] = useState('');\n                const [filterImpact, setFilterImpact] = useState('all'); // all, 1, 2, 3\n                const [filterCurrency, setFilterCurrency] = useState('all');\n                const [filterTicker, setFilterTicker] = useState('all'); // For earnings/dividends\n                const [filterTickerGroup, setFilterTickerGroup] = useState('all'); // all, team, watchlist, both\n                const [dateRange, setDateRange] = useState('week'); // today, week, month\n                const [filterLargeCapOnly, setFilterLargeCapOnly] = useState(true); // Par d√©faut activ√© pour earnings\n                \n                // Liste des tickers Large Cap (S&P 500 principaux)\n                const largeCapTickers = [\n                    'AAPL', 'MSFT', 'GOOGL', 'GOOG', 'AMZN', 'NVDA', 'META', 'TSLA', 'BRK.B', 'UNH',\n                    'JNJ', 'V', 'XOM', 'WMT', 'JPM', 'MA', 'PG', 'CVX', 'HD', 'ABBV',\n                    'MRK', 'PEP', 'COST', 'AVGO', 'ADBE', 'TMO', 'CSCO', 'ACN', 'DHR', 'NFLX',\n                    'VZ', 'ABT', 'NKE', 'CMCSA', 'WFC', 'PM', 'TXN', 'LIN', 'NEE', 'DIS',\n                    'HON', 'QCOM', 'UPS', 'IBM', 'RTX', 'AMGN', 'T', 'SPGI', 'INTU', 'DE',\n                    'AMAT', 'LOW', 'SBUX', 'GS', 'CAT', 'AXP', 'BKNG', 'ADP', 'SYK', 'TJX',\n                    'GE', 'ISRG', 'VRTX', 'ZTS', 'MU', 'FI', 'C', 'MDT', 'GILD', 'REGN',\n                    'BLK', 'ETN', 'SHW', 'KLAC', 'WM', 'APH', 'LRCX', 'ADI', 'CDNS', 'SNPS'\n                ];\n\n                // Team and Watchlist tickers\n                const [teamTickers, setTeamTickers] = useState([]);\n                const [watchlistTickers, setWatchlistTickers] = useState([]);\n\n                // Helper function for fallback data\n                const getFallbackData = () => {\n                    return [{\n                        date: 'Mon Oct 16',\n                        events: [\n                            {\n                                time: '12:55 PM',\n                                currency: 'USD',\n                                impact: 2,\n                                event: 'Fed Paulson Speech',\n                                actual: 'N/A',\n                                forecast: 'N/A',\n                                previous: 'N/A'\n                            },\n                            {\n                                time: '08:30 AM',\n                                currency: 'USD',\n                                impact: 3,\n                                event: 'NY Empire State Manufacturing Index',\n                                actual: '10.70',\n                                forecast: '-1.00',\n                                previous: '-8.70'\n                            }\n                        ]\n                    }];\n                };\n\n                // Debug: Log du chargement du composant\n                console.log('üìÖ EconomicCalendarTab charg√©');\n                console.log('üìä Donn√©es init:', calendarData);\n                console.log('üîß √âtat du composant:', { activeSubTab, loading, error });\n\n                // Load team and watchlist tickers once on mount\n                React.useEffect(() => {\n                    const loadTickers = async () => {\n                        try {\n                            // Try to fetch from API first\n                            const response = await fetch('/api/tickers-config');\n                            const data = await response.json();\n\n                            if (data.success) {\n                                setTeamTickers(data.team_tickers || []);\n                                console.log(`‚úÖ Team tickers loaded: ${data.team_tickers?.length || 0}`);\n                            }\n                        } catch (error) {\n                            console.error('‚ùå Error loading team tickers:', error);\n                        }\n\n                        try {\n                            // Load watchlist from Supabase\n                            const response = await fetch('/api/supabase-watchlist');\n                            const data = await response.json();\n\n                            if (data.tickers && Array.isArray(data.tickers)) {\n                                setWatchlistTickers(data.tickers);\n                                console.log(`‚úÖ Watchlist tickers loaded: ${data.tickers.length}`);\n                            }\n                        } catch (error) {\n                            console.error('‚ùå Error loading watchlist tickers:', error);\n                            // Fallback to localStorage\n                            const savedWatchlist = localStorage.getItem('dans-watchlist');\n                            if (savedWatchlist) {\n                                const tickers = JSON.parse(savedWatchlist);\n                                setWatchlistTickers(tickers);\n                                console.log(`üì¶ Watchlist loaded from localStorage: ${tickers.length}`);\n                            }\n                        }\n                    };\n\n                    loadTickers();\n                }, []);\n\n                // Charger les donn√©es au changement d'onglet\n                React.useEffect(() => {\n                    fetchCalendarData();\n                    // Reset ticker filters when switching tabs\n                    setFilterTicker('all');\n                    setFilterTickerGroup('all');\n                    // Activer le filtre Large Cap par d√©faut pour earnings uniquement\n                    setFilterLargeCapOnly(activeSubTab === 'earnings');\n                }, [activeSubTab]);\n\n                const fetchCalendarData = async () => {\n                    console.log('üîÑ fetchCalendarData appel√© pour:', activeSubTab);\n                    setLoading(true);\n                    setError(null);\n\n                    try {\n                        if (activeSubTab === 'earnings') {\n                            // Connect to dedicated Earnings Calendar API with fallback chain\n                            const response = await fetch('/api/calendar-earnings');\n                            const result = await response.json();\n\n                            if (result.success && result.data) {\n                                setCalendarData(result.data);\n                                console.log(`‚úÖ ${result.data.length} earnings calendar days loaded from ${result.source}`);\n                                if (result.fallback_tried) {\n                                    console.log('‚ö†Ô∏è Fallback sources tried:', result.fallback_tried);\n                                }\n                            } else {\n                                setError('Aucune donn√©e d\\'earnings disponible');\n                                setCalendarData(getFallbackData());\n                            }\n                        } else if (activeSubTab === 'economic') {\n                            // Connect to dedicated Economic Calendar API with fallback chain\n                            const response = await fetch('/api/calendar-economic');\n                            const result = await response.json();\n\n                            if (result.success && result.data) {\n                                setCalendarData(result.data);\n                                console.log(`‚úÖ ${result.data.length} economic calendar days loaded from ${result.source}`);\n                                if (result.fallback_tried) {\n                                    console.log('‚ö†Ô∏è Fallback sources tried:', result.fallback_tried);\n                                }\n                            } else {\n                                setError('Aucune donn√©e √©conomique disponible');\n                                setCalendarData(getFallbackData());\n                            }\n                        } else if (activeSubTab === 'dividends') {\n                            // Connect to dedicated Dividends Calendar API\n                            const response = await fetch('/api/calendar-dividends');\n                            const result = await response.json();\n\n                            if (result.success && result.data) {\n                                setCalendarData(result.data);\n                                console.log(`‚úÖ ${result.data.length} dividend events loaded from ${result.source}`);\n                                if (result.fallback_tried) {\n                                    console.log('‚ö†Ô∏è Fallback sources tried:', result.fallback_tried);\n                                }\n                            } else {\n                                setError('Aucune donn√©e de dividendes disponible');\n                                setCalendarData(getFallbackData());\n                            }\n                        } else {\n                            setCalendarData(getFallbackData());\n                        }\n                    } catch (err) {\n                        console.error('‚ùå Erreur fetchCalendarData:', err);\n                        setError(`Impossible de charger les donn√©es: ${err.message}`);\n                        setCalendarData(getFallbackData());\n                    } finally {\n                        setLoading(false);\n                    }\n                };\n\n                const handleRefresh = async () => {\n                    console.log('üîÑ Actualisation du calendrier...');\n                    setIsRefreshing(true);\n                    await fetchCalendarData();\n                    setTimeout(() => setIsRefreshing(false), 1000);\n                };\n\n                const getImpactBars = (impact) => {\n                    const bars = [];\n                    const colors = ['bg-yellow-500', 'bg-green-500', 'bg-red-500'];\n                    for (let i = 0; i < 3; i++) {\n                        bars.push(\n                            <div\n                                key={i}\n                                className={`w-3 h-5 rounded-sm ${i < impact ? colors[i] : 'bg-gray-600'} ${\n                                    i < impact ? 'opacity-100' : 'opacity-30'\n                                }`}\n                            />\n                        );\n                    }\n                    return bars;\n                };\n\n                const getValueColor = (actual, forecast) => {\n                    if (actual === 'N/A' || forecast === 'N/A') return 'text-gray-400';\n                    const actualNum = parseFloat(actual);\n                    const forecastNum = parseFloat(forecast);\n                    if (actualNum > forecastNum) return 'text-green-400';\n                    if (actualNum < forecastNum) return 'text-red-400';\n                    return 'text-gray-400';\n                };\n\n                const getCurrencyFlag = (currency) => {\n                    const flags = {\n                        'USD': 'üá∫üá∏',\n                        'EUR': 'üá™üá∫',\n                        'GBP': 'üá¨üáß',\n                        'JPY': 'üáØüáµ',\n                        'CAD': 'üá®üá¶',\n                        'AUD': 'üá¶üá∫',\n                        'CHF': 'üá®üá≠',\n                        'CNY': 'üá®üá≥',\n                        'NZD': 'üá≥üáø'\n                    };\n                    return flags[currency] || 'üåç';\n                };\n\n                // Helper: Extract ticker symbol from event name (for earnings/dividends)\n                const extractTicker = (eventName) => {\n                    // Look for ticker pattern: \"AAPL Earnings\" or \"MSFT Dividend\"\n                    const match = eventName.match(/^([A-Z]{1,5})\\s/);\n                    return match ? match[1] : null;\n                };\n\n                // Helper: Determine event category for sorting\n                const getEventCategory = (event) => {\n                    // Extract ticker if available (for earnings/dividends)\n                    const ticker = extractTicker(event.event);\n                    \n                    // 1. Tickers d'√©quipe (priorit√© la plus haute)\n                    if (ticker && teamTickers.includes(ticker)) {\n                        return 1; // Team tickers\n                    }\n                    \n                    // 2. Donn√©es Canada (CAD currency ou ticker .TO)\n                    if (event.currency === 'CAD' || (ticker && ticker.endsWith('.TO'))) {\n                        return 2; // Canada\n                    }\n                    \n                    // 3. Donn√©es US (USD currency et ticker US)\n                    if (event.currency === 'USD' && (!ticker || !ticker.endsWith('.TO'))) {\n                        return 3; // US\n                    }\n                    \n                    // 4. Autres donn√©es\n                    return 4; // Other\n                };\n\n                // Helper: Sort events within a day\n                const sortEvents = (events) => {\n                    return [...events].sort((a, b) => {\n                        // First sort by category (team ‚Üí Canada ‚Üí US ‚Üí other)\n                        const categoryA = getEventCategory(a);\n                        const categoryB = getEventCategory(b);\n                        if (categoryA !== categoryB) {\n                            return categoryA - categoryB;\n                        }\n                        \n                        // Within same category, sort by time\n                        const timeA = a.time || '';\n                        const timeB = b.time || '';\n                        return timeA.localeCompare(timeB);\n                    });\n                };\n\n                // Filter calendar data based on user selections (Finviz-style)\n                const filteredCalendarData = (Array.isArray(calendarData) ? calendarData : []).map(day => {\n                    const filteredEvents = (Array.isArray(day.events) ? day.events : []).filter(event => {\n                        // Search query filter\n                        if (searchQuery && !event.event.toLowerCase().includes(searchQuery.toLowerCase())) {\n                            return false;\n                        }\n\n                        // Impact filter\n                        if (filterImpact !== 'all' && event.impact !== parseInt(filterImpact)) {\n                            return false;\n                        }\n\n                        // Currency filter\n                        if (filterCurrency !== 'all' && event.currency !== filterCurrency) {\n                            return false;\n                        }\n\n                        // Ticker filter (for earnings/dividends only)\n                        if (filterTicker !== 'all' && (activeSubTab === 'earnings' || activeSubTab === 'dividends')) {\n                            const ticker = extractTicker(event.event);\n                            if (!ticker || ticker !== filterTicker) {\n                                return false;\n                            }\n                        }\n\n                        // Ticker Group filter (Team/Watchlist/Both)\n                        if (filterTickerGroup !== 'all' && (activeSubTab === 'earnings' || activeSubTab === 'dividends')) {\n                            const ticker = extractTicker(event.event);\n                            if (!ticker) return false;\n\n                            const inTeam = teamTickers.includes(ticker);\n                            const inWatchlist = watchlistTickers.includes(ticker);\n\n                            if (filterTickerGroup === 'team' && !inTeam) {\n                                return false;\n                            }\n                            if (filterTickerGroup === 'watchlist' && !inWatchlist) {\n                                return false;\n                            }\n                            if (filterTickerGroup === 'both' && !(inTeam || inWatchlist)) {\n                                return false;\n                            }\n                        }\n\n                        // Large Cap filter (for earnings only, enabled by default)\n                        if (filterLargeCapOnly && activeSubTab === 'earnings') {\n                            const ticker = extractTicker(event.event);\n                            if (!ticker) return false;\n                            if (!largeCapTickers.includes(ticker)) {\n                                return false;\n                            }\n                        }\n\n                        return true;\n                    });\n\n                    // Sort events: Team tickers ‚Üí Canada ‚Üí US ‚Üí Other\n                    const sortedEvents = sortEvents(filteredEvents);\n                    \n                    return { ...day, events: sortedEvents };\n                }).filter(day => day.events.length > 0); // Remove days with no events\n\n                // Get unique currencies from data for filter dropdown\n                const availableCurrencies = [...new Set(\n                    (Array.isArray(calendarData) ? calendarData : []).flatMap(day =>\n                        (Array.isArray(day.events) ? day.events : []).map(e => e.currency || 'USD')\n                    )\n                )].sort();\n\n                // Get unique tickers from data for filter dropdown (earnings/dividends only)\n                const availableTickers = (activeSubTab === 'earnings' || activeSubTab === 'dividends')\n                    ? [...new Set(\n                        (Array.isArray(calendarData) ? calendarData : []).flatMap(day =>\n                            (Array.isArray(day.events) ? day.events : []).map(e => extractTicker(e.event)).filter(t => t !== null)\n                        )\n                    )].sort()\n                    : [];\n\n                return (\n                    <div className={`${isDarkMode ? 'bg-gray-900 text-gray-200' : 'bg-white text-gray-900'} p-6`}>\n                        <div className=\"max-w-full\">\n                            {/* Header */}\n                            <div className=\"flex items-center justify-between mb-4\">\n                                <div className=\"flex items-center gap-3\">\n                                    <div className=\"text-2xl\">üìÖ</div>\n                                    <h2 className=\"text-2xl font-bold\">Calendrier financier</h2>\n                                </div>\n                                <button\n                                    onClick={handleRefresh}\n                                    disabled={loading || isRefreshing}\n                                    className={`flex items-center gap-2 px-3 py-2 rounded-lg transition-colors text-sm ${\n                                        loading || isRefreshing\n                                            ? 'bg-gray-600 text-gray-400 cursor-not-allowed'\n                                            : 'bg-gray-800 hover:bg-gray-700 text-white'\n                                    }`}\n                                >\n                                    <div className={`w-4 h-4 ${loading || isRefreshing ? 'animate-spin' : ''}`}>\n                                        üîÑ\n                                    </div>\n                                    Actualiser\n                                </button>\n                            </div>\n\n                            {/* Finviz-Style Filter Bar */}\n                            <div className={`${isDarkMode ? 'bg-gray-800' : 'bg-gray-100'} rounded-lg p-4 mb-4`}>\n                                <div className={`grid grid-cols-1 gap-3 ${\n                                    activeSubTab === 'earnings' || activeSubTab === 'dividends'\n                                        ? 'md:grid-cols-6'\n                                        : 'md:grid-cols-4'\n                                }`}>\n                                    {/* Search Box */}\n                                    <div className=\"col-span-1 md:col-span-2\">\n                                        <input\n                                            type=\"text\"\n                                            placeholder=\"üîç Rechercher un √©v√©nement...\"\n                                            value={searchQuery}\n                                            onChange={(e) => setSearchQuery(e.target.value)}\n                                            className={`w-full px-3 py-2 rounded-md text-sm ${\n                                                isDarkMode\n                                                    ? 'bg-gray-700 text-white border-gray-600'\n                                                    : 'bg-white text-gray-900 border-gray-300'\n                                            } border focus:outline-none focus:ring-2 focus:ring-blue-500`}\n                                        />\n                                    </div>\n\n                                    {/* Ticker Group Filter - Only for Earnings/Dividends */}\n                                    {(activeSubTab === 'earnings' || activeSubTab === 'dividends') && (\n                                        <div>\n                                            <select\n                                                value={filterTickerGroup}\n                                                onChange={(e) => {\n                                                    setFilterTickerGroup(e.target.value);\n                                                    // Reset individual ticker filter when changing group\n                                                    if (e.target.value !== 'all') {\n                                                        setFilterTicker('all');\n                                                    }\n                                                }}\n                                                className={`w-full px-3 py-2 rounded-md text-sm ${\n                                                    isDarkMode\n                                                        ? 'bg-gray-700 text-white border-gray-600'\n                                                        : 'bg-white text-gray-900 border-gray-300'\n                                                } border focus:outline-none focus:ring-2 focus:ring-blue-500`}\n                                            >\n                                                <option value=\"all\">Tous les titres</option>\n                                                <option value=\"team\">üë• √âquipe ({teamTickers.length})</option>\n                                                <option value=\"watchlist\">‚≠ê Liste de suivi ({watchlistTickers.length})</option>\n                                                <option value=\"both\">üéØ √âquipe + Liste ({teamTickers.length + watchlistTickers.length})</option>\n                                            </select>\n                                        </div>\n                                    )}\n\n                                    {/* Ticker Filter - Only for Earnings/Dividends */}\n                                    {(activeSubTab === 'earnings' || activeSubTab === 'dividends') && (\n                                        <div>\n                                            <select\n                                                value={filterTicker}\n                                                onChange={(e) => setFilterTicker(e.target.value)}\n                                                disabled={filterTickerGroup !== 'all'}\n                                                className={`w-full px-3 py-2 rounded-md text-sm ${\n                                                    isDarkMode\n                                                        ? 'bg-gray-700 text-white border-gray-600'\n                                                        : 'bg-white text-gray-900 border-gray-300'\n                                                } border focus:outline-none focus:ring-2 focus:ring-blue-500 ${\n                                                    filterTickerGroup !== 'all' ? 'opacity-50 cursor-not-allowed' : ''\n                                                }`}\n                                            >\n                                                <option value=\"all\">S√©lectionner un ticker ({availableTickers.length})</option>\n                                                {availableTickers.map(ticker => (\n                                                    <option key={ticker} value={ticker}>\n                                                        {ticker}\n                                                    </option>\n                                                ))}\n                                            </select>\n                                        </div>\n                                    )}\n\n                                    {/* Impact Filter */}\n                                    <div>\n                                        <select\n                                            value={filterImpact}\n                                            onChange={(e) => setFilterImpact(e.target.value)}\n                                            className={`w-full px-3 py-2 rounded-md text-sm ${\n                                                isDarkMode\n                                                    ? 'bg-gray-700 text-white border-gray-600'\n                                                    : 'bg-white text-gray-900 border-gray-300'\n                                            } border focus:outline-none focus:ring-2 focus:ring-blue-500`}\n                                            >\n                                                <option value=\"all\">Tous les impacts</option>\n                                                <option value=\"3\">üî¥ Impact √©lev√©</option>\n                                                <option value=\"2\">üü† Impact moyen</option>\n                                                <option value=\"1\">üü° Impact faible</option>\n                                        </select>\n                                    </div>\n\n                                    {/* Currency Filter */}\n                                    <div>\n                                        <select\n                                            value={filterCurrency}\n                                            onChange={(e) => setFilterCurrency(e.target.value)}\n                                            className={`w-full px-3 py-2 rounded-md text-sm ${\n                                                isDarkMode\n                                                    ? 'bg-gray-700 text-white border-gray-600'\n                                                    : 'bg-white text-gray-900 border-gray-300'\n                                            } border focus:outline-none focus:ring-2 focus:ring-blue-500`}\n                                            >\n                                                <option value=\"all\">Toutes les devises</option>\n                                                {availableCurrencies.map(curr => (\n                                                    <option key={curr} value={curr}>\n                                                        {getCurrencyFlag(curr)} {curr}\n                                                </option>\n                                            ))}\n                                        </select>\n                                    </div>\n\n                                    {/* Large Cap Filter - Only for Earnings */}\n                                    {activeSubTab === 'earnings' && (\n                                        <div className=\"flex items-center\">\n                                            <label className={`flex items-center gap-2 px-3 py-2 rounded-md text-sm cursor-pointer transition-colors ${\n                                                isDarkMode\n                                                    ? filterLargeCapOnly ? 'bg-blue-600 text-white' : 'bg-gray-700 text-gray-300 hover:bg-gray-600'\n                                                    : filterLargeCapOnly ? 'bg-blue-500 text-white' : 'bg-white text-gray-700 hover:bg-gray-50'\n                                            } border ${isDarkMode ? 'border-gray-600' : 'border-gray-300'}`}>\n                                                <input\n                                                    type=\"checkbox\"\n                                                    checked={filterLargeCapOnly}\n                                                    onChange={(e) => setFilterLargeCapOnly(e.target.checked)}\n                                                    className=\"w-4 h-4 cursor-pointer\"\n                                                />\n                                                <span className=\"font-medium\">Grandes capitalisations seulement</span>\n                                            </label>\n                                        </div>\n                                    )}\n                                </div>\n\n                                {/* Active Filters Display */}\n                                {(searchQuery || filterImpact !== 'all' || filterCurrency !== 'all' || filterTicker !== 'all' || filterTickerGroup !== 'all' || (activeSubTab === 'earnings' && filterLargeCapOnly)) && (\n                                    <div className=\"flex flex-wrap gap-2 mt-3\">\n                                        <span className=\"text-xs text-gray-400\">Filtres actifs :</span>\n                                        {activeSubTab === 'earnings' && filterLargeCapOnly && (\n                                            <span className={`text-xs px-2 py-1 rounded ${isDarkMode ? 'bg-blue-900 text-blue-200' : 'bg-blue-100 text-blue-800'}`}>\n                                                üìä Grandes capitalisations\n                                            </span>\n                                        )}\n                                        {searchQuery && (\n                                            <span className={`text-xs px-2 py-1 rounded ${isDarkMode ? 'bg-gray-900 text-gray-200' : 'bg-gray-700 text-gray-200'}`}>\n                                                Recherche¬†: \"{searchQuery}\"\n                                            </span>\n                                        )}\n                                        {filterTickerGroup !== 'all' && (\n                                            <span className={`text-xs px-2 py-1 rounded ${isDarkMode ? 'bg-cyan-900 text-cyan-200' : 'bg-cyan-100 text-cyan-800'}`}>\n                                                {filterTickerGroup === 'team' ? 'üë• Tickers √©quipe' :\n                                                 filterTickerGroup === 'watchlist' ? '‚≠ê Tickers liste de suivi' :\n                                                 'üéØ √âquipe + Liste de suivi'}\n                                            </span>\n                                        )}\n                                        {filterTicker !== 'all' && (\n                                            <span className={`text-xs px-2 py-1 rounded ${isDarkMode ? 'bg-purple-900 text-purple-200' : 'bg-purple-100 text-purple-800'}`}>\n                                                Ticker¬†: {filterTicker}\n                                            </span>\n                                        )}\n                                        {filterImpact !== 'all' && (\n                                            <span className={`text-xs px-2 py-1 rounded ${isDarkMode ? 'bg-green-900 text-green-200' : 'bg-green-100 text-green-800'}`}>\n                                                Impact¬†: {filterImpact === '3' ? '√âlev√©' : filterImpact === '2' ? 'Moyen' : 'Faible'}\n                                            </span>\n                                        )}\n                                        {filterCurrency !== 'all' && (\n                                            <span className={`text-xs px-2 py-1 rounded ${isDarkMode ? 'bg-green-900 text-green-200' : 'bg-green-100 text-green-800'}`}>\n                                                Devise¬†: {filterCurrency}\n                                            </span>\n                                        )}\n                                        <button\n                                            onClick={() => {\n                                                setSearchQuery('');\n                                                setFilterImpact('all');\n                                                setFilterCurrency('all');\n                                                setFilterTicker('all');\n                                                setFilterTickerGroup('all');\n                                                setFilterLargeCapOnly(activeSubTab === 'earnings'); // R√©initialiser √† la valeur par d√©faut selon l'onglet\n                                            }}\n                                            className=\"text-xs text-red-400 hover:text-red-300 underline\"\n                                        >\n                                            R√©initialiser\n                                        </button>\n                                    </div>\n                                )}\n                            </div>\n\n                            {/* Message d'erreur */}\n                            {error && (\n                                <div className=\"bg-red-900/50 border border-red-500 text-red-200 px-4 py-3 rounded-lg mb-4 text-sm\">\n                                    ‚ö†Ô∏è {error}\n                                </div>\n                            )}\n\n                            {/* Onglets internes */}\n                            <div className=\"flex gap-0 mb-4 border-b border-gray-700\">\n                                <button\n                                    onClick={() => setActiveSubTab('economic')}\n                                    className={`px-4 py-2 font-medium transition-colors text-sm ${\n                                        activeSubTab === 'economic'\n                                            ? 'bg-gray-800 text-white'\n                                            : `${isDarkMode ? 'bg-gray-800 text-gray-400 hover:bg-gray-700' : 'bg-gray-100 text-gray-600 hover:bg-gray-200'}`\n                                    }`}\n                                >\n                                    √âconomique\n                                </button>\n                                <button\n                                    onClick={() => setActiveSubTab('earnings')}\n                                    className={`px-4 py-2 font-medium transition-colors text-sm ${\n                                        activeSubTab === 'earnings'\n                                            ? 'bg-gray-800 text-white'\n                                            : `${isDarkMode ? 'bg-gray-800 text-gray-400 hover:bg-gray-700' : 'bg-gray-100 text-gray-600 hover:bg-gray-200'}`\n                                    }`}\n                                >\n                                    Earnings\n                                </button>\n                                <button\n                                    onClick={() => setActiveSubTab('dividends')}\n                                    className={`px-4 py-2 font-medium transition-colors text-sm ${\n                                        activeSubTab === 'dividends'\n                                            ? 'bg-gray-800 text-white'\n                                            : `${isDarkMode ? 'bg-gray-800 text-gray-400 hover:bg-gray-700' : 'bg-gray-100 text-gray-600 hover:bg-gray-200'}`\n                                    }`}\n                                >\n                                    Dividendes\n                                </button>\n                            </div>\n\n                            {/* Contenu */}\n                            {loading ? (\n                                <div className={`${isDarkMode ? 'bg-gray-800' : 'bg-gray-100'} rounded-lg p-8 text-center`}>\n                                    <div className=\"w-8 h-8 text-blue-500 animate-spin mx-auto mb-3\">üîÑ</div>\n                                    <p className=\"text-gray-400 text-sm\">Loading data...</p>\n                                </div>\n                            ) : filteredCalendarData.length === 0 ? (\n                                <div className={`${isDarkMode ? 'bg-gray-800' : 'bg-gray-100'} rounded-lg p-8 text-center`}>\n                                    <p className=\"text-gray-400 text-sm\">\n                                        {calendarData.length === 0 ? 'No data available' : 'No events match your filters'}\n                                    </p>\n                                    {calendarData.length > 0 && (\n                                        <button\n                                            onClick={() => {\n                                                setSearchQuery('');\n                                                setFilterImpact('all');\n                                                setFilterCurrency('all');\n                                            }}\n                                            className=\"mt-3 text-blue-400 hover:text-blue-300 underline text-sm\"\n                                        >\n                                            Clear filters\n                                        </button>\n                                    )}\n                                </div>\n                            ) : (\n                                <div className={`${isDarkMode ? 'bg-gray-800' : 'bg-gray-100'} rounded-lg overflow-hidden shadow-lg`}>\n                                    {filteredCalendarData.map((day, dayIndex) => (\n                                        <div key={dayIndex} className=\"border-b border-gray-700 last:border-b-0\">\n                                            {/* Day Header */}\n                                            <div className={`${isDarkMode ? 'bg-gray-750' : 'bg-gray-200'} px-4 py-2 font-semibold text-sm`}>\n                                                {day.date}\n                                            </div>\n\n                                            {/* Column Headers - Finviz Style */}\n                                            {dayIndex === 0 && (\n                                                <div className={`grid grid-cols-[80px_1fr_80px_60px_90px_90px_90px] gap-3 px-4 py-3 ${\n                                                    isDarkMode ? 'bg-gray-900' : 'bg-gray-300'\n                                                } text-xs font-bold ${isDarkMode ? 'text-gray-300' : 'text-gray-700'} border-b-2 ${\n                                                    isDarkMode ? 'border-gray-600' : 'border-gray-400'\n                                                }`}>\n                                                    <div>TIME</div>\n                                                    <div>EVENT</div>\n                                                    <div>IMPACT</div>\n                                                    <div>FOR</div>\n                                                    <div className=\"text-center\">ACTUAL</div>\n                                                    <div className=\"text-center\">FORECAST</div>\n                                                    <div className=\"text-center\">PREVIOUS</div>\n                                                </div>\n                                            )}\n\n                                            {/* Events - Finviz Style */}\n                                            {day.events.map((event, eventIndex) => (\n                                                <div\n                                                    key={eventIndex}\n                                                    className={`grid grid-cols-[80px_1fr_80px_60px_90px_90px_90px] gap-3 px-4 py-3 ${\n                                                        isDarkMode ? 'hover:bg-gray-750' : 'hover:bg-gray-200'\n                                                    } transition-colors border-b ${\n                                                        isDarkMode ? 'border-gray-700' : 'border-gray-300'\n                                                    } last:border-b-0 items-center text-sm`}\n                                                >\n                                                    <div className={`${isDarkMode ? 'text-gray-400' : 'text-gray-600'} font-mono text-xs`}>\n                                                        {event.time}\n                                                    </div>\n                                                    <div className=\"font-medium flex items-center gap-2\" title={event.event}>\n                                                        <span className=\"text-lg\">{getCurrencyFlag(event.currency)}</span>\n                                                        <span className={`${isDarkMode ? 'text-gray-200' : 'text-gray-800'} truncate`}>\n                                                            {event.event}\n                                                        </span>\n                                                    </div>\n                                                    <div className=\"flex gap-1\">{getImpactBars(event.impact)}</div>\n                                                    <div className={`${isDarkMode ? 'text-gray-400' : 'text-gray-600'} font-semibold text-xs`}>\n                                                        {event.currency}\n                                                    </div>\n                                                    <div className={`text-center font-bold ${getValueColor(event.actual, event.forecast)}`}>\n                                                        {event.actual}\n                                                    </div>\n                                                    <div className={`text-center ${isDarkMode ? 'text-gray-400' : 'text-gray-600'}`}>\n                                                        {event.forecast}\n                                                    </div>\n                                                    <div className={`text-center ${isDarkMode ? 'text-gray-400' : 'text-gray-600'}`}>\n                                                        {event.previous}\n                                                    </div>\n                                                </div>\n                                            ))}\n                                        </div>\n                                    ))}\n                                </div>\n                            )}\n\n                            {/* Footer Info - Finviz Style */}\n                            <div className={`mt-4 ${isDarkMode ? 'bg-gray-800' : 'bg-gray-100'} rounded-lg p-4`}>\n                                <div className=\"flex flex-wrap items-center gap-4 text-xs\">\n                                    <div className=\"flex items-center gap-2\">\n                                        <span className={`${isDarkMode ? 'text-gray-400' : 'text-gray-600'}`}>\n                                            Showing {filteredCalendarData.reduce((acc, day) => acc + day.events.length, 0)} events\n                                        </span>\n                                    </div>\n                                    <div className=\"flex items-center gap-2\">\n                                        <span className=\"font-semibold ${isDarkMode ? 'text-gray-300' : 'text-gray-700'}\">Impact:</span>\n                                        <div className=\"flex items-center gap-1\">\n                                            <div className=\"w-3 h-3 bg-red-500 rounded-sm\"></div>\n                                            <span className={`${isDarkMode ? 'text-gray-400' : 'text-gray-600'}`}>High</span>\n                                        </div>\n                                        <div className=\"flex items-center gap-1\">\n                                            <div className=\"w-3 h-3 bg-green-500 rounded-sm\"></div>\n                                            <span className={`${isDarkMode ? 'text-gray-400' : 'text-gray-600'}`}>Medium</span>\n                                        </div>\n                                        <div className=\"flex items-center gap-1\">\n                                            <div className=\"w-3 h-3 bg-yellow-500 rounded-sm\"></div>\n                                            <span className={`${isDarkMode ? 'text-gray-400' : 'text-gray-600'}`}>Low</span>\n                                        </div>\n                                    </div>\n                                    <div className={`ml-auto ${isDarkMode ? 'text-gray-500' : 'text-gray-500'} text-xs italic`}>\n                                        Data powered by FMP API\n                                    </div>\n                                </div>\n                            </div>\n                        </div>\n                    </div>\n                );\n            };\n\n            // ============================================================================\n            // COMPOSANT CALENDRIER INVESTING.COM\n            // ============================================================================\n\n\nexport default EconomicCalendarTab;\n","import React, { useState, useEffect } from 'react';\n\n// Import des tabs\nimport AdminJSLaiTab from './tabs/AdminJSLaiTab';\nimport PlusTab from './tabs/PlusTab';\nimport DansWatchlistTab from './tabs/DansWatchlistTab';\nimport StocksNewsTab from './tabs/StocksNewsTab';\nimport IntelliStocksTab from './tabs/IntelliStocksTab';\nimport EconomicCalendarTab from './tabs/EconomicCalendarTab';\nimport type { TabName, StockData, NewsArticle } from '../types';\n\nexport const BetaCombinedDashboard: React.FC = () => {\n    const [activeTab, setActiveTab] = useState<TabName>('stocks-news');\n    const [isDarkMode, setIsDarkMode] = useState(true);\n\n    // √âtats pour les donn√©es\n    const [tickers, setTickers] = useState<string[]>([]); // Vide au d√©part, charg√© depuis Supabase\n    const [stockData, setStockData] = useState<Record<string, StockData>>({});\n    const [newsData, setNewsData] = useState<NewsArticle[]>([]);\n    const [loading, setLoading] = useState(false);\n    const [lastUpdate, setLastUpdate] = useState<Date | null>(null);\n    const [initialLoadComplete, setInitialLoadComplete] = useState(false);\n\n    // Configuration API\n    const API_BASE_URL = typeof window !== 'undefined' ? window.location.origin : '';\n\n    // Fonction utilitaire: fetch stock data\n    const fetchStockData = async (ticker: string) => {\n        try {\n            const response = await fetch(`${API_BASE_URL}/api/marketdata?endpoint=quote&symbol=${ticker}&source=auto`);\n            if (!response.ok) throw new Error(`API error: ${response.status}`);\n            return await response.json();\n        } catch (error) {\n            console.error(`Erreur fetch ${ticker}:`, error);\n            return null;\n        }\n    };\n\n    // Fonction utilitaire: afficher message toast\n    const showMessage = (message: string, type: 'success' | 'error' | 'info' = 'info') => {\n        console.log(`[${type.toUpperCase()}] ${message}`);\n        // TODO: Impl√©menter un vrai syst√®me de toast notifications\n    };\n\n    // Fonction utilitaire: obtenir logo company\n    const getCompanyLogo = (ticker: string) => {\n        return `https://financialmodelingprep.com/image-stock/${ticker}.png`;\n    };\n\n    // Fonction utilitaire: Emma populate watchlist (placeholder)\n    const emmaPopulateWatchlist = async () => {\n        console.log('Emma populate watchlist appel√©');\n        // TODO: Impl√©menter logique Emma\n    };\n\n    // Effet: charger watchlist depuis Supabase puis les donn√©es\n    useEffect(() => {\n        const loadInitialData = async () => {\n            setLoading(true);\n            try {\n                // 1. Charger watchlist depuis Supabase\n                console.log('üìä Chargement watchlist depuis Supabase...');\n                const watchlistRes = await fetch('/api/supabase-watchlist');\n\n                if (watchlistRes.ok) {\n                    const watchlistData = await watchlistRes.json();\n                    const tickersFromSupabase = watchlistData.data?.map((item: any) => item.symbol) || [];\n\n                    if (tickersFromSupabase.length > 0) {\n                        console.log(`‚úÖ ${tickersFromSupabase.length} tickers charg√©s depuis Supabase:`, tickersFromSupabase);\n                        setTickers(tickersFromSupabase);\n\n                        // 2. Charger donn√©es pour ces tickers\n                        const promises = tickersFromSupabase.map((ticker: string) => fetchStockData(ticker));\n                        const results = await Promise.all(promises);\n\n                        const newStockData: Record<string, StockData> = {};\n                        results.forEach((data, index) => {\n                            if (data) {\n                                newStockData[tickersFromSupabase[index]] = {\n                                    symbol: tickersFromSupabase[index],\n                                    price: data.c || data.price,\n                                    change: data.d || data.change,\n                                    changePercent: data.dp || data.changePercent,\n                                    ...data\n                                };\n                            }\n                        });\n\n                        setStockData(newStockData);\n                        setLastUpdate(new Date());\n                    } else {\n                        console.log('‚ÑπÔ∏è Watchlist vide dans Supabase - aucun ticker charg√©');\n                    }\n                } else {\n                    console.warn('‚ö†Ô∏è Impossible de charger watchlist depuis Supabase, utilisation locale');\n                    // Fallback: tickers par d√©faut si Supabase √©choue\n                    const defaultTickers = ['AAPL', 'GOOGL', 'MSFT', 'TSLA', 'NVDA'];\n                    setTickers(defaultTickers);\n                }\n\n                setInitialLoadComplete(true);\n            } catch (error) {\n                console.error('‚ùå Erreur chargement initial:', error);\n                // Fallback en cas d'erreur\n                setTickers(['AAPL', 'GOOGL', 'MSFT', 'TSLA', 'NVDA']);\n                setInitialLoadComplete(true);\n            } finally {\n                setLoading(false);\n            }\n        };\n\n        if (!initialLoadComplete) {\n            loadInitialData();\n        }\n    }, []);\n\n    // Props compl√®tes pour les tabs\n    const tabProps = {\n        isDarkMode,\n        tickers,\n        setTickers,\n        stockData,\n        setStockData,\n        newsData,\n        setNewsData,\n        loading,\n        setLoading,\n        lastUpdate,\n        setLastUpdate,\n        initialLoadComplete,\n        API_BASE_URL,\n        fetchStockData,\n        showMessage,\n        getCompanyLogo,\n        emmaPopulateWatchlist\n    };\n\n    const renderActiveTab = () => {\n        switch (activeTab) {\n            case 'stocks-news': return <StocksNewsTab {...tabProps} />;\n            case 'intellistocks': return <IntelliStocksTab {...tabProps} />;\n            case 'admin-jslai': return <AdminJSLaiTab {...tabProps} />;\n            case 'plus': return <PlusTab {...tabProps} />;\n            case 'watchlist': return <DansWatchlistTab {...tabProps} />;\n            case 'economic-calendar': return <EconomicCalendarTab {...tabProps} />;\n            default: return <StocksNewsTab {...tabProps} />;\n        }\n    };\n\n    return (\n        <div className=\"min-h-screen bg-gray-900 text-white\">\n            {/* Header */}\n            <header className=\"bg-gray-800 border-b border-gray-700 p-4\">\n                <div className=\"flex items-center justify-between\">\n                    <h1 className=\"text-2xl font-bold\">GOB Dashboard</h1>\n                    <button\n                        onClick={() => setIsDarkMode(!isDarkMode)}\n                        className=\"px-4 py-2 bg-gray-700 hover:bg-gray-600 rounded-lg transition-colors\"\n                    >\n                        {isDarkMode ? '‚òÄÔ∏è Light' : 'üåô Dark'}\n                    </button>\n                </div>\n            </header>\n\n            {/* Navigation Tabs */}\n            <nav className=\"bg-gray-800 border-b border-gray-700 px-4\">\n                <div className=\"flex gap-2 overflow-x-auto\">\n                    {[\n                        { id: 'stocks-news' as TabName, label: 'üìä Stocks & News' },\n                        { id: 'intellistocks' as TabName, label: 'üß† IntelliStocks' },\n                        { id: 'watchlist' as TabName, label: '‚≠ê Watchlist' },\n                        { id: 'economic-calendar' as TabName, label: 'üìÖ Calendar' },\n                        { id: 'admin-jslai' as TabName, label: '‚öôÔ∏è Admin' },\n                        { id: 'plus' as TabName, label: '‚ûï Plus' }\n                    ].map(tab => (\n                        <button\n                            key={tab.id}\n                            onClick={() => setActiveTab(tab.id)}\n                            className={`px-4 py-3 whitespace-nowrap transition-colors ${\n                                activeTab === tab.id\n                                    ? 'bg-blue-600 text-white border-b-2 border-blue-400'\n                                    : 'text-gray-400 hover:text-white hover:bg-gray-700'\n                            }`}\n                        >\n                            {tab.label}\n                        </button>\n                    ))}\n                </div>\n            </nav>\n\n            {/* Content */}\n            <main className=\"p-6\">\n                {renderActiveTab()}\n            </main>\n        </div>\n    );\n};\n\nexport default BetaCombinedDashboard;\n","import React from 'react';\n\n// ====================================================================\n// ICON MAPPING SYSTEM\n// ====================================================================\n// IconoirIcon component + ProfessionalModeSystem\n// Compatible avec le code legacy qui utilise window.IconoirIcon\n\nexport interface IconProps {\n    name: string;\n    className?: string;\n}\n\n// Mapping des noms Lucide vers classes Iconoir\nconst iconMap: Record<string, string> = {\n    // Actions & UI\n    'Activity': 'activity',\n    'Wifi': 'wifi',\n    'WifiOff': 'wifi-off',\n    'RefreshCw': 'refresh-double',\n    'Refresh': 'refresh',\n    'ChevronDown': 'nav-arrow-down',\n    'Bell': 'bell',\n    'Search': 'search',\n    'Settings': 'settings',\n    'AlertTriangle': 'warning-triangle',\n    'AlertCircle': 'info-circle',\n    'HelpCircle': 'help-circle',\n    'LifeBuoy': 'lifebelt',\n    'X': 'xmark',\n    'Close': 'xmark',\n    'Plus': 'plus',\n    'Minus': 'minus',\n\n    // Graphiques & Finance\n    'BarChart3': 'stat-up',\n    'Brain': 'brain',\n    'TrendingUp': 'trending-up',\n    'TrendingDown': 'trending-down',\n    'GraphUp': 'graph-up',\n    'ChartLine': 'chart-line',\n    'DollarSign': 'dollar',\n\n    // Documents & Communication\n    'Newspaper': 'newspaper',\n    'Page': 'page',\n    'FileText': 'page',\n    'Briefcase': 'briefcase',\n\n    // Navigation & Arrows\n    'ArrowUpRight': 'arrow-tr',\n    'ArrowDownRight': 'arrow-br',\n    'ArrowUp': 'arrow-up',\n    'ArrowDown': 'arrow-down',\n\n    // Special\n    'Fire': 'sparks',\n    'Target': 'target',\n    'Shield': 'shield',\n    'Sparkles': 'sparks',\n    'ExternalLink': 'open-new-window',\n    'Users': 'group',\n    'User': 'user',\n\n    // Calendar & Time\n    'Calendar': 'calendar',\n    'Clock': 'clock',\n\n    // Media\n    'Image': 'media-image',\n    'Video': 'media-video',\n\n    // Others\n    'Star': 'star',\n    'StarFilled': 'star-solid',\n    'Rocket': 'rocket',\n    'Database': 'database',\n    'Code': 'code',\n    'Mail': 'mail',\n    'Phone': 'phone',\n    'Globe': 'globe',\n    'Building': 'building',\n    'ChatBubble': 'chat-bubble'\n};\n\n// Mapping emoji ‚Üí ic√¥ne Iconoir\nconst emojiToIcon: Record<string, string> = {\n    'üì°': 'antenna-signal',\n    '‚öôÔ∏è': 'settings',\n    'üìÖ': 'calendar',\n    'üåÖ': 'sun-light',\n    '‚òÄÔ∏è': 'sun-light',\n    'üåÜ': 'building',\n    'üìä': 'stat-up',\n    'üìà': 'trending-up',\n    'üìâ': 'trending-down',\n    'ü§ñ': 'brain',\n    'üí¨': 'chat-bubble',\n    'üîç': 'search',\n    'üìù': 'page',\n    'üéØ': 'target',\n    'üíº': 'briefcase',\n    'üåê': 'globe',\n    'üí∞': 'dollar',\n    'üè¢': 'building',\n    'üìß': 'mail',\n    'üîî': 'bell',\n    '‚è∞': 'clock',\n    '‚úÖ': 'check-circle',\n    '‚ùå': 'xmark-circle',\n    '‚ö†Ô∏è': 'warning-triangle',\n    'üöÄ': 'rocket',\n    'üî•': 'sparks',\n    'üí°': 'light-bulb',\n    'üß†': 'brain',\n    'üì∞': 'newspaper',\n    'üíµ': 'dollar',\n    'üì≤': 'smartphone-device',\n    'üé®': 'palette',\n    'üîí': 'lock',\n    'üîì': 'lock-unlock',\n    'üë§': 'user',\n    'üë•': 'group',\n    '‚≠ê': 'star',\n    'üèÜ': 'trophy',\n    'üìå': 'pin',\n    'üîó': 'link',\n    'üñºÔ∏è': 'media-image',\n    'üì∏': 'camera',\n    'üé¨': 'movie',\n    'üéµ': 'music-note',\n    'üìÅ': 'folder',\n    'üìÑ': 'page',\n    'üíª': 'laptop',\n    '‚å®Ô∏è': 'keyboard',\n    'üñ±Ô∏è': 'mouse-button-right',\n    'üñ•Ô∏è': 'pc-monitor',\n    'üì±': 'smartphone-device',\n    'üîã': 'battery-charging',\n    'üîå': 'plug',\n    'üõ†Ô∏è': 'tools',\n    'üéì': 'graduation-cap',\n    'üìö': 'book-stack',\n    'üìñ': 'book',\n    '‚úèÔ∏è': 'edit-pencil',\n    'üñäÔ∏è': 'pen',\n    'üìé': 'attachment',\n    'üìç': 'pin-alt',\n    'üß≠': 'compass',\n    'üó∫Ô∏è': 'map',\n    'üè†': 'home',\n    'üè™': 'shop',\n    'üè¨': 'city',\n    'üè≠': 'industry',\n    '‚ö°': 'flash',\n    'üåü': 'star-solid',\n    'üíé': 'gem-stone',\n    'üéÅ': 'gift',\n    'üõí': 'cart',\n    'üí≥': 'credit-card',\n    'üéâ': 'party',\n    'üéä': 'gift',\n    'üîê': 'lock',\n    'üéÆ': 'gamepad',\n    'üé≤': 'dice'\n};\n\n// IconoirIcon Component\nexport const IconoirIcon: React.FC<IconProps> = ({ name, className = 'w-4 h-4' }) => {\n    const iconClass = iconMap[name] || iconMap['Activity'];\n    return <i className={`iconoir-${iconClass} ${className}`} style={{ fontSize: 'inherit' }}></i>;\n};\n\n// Professional Mode System\nexport const ProfessionalModeSystem = {\n    isEnabled: function (): boolean {\n        const stored = localStorage.getItem('gobapps-professional-mode');\n        return stored === 'true' || stored === null; // Default: Professional Mode ON\n    },\n\n    toggle: function (): boolean {\n        const newMode = !this.isEnabled();\n        localStorage.setItem('gobapps-professional-mode', newMode.toString());\n        window.dispatchEvent(new CustomEvent('professional-mode-changed', {\n            detail: { enabled: newMode }\n        }));\n        return newMode;\n    },\n\n    emojiToIcon,\n\n    // Rendu conditionnel emoji ou ic√¥ne\n    renderIcon: function (emoji: string, size = 24, className = ''): string {\n        if (!this.isEnabled()) {\n            return `<span class=\"inline-block\">${emoji}</span>`;\n        }\n\n        const iconClass = this.emojiToIcon[emoji];\n        if (iconClass) {\n            return `<i class=\"iconoir-${iconClass} ${className}\" style=\"font-size: ${size}px;\"></i>`;\n        }\n\n        return `<span class=\"inline-block\">${emoji}</span>`;\n    }\n};\n\n// Exposer globalement pour compatibilit√© avec code legacy\nif (typeof window !== 'undefined') {\n    (window as any).IconoirIcon = IconoirIcon;\n    (window as any).LucideIcon = IconoirIcon; // Backward compatibility\n    (window as any).ProfessionalModeSystem = ProfessionalModeSystem;\n}\n\nexport default IconoirIcon;\n","import React, { useEffect } from 'react';\nimport BetaCombinedDashboard from './components/BetaCombinedDashboard';\n\n// Import utils pour exposition globale\nimport { IconoirIcon, ProfessionalModeSystem } from './utils/iconMapping';\n\n// D√©clarations TypeScript pour biblioth√®ques CDN\ndeclare const Chart: any;\ndeclare const Recharts: any;\ndeclare const LightweightCharts: any;\n\nconst App: React.FC = () => {\n    useEffect(() => {\n        // Guard pour √©viter le double-montage\n        if ((window as any).__GOB_DASHBOARD_MOUNTED) {\n            console.warn('‚ö†Ô∏è Dashboard d√©j√† mont√©');\n            return;\n        }\n        (window as any).__GOB_DASHBOARD_MOUNTED = true;\n\n        // Exposer les utils globalement pour compatibilit√©\n        (window as any).IconoirIcon = IconoirIcon;\n        (window as any).LucideIcon = IconoirIcon; // Backward compatibility\n        (window as any).ProfessionalModeSystem = ProfessionalModeSystem;\n\n        console.log('‚úÖ GOB Dashboard mont√© (Vite + React + TypeScript)');\n    }, []);\n\n    // Rendu direct du dashboard - UI friendly, pas de loader\n    return <BetaCombinedDashboard />;\n};\n\nexport default App;\n","import React from 'react'\nimport ReactDOM from 'react-dom/client'\nimport App from './App'\nimport './index.css'\n\n// Les biblioth√®ques globales (Chart.js, Recharts, TradingView) sont\n// charg√©es via CDN dans index.html et disponibles via window\n\nconsole.log('üöÄ Vite + React + TypeScript charg√©');\nconsole.log('üìö V√©rification des biblioth√®ques CDN:');\nconsole.log('  Chart.js:', typeof Chart !== 'undefined' ? '‚úÖ' : '‚ùå');\nconsole.log('  Recharts:', typeof window.Recharts !== 'undefined' ? '‚úÖ' : '‚ùå');\nconsole.log('  LightweightCharts:', typeof window.LightweightCharts !== 'undefined' ? '‚úÖ' : '‚ùå');\n\nconst rootElement = document.getElementById('root');\nif (!rootElement) {\n  throw new Error('Root element not found');\n}\n\nReactDOM.createRoot(rootElement).render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n)\n"],"names":["f","require$$0","k","l","m","n","p","q","c","a","g","b","d","e","h","reactJsxRuntime_production_min","jsxRuntimeModule","client","AdminJSLaiTab","props","emmaConnected","setEmmaConnected","showPromptEditor","setShowPromptEditor","showTemperatureEditor","setShowTemperatureEditor","showLengthEditor","setShowLengthEditor","emmaTemperature","setEmmaTemperature","useState","saved","emmaMaxTokens","setEmmaMaxTokens","emmaPrompt","setEmmaPrompt","useFunctionCalling","setUseFunctionCalling","showEmmaConfig","setShowEmmaConfig","handlePromptChange","newPrompt","handleTemperatureChange","newTemp","handleMaxTokensChange","newTokens","handleFunctionCallingToggle","enabled","resetToOptimizedPrompt","jsxs","jsx","response","data","error","newSettings","type","status","defaultSettings","log","index","newMode","Fragment","display","item","ticker","api","rec","PlusTab","isDarkMode","handleLogout","DansWatchlistTab","tickers","stockData","API_BASE_URL","fetchStockData","showMessage","getCompanyLogo","emmaPopulateWatchlist","initialLoadComplete","watchlistTickers","setWatchlistTickers","newTicker","setNewTicker","watchlistStockData","setWatchlistStockData","watchlistLoading","setWatchlistLoading","showScreener","setShowScreener","loadingScreener","setLoadingScreener","screenerResults","setScreenerResults","screenerFilters","setScreenerFilters","runWatchlistScreener","watchlistStocks","results","stock","quoteRes","profileRes","ratiosRes","quote","profile","ratios","getMetricColor","metric","value","v","formatNumber","num","prefix","suffix","watchlistLoaded","setWatchlistLoaded","useEffect","res","json","loadWatchlistData","savedWatchlist","loadWatchlistDataIndividual","dataObject","appendMode","newData","symbolsQuery","batchResponse","batchData","quotes","fundamentals","tickerUpper","fundamental","prev","addTickerToWatchlist","updatedTickers","err","saveWatchlistToSupabaseAuto","removeTickerFromWatchlist","t","refreshWatchlist","saveSupabaseTimer","action","result","existingWidget","tvSymbols","script","widgetContainer","change","changeColor","changeBgColor","StocksNewsTab","newsData","loading","lastUpdate","setSelectedStock","setActiveTab","fetchNews","refreshAllStocks","loadTickersFromSupabase","fetchLatestNewsForTickers","LucideIcon","stocksViewMode","setStocksViewMode","expandedStock","setExpandedStock","renderMarketBadge","isBull","getNewsCredibilityScore","sourceName","source","s","getCredibilityTier","score","companyNames","idx","reason","recommendation","totalAnalysts","buyScore","sellScore","holdScore","consensus","consensusColor","price","changePercent","isPositive","high","low","volume","finnhubData","peRatio","dividendYield","sector","rating","tickerNews","article","analyzeSentiment","title","description","text","positiveWords","negativeWords","positiveCount","word","negativeCount","sentiment","React","news","newsIndex","newsIconData","credibilityScore","credibilityTier","event","IntelliStocksTab","time","setTime","selectedStock","timeframe","setTimeframe","menuOpen","setMenuOpen","stockDataIntelli","setStockDataIntelli","loadingIntelli","setLoadingIntelli","connected","setConnected","lastUpdateIntelli","setLastUpdateIntelli","showHelp","setShowHelp","violations","setViolations","jslaiConfig","setJslaiConfig","generateMockData","symbol","basePrice","_","i","fetchRealStockData","currentTimeframe","historicalTimeframe","historicalLimit","now","startOfYear","daysSinceStart","quoteResult","profileResult","ratiosResult","newsResult","intradayResult","analystResult","earningsResult","intradayData","analystData","earningsData","fallbackIndicators","totalSections","fallbackSections","productionSections","qualityPercentage","errors","jslaiScore","totalScore","scores","pe","valuationScore","roe","profitabilityScore","roePercent","grossMargin","netMargin","growthScore","avgMargin","de","currentRatio","healthScore","deScore","liquidityScore","priceChange","momentumScore","operatingMargin","moatScore","avgProfitMargin","beta","sectorScore","finalScore","fundamentalScore","overallSentiment","catalysts","risks","debtEquity","confidence","aiData","candle","filteredData","currentYear","currentPrice","dataPoints","pointCount","timeInterval","timeFormat","date","progress","historicalPrice","yearStartPrice","yearProgress","yearsBack","historicalMultiplier","startPrice","trend","volatility","priceVariation","finalPrice","open","close","realData","mockData","container","newViolations","rechartsAvailable","chartJsAvailable","stocks","runScreenerForStocks","stocksList","currentStock","metrics","intraday","insights","historicalRatios","movingAverages","formatTimeAgo","dateString","hours","technicalIndicators","orderFlow","analysisRequest","canvas","ctx","period","key","signalColor","peData","r","labels","roeData","context","deData","marginData","cat","risk","EconomicCalendarTab","activeSubTab","setActiveSubTab","calendarData","setCalendarData","setLoading","setError","isRefreshing","setIsRefreshing","searchQuery","setSearchQuery","filterImpact","setFilterImpact","filterCurrency","setFilterCurrency","filterTicker","setFilterTicker","filterTickerGroup","setFilterTickerGroup","dateRange","setDateRange","filterLargeCapOnly","setFilterLargeCapOnly","largeCapTickers","teamTickers","setTeamTickers","getFallbackData","fetchCalendarData","handleRefresh","getImpactBars","impact","bars","colors","getValueColor","actual","forecast","actualNum","forecastNum","getCurrencyFlag","currency","extractTicker","eventName","match","getEventCategory","sortEvents","events","categoryA","categoryB","timeA","timeB","filteredCalendarData","day","filteredEvents","inTeam","inWatchlist","sortedEvents","availableCurrencies","availableTickers","curr","dayIndex","eventIndex","acc","BetaCombinedDashboard","activeTab","setIsDarkMode","setTickers","setStockData","setNewsData","setLastUpdate","setInitialLoadComplete","message","watchlistRes","tickersFromSupabase","promises","newStockData","tabProps","renderActiveTab","tab","iconMap","emojiToIcon","IconoirIcon","name","className","iconClass","ProfessionalModeSystem","stored","emoji","size","App","rootElement","ReactDOM"],"mappings":"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","x_google_ignoreList":[0,1,2]}